var cp=Object.defineProperty;var hp=(n,t,e)=>t in n?cp(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Aa=(n,t,e)=>(hp(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zl(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Bt={},li=[],fr=()=>{},ed=()=>!1,ra=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Ql=n=>n.startsWith("onUpdate:"),ge=Object.assign,Jl=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},up=Object.prototype.hasOwnProperty,At=(n,t)=>up.call(n,t),ut=Array.isArray,ci=n=>na(n)==="[object Map]",rd=n=>na(n)==="[object Set]",pt=n=>typeof n=="function",ae=n=>typeof n=="string",en=n=>typeof n=="symbol",$t=n=>n!==null&&typeof n=="object",nd=n=>($t(n)||pt(n))&&pt(n.then)&&pt(n.catch),id=Object.prototype.toString,na=n=>id.call(n),dp=n=>na(n).slice(8,-1),sd=n=>na(n)==="[object Object]",tc=n=>ae(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,qi=Zl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ia=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},fp=/-\w/g,er=ia(n=>n.replace(fp,t=>t.slice(1).toUpperCase())),gp=/\B([A-Z])/g,On=ia(n=>n.replace(gp,"-$1").toLowerCase()),sa=ia(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ia=ia(n=>n?`on${sa(n)}`:""),wn=(n,t)=>!Object.is(n,t),mo=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},od=(n,t,e,r=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:r,value:e})},gl=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let th;const oa=()=>th||(th=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bn(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],i=ae(r)?_p(r):bn(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(ae(n)||$t(n))return n}const pp=/;(?![^(]*\))/g,mp=/:([^]+)/,vp=/\/\*[^]*?\*\//g;function _p(n){const t={};return n.replace(vp,"").split(pp).forEach(e=>{if(e){const r=e.split(mp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Be(n){let t="";if(ae(n))t=n;else if(ut(n))for(let e=0;e<n.length;e++){const r=Be(n[e]);r&&(t+=r+" ")}else if($t(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const yp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wp=Zl(yp);function ad(n){return!!n||n===""}const ld=n=>!!(n&&n.__v_isRef===!0),ve=n=>ae(n)?n:n==null?"":ut(n)||$t(n)&&(n.toString===id||!pt(n.toString))?ld(n)?ve(n.value):JSON.stringify(n,cd,2):String(n),cd=(n,t)=>ld(t)?cd(n,t.value):ci(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,i],s)=>(e[Ra(r,s)+" =>"]=i,e),{})}:rd(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Ra(e))}:en(t)?Ra(t):$t(t)&&!ut(t)&&!sd(t)?String(t):t,Ra=(n,t="")=>{var e;return en(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let be;class hd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=be,!t&&be&&(this.index=(be.scopes||(be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=be;try{return be=this,t()}finally{be=e}}}on(){++this._on===1&&(this.prevScope=be,be=this)}off(){this._on>0&&--this._on===0&&(be=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ud(n){return new hd(n)}function dd(){return be}function bp(n,t=!1){be&&be.cleanups.push(n)}let Wt;const La=new WeakSet;class fd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,be&&be.active&&be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,La.has(this)&&(La.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eh(this),md(this);const t=Wt,e=gr;Wt=this,gr=!0;try{return this.fn()}finally{vd(this),Wt=t,gr=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nc(t);this.deps=this.depsTail=void 0,eh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?La.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pl(this)&&this.run()}get dirty(){return pl(this)}}let gd=0,Ki,Zi;function pd(n,t=!1){if(n.flags|=8,t){n.next=Zi,Zi=n;return}n.next=Ki,Ki=n}function ec(){gd++}function rc(){if(--gd>0)return;if(Zi){let t=Zi;for(Zi=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Ki;){let t=Ki;for(Ki=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){n||(n=r)}t=e}}if(n)throw n}function md(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function vd(n){let t,e=n.depsTail,r=e;for(;r;){const i=r.prevDep;r.version===-1?(r===e&&(e=i),nc(r),xp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=t,n.depsTail=e}function pl(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_d(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function _d(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===hs)||(n.globalVersion=hs,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!pl(n))))return;n.flags|=2;const t=n.dep,e=Wt,r=gr;Wt=n,gr=!0;try{md(n);const i=n.fn(n._value);(t.version===0||wn(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{Wt=e,gr=r,vd(n),n.flags&=-3}}function nc(n,t=!1){const{dep:e,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),e.subs===n&&(e.subs=r,!r&&e.computed)){e.computed.flags&=-5;for(let s=e.computed.deps;s;s=s.nextDep)nc(s,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function xp(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let gr=!0;const yd=[];function zr(){yd.push(gr),gr=!1}function $r(){const n=yd.pop();gr=n===void 0?!0:n}function eh(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Wt;Wt=void 0;try{t()}finally{Wt=e}}}let hs=0;class Sp{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ic{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Wt||!gr||Wt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Wt)e=this.activeLink=new Sp(Wt,this),Wt.deps?(e.prevDep=Wt.depsTail,Wt.depsTail.nextDep=e,Wt.depsTail=e):Wt.deps=Wt.depsTail=e,wd(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const r=e.nextDep;r.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=r),e.prevDep=Wt.depsTail,e.nextDep=void 0,Wt.depsTail.nextDep=e,Wt.depsTail=e,Wt.deps===e&&(Wt.deps=r)}return e}trigger(t){this.version++,hs++,this.notify(t)}notify(t){ec();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{rc()}}}function wd(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)wd(r)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const ko=new WeakMap,Nn=Symbol(""),ml=Symbol(""),us=Symbol("");function xe(n,t,e){if(gr&&Wt){let r=ko.get(n);r||ko.set(n,r=new Map);let i=r.get(e);i||(r.set(e,i=new ic),i.map=r,i.key=e),i.track()}}function jr(n,t,e,r,i,s){const o=ko.get(n);if(!o){hs++;return}const a=l=>{l&&l.trigger()};if(ec(),t==="clear")o.forEach(a);else{const l=ut(n),c=l&&tc(e);if(l&&e==="length"){const h=Number(r);o.forEach((u,d)=>{(d==="length"||d===us||!en(d)&&d>=h)&&a(u)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),c&&a(o.get(us)),t){case"add":l?c&&a(o.get("length")):(a(o.get(Nn)),ci(n)&&a(o.get(ml)));break;case"delete":l||(a(o.get(Nn)),ci(n)&&a(o.get(ml)));break;case"set":ci(n)&&a(o.get(Nn));break}}rc()}function Cp(n,t){const e=ko.get(n);return e&&e.get(t)}function Gn(n){const t=Ct(n);return t===n?t:(xe(t,"iterate",us),tr(n)?t:t.map(me))}function aa(n){return xe(n=Ct(n),"iterate",us),n}const Tp={__proto__:null,[Symbol.iterator](){return ja(this,Symbol.iterator,me)},concat(...n){return Gn(this).concat(...n.map(t=>ut(t)?Gn(t):t))},entries(){return ja(this,"entries",n=>(n[1]=me(n[1]),n))},every(n,t){return Pr(this,"every",n,t,void 0,arguments)},filter(n,t){return Pr(this,"filter",n,t,e=>e.map(me),arguments)},find(n,t){return Pr(this,"find",n,t,me,arguments)},findIndex(n,t){return Pr(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Pr(this,"findLast",n,t,me,arguments)},findLastIndex(n,t){return Pr(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Pr(this,"forEach",n,t,void 0,arguments)},includes(...n){return Va(this,"includes",n)},indexOf(...n){return Va(this,"indexOf",n)},join(n){return Gn(this).join(n)},lastIndexOf(...n){return Va(this,"lastIndexOf",n)},map(n,t){return Pr(this,"map",n,t,void 0,arguments)},pop(){return ji(this,"pop")},push(...n){return ji(this,"push",n)},reduce(n,...t){return rh(this,"reduce",n,t)},reduceRight(n,...t){return rh(this,"reduceRight",n,t)},shift(){return ji(this,"shift")},some(n,t){return Pr(this,"some",n,t,void 0,arguments)},splice(...n){return ji(this,"splice",n)},toReversed(){return Gn(this).toReversed()},toSorted(n){return Gn(this).toSorted(n)},toSpliced(...n){return Gn(this).toSpliced(...n)},unshift(...n){return ji(this,"unshift",n)},values(){return ja(this,"values",me)}};function ja(n,t,e){const r=aa(n),i=r[t]();return r!==n&&!tr(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=e(s.value)),s}),i}const Dp=Array.prototype;function Pr(n,t,e,r,i,s){const o=aa(n),a=o!==n&&!tr(n),l=o[t];if(l!==Dp[t]){const u=l.apply(n,s);return a?me(u):u}let c=e;o!==n&&(a?c=function(u,d){return e.call(this,me(u),d,n)}:e.length>2&&(c=function(u,d){return e.call(this,u,d,n)}));const h=l.call(o,c,r);return a&&i?i(h):h}function rh(n,t,e,r){const i=aa(n);let s=e;return i!==n&&(tr(n)?e.length>3&&(s=function(o,a,l){return e.call(this,o,a,l,n)}):s=function(o,a,l){return e.call(this,o,me(a),l,n)}),i[t](s,...r)}function Va(n,t,e){const r=Ct(n);xe(r,"iterate",us);const i=r[t](...e);return(i===-1||i===!1)&&ac(e[0])?(e[0]=Ct(e[0]),r[t](...e)):i}function ji(n,t,e=[]){zr(),ec();const r=Ct(n)[t].apply(n,e);return rc(),$r(),r}const Op=Zl("__proto__,__v_isRef,__isVue"),bd=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(en));function kp(n){en(n)||(n=String(n));const t=Ct(this);return xe(t,"has",n),t.hasOwnProperty(n)}class xd{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return s;if(e==="__v_raw")return r===(i?s?Vp:Dd:s?Td:Cd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=ut(t);if(!i){let l;if(o&&(l=Tp[e]))return l;if(e==="hasOwnProperty")return kp}const a=Reflect.get(t,e,Nt(t)?t:r);return(en(e)?bd.has(e):Op(e))||(i||xe(t,"get",e),s)?a:Nt(a)?o&&tc(e)?a:a.value:$t(a)?i?kd(a):Es(a):a}}class Sd extends xd{constructor(t=!1){super(!1,t)}set(t,e,r,i){let s=t[e];if(!this._isShallow){const l=Cn(s);if(!tr(r)&&!Cn(r)&&(s=Ct(s),r=Ct(r)),!ut(t)&&Nt(s)&&!Nt(r))return l||(s.value=r),!0}const o=ut(t)&&tc(e)?Number(e)<t.length:At(t,e),a=Reflect.set(t,e,r,Nt(t)?t:i);return t===Ct(i)&&(o?wn(r,s)&&jr(t,"set",e,r):jr(t,"add",e,r)),a}deleteProperty(t,e){const r=At(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&r&&jr(t,"delete",e,void 0),i}has(t,e){const r=Reflect.has(t,e);return(!en(e)||!bd.has(e))&&xe(t,"has",e),r}ownKeys(t){return xe(t,"iterate",ut(t)?"length":Nn),Reflect.ownKeys(t)}}class Mp extends xd{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Ep=new Sd,Pp=new Mp,Fp=new Sd(!0);const vl=n=>n,Ls=n=>Reflect.getPrototypeOf(n);function Ap(n,t,e){return function(...r){const i=this.__v_raw,s=Ct(i),o=ci(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),h=e?vl:t?Mo:me;return!t&&xe(s,"iterate",l?ml:Nn),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function js(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Ip(n,t){const e={get(i){const s=this.__v_raw,o=Ct(s),a=Ct(i);n||(wn(i,a)&&xe(o,"get",i),xe(o,"get",a));const{has:l}=Ls(o),c=t?vl:n?Mo:me;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&xe(Ct(i),"iterate",Nn),i.size},has(i){const s=this.__v_raw,o=Ct(s),a=Ct(i);return n||(wn(i,a)&&xe(o,"has",i),xe(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ct(a),c=t?vl:n?Mo:me;return!n&&xe(l,"iterate",Nn),a.forEach((h,u)=>i.call(s,c(h),c(u),o))}};return ge(e,n?{add:js("add"),set:js("set"),delete:js("delete"),clear:js("clear")}:{add(i){!t&&!tr(i)&&!Cn(i)&&(i=Ct(i));const s=Ct(this);return Ls(s).has.call(s,i)||(s.add(i),jr(s,"add",i,i)),this},set(i,s){!t&&!tr(s)&&!Cn(s)&&(s=Ct(s));const o=Ct(this),{has:a,get:l}=Ls(o);let c=a.call(o,i);c||(i=Ct(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?wn(s,h)&&jr(o,"set",i,s):jr(o,"add",i,s),this},delete(i){const s=Ct(this),{has:o,get:a}=Ls(s);let l=o.call(s,i);l||(i=Ct(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&jr(s,"delete",i,void 0),c},clear(){const i=Ct(this),s=i.size!==0,o=i.clear();return s&&jr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Ap(i,n,t)}),e}function sc(n,t){const e=Ip(n,t);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(At(e,i)&&i in r?e:r,i,s)}const Rp={get:sc(!1,!1)},Lp={get:sc(!1,!0)},jp={get:sc(!0,!1)};const Cd=new WeakMap,Td=new WeakMap,Dd=new WeakMap,Vp=new WeakMap;function Bp(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Np(n){return n.__v_skip||!Object.isExtensible(n)?0:Bp(dp(n))}function Es(n){return Cn(n)?n:oc(n,!1,Ep,Rp,Cd)}function Od(n){return oc(n,!1,Fp,Lp,Td)}function kd(n){return oc(n,!0,Pp,jp,Dd)}function oc(n,t,e,r,i){if(!$t(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=Np(n);if(s===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,s===2?r:e);return i.set(n,a),a}function Wr(n){return Cn(n)?Wr(n.__v_raw):!!(n&&n.__v_isReactive)}function Cn(n){return!!(n&&n.__v_isReadonly)}function tr(n){return!!(n&&n.__v_isShallow)}function ac(n){return n?!!n.__v_raw:!1}function Ct(n){const t=n&&n.__v_raw;return t?Ct(t):n}function lc(n){return!At(n,"__v_skip")&&Object.isExtensible(n)&&od(n,"__v_skip",!0),n}const me=n=>$t(n)?Es(n):n,Mo=n=>$t(n)?kd(n):n;function Nt(n){return n?n.__v_isRef===!0:!1}function Dt(n){return Md(n,!1)}function Up(n){return Md(n,!0)}function Md(n,t){return Nt(n)?n:new Hp(n,t)}class Hp{constructor(t,e){this.dep=new ic,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Ct(t),this._value=e?t:me(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,r=this.__v_isShallow||tr(t)||Cn(t);t=r?t:Ct(t),wn(t,e)&&(this._rawValue=t,this._value=r?t:me(t),this.dep.trigger())}}function ne(n){return Nt(n)?n.value:n}const Wp={get:(n,t,e)=>t==="__v_raw"?n:ne(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const i=n[t];return Nt(i)&&!Nt(e)?(i.value=e,!0):Reflect.set(n,t,e,r)}};function Ed(n){return Wr(n)?n:new Proxy(n,Wp)}function zi(n){const t=ut(n)?new Array(n.length):{};for(const e in n)t[e]=Pd(n,e);return t}class Yp{constructor(t,e,r){this._object=t,this._key=e,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Cp(Ct(this._object),this._key)}}class Xp{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function xn(n,t,e){return Nt(n)?n:pt(n)?new Xp(n):$t(n)&&arguments.length>1?Pd(n,t,e):Dt(n)}function Pd(n,t,e){const r=n[t];return Nt(r)?r:new Yp(n,t,e)}class zp{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new ic(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Wt!==this)return pd(this,!0),!0}get value(){const t=this.dep.track();return _d(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function $p(n,t,e=!1){let r,i;return pt(n)?r=n:(r=n.get,i=n.set),new zp(r,i,e)}const Vs={},Eo=new WeakMap;let Pn;function Gp(n,t=!1,e=Pn){if(e){let r=Eo.get(e);r||Eo.set(e,r=[]),r.push(n)}}function qp(n,t,e=Bt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=e,c=S=>i?S:tr(S)||i===!1||i===0?Vr(S,1):Vr(S);let h,u,d,f,g=!1,p=!1;if(Nt(n)?(u=()=>n.value,g=tr(n)):Wr(n)?(u=()=>c(n),g=!0):ut(n)?(p=!0,g=n.some(S=>Wr(S)||tr(S)),u=()=>n.map(S=>{if(Nt(S))return S.value;if(Wr(S))return c(S);if(pt(S))return l?l(S,2):S()})):pt(n)?t?u=l?()=>l(n,2):n:u=()=>{if(d){zr();try{d()}finally{$r()}}const S=Pn;Pn=h;try{return l?l(n,3,[f]):n(f)}finally{Pn=S}}:u=fr,t&&i){const S=u,k=i===!0?1/0:i;u=()=>Vr(S(),k)}const _=dd(),w=()=>{h.stop(),_&&_.active&&Jl(_.effects,h)};if(s&&t){const S=t;t=(...k)=>{S(...k),w()}}let y=p?new Array(n.length).fill(Vs):Vs;const C=S=>{if(!(!(h.flags&1)||!h.dirty&&!S))if(t){const k=h.run();if(i||g||(p?k.some((A,N)=>wn(A,y[N])):wn(k,y))){d&&d();const A=Pn;Pn=h;try{const N=[k,y===Vs?void 0:p&&y[0]===Vs?[]:y,f];y=k,l?l(t,3,N):t(...N)}finally{Pn=A}}}else h.run()};return a&&a(C),h=new fd(u),h.scheduler=o?()=>o(C,!1):C,f=S=>Gp(S,!1,h),d=h.onStop=()=>{const S=Eo.get(h);if(S){if(l)l(S,4);else for(const k of S)k();Eo.delete(h)}},t?r?C(!0):y=h.run():o?o(C.bind(null,!0),!0):h.run(),w.pause=h.pause.bind(h),w.resume=h.resume.bind(h),w.stop=w,w}function Vr(n,t=1/0,e){if(t<=0||!$t(n)||n.__v_skip||(e=e||new Map,(e.get(n)||0)>=t))return n;if(e.set(n,t),t--,Nt(n))Vr(n.value,t,e);else if(ut(n))for(let r=0;r<n.length;r++)Vr(n[r],t,e);else if(rd(n)||ci(n))n.forEach(r=>{Vr(r,t,e)});else if(sd(n)){for(const r in n)Vr(n[r],t,e);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Vr(n[r],t,e)}return n}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ps(n,t,e,r){try{return r?n(...r):n()}catch(i){la(i,t,e)}}function Or(n,t,e,r){if(pt(n)){const i=Ps(n,t,e,r);return i&&nd(i)&&i.catch(s=>{la(s,t,e)}),i}if(ut(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Or(n[s],t,e,r));return i}}function la(n,t,e,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Bt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const h=a.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](n,l,c)===!1)return}a=a.parent}if(s){zr(),Ps(s,null,10,[n,l,c]),$r();return}}Kp(n,e,i,r,o)}function Kp(n,t,e,r=!0,i=!1){if(i)throw n;console.error(n)}const Me=[];let yr=-1;const hi=[];let fn=null,ti=0;const Fd=Promise.resolve();let Po=null;function ca(n){const t=Po||Fd;return n?t.then(this?n.bind(this):n):t}function Zp(n){let t=yr+1,e=Me.length;for(;t<e;){const r=t+e>>>1,i=Me[r],s=ds(i);s<n||s===n&&i.flags&2?t=r+1:e=r}return t}function cc(n){if(!(n.flags&1)){const t=ds(n),e=Me[Me.length-1];!e||!(n.flags&2)&&t>=ds(e)?Me.push(n):Me.splice(Zp(t),0,n),n.flags|=1,Ad()}}function Ad(){Po||(Po=Fd.then(Rd))}function Qp(n){ut(n)?hi.push(...n):fn&&n.id===-1?fn.splice(ti+1,0,n):n.flags&1||(hi.push(n),n.flags|=1),Ad()}function nh(n,t,e=yr+1){for(;e<Me.length;e++){const r=Me[e];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Me.splice(e,1),e--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Id(n){if(hi.length){const t=[...new Set(hi)].sort((e,r)=>ds(e)-ds(r));if(hi.length=0,fn){fn.push(...t);return}for(fn=t,ti=0;ti<fn.length;ti++){const e=fn[ti];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}fn=null,ti=0}}const ds=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Rd(n){const t=fr;try{for(yr=0;yr<Me.length;yr++){const e=Me[yr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ps(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yr<Me.length;yr++){const e=Me[yr];e&&(e.flags&=-2)}yr=-1,Me.length=0,Id(),Po=null,(Me.length||hi.length)&&Rd()}}let _e=null,ha=null;function Fo(n){const t=_e;return _e=n,ha=n&&n.type.__scopeId||null,t}function Jp(n){ha=n}function tm(){ha=null}function Gr(n,t=_e,e){if(!t||n._n)return n;const r=(...i)=>{r._d&&Ro(-1);const s=Fo(t);let o;try{o=n(...i)}finally{Fo(s),r._d&&Ro(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fn(n,t){if(_e===null)return n;const e=ga(_e),r=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,l=Bt]=t[i];s&&(pt(s)&&(s={mounted:s,updated:s}),s.deep&&Vr(o),r.push({dir:s,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Mn(n,t,e,r){const i=n.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(zr(),Or(l,e,8,[n.el,a,n,t]),$r())}}const em=Symbol("_vte"),rm=n=>n.__isTeleport,nm=Symbol("_leaveCb");function hc(n,t){n.shapeFlag&6&&n.component?(n.transition=t,hc(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function pe(n,t){return pt(n)?(()=>ge({name:n.name},t,{setup:n}))():n}function Ld(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Ao=new WeakMap;function Qi(n,t,e,r,i=!1){if(ut(n)){n.forEach((g,p)=>Qi(g,t&&(ut(t)?t[p]:t),e,r,i));return}if(ui(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Qi(n,t,e,r.component.subTree);return}const s=r.shapeFlag&4?ga(r.component):r.el,o=i?null:s,{i:a,r:l}=n,c=t&&t.r,h=a.refs===Bt?a.refs={}:a.refs,u=a.setupState,d=Ct(u),f=u===Bt?ed:g=>At(d,g);if(c!=null&&c!==l){if(ih(t),ae(c))h[c]=null,f(c)&&(u[c]=null);else if(Nt(c)){c.value=null;const g=t;g.k&&(h[g.k]=null)}}if(pt(l))Ps(l,a,12,[o,h]);else{const g=ae(l),p=Nt(l);if(g||p){const _=()=>{if(n.f){const w=g?f(l)?u[l]:h[l]:l.value;if(i)ut(w)&&Jl(w,s);else if(ut(w))w.includes(s)||w.push(s);else if(g)h[l]=[s],f(l)&&(u[l]=h[l]);else{const y=[s];l.value=y,n.k&&(h[n.k]=y)}}else g?(h[l]=o,f(l)&&(u[l]=o)):p&&(l.value=o,n.k&&(h[n.k]=o))};if(o){const w=()=>{_(),Ao.delete(n)};w.id=-1,Ao.set(n,w),$e(w,e)}else ih(n),_()}}}function ih(n){const t=Ao.get(n);t&&(t.flags|=8,Ao.delete(n))}oa().requestIdleCallback;oa().cancelIdleCallback;const ui=n=>!!n.type.__asyncLoader,jd=n=>n.type.__isKeepAlive;function im(n,t){Vd(n,"a",t)}function sm(n,t){Vd(n,"da",t)}function Vd(n,t,e=Se){const r=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(ua(t,r,e),e){let i=e.parent;for(;i&&i.parent;)jd(i.parent.vnode)&&om(r,t,e,i),i=i.parent}}function om(n,t,e,r){const i=ua(t,n,r,!0);Fs(()=>{Jl(r[t],i)},e)}function ua(n,t,e=Se,r=!1){if(e){const i=e[n]||(e[n]=[]),s=t.__weh||(t.__weh=(...o)=>{zr();const a=As(e),l=Or(t,e,n,o);return a(),$r(),l});return r?i.unshift(s):i.push(s),s}}const rn=n=>(t,e=Se)=>{(!ps||n==="sp")&&ua(n,(...r)=>t(...r),e)},am=rn("bm"),nn=rn("m"),lm=rn("bu"),cm=rn("u"),hm=rn("bum"),Fs=rn("um"),um=rn("sp"),dm=rn("rtg"),fm=rn("rtc");function gm(n,t=Se){ua("ec",n,t)}const uc="components";function Je(n,t){return Ud(uc,n,!0,t)||n}const Bd=Symbol.for("v-ndc");function Nd(n){return ae(n)?Ud(uc,n,!1)||n:n||Bd}function Ud(n,t,e=!0,r=!1){const i=_e||Se;if(i){const s=i.type;if(n===uc){const a=e0(s,!1);if(a&&(a===t||a===er(t)||a===sa(er(t))))return s}const o=sh(i[n]||s[n],t)||sh(i.appContext[n],t);return!o&&r?s:o}}function sh(n,t){return n&&(n[t]||n[er(t)]||n[sa(er(t))])}function Wn(n,t,e,r){let i;const s=e&&e[r],o=ut(n);if(o||ae(n)){const a=o&&Wr(n);let l=!1,c=!1;a&&(l=!tr(n),c=Cn(n),n=aa(n)),i=new Array(n.length);for(let h=0,u=n.length;h<u;h++)i[h]=t(l?c?Mo(me(n[h])):me(n[h]):n[h],h,void 0,s&&s[h])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if($t(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>t(a,l,void 0,s&&s[l]));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=t(n[h],h,l,s&&s[l])}}else i=[];return e&&(e[r]=i),i}function mn(n,t,e={},r,i){if(_e.ce||_e.parent&&ui(_e.parent)&&_e.parent.ce)return t!=="default"&&(e.name=t),Q(),rr(Jt,null,[Tt("slot",e,r&&r())],64);let s=n[t];s&&s._c&&(s._d=!1),Q();const o=s&&Hd(s(e)),a=e.key||o&&o.key,l=rr(Jt,{key:(a&&!en(a)?a:`_${t}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Hd(n){return n.some(t=>gs(t)?!(t.type===qr||t.type===Jt&&!Hd(t.children)):!0)?n:null}const _l=n=>n?lf(n)?ga(n):_l(n.parent):null,Ji=ge(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>_l(n.parent),$root:n=>_l(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>dc(n),$forceUpdate:n=>n.f||(n.f=()=>{cc(n.update)}),$nextTick:n=>n.n||(n.n=ca.bind(n.proxy)),$watch:n=>Lm.bind(n)}),Ba=(n,t)=>n!==Bt&&!n.__isScriptSetup&&At(n,t),pm={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return i[t];case 4:return e[t];case 3:return s[t]}else{if(Ba(r,t))return o[t]=1,r[t];if(i!==Bt&&At(i,t))return o[t]=2,i[t];if((c=n.propsOptions[0])&&At(c,t))return o[t]=3,s[t];if(e!==Bt&&At(e,t))return o[t]=4,e[t];yl&&(o[t]=0)}}const h=Ji[t];let u,d;if(h)return t==="$attrs"&&xe(n.attrs,"get",""),h(n);if((u=a.__cssModules)&&(u=u[t]))return u;if(e!==Bt&&At(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,At(d,t))return d[t]},set({_:n},t,e){const{data:r,setupState:i,ctx:s}=n;return Ba(i,t)?(i[t]=e,!0):r!==Bt&&At(r,t)?(r[t]=e,!0):At(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(s[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:r,appContext:i,propsOptions:s,type:o}},a){let l,c;return!!(e[a]||n!==Bt&&a[0]!=="$"&&At(n,a)||Ba(t,a)||(l=s[0])&&At(l,a)||At(r,a)||At(Ji,a)||At(i.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:At(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function oh(n){return ut(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let yl=!0;function mm(n){const t=dc(n),e=n.proxy,r=n.ctx;yl=!1,t.beforeCreate&&ah(t.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:_,beforeDestroy:w,beforeUnmount:y,destroyed:C,unmounted:S,render:k,renderTracked:A,renderTriggered:N,errorCaptured:R,serverPrefetch:W,expose:ot,inheritAttrs:mt,components:ht,directives:at,filters:dt}=t;if(c&&vm(c,r,null),o)for(const q in o){const et=o[q];pt(et)&&(r[q]=et.bind(e))}if(i){const q=i.call(e,e);$t(q)&&(n.data=Es(q))}if(yl=!0,s)for(const q in s){const et=s[q],Xt=pt(et)?et.bind(e,e):pt(et.get)?et.get.bind(e,e):fr,Ut=!pt(et)&&pt(et.set)?et.set.bind(e):fr,ee=Z({get:Xt,set:Ut});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>ee.value,set:Et=>ee.value=Et})}if(a)for(const q in a)Wd(a[q],r,e,q);if(l){const q=pt(l)?l.call(e):l;Reflect.ownKeys(q).forEach(et=>{vo(et,q[et])})}h&&ah(h,n,"c");function nt(q,et){ut(et)?et.forEach(Xt=>q(Xt.bind(e))):et&&q(et.bind(e))}if(nt(am,u),nt(nn,d),nt(lm,f),nt(cm,g),nt(im,p),nt(sm,_),nt(gm,R),nt(fm,A),nt(dm,N),nt(hm,y),nt(Fs,S),nt(um,W),ut(ot))if(ot.length){const q=n.exposed||(n.exposed={});ot.forEach(et=>{Object.defineProperty(q,et,{get:()=>e[et],set:Xt=>e[et]=Xt,enumerable:!0})})}else n.exposed||(n.exposed={});k&&n.render===fr&&(n.render=k),mt!=null&&(n.inheritAttrs=mt),ht&&(n.components=ht),at&&(n.directives=at),W&&Ld(n)}function vm(n,t,e=fr){ut(n)&&(n=wl(n));for(const r in n){const i=n[r];let s;$t(i)?"default"in i?s=Tr(i.from||r,i.default,!0):s=Tr(i.from||r):s=Tr(i),Nt(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function ah(n,t,e){Or(ut(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,e)}function Wd(n,t,e,r){let i=r.includes(".")?ef(e,r):()=>e[r];if(ae(n)){const s=t[n];pt(s)&&Dr(i,s)}else if(pt(n))Dr(i,n.bind(e));else if($t(n))if(ut(n))n.forEach(s=>Wd(s,t,e,r));else{const s=pt(n.handler)?n.handler.bind(e):t[n.handler];pt(s)&&Dr(i,s,n)}}function dc(n){const t=n.type,{mixins:e,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!e&&!r?l=t:(l={},i.length&&i.forEach(c=>Io(l,c,o,!0)),Io(l,t,o)),$t(t)&&s.set(t,l),l}function Io(n,t,e,r=!1){const{mixins:i,extends:s}=t;s&&Io(n,s,e,!0),i&&i.forEach(o=>Io(n,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const a=_m[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const _m={data:lh,props:ch,emits:ch,methods:$i,computed:$i,beforeCreate:De,created:De,beforeMount:De,mounted:De,beforeUpdate:De,updated:De,beforeDestroy:De,beforeUnmount:De,destroyed:De,unmounted:De,activated:De,deactivated:De,errorCaptured:De,serverPrefetch:De,components:$i,directives:$i,watch:wm,provide:lh,inject:ym};function lh(n,t){return t?n?function(){return ge(pt(n)?n.call(this,this):n,pt(t)?t.call(this,this):t)}:t:n}function ym(n,t){return $i(wl(n),wl(t))}function wl(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function De(n,t){return n?[...new Set([].concat(n,t))]:t}function $i(n,t){return n?ge(Object.create(null),n,t):t}function ch(n,t){return n?ut(n)&&ut(t)?[...new Set([...n,...t])]:ge(Object.create(null),oh(n),oh(t??{})):t}function wm(n,t){if(!n)return t;if(!t)return n;const e=ge(Object.create(null),n);for(const r in t)e[r]=De(n[r],t[r]);return e}function Yd(){return{app:null,config:{isNativeTag:ed,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bm=0;function xm(n,t){return function(r,i=null){pt(r)||(r=ge({},r)),i!=null&&!$t(i)&&(i=null);const s=Yd(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:bm++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:n0,get config(){return s.config},set config(h){},use(h,...u){return o.has(h)||(h&&pt(h.install)?(o.add(h),h.install(c,...u)):pt(h)&&(o.add(h),h(c,...u))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,u){return u?(s.components[h]=u,c):s.components[h]},directive(h,u){return u?(s.directives[h]=u,c):s.directives[h]},mount(h,u,d){if(!l){const f=c._ceVNode||Tt(r,i);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),u&&t?t(f,h):n(f,h,d),l=!0,c._container=h,h.__vue_app__=c,ga(f.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Or(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(h,u){return s.provides[h]=u,c},runWithContext(h){const u=Un;Un=c;try{return h()}finally{Un=u}}};return c}}let Un=null;function vo(n,t){if(Se){let e=Se.provides;const r=Se.parent&&Se.parent.provides;r===e&&(e=Se.provides=Object.create(r)),e[n]=t}}function Tr(n,t,e=!1){const r=af();if(r||Un){let i=Un?Un._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&pt(t)?t.call(r&&r.proxy):t}}function Sm(){return!!(af()||Un)}const Xd={},zd=()=>Object.create(Xd),$d=n=>Object.getPrototypeOf(n)===Xd;function Cm(n,t,e,r=!1){const i={},s=zd();n.propsDefaults=Object.create(null),Gd(n,t,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=r?i:Od(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function Tm(n,t,e,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ct(i),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if(da(n.emitsOptions,d))continue;const f=t[d];if(l)if(At(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=er(d);i[g]=bl(l,a,g,f,n,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{Gd(n,t,i,s)&&(c=!0);let h;for(const u in a)(!t||!At(t,u)&&((h=On(u))===u||!At(t,h)))&&(l?e&&(e[u]!==void 0||e[h]!==void 0)&&(i[u]=bl(l,a,u,void 0,n,!0)):delete i[u]);if(s!==a)for(const u in s)(!t||!At(t,u))&&(delete s[u],c=!0)}c&&jr(n.attrs,"set","")}function Gd(n,t,e,r){const[i,s]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(qi(l))continue;const c=t[l];let h;i&&At(i,h=er(l))?!s||!s.includes(h)?e[h]=c:(a||(a={}))[h]=c:da(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ct(e),c=a||Bt;for(let h=0;h<s.length;h++){const u=s[h];e[u]=bl(i,l,u,c[u],n,!At(c,u))}}return o}function bl(n,t,e,r,i,s){const o=n[e];if(o!=null){const a=At(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&pt(l)){const{propsDefaults:c}=i;if(e in c)r=c[e];else{const h=As(i);r=c[e]=l.call(null,t),h()}}else r=l;i.ce&&i.ce._setProp(e,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===On(e))&&(r=!0))}return r}const Dm=new WeakMap;function qd(n,t,e=!1){const r=e?Dm:t.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!pt(n)){const h=u=>{l=!0;const[d,f]=qd(u,t,!0);ge(o,d),f&&a.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!l)return $t(n)&&r.set(n,li),li;if(ut(s))for(let h=0;h<s.length;h++){const u=er(s[h]);hh(u)&&(o[u]=Bt)}else if(s)for(const h in s){const u=er(h);if(hh(u)){const d=s[h],f=o[u]=ut(d)||pt(d)?{type:d}:ge({},d),g=f.type;let p=!1,_=!0;if(ut(g))for(let w=0;w<g.length;++w){const y=g[w],C=pt(y)&&y.name;if(C==="Boolean"){p=!0;break}else C==="String"&&(_=!1)}else p=pt(g)&&g.name==="Boolean";f[0]=p,f[1]=_,(p||At(f,"default"))&&a.push(u)}}const c=[o,a];return $t(n)&&r.set(n,c),c}function hh(n){return n[0]!=="$"&&!qi(n)}const fc=n=>n==="_"||n==="_ctx"||n==="$stable",gc=n=>ut(n)?n.map(wr):[wr(n)],Om=(n,t,e)=>{if(t._n)return t;const r=Gr((...i)=>gc(t(...i)),e);return r._c=!1,r},Kd=(n,t,e)=>{const r=n._ctx;for(const i in n){if(fc(i))continue;const s=n[i];if(pt(s))t[i]=Om(i,s,r);else if(s!=null){const o=gc(s);t[i]=()=>o}}},Zd=(n,t)=>{const e=gc(t);n.slots.default=()=>e},Qd=(n,t,e)=>{for(const r in t)(e||!fc(r))&&(n[r]=t[r])},km=(n,t,e)=>{const r=n.slots=zd();if(n.vnode.shapeFlag&32){const i=t._;i?(Qd(r,t,e),e&&od(r,"_",i,!0)):Kd(t,r)}else t&&Zd(n,t)},Mm=(n,t,e)=>{const{vnode:r,slots:i}=n;let s=!0,o=Bt;if(r.shapeFlag&32){const a=t._;a?e&&a===1?s=!1:Qd(i,t,e):(s=!t.$stable,Kd(t,i)),o=t}else t&&(Zd(n,t),o={default:1});if(s)for(const a in i)!fc(a)&&o[a]==null&&delete i[a]},$e=Ym;function Em(n){return Pm(n)}function Pm(n,t){const e=oa();e.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=fr,insertStaticContent:g}=n,p=(m,v,D,L=null,P=null,j=null,z=void 0,Y=null,H=!!v.dynamicChildren)=>{if(m===v)return;m&&!Vi(m,v)&&(L=E(m),Et(m,P,j,!0),m=null),v.patchFlag===-2&&(H=!1,v.dynamicChildren=null);const{type:U,ref:ct,shapeFlag:K}=v;switch(U){case fa:_(m,v,D,L);break;case qr:w(m,v,D,L);break;case Wa:m==null&&y(v,D,L,z);break;case Jt:ht(m,v,D,L,P,j,z,Y,H);break;default:K&1?k(m,v,D,L,P,j,z,Y,H):K&6?at(m,v,D,L,P,j,z,Y,H):(K&64||K&128)&&U.process(m,v,D,L,P,j,z,Y,H,B)}ct!=null&&P?Qi(ct,m&&m.ref,j,v||m,!v):ct==null&&m&&m.ref!=null&&Qi(m.ref,null,j,m,!0)},_=(m,v,D,L)=>{if(m==null)r(v.el=a(v.children),D,L);else{const P=v.el=m.el;v.children!==m.children&&c(P,v.children)}},w=(m,v,D,L)=>{m==null?r(v.el=l(v.children||""),D,L):v.el=m.el},y=(m,v,D,L)=>{[m.el,m.anchor]=g(m.children,v,D,L,m.el,m.anchor)},C=({el:m,anchor:v},D,L)=>{let P;for(;m&&m!==v;)P=d(m),r(m,D,L),m=P;r(v,D,L)},S=({el:m,anchor:v})=>{let D;for(;m&&m!==v;)D=d(m),i(m),m=D;i(v)},k=(m,v,D,L,P,j,z,Y,H)=>{v.type==="svg"?z="svg":v.type==="math"&&(z="mathml"),m==null?A(v,D,L,P,j,z,Y,H):W(m,v,P,j,z,Y,H)},A=(m,v,D,L,P,j,z,Y)=>{let H,U;const{props:ct,shapeFlag:K,transition:it,dirs:gt}=m;if(H=m.el=o(m.type,j,ct&&ct.is,ct),K&8?h(H,m.children):K&16&&R(m.children,H,null,L,P,Na(m,j),z,Y),gt&&Mn(m,null,L,"created"),N(H,m,m.scopeId,z,L),ct){for(const Ht in ct)Ht!=="value"&&!qi(Ht)&&s(H,Ht,null,ct[Ht],j,L);"value"in ct&&s(H,"value",null,ct.value,j),(U=ct.onVnodeBeforeMount)&&_r(U,L,m)}gt&&Mn(m,null,L,"beforeMount");const St=Fm(P,it);St&&it.beforeEnter(H),r(H,v,D),((U=ct&&ct.onVnodeMounted)||St||gt)&&$e(()=>{U&&_r(U,L,m),St&&it.enter(H),gt&&Mn(m,null,L,"mounted")},P)},N=(m,v,D,L,P)=>{if(D&&f(m,D),L)for(let j=0;j<L.length;j++)f(m,L[j]);if(P){let j=P.subTree;if(v===j||nf(j.type)&&(j.ssContent===v||j.ssFallback===v)){const z=P.vnode;N(m,z,z.scopeId,z.slotScopeIds,P.parent)}}},R=(m,v,D,L,P,j,z,Y,H=0)=>{for(let U=H;U<m.length;U++){const ct=m[U]=Y?gn(m[U]):wr(m[U]);p(null,ct,v,D,L,P,j,z,Y)}},W=(m,v,D,L,P,j,z)=>{const Y=v.el=m.el;let{patchFlag:H,dynamicChildren:U,dirs:ct}=v;H|=m.patchFlag&16;const K=m.props||Bt,it=v.props||Bt;let gt;if(D&&En(D,!1),(gt=it.onVnodeBeforeUpdate)&&_r(gt,D,v,m),ct&&Mn(v,m,D,"beforeUpdate"),D&&En(D,!0),(K.innerHTML&&it.innerHTML==null||K.textContent&&it.textContent==null)&&h(Y,""),U?ot(m.dynamicChildren,U,Y,D,L,Na(v,P),j):z||et(m,v,Y,null,D,L,Na(v,P),j,!1),H>0){if(H&16)mt(Y,K,it,D,P);else if(H&2&&K.class!==it.class&&s(Y,"class",null,it.class,P),H&4&&s(Y,"style",K.style,it.style,P),H&8){const St=v.dynamicProps;for(let Ht=0;Ht<St.length;Ht++){const Rt=St[Ht],Ie=K[Rt],we=it[Rt];(we!==Ie||Rt==="value")&&s(Y,Rt,Ie,we,P,D)}}H&1&&m.children!==v.children&&h(Y,v.children)}else!z&&U==null&&mt(Y,K,it,D,P);((gt=it.onVnodeUpdated)||ct)&&$e(()=>{gt&&_r(gt,D,v,m),ct&&Mn(v,m,D,"updated")},L)},ot=(m,v,D,L,P,j,z)=>{for(let Y=0;Y<v.length;Y++){const H=m[Y],U=v[Y],ct=H.el&&(H.type===Jt||!Vi(H,U)||H.shapeFlag&198)?u(H.el):D;p(H,U,ct,null,L,P,j,z,!0)}},mt=(m,v,D,L,P)=>{if(v!==D){if(v!==Bt)for(const j in v)!qi(j)&&!(j in D)&&s(m,j,v[j],null,P,L);for(const j in D){if(qi(j))continue;const z=D[j],Y=v[j];z!==Y&&j!=="value"&&s(m,j,Y,z,P,L)}"value"in D&&s(m,"value",v.value,D.value,P)}},ht=(m,v,D,L,P,j,z,Y,H)=>{const U=v.el=m?m.el:a(""),ct=v.anchor=m?m.anchor:a("");let{patchFlag:K,dynamicChildren:it,slotScopeIds:gt}=v;gt&&(Y=Y?Y.concat(gt):gt),m==null?(r(U,D,L),r(ct,D,L),R(v.children||[],D,ct,P,j,z,Y,H)):K>0&&K&64&&it&&m.dynamicChildren?(ot(m.dynamicChildren,it,D,P,j,z,Y),(v.key!=null||P&&v===P.subTree)&&Jd(m,v,!0)):et(m,v,D,ct,P,j,z,Y,H)},at=(m,v,D,L,P,j,z,Y,H)=>{v.slotScopeIds=Y,m==null?v.shapeFlag&512?P.ctx.activate(v,D,L,z,H):dt(v,D,L,P,j,z,H):lt(m,v,H)},dt=(m,v,D,L,P,j,z)=>{const Y=m.component=Km(m,L,P);if(jd(m)&&(Y.ctx.renderer=B),Zm(Y,!1,z),Y.asyncDep){if(P&&P.registerDep(Y,nt,z),!m.el){const H=Y.subTree=Tt(qr);w(null,H,v,D),m.placeholder=H.el}}else nt(Y,m,v,D,P,j,z)},lt=(m,v,D)=>{const L=v.component=m.component;if(Hm(m,v,D))if(L.asyncDep&&!L.asyncResolved){q(L,v,D);return}else L.next=v,L.update();else v.el=m.el,L.vnode=v},nt=(m,v,D,L,P,j,z)=>{const Y=()=>{if(m.isMounted){let{next:K,bu:it,u:gt,parent:St,vnode:Ht}=m;{const Ye=tf(m);if(Ye){K&&(K.el=Ht.el,q(m,K,z)),Ye.asyncDep.then(()=>{m.isUnmounted||Y()});return}}let Rt=K,Ie;En(m,!1),K?(K.el=Ht.el,q(m,K,z)):K=Ht,it&&mo(it),(Ie=K.props&&K.props.onVnodeBeforeUpdate)&&_r(Ie,St,K,Ht),En(m,!0);const we=Ha(m),sr=m.subTree;m.subTree=we,p(sr,we,u(sr.el),E(sr),m,P,j),K.el=we.el,Rt===null&&Wm(m,we.el),gt&&$e(gt,P),(Ie=K.props&&K.props.onVnodeUpdated)&&$e(()=>_r(Ie,St,K,Ht),P)}else{let K;const{el:it,props:gt}=v,{bm:St,m:Ht,parent:Rt,root:Ie,type:we}=m,sr=ui(v);if(En(m,!1),St&&mo(St),!sr&&(K=gt&&gt.onVnodeBeforeMount)&&_r(K,Rt,v),En(m,!0),it&&_t){const Ye=()=>{m.subTree=Ha(m),_t(it,m.subTree,m,P,null)};sr&&we.__asyncHydrate?we.__asyncHydrate(it,m,Ye):Ye()}else{Ie.ce&&Ie.ce._def.shadowRoot!==!1&&Ie.ce._injectChildStyle(we);const Ye=m.subTree=Ha(m);p(null,Ye,D,L,m,P,j),v.el=Ye.el}if(Ht&&$e(Ht,P),!sr&&(K=gt&&gt.onVnodeMounted)){const Ye=v;$e(()=>_r(K,Rt,Ye),P)}(v.shapeFlag&256||Rt&&ui(Rt.vnode)&&Rt.vnode.shapeFlag&256)&&m.a&&$e(m.a,P),m.isMounted=!0,v=D=L=null}};m.scope.on();const H=m.effect=new fd(Y);m.scope.off();const U=m.update=H.run.bind(H),ct=m.job=H.runIfDirty.bind(H);ct.i=m,ct.id=m.uid,H.scheduler=()=>cc(ct),En(m,!0),U()},q=(m,v,D)=>{v.component=m;const L=m.vnode.props;m.vnode=v,m.next=null,Tm(m,v.props,L,D),Mm(m,v.children,D),zr(),nh(m),$r()},et=(m,v,D,L,P,j,z,Y,H=!1)=>{const U=m&&m.children,ct=m?m.shapeFlag:0,K=v.children,{patchFlag:it,shapeFlag:gt}=v;if(it>0){if(it&128){Ut(U,K,D,L,P,j,z,Y,H);return}else if(it&256){Xt(U,K,D,L,P,j,z,Y,H);return}}gt&8?(ct&16&&zt(U,P,j),K!==U&&h(D,K)):ct&16?gt&16?Ut(U,K,D,L,P,j,z,Y,H):zt(U,P,j,!0):(ct&8&&h(D,""),gt&16&&R(K,D,L,P,j,z,Y,H))},Xt=(m,v,D,L,P,j,z,Y,H)=>{m=m||li,v=v||li;const U=m.length,ct=v.length,K=Math.min(U,ct);let it;for(it=0;it<K;it++){const gt=v[it]=H?gn(v[it]):wr(v[it]);p(m[it],gt,D,null,P,j,z,Y,H)}U>ct?zt(m,P,j,!0,!1,K):R(v,D,L,P,j,z,Y,H,K)},Ut=(m,v,D,L,P,j,z,Y,H)=>{let U=0;const ct=v.length;let K=m.length-1,it=ct-1;for(;U<=K&&U<=it;){const gt=m[U],St=v[U]=H?gn(v[U]):wr(v[U]);if(Vi(gt,St))p(gt,St,D,null,P,j,z,Y,H);else break;U++}for(;U<=K&&U<=it;){const gt=m[K],St=v[it]=H?gn(v[it]):wr(v[it]);if(Vi(gt,St))p(gt,St,D,null,P,j,z,Y,H);else break;K--,it--}if(U>K){if(U<=it){const gt=it+1,St=gt<ct?v[gt].el:L;for(;U<=it;)p(null,v[U]=H?gn(v[U]):wr(v[U]),D,St,P,j,z,Y,H),U++}}else if(U>it)for(;U<=K;)Et(m[U],P,j,!0),U++;else{const gt=U,St=U,Ht=new Map;for(U=St;U<=it;U++){const Xe=v[U]=H?gn(v[U]):wr(v[U]);Xe.key!=null&&Ht.set(Xe.key,U)}let Rt,Ie=0;const we=it-St+1;let sr=!1,Ye=0;const Li=new Array(we);for(U=0;U<we;U++)Li[U]=0;for(U=gt;U<=K;U++){const Xe=m[U];if(Ie>=we){Et(Xe,P,j,!0);continue}let vr;if(Xe.key!=null)vr=Ht.get(Xe.key);else for(Rt=St;Rt<=it;Rt++)if(Li[Rt-St]===0&&Vi(Xe,v[Rt])){vr=Rt;break}vr===void 0?Et(Xe,P,j,!0):(Li[vr-St]=U+1,vr>=Ye?Ye=vr:sr=!0,p(Xe,v[vr],D,null,P,j,z,Y,H),Ie++)}const Zc=sr?Am(Li):li;for(Rt=Zc.length-1,U=we-1;U>=0;U--){const Xe=St+U,vr=v[Xe],Qc=v[Xe+1],Jc=Xe+1<ct?Qc.el||Qc.placeholder:L;Li[U]===0?p(null,vr,D,Jc,P,j,z,Y,H):sr&&(Rt<0||U!==Zc[Rt]?ee(vr,D,Jc,2):Rt--)}}},ee=(m,v,D,L,P=null)=>{const{el:j,type:z,transition:Y,children:H,shapeFlag:U}=m;if(U&6){ee(m.component.subTree,v,D,L);return}if(U&128){m.suspense.move(v,D,L);return}if(U&64){z.move(m,v,D,B);return}if(z===Jt){r(j,v,D);for(let K=0;K<H.length;K++)ee(H[K],v,D,L);r(m.anchor,v,D);return}if(z===Wa){C(m,v,D);return}if(L!==2&&U&1&&Y)if(L===0)Y.beforeEnter(j),r(j,v,D),$e(()=>Y.enter(j),P);else{const{leave:K,delayLeave:it,afterLeave:gt}=Y,St=()=>{m.ctx.isUnmounted?i(j):r(j,v,D)},Ht=()=>{j._isLeaving&&j[nm](!0),K(j,()=>{St(),gt&&gt()})};it?it(j,St,Ht):Ht()}else r(j,v,D)},Et=(m,v,D,L=!1,P=!1)=>{const{type:j,props:z,ref:Y,children:H,dynamicChildren:U,shapeFlag:ct,patchFlag:K,dirs:it,cacheIndex:gt}=m;if(K===-2&&(P=!1),Y!=null&&(zr(),Qi(Y,null,D,m,!0),$r()),gt!=null&&(v.renderCache[gt]=void 0),ct&256){v.ctx.deactivate(m);return}const St=ct&1&&it,Ht=!ui(m);let Rt;if(Ht&&(Rt=z&&z.onVnodeBeforeUnmount)&&_r(Rt,v,m),ct&6)Ae(m.component,D,L);else{if(ct&128){m.suspense.unmount(D,L);return}St&&Mn(m,null,v,"beforeUnmount"),ct&64?m.type.remove(m,v,D,B,L):U&&!U.hasOnce&&(j!==Jt||K>0&&K&64)?zt(U,v,D,!1,!0):(j===Jt&&K&384||!P&&ct&16)&&zt(H,v,D),L&&ce(m)}(Ht&&(Rt=z&&z.onVnodeUnmounted)||St)&&$e(()=>{Rt&&_r(Rt,v,m),St&&Mn(m,null,v,"unmounted")},D)},ce=m=>{const{type:v,el:D,anchor:L,transition:P}=m;if(v===Jt){Gt(D,L);return}if(v===Wa){S(m);return}const j=()=>{i(D),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:z,delayLeave:Y}=P,H=()=>z(D,j);Y?Y(m.el,j,H):H()}else j()},Gt=(m,v)=>{let D;for(;m!==v;)D=d(m),i(m),m=D;i(v)},Ae=(m,v,D)=>{const{bum:L,scope:P,job:j,subTree:z,um:Y,m:H,a:U}=m;uh(H),uh(U),L&&mo(L),P.stop(),j&&(j.flags|=8,Et(z,m,v,D)),Y&&$e(Y,v),$e(()=>{m.isUnmounted=!0},v)},zt=(m,v,D,L=!1,P=!1,j=0)=>{for(let z=j;z<m.length;z++)Et(m[z],v,D,L,P)},E=m=>{if(m.shapeFlag&6)return E(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const v=d(m.anchor||m.el),D=v&&v[em];return D?d(D):v};let O=!1;const T=(m,v,D)=>{m==null?v._vnode&&Et(v._vnode,null,null,!0):p(v._vnode||null,m,v,null,null,null,D),v._vnode=m,O||(O=!0,nh(),Id(),O=!1)},B={p,um:Et,m:ee,r:ce,mt:dt,mc:R,pc:et,pbc:ot,n:E,o:n};let ft,_t;return t&&([ft,_t]=t(B)),{render:T,hydrate:ft,createApp:xm(T,ft)}}function Na({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function En({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function Fm(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Jd(n,t,e=!1){const r=n.children,i=t.children;if(ut(r)&&ut(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=gn(i[s]),a.el=o.el),!e&&a.patchFlag!==-2&&Jd(o,a)),a.type===fa&&a.patchFlag!==-1&&(a.el=o.el),a.type===qr&&!a.el&&(a.el=o.el)}}function Am(n){const t=n.slice(),e=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=e[e.length-1],n[i]<c){t[r]=i,e.push(r);continue}for(s=0,o=e.length-1;s<o;)a=s+o>>1,n[e[a]]<c?s=a+1:o=a;c<n[e[s]]&&(s>0&&(t[r]=e[s-1]),e[s]=r)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=t[o];return e}function tf(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tf(t)}function uh(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const Im=Symbol.for("v-scx"),Rm=()=>Tr(Im);function Ua(n,t){return pc(n,null,t)}function Dr(n,t,e){return pc(n,t,e)}function pc(n,t,e=Bt){const{immediate:r,deep:i,flush:s,once:o}=e,a=ge({},e),l=t&&r||!t&&s!=="post";let c;if(ps){if(s==="sync"){const f=Rm();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=fr,f.resume=fr,f.pause=fr,f}}const h=Se;a.call=(f,g,p)=>Or(f,h,g,p);let u=!1;s==="post"?a.scheduler=f=>{$e(f,h&&h.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(f,g)=>{g?f():cc(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,h&&(f.id=h.uid,f.i=h))};const d=qp(n,t,a);return ps&&(c?c.push(d):l&&d()),d}function Lm(n,t,e){const r=this.proxy,i=ae(n)?n.includes(".")?ef(r,n):()=>r[n]:n.bind(r,r);let s;pt(t)?s=t:(s=t.handler,e=t);const o=As(this),a=pc(i,s.bind(r),e);return o(),a}function ef(n,t){const e=t.split(".");return()=>{let r=n;for(let i=0;i<e.length&&r;i++)r=r[e[i]];return r}}const jm=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${er(t)}Modifiers`]||n[`${On(t)}Modifiers`];function Vm(n,t,...e){if(n.isUnmounted)return;const r=n.vnode.props||Bt;let i=e;const s=t.startsWith("update:"),o=s&&jm(r,t.slice(7));o&&(o.trim&&(i=e.map(h=>ae(h)?h.trim():h)),o.number&&(i=e.map(gl)));let a,l=r[a=Ia(t)]||r[a=Ia(er(t))];!l&&s&&(l=r[a=Ia(On(t))]),l&&Or(l,n,6,i);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Or(c,n,6,i)}}const Bm=new WeakMap;function rf(n,t,e=!1){const r=e?Bm:t.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!pt(n)){const l=c=>{const h=rf(c,t,!0);h&&(a=!0,ge(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?($t(n)&&r.set(n,null),null):(ut(s)?s.forEach(l=>o[l]=null):ge(o,s),$t(n)&&r.set(n,o),o)}function da(n,t){return!n||!ra(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(n,t[0].toLowerCase()+t.slice(1))||At(n,On(t))||At(n,t))}function Ha(n){const{type:t,vnode:e,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:u,data:d,setupState:f,ctx:g,inheritAttrs:p}=n,_=Fo(n);let w,y;try{if(e.shapeFlag&4){const S=i||r,k=S;w=wr(c.call(k,S,h,u,f,d,g)),y=a}else{const S=t;w=wr(S.length>1?S(u,{attrs:a,slots:o,emit:l}):S(u,null)),y=t.props?a:Nm(a)}}catch(S){ts.length=0,la(S,n,1),w=Tt(qr)}let C=w;if(y&&p!==!1){const S=Object.keys(y),{shapeFlag:k}=C;S.length&&k&7&&(s&&S.some(Ql)&&(y=Um(y,s)),C=bi(C,y,!1,!0))}return e.dirs&&(C=bi(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(e.dirs):e.dirs),e.transition&&hc(C,e.transition),w=C,Fo(_),w}const Nm=n=>{let t;for(const e in n)(e==="class"||e==="style"||ra(e))&&((t||(t={}))[e]=n[e]);return t},Um=(n,t)=>{const e={};for(const r in n)(!Ql(r)||!(r.slice(9)in t))&&(e[r]=n[r]);return e};function Hm(n,t,e){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return r?dh(r,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==r[d]&&!da(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?dh(r,o,c):!0:!!o;return!1}function dh(n,t,e){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==n[s]&&!da(e,s))return!0}return!1}function Wm({vnode:n,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=t.vnode).el=e,t=t.parent;else break}}const nf=n=>n.__isSuspense;function Ym(n,t){t&&t.pendingBranch?ut(n)?t.effects.push(...n):t.effects.push(n):Qp(n)}const Jt=Symbol.for("v-fgt"),fa=Symbol.for("v-txt"),qr=Symbol.for("v-cmt"),Wa=Symbol.for("v-stc"),ts=[];let qe=null;function Q(n=!1){ts.push(qe=n?null:[])}function Xm(){ts.pop(),qe=ts[ts.length-1]||null}let fs=1;function Ro(n,t=!1){fs+=n,n<0&&qe&&t&&(qe.hasOnce=!0)}function sf(n){return n.dynamicChildren=fs>0?qe||li:null,Xm(),fs>0&&qe&&qe.push(n),n}function st(n,t,e,r,i,s){return sf(V(n,t,e,r,i,s,!0))}function rr(n,t,e,r,i){return sf(Tt(n,t,e,r,i,!0))}function gs(n){return n?n.__v_isVNode===!0:!1}function Vi(n,t){return n.type===t.type&&n.key===t.key}const of=({key:n})=>n??null,_o=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?ae(n)||Nt(n)||pt(n)?{i:_e,r:n,k:t,f:!!e}:n:null);function V(n,t=null,e=null,r=0,i=null,s=n===Jt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&of(t),ref:t&&_o(t),scopeId:ha,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_e};return a?(mc(l,e),s&128&&n.normalize(l)):e&&(l.shapeFlag|=ae(e)?8:16),fs>0&&!o&&qe&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&qe.push(l),l}const Tt=zm;function zm(n,t=null,e=null,r=0,i=null,s=!1){if((!n||n===Bd)&&(n=qr),gs(n)){const a=bi(n,t,!0);return e&&mc(a,e),fs>0&&!s&&qe&&(a.shapeFlag&6?qe[qe.indexOf(n)]=a:qe.push(a)),a.patchFlag=-2,a}if(r0(n)&&(n=n.__vccOpts),t){t=$m(t);let{class:a,style:l}=t;a&&!ae(a)&&(t.class=Be(a)),$t(l)&&(ac(l)&&!ut(l)&&(l=ge({},l)),t.style=bn(l))}const o=ae(n)?1:nf(n)?128:rm(n)?64:$t(n)?4:pt(n)?2:0;return V(n,t,e,r,i,o,s,!0)}function $m(n){return n?ac(n)||$d(n)?ge({},n):n:null}function bi(n,t,e=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,c=t?vc(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&of(c),ref:t&&t.ref?e&&s?ut(s)?s.concat(_o(t)):[s,_o(t)]:_o(t):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Jt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&bi(n.ssContent),ssFallback:n.ssFallback&&bi(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&hc(h,l.clone(h)),h}function Kr(n=" ",t=0){return Tt(fa,null,n,t)}function Yn(n="",t=!1){return t?(Q(),rr(qr,null,n)):Tt(qr,null,n)}function wr(n){return n==null||typeof n=="boolean"?Tt(qr):ut(n)?Tt(Jt,null,n.slice()):gs(n)?gn(n):Tt(fa,null,String(n))}function gn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:bi(n)}function mc(n,t){let e=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(ut(t))e=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),mc(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!$d(t)?t._ctx=_e:i===3&&_e&&(_e.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else pt(t)?(t={default:t,_ctx:_e},e=32):(t=String(t),r&64?(e=16,t=[Kr(t)]):e=8);n.children=t,n.shapeFlag|=e}function vc(...n){const t={};for(let e=0;e<n.length;e++){const r=n[e];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Be([t.class,r.class]));else if(i==="style")t.style=bn([t.style,r.style]);else if(ra(i)){const s=t[i],o=r[i];o&&s!==o&&!(ut(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function _r(n,t,e,r=null){Or(n,t,7,[e,r])}const Gm=Yd();let qm=0;function Km(n,t,e){const r=n.type,i=(t?t.appContext:n.appContext)||Gm,s={uid:qm++,vnode:n,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qd(r,i),emitsOptions:rf(r,i),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:r.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Vm.bind(null,s),n.ce&&n.ce(s),s}let Se=null;const af=()=>Se||_e;let Lo,xl;{const n=oa(),t=(e,r)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Lo=t("__VUE_INSTANCE_SETTERS__",e=>Se=e),xl=t("__VUE_SSR_SETTERS__",e=>ps=e)}const As=n=>{const t=Se;return Lo(n),n.scope.on(),()=>{n.scope.off(),Lo(t)}},fh=()=>{Se&&Se.scope.off(),Lo(null)};function lf(n){return n.vnode.shapeFlag&4}let ps=!1;function Zm(n,t=!1,e=!1){t&&xl(t);const{props:r,children:i}=n.vnode,s=lf(n);Cm(n,r,s,t),km(n,i,e||t);const o=s?Qm(n,t):void 0;return t&&xl(!1),o}function Qm(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,pm);const{setup:r}=e;if(r){zr();const i=n.setupContext=r.length>1?t0(n):null,s=As(n),o=Ps(r,n,0,[n.props,i]),a=nd(o);if($r(),s(),(a||n.sp)&&!ui(n)&&Ld(n),a){if(o.then(fh,fh),t)return o.then(l=>{gh(n,l,t)}).catch(l=>{la(l,n,0)});n.asyncDep=o}else gh(n,o,t)}else cf(n,t)}function gh(n,t,e){pt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:$t(t)&&(n.setupState=Ed(t)),cf(n,e)}let ph;function cf(n,t,e){const r=n.type;if(!n.render){if(!t&&ph&&!r.render){const i=r.template||dc(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,c=ge(ge({isCustomElement:s,delimiters:a},o),l);r.render=ph(i,c)}}n.render=r.render||fr}{const i=As(n);zr();try{mm(n)}finally{$r(),i()}}}const Jm={get(n,t){return xe(n,"get",""),n[t]}};function t0(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,Jm),slots:n.slots,emit:n.emit,expose:t}}function ga(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Ed(lc(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ji)return Ji[e](n)},has(t,e){return e in t||e in Ji}})):n.proxy}function e0(n,t=!0){return pt(n)?n.displayName||n.name:n.name||t&&n.__name}function r0(n){return pt(n)&&"__vccOpts"in n}const Z=(n,t)=>$p(n,t,ps);function hf(n,t,e){const r=(s,o,a)=>{Ro(-1);try{return Tt(s,o,a)}finally{Ro(1)}},i=arguments.length;return i===2?$t(t)&&!ut(t)?gs(t)?r(n,null,[t]):r(n,t):r(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&gs(e)&&(e=[e]),r(n,t,e))}const n0="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sl;const mh=typeof window<"u"&&window.trustedTypes;if(mh)try{Sl=mh.createPolicy("vue",{createHTML:n=>n})}catch{}const uf=Sl?n=>Sl.createHTML(n):n=>n,i0="http://www.w3.org/2000/svg",s0="http://www.w3.org/1998/Math/MathML",Ir=typeof document<"u"?document:null,vh=Ir&&Ir.createElement("template"),o0={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,r)=>{const i=t==="svg"?Ir.createElementNS(i0,n):t==="mathml"?Ir.createElementNS(s0,n):e?Ir.createElement(n,{is:e}):Ir.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Ir.createTextNode(n),createComment:n=>Ir.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ir.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,r,i,s){const o=e?e.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===s||!(i=i.nextSibling)););else{vh.innerHTML=uf(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=vh.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},a0=Symbol("_vtc");function l0(n,t,e){const r=n[a0];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const jo=Symbol("_vod"),df=Symbol("_vsh"),ei={name:"show",beforeMount(n,{value:t},{transition:e}){n[jo]=n.style.display==="none"?"":n.style.display,e&&t?e.beforeEnter(n):Bi(n,t)},mounted(n,{value:t},{transition:e}){e&&t&&e.enter(n)},updated(n,{value:t,oldValue:e},{transition:r}){!t!=!e&&(r?t?(r.beforeEnter(n),Bi(n,!0),r.enter(n)):r.leave(n,()=>{Bi(n,!1)}):Bi(n,t))},beforeUnmount(n,{value:t}){Bi(n,t)}};function Bi(n,t){n.style.display=t?n[jo]:"none",n[df]=!t}const c0=Symbol(""),h0=/(?:^|;)\s*display\s*:/;function u0(n,t,e){const r=n.style,i=ae(e);let s=!1;if(e&&!i){if(t)if(ae(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&yo(r,a,"")}else for(const o in t)e[o]==null&&yo(r,o,"");for(const o in e)o==="display"&&(s=!0),yo(r,o,e[o])}else if(i){if(t!==e){const o=r[c0];o&&(e+=";"+o),r.cssText=e,s=h0.test(e)}}else t&&n.removeAttribute("style");jo in n&&(n[jo]=s?r.display:"",n[df]&&(r.display="none"))}const _h=/\s*!important$/;function yo(n,t,e){if(ut(e))e.forEach(r=>yo(n,t,r));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const r=d0(n,t);_h.test(e)?n.setProperty(On(r),e.replace(_h,""),"important"):n[r]=e}}const yh=["Webkit","Moz","ms"],Ya={};function d0(n,t){const e=Ya[t];if(e)return e;let r=er(t);if(r!=="filter"&&r in n)return Ya[t]=r;r=sa(r);for(let i=0;i<yh.length;i++){const s=yh[i]+r;if(s in n)return Ya[t]=s}return t}const wh="http://www.w3.org/1999/xlink";function bh(n,t,e,r,i,s=wp(t)){r&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(wh,t.slice(6,t.length)):n.setAttributeNS(wh,t,e):e==null||s&&!ad(e)?n.removeAttribute(t):n.setAttribute(t,s?"":en(e)?String(e):e)}function xh(n,t,e,r,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?uf(e):e);return}const s=n.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=ad(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function ri(n,t,e,r){n.addEventListener(t,e,r)}function f0(n,t,e,r){n.removeEventListener(t,e,r)}const Sh=Symbol("_vei");function g0(n,t,e,r,i=null){const s=n[Sh]||(n[Sh]={}),o=s[t];if(r&&o)o.value=r;else{const[a,l]=p0(t);if(r){const c=s[t]=_0(r,i);ri(n,a,c,l)}else o&&(f0(n,a,o,l),s[t]=void 0)}}const Ch=/(?:Once|Passive|Capture)$/;function p0(n){let t;if(Ch.test(n)){t={};let r;for(;r=n.match(Ch);)n=n.slice(0,n.length-r[0].length),t[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):On(n.slice(2)),t]}let Xa=0;const m0=Promise.resolve(),v0=()=>Xa||(m0.then(()=>Xa=0),Xa=Date.now());function _0(n,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;Or(y0(r,e.value),t,5,[r])};return e.value=n,e.attached=v0(),e}function y0(n,t){if(ut(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Th=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,w0=(n,t,e,r,i,s)=>{const o=i==="svg";t==="class"?l0(n,r,o):t==="style"?u0(n,e,r):ra(t)?Ql(t)||g0(n,t,e,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):b0(n,t,r,o))?(xh(n,t,r),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&bh(n,t,r,o,s,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!ae(r))?xh(n,er(t),r,s,t):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),bh(n,t,r,o))};function b0(n,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in n&&Th(t)&&pt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Th(t)&&ae(e)?!1:t in n}const Dh=n=>{const t=n.props["onUpdate:modelValue"]||!1;return ut(t)?e=>mo(t,e):t};function x0(n){n.target.composing=!0}function Oh(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const za=Symbol("_assign"),S0={created(n,{modifiers:{lazy:t,trim:e,number:r}},i){n[za]=Dh(i);const s=r||i.props&&i.props.type==="number";ri(n,t?"change":"input",o=>{if(o.target.composing)return;let a=n.value;e&&(a=a.trim()),s&&(a=gl(a)),n[za](a)}),e&&ri(n,"change",()=>{n.value=n.value.trim()}),t||(ri(n,"compositionstart",x0),ri(n,"compositionend",Oh),ri(n,"change",Oh))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:r,trim:i,number:s}},o){if(n[za]=Dh(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?gl(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&t===e||i&&n.value.trim()===l)||(n.value=l))}},C0=["ctrl","shift","alt","meta"],T0={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>C0.some(e=>n[`${e}Key`]&&!t.includes(e))},vn=(n,t)=>{const e=n._withMods||(n._withMods={}),r=t.join(".");return e[r]||(e[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const a=T0[t[o]];if(a&&a(i,t))return}return n(i,...s)})},D0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},O0=(n,t)=>{const e=n._withKeys||(n._withKeys={}),r=t.join(".");return e[r]||(e[r]=i=>{if(!("key"in i))return;const s=On(i.key);if(t.some(o=>o===s||D0[o]===s))return n(i)})},k0=ge({patchProp:w0},o0);let kh;function M0(){return kh||(kh=Em(k0))}const E0=(...n)=>{const t=M0().createApp(...n),{mount:e}=t;return t.mount=r=>{const i=F0(r);if(!i)return;const s=t._component;!pt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,P0(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function P0(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function F0(n){return ae(n)?document.querySelector(n):n}const A0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"};function I0(n,t){return Q(),st("svg",A0,[...t[0]||(t[0]=[V("path",{d:"M280.37 148.26 96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0M571.6 251.47 488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93"},null,-1)])])}const R0={render:I0},L0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function j0(n,t){return Q(),st("svg",L0,[...t[0]||(t[0]=[V("path",{d:"M503.691 189.836 327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328"},null,-1)])])}const V0={render:j0},B0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"};function N0(n,t){return Q(),st("svg",B0,[...t[0]||(t[0]=[V("path",{d:"M34.52 239.03 228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94"},null,-1)])])}const U0={render:N0},H0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"};function W0(n,t){return Q(),st("svg",H0,[...t[0]||(t[0]=[V("path",{d:"M285.476 272.971 91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941"},null,-1)])])}const Y0={render:W0},X0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function z0(n,t){return Q(),st("svg",X0,[...t[0]||(t[0]=[V("path",{d:"M34.5 239 228.9 44.7c9.4-9.4 24.6-9.4 33.9 0l22.7 22.7c9.4 9.4 9.4 24.5 0 33.9L131.5 256l154 154.7c9.3 9.4 9.3 24.5 0 33.9l-22.7 22.7c-9.4 9.4-24.6 9.4-33.9 0L34.5 273c-9.3-9.4-9.3-24.6 0-34m192 34 194.3 194.3c9.4 9.4 24.6 9.4 33.9 0l22.7-22.7c9.4-9.4 9.4-24.5 0-33.9L323.5 256l154-154.7c9.3-9.4 9.3-24.5 0-33.9l-22.7-22.7c-9.4-9.4-24.6-9.4-33.9 0L226.5 239c-9.3 9.4-9.3 24.6 0 34"},null,-1)])])}const $0={render:z0},G0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function q0(n,t){return Q(),st("svg",G0,[...t[0]||(t[0]=[V("path",{d:"M477.5 273 283.1 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.7c-9.4-9.4-9.4-24.5 0-33.9l154-154.7-154-154.7c-9.3-9.4-9.3-24.5 0-33.9l22.7-22.7c9.4-9.4 24.6-9.4 33.9 0L477.5 239c9.3 9.4 9.3 24.6 0 34m-192-34L91.1 44.7c-9.4-9.4-24.6-9.4-33.9 0L34.5 67.4c-9.4 9.4-9.4 24.5 0 33.9l154 154.7-154 154.7c-9.3 9.4-9.3 24.5 0 33.9l22.7 22.7c9.4 9.4 24.6 9.4 33.9 0L285.5 273c9.3-9.4 9.3-24.6 0-34"},null,-1)])])}const K0={render:q0},Z0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function Q0(n,t){return Q(),st("svg",Z0,[...t[0]||(t[0]=[V("path",{d:"m31.7 239 136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34"},null,-1)])])}const J0={render:Q0},tv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function ev(n,t){return Q(),st("svg",tv,[...t[0]||(t[0]=[V("path",{d:"m224.3 273-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34"},null,-1)])])}const rv={render:ev},nv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function iv(n,t){return Q(),st("svg",nv,[...t[0]||(t[0]=[V("path",{d:"M119.5 326.9 3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1"},null,-1)])])}const Mh={render:iv},sv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function ov(n,t){return Q(),st("svg",sv,[...t[0]||(t[0]=[V("path",{d:"m136.5 185.1 116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1"},null,-1)])])}const Eh={render:ov},av={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function lv(n,t){return Q(),st("svg",av,[...t[0]||(t[0]=[V("path",{d:"m223.7 239 136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34m-192 34 136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34"},null,-1)])])}const cv={render:lv},hv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function uv(n,t){return Q(),st("svg",hv,[...t[0]||(t[0]=[V("path",{d:"m224.3 273-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34m192-34-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8"},null,-1)])])}const dv={render:uv},fv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function gv(n,t){return Q(),st("svg",fv,[...t[0]||(t[0]=[V("path",{d:"M0 424V88c0-13.3 10.7-24 24-24h24c13.3 0 24 10.7 24 24v336c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24m254.5-269.6 65.6 65.6H120c-13.3 0-24 10.7-24 24v24c0 13.3 10.7 24 24 24h200.1l-65.6 65.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L441 273c9.4-9.4 9.4-24.6 0-33.9L305.5 103.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6-.1 33.9"},null,-1)])])}const pv={render:gv},mv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function vv(n,t){return Q(),st("svg",mv,[...t[0]||(t[0]=[V("path",{d:"M448 88v336c0 13.3-10.7 24-24 24h-24c-13.3 0-24-10.7-24-24V88c0-13.3 10.7-24 24-24h24c13.3 0 24 10.7 24 24M193.5 357.6 127.9 292H328c13.3 0 24-10.7 24-24v-24c0-13.3-10.7-24-24-24H127.9l65.6-65.6c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L7 239c-9.4 9.4-9.4 24.6 0 33.9l135.5 135.5c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.3 9.4-24.5.1-33.8"},null,-1)])])}const _v={render:vv},yv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function wv(n,t){return Q(),st("svg",yv,[...t[0]||(t[0]=[V("path",{d:"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3"},null,-1)])])}const bv={render:wv},xv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Sv(n,t){return Q(),st("svg",xv,[...t[0]||(t[0]=[V("path",{d:"m190.5 66.9 22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3"},null,-1)])])}const Cv={render:Sv},Tv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"};function Dv(n,t){return Q(),st("svg",Tv,[...t[0]||(t[0]=[V("path",{d:"M288 128a80 80 0 1 0 80 80 80.12 80.12 0 0 0-80-80m0 128a48 48 0 1 1 48-48 48.05 48.05 0 0 1-48 48M104 416h368a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H104a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8m470.43-87.94a32.1 32.1 0 0 0-3.8-8.06L512 256V80a48 48 0 0 0-48-48H112a48 48 0 0 0-48 48v176L5.38 320A33.45 33.45 0 0 0 0 337.75V448a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V337.75a31.8 31.8 0 0 0-1.57-9.69M96 268.44V80a16 16 0 0 1 16-16h352a16 16 0 0 1 16 16v188.44L527.23 320H48.77zM544 448H32v-96h512zM432 104h-32a8 8 0 0 0-8 8v32a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8v-32a8 8 0 0 0-8-8"},null,-1)])])}const Ov={render:Dv},kv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Mv(n,t){return Q(),st("svg",kv,[...t[0]||(t[0]=[V("path",{d:"M112 368h96c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-96c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16M400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48m0 394c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V160h352z"},null,-1)])])}const Ev={render:Mv},Pv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function Fv(n,t){return Q(),st("svg",Pv,[...t[0]||(t[0]=[V("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8m216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216m-148.9 88.3-81.2-59c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h14c6.6 0 12 5.4 12 12v146.3l70.5 51.3c5.4 3.9 6.5 11.4 2.6 16.8l-8.2 11.3c-3.9 5.3-11.4 6.5-16.8 2.6"},null,-1)])])}const Av={render:Fv},Iv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function Rv(n,t){return Q(),st("svg",Iv,[...t[0]||(t[0]=[V("path",{d:"M376 232H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h368c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8"},null,-1)])])}const Lv={render:Rv},jv={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function Vv(n,t){return Q(),st("svg",jv,[...t[0]||(t[0]=[V("path",{d:"M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8"},null,-1)])])}const Bv={render:Vv},Nv={xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd","image-rendering":"optimizeQuality","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision",viewBox:"0 0 512 406.453"};function Uv(n,t){return Q(),st("svg",Nv,[...t[0]||(t[0]=[V("path",{"fill-rule":"nonzero",d:"M414.238 63.347h20.374c21.303 0 40.662 8.705 54.67 22.714C503.295 100.073 512 119.442 512 140.735v188.329c0 21.296-8.709 40.655-22.721 54.667s-33.375 22.722-54.667 22.722H77.388c-21.292 0-40.662-8.706-54.674-22.718C8.705 369.727 0 350.368 0 329.064V140.735c0-21.307 8.698-40.666 22.71-54.678s33.368-22.71 54.678-22.71h138.653V14.426C216.041 6.459 222.5 0 230.467 0c3.875 0 7.394 1.527 9.985 4.013l99.797 78.827c6.223 4.914 7.28 13.947 2.366 20.17a14.4 14.4 0 0 1-2.61 2.559l-100.636 79.489c-6.223 4.914-15.255 3.856-20.169-2.366a14.3 14.3 0 0 1-3.09-8.902h-.069v-52.737H77.388c-5.386 0-10.304 2.224-13.881 5.801s-5.801 8.498-5.801 13.881v188.329c0 5.38 2.228 10.298 5.805 13.874 3.58 3.58 8.501 5.808 13.877 5.808h357.224c5.368 0 10.29-2.231 13.87-5.811s5.812-8.499 5.812-13.871V140.735c0-5.376-2.228-10.297-5.809-13.878-3.576-3.576-8.494-5.804-13.873-5.804h-20.374z"},null,-1)])])}const Hv={render:Uv},Ph=(()=>({...{"ico-home":R0,"ico-share":V0,"ico-chevron-left":U0,"ico-chevron-right":Y0,"ico-chevron-double-left":$0,"ico-chevron-double-right":K0,"ico-angle-left":J0,"ico-angle-right":rv,"ico-angle-down":Mh,"ico-angle-up":Eh,"ico-arrow-left":bv,"ico-arrow-right":Cv,"ico-arrow-down":Mh,"ico-arrow-up":Eh,"ico-angle-double-left":cv,"ico-angle-double-right":dv,"ico-arrow-from-left":pv,"ico-arrow-from-right":_v,"ico-minus":Lv,"ico-plus":Bv,"ico-camera-polaroid":Ov,"ico-calendar-day":Ev,"ico-clock":Av,"ico-repeat-square-icon":Hv},...{}}))(),Wv=pe({name:"Icons",components:Ph,props:{icon:{type:String,required:!0},size:String},data(){return{icons:Ph}},computed:{iconSize(){switch((this.size+"").toLowerCase()){case"small":case"is-small":return"is-small";case"medium":case"is-medium":return"is-medium";case"large":case"is-large":return"is-large";default:return""}},iconName(){let n=this.icon;return typeof this.icon=="string"||(n=this.icon.join("-")),n=n.replaceAll("icon-",""),n="ico-"+n,n},hasIcon(){let n=!!this.icons[this.iconName];return n||console.warn("missing icon",this.iconName),n}}});const _c=(n,t)=>{const e=n.__vccOpts||n;for(const[r,i]of t)e[r]=i;return e};function Yv(n,t,e,r,i,s){return Q(),st("span",{class:Be(["icon",n.iconSize])},[n.hasIcon?(Q(),rr(Nd(n.iconName),{key:0})):Yn("",!0)],2)}const Xv=_c(Wv,[["render",Yv]]);var zv=!1;/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ff;const pa=n=>ff=n,gf=Symbol();function Cl(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var es;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(es||(es={}));function $v(){const n=ud(!0),t=n.run(()=>Dt({}));let e=[],r=[];const i=lc({install(s){pa(i),i._a=s,s.provide(gf,i),s.config.globalProperties.$pinia=i,r.forEach(o=>e.push(o)),r=[]},use(s){return!this._a&&!zv?r.push(s):e.push(s),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return i}const pf=()=>{};function Fh(n,t,e,r=pf){n.push(t);const i=()=>{const s=n.indexOf(t);s>-1&&(n.splice(s,1),r())};return!e&&dd()&&bp(i),i}function qn(n,...t){n.slice().forEach(e=>{e(...t)})}const Gv=n=>n(),Ah=Symbol(),$a=Symbol();function Tl(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,r)=>n.set(r,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const r=t[e],i=n[e];Cl(i)&&Cl(r)&&n.hasOwnProperty(e)&&!Nt(r)&&!Wr(r)?n[e]=Tl(i,r):n[e]=r}return n}const qv=Symbol();function Kv(n){return!Cl(n)||!n.hasOwnProperty(qv)}const{assign:dn}=Object;function Zv(n){return!!(Nt(n)&&n.effect)}function Qv(n,t,e,r){const{state:i,actions:s,getters:o}=t,a=e.state.value[n];let l;function c(){a||(e.state.value[n]=i?i():{});const h=zi(e.state.value[n]);return dn(h,s,Object.keys(o||{}).reduce((u,d)=>(u[d]=lc(Z(()=>{pa(e);const f=e._s.get(n);return o[d].call(f,f)})),u),{}))}return l=mf(n,c,t,e,r,!0),l}function mf(n,t,e={},r,i,s){let o;const a=dn({actions:{}},e),l={deep:!0};let c,h,u=[],d=[],f;const g=r.state.value[n];!s&&!g&&(r.state.value[n]={}),Dt({});let p;function _(R){let W;c=h=!1,typeof R=="function"?(R(r.state.value[n]),W={type:es.patchFunction,storeId:n,events:f}):(Tl(r.state.value[n],R),W={type:es.patchObject,payload:R,storeId:n,events:f});const ot=p=Symbol();ca().then(()=>{p===ot&&(c=!0)}),h=!0,qn(u,W,r.state.value[n])}const w=s?function(){const{state:W}=e,ot=W?W():{};this.$patch(mt=>{dn(mt,ot)})}:pf;function y(){o.stop(),u=[],d=[],r._s.delete(n)}const C=(R,W="")=>{if(Ah in R)return R[$a]=W,R;const ot=function(){pa(r);const mt=Array.from(arguments),ht=[],at=[];function dt(q){ht.push(q)}function lt(q){at.push(q)}qn(d,{args:mt,name:ot[$a],store:k,after:dt,onError:lt});let nt;try{nt=R.apply(this&&this.$id===n?this:k,mt)}catch(q){throw qn(at,q),q}return nt instanceof Promise?nt.then(q=>(qn(ht,q),q)).catch(q=>(qn(at,q),Promise.reject(q))):(qn(ht,nt),nt)};return ot[Ah]=!0,ot[$a]=W,ot},S={_p:r,$id:n,$onAction:Fh.bind(null,d),$patch:_,$reset:w,$subscribe(R,W={}){const ot=Fh(u,R,W.detached,()=>mt()),mt=o.run(()=>Dr(()=>r.state.value[n],ht=>{(W.flush==="sync"?h:c)&&R({storeId:n,type:es.direct,events:f},ht)},dn({},l,W)));return ot},$dispose:y},k=Es(S);r._s.set(n,k);const N=(r._a&&r._a.runWithContext||Gv)(()=>r._e.run(()=>(o=ud()).run(()=>t({action:C}))));for(const R in N){const W=N[R];if(Nt(W)&&!Zv(W)||Wr(W))s||(g&&Kv(W)&&(Nt(W)?W.value=g[R]:Tl(W,g[R])),r.state.value[n][R]=W);else if(typeof W=="function"){const ot=C(W,R);N[R]=ot,a.actions[R]=W}}return dn(k,N),dn(Ct(k),N),Object.defineProperty(k,"$state",{get:()=>r.state.value[n],set:R=>{_(W=>{dn(W,R)})}}),r._p.forEach(R=>{dn(k,o.run(()=>R({store:k,app:r._a,pinia:r,options:a})))}),g&&s&&e.hydrate&&e.hydrate(k.$state,g),c=!0,h=!0,k}/*! #__NO_SIDE_EFFECTS__ */function Jv(n,t,e){let r,i;const s=typeof t=="function";typeof n=="string"?(r=n,i=s?e:t):(i=n,r=n.id);function o(a,l){const c=Sm();return a=a||(c?Tr(gf,null):null),a&&pa(a),a=ff,a._s.has(r)||(s?mf(r,t,i,a):Qv(r,i,a)),a._s.get(r)}return o.$id=r,o}function yc(n){{const t=Ct(n),e={};for(const r in t){const i=t[r];i.effect?e[r]=Z({get:()=>n[r],set(s){n[r]=s}}):(Nt(i)||Wr(i))&&(e[r]=xn(n,r))}return e}}const F=n=>{if(!n)throw new Error("Assertion failed");return n},de=n=>{throw new Error(n)},rt={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},I={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},t_=function(n){switch(n){case rt.INT32:case rt.INT64:case rt.UINT32:case rt.UINT64:case rt.SINT32:case rt.SINT64:case rt.BOOL:case rt.ENUM:case rt.VHASH64:return I.VARINT;case rt.DOUBLE:case rt.FIXED64:case rt.SFIXED64:case rt.FHASH64:return I.FIXED64;case rt.STRING:case rt.MESSAGE:case rt.BYTES:return I.DELIMITED;case rt.FLOAT:case rt.FIXED32:case rt.SFIXED32:return I.FIXED32;case rt.INVALID:case rt.GROUP:default:return I.INVALID}},Bs=-1,e_=11754943508222875e-54,Dl=34028234663852886e22,r_=22250738585072014e-324,Ol=17976931348623157e292,n_=1048576,i_=8388608,fe=2147483648,je=4294967296,vf=4503599627370496,Re=9223372036854776e3,Vo=18446744073709552e3,s_=new TextDecoder("utf8");function _f(n){const t=n instanceof Uint8Array?n:new Uint8Array(n);return s_.decode(t)}const o_=new TextEncoder;function yf(n){return o_.encode(n)}function wf(n){return n instanceof Uint8Array?n:typeof n=="string"?yf(n):new Uint8Array(n)}function bf(n,t,e){const r=-(n&1);return n=(n>>>1|t<<31)^r,t=t>>>1^r,e(n,t)}function kl(n,t,e){const r=t>>31;return t=(t<<1|n>>>31)^r,n=n<<1^r,e(n,t)}const a_=48;function Ml(n){F(n.length>0);let t=!1;n[0]==="-"&&(t=!0,n=n.slice(1));const e=[0,0,0,0,0,0,0,0];function r(s,o){for(let a=0;a<8&&(s!==1||o>0);a++){const l=s*e[a]+o;e[a]=l&255,o=l>>>8}}function i(){for(let s=0;s<8;s++)e[s]=~e[s]&255}for(let s=0;s<n.length;s++)r(10,n.charCodeAt(s)-a_);return t&&(i(),r(1,1)),_f(e)}let jt=0,Vt=0;const Ga=function(n){const t=n<0;n=Math.abs(n);let e=n>>>0,r=Math.floor((n-e)/je);r=r>>>0,t&&(r=~r>>>0,e=~e>>>0,e+=1,e>4294967295&&(e=0,r++,r>4294967295&&(r=0))),jt=e,Vt=r},xf=function(n){const t=n>>>0,e=Math.floor((n-t)/je)>>>0;jt=t,Vt=e},l_=function(n){const t=n<0;n=Math.abs(n)*2,xf(n);let e=jt,r=Vt;t&&(e==0?r==0?(e=4294967295,r=4294967295):(r--,e=4294967295):e--),jt=e,Vt=r},Ns=function(n){const t=n.charCodeAt(0),e=n.charCodeAt(1),r=n.charCodeAt(2),i=n.charCodeAt(3),s=n.charCodeAt(4),o=n.charCodeAt(5),a=n.charCodeAt(6),l=n.charCodeAt(7);jt=t+(e<<8)+(r<<16)+(i<<24)>>>0,Vt=s+(o<<8)+(a<<16)+(l<<24)>>>0},c_=function(n){const t=n<0?1:0;n=t?-n:n;let e,r;if(n===0){1/n>0?(Vt=0,jt=0):(Vt=0,jt=2147483648);return}if(isNaN(n)){Vt=0,jt=2147483647;return}if(n>Dl){Vt=0,jt=(t<<31|2139095040)>>>0;return}if(n<e_){r=Math.round(n/Math.pow(2,-149)),Vt=0,jt=(t<<31|r)>>>0;return}e=Math.floor(Math.log(n)/Math.LN2),r=n*Math.pow(2,-e),r=Math.round(r*i_),r>=16777216&&++e,r=r&8388607,Vt=0,jt=(t<<31|e+127<<23|r)>>>0},h_=function(n){const t=n<0?1:0;if(n=t?-n:n,n===0){1/n>0?(Vt=0,jt=0):(Vt=2147483648,jt=0);return}if(isNaN(n)){Vt=2147483647,jt=4294967295;return}if(n>Ol){Vt=(t<<31|2146435072)>>>0,jt=0;return}if(n<r_){const c=n/Math.pow(2,-1074),h=c/je;Vt=(t<<31|h)>>>0,jt=c>>>0;return}const e=1023,r=-1022;let i=n,s=0;if(i>=2)for(;i>=2&&s<e;)s++,i=i/2;else for(;i<1&&s>r;)i=i*2,s--;const o=n*Math.pow(2,-s),a=o*n_&1048575,l=o*vf>>>0;Vt=(t<<31|s+1023<<20|a)>>>0,jt=l},Bo=function(n,t){return t*je+(n>>>0)},El=function(n,t){const e=t&2147483648;e&&(n=~n+1>>>0,t=~t>>>0,n==0&&(t=t+1>>>0));const r=Bo(n,t);return e?-r:r},u_=function(n,t){return bf(n,t,El)},Ih=function(n,t){const e=n>>>0&255,r=n>>>8&255,i=n>>>16&255,s=n>>>24&255,o=t>>>0&255,a=t>>>8&255,l=t>>>16&255,c=t>>>24&255;return String.fromCharCode(e,r,i,s,o,a,l,c)};function d_(n){const t=(n>>31)*2+1,e=n>>>23&255,r=n&8388607;return e==255?r?NaN:t*(1/0):e==0?t*Math.pow(2,-149)*r:t*Math.pow(2,e-150)*(r+Math.pow(2,23))}const f_=function(n,t){const e=(t>>31)*2+1,r=t>>>20&2047,i=je*(t&1048575)+n;return r==2047?i?NaN:e*(1/0):r==0?e*Math.pow(2,-1074)*i:e*Math.pow(2,r-1075)*(i+vf)},Pl=function(n,t){if(t<=2097151)return Bo(n,t).toString();const e=n&16777215,r=(n>>>24|t<<8)>>>0&16777215,i=t>>16&65535;let s=e+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l);function c(h,u){const d=h?String(h):"";return u?"0000000".slice(d.length)+d:d}return c(a,0)+c(o,a)+c(s,1)},qa=function(n,t){const e=t&2147483648;if(e){n=~n+1>>>0;const i=n==0?1:0;t=~t+i>>>0}const r=Pl(n,t);return e?"-"+r:r};class Br{static alloc(t,e,r){const i=Br.instanceCache_.pop();return i?(t&&i.setBlock(t,e,r),i):new Br(t,e,r)}constructor(t,e,r){this.bytes_=void 0,this.start_=0,this.end_=0,this.cursor_=0,this.error_=!1,t&&this.setBlock(t,e,r)}free(){this.clear(),Br.instanceCache_.length<100&&Br.instanceCache_.push(this)}clone(){return Br.alloc(this.bytes_,this.start_,this.end_-this.start_)}clear(){this.bytes_=void 0,this.start_=0,this.end_=0,this.cursor_=0,this.error_=!1}getBuffer(){return this.bytes_}setBlock(t,e,r){this.bytes_=wf(t),this.start_=e??0,this.end_=r!==void 0?this.start_+r:this.bytes_.length,this.cursor_=this.start_}getEnd(){return this.end_}setEnd(t){this.end_=t}reset(){this.cursor_=this.start_}getCursor(){return this.cursor_}setCursor(t){this.cursor_=t}advance(t){this.cursor_+=t,F(this.cursor_<=this.end_)}atEnd(){return this.cursor_==this.end_}pastEnd(){return this.cursor_>this.end_}getError(){return this.error_||this.cursor_<0||this.cursor_>this.end_}readSplitVarint64(t){let e=128,r=0,i=0;for(let s=0;s<4&&e>=128;s++)e=this.bytes_[this.cursor_++],r|=(e&127)<<s*7;if(e>=128&&(e=this.bytes_[this.cursor_++],r|=(e&127)<<28,i|=(e&127)>>4),e>=128)for(let s=0;s<5&&e>=128;s++)e=this.bytes_[this.cursor_++],i|=(e&127)<<s*7+3;if(e<128)return t(r>>>0,i>>>0);de("Failed to read varint, encoding is invalid."),this.error_=!0}readSplitFixed64(t){const e=this.bytes_,r=this.cursor_;this.cursor_+=8;let i=0,s=0;for(let o=r+7;o>=r;o--)i=i<<8|e[o],s=s<<8|e[o+4];return t(i,s)}skipVarint(){for(;this.bytes_[this.cursor_]&128;)this.cursor_++;this.cursor_++}unskipVarint(t){for(;t>128;)this.cursor_--,t=t>>>7;this.cursor_--}readUnsignedVarint32(){let t;const e=this.bytes_;t=e[this.cursor_+0];let r=t&127;return t<128?(this.cursor_+=1,F(this.cursor_<=this.end_),r):(t=e[this.cursor_+1],r|=(t&127)<<7,t<128?(this.cursor_+=2,F(this.cursor_<=this.end_),r):(t=e[this.cursor_+2],r|=(t&127)<<14,t<128?(this.cursor_+=3,F(this.cursor_<=this.end_),r):(t=e[this.cursor_+3],r|=(t&127)<<21,t<128?(this.cursor_+=4,F(this.cursor_<=this.end_),r):(t=e[this.cursor_+4],r|=(t&15)<<28,t<128?(this.cursor_+=5,F(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,e[this.cursor_++]>=128&&e[this.cursor_++]>=128&&e[this.cursor_++]>=128&&e[this.cursor_++]>=128&&e[this.cursor_++]>=128&&F(!1),F(this.cursor_<=this.end_),r)))))}readSignedVarint32(){return this.readUnsignedVarint32()}readUnsignedVarint32String(){return this.readUnsignedVarint32().toString()}readSignedVarint32String(){return this.readSignedVarint32().toString()}readZigzagVarint32(){const t=this.readUnsignedVarint32();return t>>>1^-(t&1)}readUnsignedVarint64(){return this.readSplitVarint64(Bo)}readUnsignedVarint64String(){return this.readSplitVarint64(Pl)}readSignedVarint64(){return this.readSplitVarint64(El)}readSignedVarint64String(){return this.readSplitVarint64(qa)}readZigzagVarint64(){return this.readSplitVarint64(u_)}readSplitZigzagVarint64(t){return this.readSplitVarint64(function(e,r){return bf(e,r,t)})}readZigzagVarintHash64(){return this.readSplitZigzagVarint64(Ih)}readZigzagVarint64String(){return this.readSplitZigzagVarint64(qa)}readUint8(){const t=this.bytes_[this.cursor_+0];return this.cursor_+=1,F(this.cursor_<=this.end_),t}readUint16(){const t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,F(this.cursor_<=this.end_),t<<0|e<<8}readUint32(){const t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],i=this.bytes_[this.cursor_+3];return this.cursor_+=4,F(this.cursor_<=this.end_),(t<<0|e<<8|r<<16|i<<24)>>>0}readUint64(){const t=this.readUint32(),e=this.readUint32();return Bo(t,e)}readUint64String(){const t=this.readUint32(),e=this.readUint32();return Pl(t,e)}readInt8(){const t=this.bytes_[this.cursor_+0];return this.cursor_+=1,F(this.cursor_<=this.end_),t<<24>>24}readInt16(){const t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,F(this.cursor_<=this.end_),(t<<0|e<<8)<<16>>16}readInt32(){const t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],i=this.bytes_[this.cursor_+3];return this.cursor_+=4,F(this.cursor_<=this.end_),t<<0|e<<8|r<<16|i<<24}readInt64(){const t=this.readUint32(),e=this.readUint32();return El(t,e)}readInt64String(){const t=this.readUint32(),e=this.readUint32();return qa(t,e)}readFloat(){const t=this.readUint32();return d_(t)}readDouble(){const t=this.readUint32(),e=this.readUint32();return f_(t,e)}readBool(){return!!this.bytes_[this.cursor_++]}readEnum(){return this.readSignedVarint32()}readString(t){return _f(this.readBytes(t))}readStringWithLength(){const t=this.readUnsignedVarint32();return this.readString(t)}readBytes(t){if(t<0||this.cursor_+t>this.bytes_.length)return this.error_=!0,de("Invalid byte length!"),new Uint8Array(0);const e=this.bytes_.subarray(this.cursor_,this.cursor_+t);return this.cursor_+=t,F(this.cursor_<=this.end_),e}readVarintHash64(){return this.readSplitVarint64(Ih)}readFixedHash64(){const t=this.bytes_,e=this.cursor_,r=t[e+0],i=t[e+1],s=t[e+2],o=t[e+3],a=t[e+4],l=t[e+5],c=t[e+6],h=t[e+7];return this.cursor_+=8,String.fromCharCode(r,i,s,o,a,l,c,h)}}Br.instanceCache_=[];class Ce{static alloc(t,e,r){const i=Ce.instanceCache_.pop();return i?(t&&i.decoder_.setBlock(t,e,r),i):new Ce(t,e,r)}constructor(t=void 0,e=void 0,r=void 0){this.decoder_=Br.alloc(t,e,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=Bs,this.nextWireType_=I.INVALID,this.error_=!1,this.readCallbacks_={}}free(){this.decoder_.clear(),this.nextField_=Bs,this.nextWireType_=I.INVALID,this.error_=!1,this.readCallbacks_={},Ce.instanceCache_.length<100&&Ce.instanceCache_.push(this)}getFieldCursor(){return this.fieldCursor_}getCursor(){return this.decoder_.getCursor()}getBuffer(){return this.decoder_.getBuffer()}getFieldNumber(){return this.nextField_}getWireType(){return this.nextWireType_}isDelimited(){return this.nextWireType_==I.DELIMITED}isEndGroup(){return this.nextWireType_==I.END_GROUP}getError(){return this.error_||this.decoder_.getError()}setBlock(t,e,r){this.decoder_.setBlock(t,e,r),this.nextField_=Bs,this.nextWireType_=I.INVALID}reset(){this.decoder_.reset(),this.nextField_=Bs,this.nextWireType_=I.INVALID}advance(t){this.decoder_.advance(t)}nextField(){if(this.decoder_.atEnd())return!1;if(this.getError())return de("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();const t=this.decoder_.readUnsignedVarint32(),e=t>>>3,r=t&7;return r!=I.VARINT&&r!=I.FIXED32&&r!=I.FIXED64&&r!=I.DELIMITED&&r!=I.START_GROUP&&r!=I.END_GROUP?(de(`Invalid wire type: ${r} (at position ${this.fieldCursor_})`),this.error_=!0,!1):(this.nextField_=e,this.nextWireType_=r,!0)}unskipHeader(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)}skipMatchingFields(){const t=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==t;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()}skipVarintField(){if(this.nextWireType_!=I.VARINT){de("Invalid wire type for skipVarintField"),this.skipField();return}this.decoder_.skipVarint()}skipDelimitedField(){if(this.nextWireType_!=I.DELIMITED){de("Invalid wire type for skipDelimitedField"),this.skipField();return}const t=this.decoder_.readUnsignedVarint32();this.decoder_.advance(t)}skipFixed32Field(){if(this.nextWireType_!=I.FIXED32){de("Invalid wire type for skipFixed32Field"),this.skipField();return}this.decoder_.advance(4)}skipFixed64Field(){if(this.nextWireType_!=I.FIXED64){de("Invalid wire type for skipFixed64Field"),this.skipField();return}this.decoder_.advance(8)}skipGroup(){const t=this.nextField_;for(;;){if(!this.nextField()){de("Unmatched start-group tag: stream EOF"),this.error_=!0;return}if(this.nextWireType_==I.END_GROUP){if(this.nextField_!=t){de("Unmatched end-group tag"),this.error_=!0;return}return}this.skipField()}}skipField(){switch(this.nextWireType_){case I.VARINT:this.skipVarintField();break;case I.FIXED64:this.skipFixed64Field();break;case I.DELIMITED:this.skipDelimitedField();break;case I.FIXED32:this.skipFixed32Field();break;case I.START_GROUP:this.skipGroup();break;default:de("Invalid wire encoding for field.")}}registerReadCallback(t,e){F(!this.readCallbacks_[t]),this.readCallbacks_[t]=e}runReadCallback(t){const e=this.readCallbacks_[t];return F(!!e),e(this)}readAny(t){switch(this.nextWireType_=t_(t),t){case rt.DOUBLE:return this.readDouble();case rt.FLOAT:return this.readFloat();case rt.INT64:return this.readInt64();case rt.UINT64:return this.readUint64();case rt.INT32:return this.readInt32();case rt.FIXED64:return this.readFixed64();case rt.FIXED32:return this.readFixed32();case rt.BOOL:return this.readBool();case rt.STRING:return this.readString();case rt.GROUP:de("Group field type not supported in readAny()");break;case rt.MESSAGE:de("Message field type not supported in readAny()");break;case rt.BYTES:return this.readBytes();case rt.UINT32:return this.readUint32();case rt.ENUM:return this.readEnum();case rt.SFIXED32:return this.readSfixed32();case rt.SFIXED64:return this.readSfixed64();case rt.SINT32:return this.readSint32();case rt.SINT64:return this.readSint64();case rt.FHASH64:return this.readFixedHash64();case rt.VHASH64:return this.readVarintHash64();default:de("Invalid field type in readAny()")}return 0}readMessage(t,e){F(this.nextWireType_==I.DELIMITED);const r=this.decoder_.getEnd(),i=this.decoder_.readUnsignedVarint32(),s=this.decoder_.getCursor()+i;this.decoder_.setEnd(s),e(t,this),this.decoder_.setCursor(s),this.decoder_.setEnd(r)}readGroup(t,e,r){F(this.nextWireType_==I.START_GROUP),F(this.nextField_==t),r(e,this),!this.error_&&this.nextWireType_!=I.END_GROUP&&(de("Group submessage did not end with an END_GROUP tag"),this.error_=!0)}getFieldDecoder(){F(this.nextWireType_==I.DELIMITED);const t=this.decoder_.readUnsignedVarint32(),e=this.decoder_.getCursor(),r=e+t,i=Br.alloc(this.decoder_.getBuffer(),e,t);return this.decoder_.setCursor(r),i}readInt32(){return F(this.nextWireType_==I.VARINT),this.decoder_.readSignedVarint32()}readInt32String(){return F(this.nextWireType_==I.VARINT),this.decoder_.readSignedVarint32String()}readInt64(){return F(this.nextWireType_==I.VARINT),this.decoder_.readSignedVarint64()}readInt64String(){return F(this.nextWireType_==I.VARINT),this.decoder_.readSignedVarint64String()}readUint32(){return F(this.nextWireType_==I.VARINT),this.decoder_.readUnsignedVarint32()}readUint32String(){return F(this.nextWireType_==I.VARINT),this.decoder_.readUnsignedVarint32String()}readUint64(){return F(this.nextWireType_==I.VARINT),this.decoder_.readUnsignedVarint64()}readUint64String(){return F(this.nextWireType_==I.VARINT),this.decoder_.readUnsignedVarint64String()}readSint32(){return F(this.nextWireType_==I.VARINT),this.decoder_.readZigzagVarint32()}readSint64(){return F(this.nextWireType_==I.VARINT),this.decoder_.readZigzagVarint64()}readSint64String(){return F(this.nextWireType_==I.VARINT),this.decoder_.readZigzagVarint64String()}readFixed32(){return F(this.nextWireType_==I.FIXED32),this.decoder_.readUint32()}readFixed64(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readUint64()}readFixed64String(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readUint64String()}readSfixed32(){return F(this.nextWireType_==I.FIXED32),this.decoder_.readInt32()}readSfixed32String(){return F(this.nextWireType_==I.FIXED32),this.decoder_.readInt32().toString()}readSfixed64(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readInt64()}readSfixed64String(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readInt64String()}readFloat(){return F(this.nextWireType_==I.FIXED32),this.decoder_.readFloat()}readDouble(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readDouble()}readBool(){return F(this.nextWireType_==I.VARINT),!!this.decoder_.readUnsignedVarint32()}readEnum(){return F(this.nextWireType_==I.VARINT),this.decoder_.readSignedVarint64()}readString(){F(this.nextWireType_==I.DELIMITED);const t=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(t)}readBytes(){F(this.nextWireType_==I.DELIMITED);const t=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(t)}readVarintHash64(){return F(this.nextWireType_==I.VARINT),this.decoder_.readVarintHash64()}readSintHash64(){return F(this.nextWireType_==I.VARINT),this.decoder_.readZigzagVarintHash64()}readSplitVarint64(t){return F(this.nextWireType_==I.VARINT),this.decoder_.readSplitVarint64(t)}readFixedHash64(){return F(this.nextWireType_==I.FIXED64),this.decoder_.readFixedHash64()}readSplitFixed64(t){return F(this.nextWireType_==I.FIXED64),this.decoder_.readSplitFixed64(t)}readPackedField_(t){F(this.nextWireType_==I.DELIMITED);const e=this.decoder_.readUnsignedVarint32(),r=this.decoder_.getCursor()+e,i=[];for(;this.decoder_.getCursor()<r;)i.push(t.call(this.decoder_));return i}readPackedInt32(){return this.readPackedField_(this.decoder_.readSignedVarint32)}readPackedInt32String(){return this.readPackedField_(this.decoder_.readSignedVarint32String)}readPackedInt64(){return this.readPackedField_(this.decoder_.readSignedVarint64)}readPackedInt64String(){return this.readPackedField_(this.decoder_.readSignedVarint64String)}readPackedUint32(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)}readPackedUint32String(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)}readPackedUint64(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)}readPackedUint64String(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)}readPackedSint32(){return this.readPackedField_(this.decoder_.readZigzagVarint32)}readPackedSint64(){return this.readPackedField_(this.decoder_.readZigzagVarint64)}readPackedSint64String(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)}readPackedFixed32(){return this.readPackedField_(this.decoder_.readUint32)}readPackedFixed64(){return this.readPackedField_(this.decoder_.readUint64)}readPackedFixed64String(){return this.readPackedField_(this.decoder_.readUint64String)}readPackedSfixed32(){return this.readPackedField_(this.decoder_.readInt32)}readPackedSfixed64(){return this.readPackedField_(this.decoder_.readInt64)}readPackedSfixed64String(){return this.readPackedField_(this.decoder_.readInt64String)}readPackedFloat(){return this.readPackedField_(this.decoder_.readFloat)}readPackedDouble(){return this.readPackedField_(this.decoder_.readDouble)}readPackedBool(){return this.readPackedField_(this.decoder_.readBool)}readPackedEnum(){return this.readPackedField_(this.decoder_.readEnum)}readPackedVarintHash64(){return this.readPackedField_(this.decoder_.readVarintHash64)}readPackedFixedHash64(){return this.readPackedField_(this.decoder_.readFixedHash64)}}Ce.instanceCache_=[];class g_{constructor(){this.buffer_=[]}length(){return this.buffer_.length}end(){const t=this.buffer_;return this.buffer_=[],t}writeSplitVarint64(t,e){for(F(t==Math.floor(t)),F(e==Math.floor(e)),F(t>=0&&t<je),F(e>=0&&e<je);e>0||t>127;)this.buffer_.push(t&127|128),t=(t>>>7|e<<25)>>>0,e=e>>>7;this.buffer_.push(t)}writeSplitFixed64(t,e){F(t==Math.floor(t)),F(e==Math.floor(e)),F(t>=0&&t<je),F(e>=0&&e<je),this.writeUint32(t),this.writeUint32(e)}writeUnsignedVarint32(t){for(F(t==Math.floor(t)),F(t>=0&&t<je);t>127;)this.buffer_.push(t&127|128),t=t>>>7;this.buffer_.push(t)}writeSignedVarint32(t){if(F(t==Math.floor(t)),F(t>=-fe&&t<fe),t>=0){this.writeUnsignedVarint32(t);return}for(let e=0;e<9;e++)this.buffer_.push(t&127|128),t=t>>7;this.buffer_.push(1)}writeUnsignedVarint64(t){F(t==Math.floor(t)),F(t>=0&&t<Vo),Ga(t),this.writeSplitVarint64(jt,Vt)}writeSignedVarint64(t){F(t==Math.floor(t)),F(t>=-Re&&t<Re),Ga(t),this.writeSplitVarint64(jt,Vt)}writeZigzagVarint32(t){F(t==Math.floor(t)),F(t>=-fe&&t<fe),this.writeUnsignedVarint32((t<<1^t>>31)>>>0)}writeZigzagVarint64(t){F(t==Math.floor(t)),F(t>=-Re&&t<Re),l_(t),this.writeSplitVarint64(jt,Vt)}writeZigzagVarint64String(t){this.writeZigzagVarintHash64(Ml(t))}writeZigzagVarintHash64(t){Ns(t),kl(jt,Vt,(e,r)=>{this.writeSplitVarint64(e>>>0,r>>>0)})}writeUint8(t){F(t==Math.floor(t)),F(t>=0&&t<256),this.buffer_.push(t>>>0&255)}writeUint16(t){F(t==Math.floor(t)),F(t>=0&&t<65536),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)}writeUint32(t){F(t==Math.floor(t)),F(t>=0&&t<je),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)}writeUint64(t){F(t==Math.floor(t)),F(t>=0&&t<Vo),xf(t),this.writeUint32(jt),this.writeUint32(Vt)}writeInt8(t){F(t==Math.floor(t)),F(t>=-128&&t<128),this.buffer_.push(t>>>0&255)}writeInt16(t){F(t==Math.floor(t)),F(t>=-32768&&t<32768),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)}writeInt32(t){F(t==Math.floor(t)),F(t>=-fe&&t<fe),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)}writeInt64(t){F(t==Math.floor(t)),F(t>=-Re&&t<Re),Ga(t),this.writeSplitFixed64(jt,Vt)}writeInt64String(t){F(t==Math.floor(t)),F(+t>=-Re&&+t<Re),Ns(Ml(t)),this.writeSplitFixed64(jt,Vt)}writeFloat(t){F(t===1/0||t===-1/0||isNaN(t)||t>=-Dl&&t<=Dl),c_(t),this.writeUint32(jt)}writeDouble(t){F(t===1/0||t===-1/0||isNaN(t)||t>=-Ol&&t<=Ol),h_(t),this.writeUint32(jt),this.writeUint32(Vt)}writeBool(t){F(typeof t=="boolean"||typeof t=="number"),this.buffer_.push(t?1:0)}writeEnum(t){F(t==Math.floor(t)),F(t>=-fe&&t<fe),this.writeSignedVarint32(t)}writeBytes(t){this.buffer_.push(...t)}writeVarintHash64(t){Ns(t),this.writeSplitVarint64(jt,Vt)}writeFixedHash64(t){Ns(t),this.writeUint32(jt),this.writeUint32(Vt)}writeString(t){const e=this.buffer_.length;return yf(t).forEach(s=>this.buffer_.push(s)),this.buffer_.length-e}}class _n{constructor(t,e,r){this.bigint=t,this.lo=e,this.hi=r}toString(){return this.bigint.toString()}static fromString(t){const e=BigInt.asUintN(64,BigInt(t)),r=Number(BigInt.asUintN(32,e)),i=Number(e>>BigInt(32));return new _n(e,r,i)}}class rs extends _n{static fromString(t){const e=BigInt.asIntN(64,BigInt(t)),{lo:r,hi:i}=_n.fromString(t);return new rs(e,r,i)}}class Mr{constructor(){this.blocks_=[],this.totalLength_=0,this.encoder_=new g_}appendUint8Array_(t){const e=this.encoder_.end();this.blocks_.push(e),this.blocks_.push(t),this.totalLength_+=e.length+t.length}beginDelimited_(t){this.writeFieldHeader_(t,I.DELIMITED);const e=this.encoder_.end();return this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e}endDelimited_(t){const e=t.pop()??0;let r=this.totalLength_+this.encoder_.length()-e;for(F(r>=0);r>127;)t.push(r&127|128),r=r>>>7,this.totalLength_++;t.push(r),this.totalLength_++}writeSerializedMessage(t,e,r){this.appendUint8Array_(t.subarray(e,r))}maybeWriteSerializedMessage(t,e,r){t!=null&&e!=null&&r!=null&&this.writeSerializedMessage(t,e,r)}reset(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0}getResultBuffer(){const t=new Uint8Array(this.totalLength_+this.encoder_.length()),e=this.blocks_,r=e.length;let i=0;for(let o=0;o<r;o++){const a=e[o];t.set(a,i),i+=a.length}const s=this.encoder_.end();return t.set(s,i),i+=s.length,F(i==t.length),this.blocks_=[t],t}writeFieldHeader_(t,e){F(t>=1&&t==Math.floor(t));const r=t*8+e;this.encoder_.writeUnsignedVarint32(r)}writeAny(t,e,r){switch(t){case rt.DOUBLE:this.writeDouble(e,r);return;case rt.FLOAT:this.writeFloat(e,r);return;case rt.INT64:this.writeInt64(e,r);return;case rt.UINT64:this.writeUint64(e,r);return;case rt.INT32:this.writeInt32(e,r);return;case rt.FIXED64:this.writeFixed64(e,r);return;case rt.FIXED32:this.writeFixed32(e,r);return;case rt.BOOL:this.writeBool(e,r);return;case rt.STRING:this.writeString(e,r);return;case rt.GROUP:de("Group field type not supported in writeAny()");return;case rt.MESSAGE:de("Message field type not supported in writeAny()");return;case rt.BYTES:this.writeBytes(e,r);return;case rt.UINT32:this.writeUint32(e,r);return;case rt.ENUM:this.writeEnum(e,r);return;case rt.SFIXED32:this.writeSfixed32(e,r);return;case rt.SFIXED64:this.writeSfixed64(e,r);return;case rt.SINT32:this.writeSint32(e,r);return;case rt.SINT64:this.writeSint64(e,r);return;case rt.FHASH64:this.writeFixedHash64(e,r);return;case rt.VHASH64:this.writeVarintHash64(e,r);return;default:de("Invalid field type in writeAny()");return}}writeUnsignedVarint32_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeUnsignedVarint32(e))}writeSignedVarint32_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSignedVarint32(e))}writeUnsignedVarint64_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeUnsignedVarint64(e))}writeSignedVarint64_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSignedVarint64(e))}writeZigzagVarint32_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeZigzagVarint32(e))}writeZigzagVarint64_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeZigzagVarint64(e))}writeZigzagVarint64String_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeZigzagVarint64String(e))}writeZigzagVarintHash64_(t,e){e!=null&&(this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeZigzagVarintHash64(e))}writeInt32(t,e){e!=null&&(F(e>=-fe&&e<fe),this.writeSignedVarint32_(t,e))}writeInt32String(t,e){if(e==null)return;const r=parseInt(e,10);F(r>=-fe&&r<fe),this.writeSignedVarint32_(t,r)}writeInt64(t,e){e!=null&&(F(e>=-Re&&e<Re),this.writeSignedVarint64_(t,e))}writeInt64String(t,e){if(e==null)return;const r=rs.fromString(e);this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}writeUint32(t,e){e!=null&&(F(e>=0&&e<je),this.writeUnsignedVarint32_(t,e))}writeUint32String(t,e){if(e==null)return;const r=parseInt(e,10);F(r>=0&&r<je),this.writeUnsignedVarint32_(t,r)}writeUint64(t,e){e!=null&&(F(e>=0&&e<Vo),this.writeUnsignedVarint64_(t,e))}writeUint64String(t,e){if(e==null)return;const r=_n.fromString(e);this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}writeSint32(t,e){e!=null&&(F(e>=-fe&&e<fe),this.writeZigzagVarint32_(t,e))}writeSint64(t,e){e!=null&&(F(e>=-Re&&e<Re),this.writeZigzagVarint64_(t,e))}writeSintHash64(t,e){e!=null&&this.writeZigzagVarintHash64_(t,e)}writeSint64String(t,e){e!=null&&this.writeZigzagVarint64String_(t,e)}writeFixed32(t,e){e!=null&&(F(e>=0&&e<je),this.writeFieldHeader_(t,I.FIXED32),this.encoder_.writeUint32(e))}writeFixed64(t,e){e!=null&&(F(e>=0&&e<Vo),this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeUint64(e))}writeFixed64String(t,e){if(e==null)return;const r=_n.fromString(e);this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}writeSfixed32(t,e){e!=null&&(F(e>=-fe&&e<fe),this.writeFieldHeader_(t,I.FIXED32),this.encoder_.writeInt32(e))}writeSfixed64(t,e){e!=null&&(F(e>=-Re&&e<Re),this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeInt64(e))}writeSfixed64String(t,e){if(e==null)return;const r=rs.fromString(e);this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}writeFloat(t,e){e!=null&&(this.writeFieldHeader_(t,I.FIXED32),this.encoder_.writeFloat(e))}writeDouble(t,e){e!=null&&(this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeDouble(e))}writeBool(t,e){e!=null&&(F(typeof e=="boolean"||typeof e=="number"),this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeBool(e))}writeEnum(t,e){e!=null&&(F(e>=-fe&&e<fe),this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSignedVarint32(e))}writeString(t,e){if(e==null)return;const r=this.beginDelimited_(t);this.encoder_.writeString(e),this.endDelimited_(r)}writeBytes(t,e){if(e==null)return;const r=wf(e);this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(r.length),this.appendUint8Array_(r)}writeMessage(t,e,r){if(e==null)return;const i=this.beginDelimited_(t);r(e,this),this.endDelimited_(i)}writeMessageSet(t,e,r){if(e==null)return;this.writeFieldHeader_(1,I.START_GROUP),this.writeFieldHeader_(2,I.VARINT),this.encoder_.writeSignedVarint32(t);const i=this.beginDelimited_(3);r(e,this),this.endDelimited_(i),this.writeFieldHeader_(1,I.END_GROUP)}writeGroup(t,e,r){e!=null&&(this.writeFieldHeader_(t,I.START_GROUP),r(e,this),this.writeFieldHeader_(t,I.END_GROUP))}writeFixedHash64(t,e){e!=null&&(F(e.length==8),this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeFixedHash64(e))}writeVarintHash64(t,e){e!=null&&(F(e.length==8),this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeVarintHash64(e))}writeSplitFixed64(t,e,r){this.writeFieldHeader_(t,I.FIXED64),this.encoder_.writeSplitFixed64(e,r)}writeSplitVarint64(t,e,r){this.writeFieldHeader_(t,I.VARINT),this.encoder_.writeSplitVarint64(e,r)}writeSplitZigzagVarint64(t,e,r){this.writeFieldHeader_(t,I.VARINT);const i=this.encoder_;kl(e,r,function(s,o){i.writeSplitVarint64(s>>>0,o>>>0)})}writeRepeatedInt32(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeSignedVarint32_(t,e[r])}writeRepeatedInt32String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeInt32String(t,e[r])}writeRepeatedInt64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeSignedVarint64_(t,e[r])}writeRepeatedSplitFixed64(t,e,r,i){if(e!=null)for(let s=0;s<e.length;s++)this.writeSplitFixed64(t,r(e[s]),i(e[s]))}writeRepeatedSplitVarint64(t,e,r,i){if(e!=null)for(let s=0;s<e.length;s++)this.writeSplitVarint64(t,r(e[s]),i(e[s]))}writeRepeatedSplitZigzagVarint64(t,e,r,i){if(e!=null)for(let s=0;s<e.length;s++)this.writeSplitZigzagVarint64(t,r(e[s]),i(e[s]))}writeRepeatedInt64String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeInt64String(t,e[r])}writeRepeatedUint32(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeUnsignedVarint32_(t,e[r])}writeRepeatedUint32String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeUint32String(t,e[r])}writeRepeatedUint64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeUnsignedVarint64_(t,e[r])}writeRepeatedUint64String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeUint64String(t,e[r])}writeRepeatedSint32(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeZigzagVarint32_(t,e[r])}writeRepeatedSint64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeZigzagVarint64_(t,e[r])}writeRepeatedSint64String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeZigzagVarint64String_(t,e[r])}writeRepeatedSintHash64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeZigzagVarintHash64_(t,e[r])}writeRepeatedFixed32(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeFixed32(t,e[r])}writeRepeatedFixed64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeFixed64(t,e[r])}writeRepeatedFixed64String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeFixed64String(t,e[r])}writeRepeatedSfixed32(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeSfixed32(t,e[r])}writeRepeatedSfixed64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeSfixed64(t,e[r])}writeRepeatedSfixed64String(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeSfixed64String(t,e[r])}writeRepeatedFloat(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeFloat(t,e[r])}writeRepeatedDouble(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeDouble(t,e[r])}writeRepeatedBool(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeBool(t,e[r])}writeRepeatedEnum(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeEnum(t,e[r])}writeRepeatedString(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeString(t,e[r])}writeRepeatedBytes(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeBytes(t,e[r])}writeRepeatedMessage(t,e,r){if(e!=null)for(let i=0;i<e.length;i++){const s=this.beginDelimited_(t);r(e[i],this),this.endDelimited_(s)}}writeRepeatedGroup(t,e,r){if(e!=null)for(let i=0;i<e.length;i++)this.writeFieldHeader_(t,I.START_GROUP),r(e[i],this),this.writeFieldHeader_(t,I.END_GROUP)}writeRepeatedFixedHash64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeFixedHash64(t,e[r])}writeRepeatedVarintHash64(t,e){if(e!=null)for(let r=0;r<e.length;r++)this.writeVarintHash64(t,e[r])}writePackedInt32(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeSignedVarint32(e[i]);this.endDelimited_(r)}writePackedInt32String(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeSignedVarint32(parseInt(e[i],10));this.endDelimited_(r)}writePackedInt64(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeSignedVarint64(e[i]);this.endDelimited_(r)}writePackedSplitFixed64(t,e,r,i){if(e==null)return;const s=this.beginDelimited_(t);for(let o=0;o<e.length;o++)this.encoder_.writeSplitFixed64(r(e[o]),i(e[o]));this.endDelimited_(s)}writePackedSplitVarint64(t,e,r,i){if(e==null)return;const s=this.beginDelimited_(t);for(let o=0;o<e.length;o++)this.encoder_.writeSplitVarint64(r(e[o]),i(e[o]));this.endDelimited_(s)}writePackedSplitZigzagVarint64(t,e,r,i){if(e==null)return;const s=this.beginDelimited_(t),o=this.encoder_;for(let a=0;a<e.length;a++)kl(r(e[a]),i(e[a]),function(l,c){o.writeSplitVarint64(l>>>0,c>>>0)});this.endDelimited_(s)}writePackedInt64String(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++){const s=rs.fromString(e[i]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(r)}writePackedUint32(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeUnsignedVarint32(e[i]);this.endDelimited_(r)}writePackedUint32String(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeUnsignedVarint32(parseInt(e[i],10));this.endDelimited_(r)}writePackedUint64(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeUnsignedVarint64(e[i]);this.endDelimited_(r)}writePackedUint64String(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++){const s=_n.fromString(e[i]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(r)}writePackedSint32(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeZigzagVarint32(e[i]);this.endDelimited_(r)}writePackedSint64(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeZigzagVarint64(e[i]);this.endDelimited_(r)}writePackedSint64String(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeZigzagVarintHash64(Ml(e[i]));this.endDelimited_(r)}writePackedSintHash64(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeZigzagVarintHash64(e[i]);this.endDelimited_(r)}writePackedFixed32(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*4);for(let r=0;r<e.length;r++)this.encoder_.writeUint32(e[r])}}writePackedFixed64(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++)this.encoder_.writeUint64(e[r])}}writePackedFixed64String(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++){const i=_n.fromString(e[r]);this.encoder_.writeSplitFixed64(i.lo,i.hi)}}}writePackedSfixed32(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*4);for(let r=0;r<e.length;r++)this.encoder_.writeInt32(e[r])}}writePackedSfixed64(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++)this.encoder_.writeInt64(e[r])}}writePackedSfixed64String(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++)this.encoder_.writeInt64String(e[r])}}writePackedFloat(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*4);for(let r=0;r<e.length;r++)this.encoder_.writeFloat(e[r])}}writePackedDouble(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++)this.encoder_.writeDouble(e[r])}}writePackedBool(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length);for(let r=0;r<e.length;r++)this.encoder_.writeBool(e[r])}}writePackedEnum(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeEnum(e[i]);this.endDelimited_(r)}writePackedFixedHash64(t,e){if(e!=null&&e.length){this.writeFieldHeader_(t,I.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length*8);for(let r=0;r<e.length;r++)this.encoder_.writeFixedHash64(e[r])}}writePackedVarintHash64(t,e){if(!(e!=null&&e.length))return;const r=this.beginDelimited_(t);for(let i=0;i<e.length;i++)this.encoder_.writeVarintHash64(e[i]);this.endDelimited_(r)}}class No{constructor(t){this.code=t.code,this.msg=t.msg,this.meta=t.meta}}class p_ extends No{constructor(t){super(t)}}const m_={canceled:408,unknown:500,invalid_argument:400,malformed:400,deadline_exceeded:408,not_found:404,bad_route:404,already_exists:409,permission_denied:403,unauthenticated:401,resource_exhausted:403,failed_precondition:412,aborted:409,out_of_range:400,unimplemented:501,internal:500,unavailable:503,data_loss:500};function v_(n){return typeof n=="object"&&n!==null?"code"in n&&n.code in m_:!1}function __(n){return 300>=n&&n<=400?"internal":{401:"unauthenticated",403:"permission_denied",404:"bad_route",429:"unavailable",502:"unavailable",503:"unavailable",504:"unavailable"}[n]??"internal"}async function y_(n){const t=await n.text();try{const e=JSON.parse(t);if(v_(e))return new No(e)}catch{}return new p_({code:__(n.status),msg:"HTTP Error from Intermediary Proxy",meta:{http_error_from_intermediary:"true",status_code:n.status.toString(),body:t,location:n.headers.get("location")??void 0}})}function w_(){const n={};return{on:(t,e)=>{var r;n[t]??(n[t]=[]),(r=n[t])==null||r.push(e)},off:(t,e)=>{var r;n[t]=(r=n[t])==null?void 0:r.filter(i=>i!==e)},emit:(t,...e)=>{var r;(r=n[t])==null||r.forEach(i=>{i(...e)})}}}const Sf=[],ms=w_(),b_=async(n,t)=>fetch(n,t),yn={baseURL:"",headers:{},prefix:"/twirp",use(n){return Sf.push(n),yn},on:(...n)=>(ms.on(...n),yn),off:(...n)=>(ms.off(...n),yn),rpcTransport:b_};async function x_(n,t){let e=n,r=1;const i=[...Sf,t];try{return await i[0](n,function s(o){e=o;const a=i[r];return r++,a(o,s)})}catch(s){const o=s instanceof No?s:new No({code:"internal",msg:"client error"});throw ms.emit("error",e,o),s}}function S_(n={},t){const e=n.baseURL??yn.baseURL??"",r=n.prefix??yn.prefix??"",i=e+r+t,s=n.rpcTransport??yn.rpcTransport;return{url:i,headers:{...yn.headers,...n.headers},rpcTransport:s}}async function C_(n,t,e,r){return x_(S_(r,t),async i=>{ms.emit("requestPrepared",i);const s=await i.rpcTransport(i.url,{method:"POST",headers:{accept:n,"content-type":n,...i.headers},body:e});if(ms.emit("responseReceived",i),!s.ok)throw await y_(s);switch(n){case"application/protobuf":{const o=await s.arrayBuffer();return new Uint8Array(o)}case"application/json":return s.text();default:return n}})}function ma(n,t,e){return C_("application/protobuf",n,t,e)}async function T_(n,t){const e=await ma("/proto.Relapse/GetSettings",M_.encode(n),t);return bo.decode(e)}async function D_(n,t){const e=await ma("/proto.Relapse/SetSettings",Sn.encode(n),t);return Sn.decode(e)}async function O_(n,t){const e=await ma("/proto.Relapse/LoadCapturedDay",ns.encode(n),t);return wo.decode(e)}async function k_(n,t){const e=await ma("/proto.Relapse/LoadCaptureOcr",ns.encode(n),t);return xo.decode(e)}const di={encode:function(n){return di._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return di._readMessage(di.initialize(),new Ce(n))},initialize:function(){return{RowNum:0,AppName:"",Filepath:"",Fullpath:"",CaptureSizeBytes:0,Dt:"",Bod:"",IsReal:!1}},_writeMessage:function(n,t){return n.RowNum&&t.writeInt32(1,n.RowNum),n.AppName&&t.writeString(2,n.AppName),n.Filepath&&t.writeString(4,n.Filepath),n.Fullpath&&t.writeString(5,n.Fullpath),n.CaptureSizeBytes&&t.writeInt32(6,n.CaptureSizeBytes),n.Dt&&t.writeString(8,n.Dt),n.Bod&&t.writeString(9,n.Bod),n.IsReal&&t.writeBool(10,n.IsReal),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.RowNum=t.readInt32();break}case 2:{n.AppName=t.readString();break}case 4:{n.Filepath=t.readString();break}case 5:{n.Fullpath=t.readString();break}case 6:{n.CaptureSizeBytes=t.readInt32();break}case 8:{n.Dt=t.readString();break}case 9:{n.Bod=t.readString();break}case 10:{n.IsReal=t.readBool();break}default:{t.skipField();break}}return n}},fi={encode:function(n){return fi._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return fi._readMessage(fi.initialize(),new Ce(n))},initialize:function(){return{Bod:"",TotalCapturedMinutes:0,TotalCapturesCount:0,TotalCaptureSizeBytes:0}},_writeMessage:function(n,t){return n.Bod&&t.writeString(1,n.Bod),n.TotalCapturedMinutes&&t.writeInt32(2,n.TotalCapturedMinutes),n.TotalCapturesCount&&t.writeInt32(3,n.TotalCapturesCount),n.TotalCaptureSizeBytes&&t.writeInt32(4,n.TotalCaptureSizeBytes),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.Bod=t.readString();break}case 2:{n.TotalCapturedMinutes=t.readInt32();break}case 3:{n.TotalCapturesCount=t.readInt32();break}case 4:{n.TotalCaptureSizeBytes=t.readInt32();break}default:{t.skipField();break}}return n}},ns={encode:function(n){return ns._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return ns._readMessage(ns.initialize(),new Ce(n))},initialize:function(){return{Dt:""}},_writeMessage:function(n,t){return n.Dt&&t.writeString(1,n.Dt),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.Dt=t.readString();break}default:{t.skipField();break}}return n}},wo={encode:function(n){return wo._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return wo._readMessage(wo.initialize(),new Ce(n))},initialize:function(){return{Bod:"",Captures:[],Summary:fi.initialize()}},_writeMessage:function(n,t){var e;return n.Bod&&t.writeString(1,n.Bod),(e=n.Captures)!=null&&e.length&&t.writeRepeatedMessage(2,n.Captures,di._writeMessage),n.Summary&&t.writeMessage(3,n.Summary,fi._writeMessage),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.Bod=t.readString();break}case 2:{const r=di.initialize();t.readMessage(r,di._readMessage),n.Captures.push(r);break}case 3:{t.readMessage(n.Summary,fi._readMessage);break}default:{t.skipField();break}}return n}},Sn={encode:function(n){return Sn._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return Sn._readMessage(Sn.initialize(),new Ce(n))},initialize:function(){return{IsEnabled:!1,RetainForXDays:0,Rejections:[],OpenAutomaticallyAtLogin:!1,IsDumping:!1}},_writeMessage:function(n,t){var e;return n.IsEnabled&&t.writeBool(1,n.IsEnabled),n.RetainForXDays&&t.writeInt32(2,n.RetainForXDays),(e=n.Rejections)!=null&&e.length&&t.writeRepeatedString(3,n.Rejections),n.OpenAutomaticallyAtLogin&&t.writeBool(4,n.OpenAutomaticallyAtLogin),n.IsDumping&&t.writeBool(5,n.IsDumping),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.IsEnabled=t.readBool();break}case 2:{n.RetainForXDays=t.readInt32();break}case 3:{n.Rejections.push(t.readString());break}case 4:{n.OpenAutomaticallyAtLogin=t.readBool();break}case 5:{n.IsDumping=t.readBool();break}default:{t.skipField();break}}return n}},gi={encode:function(n){return gi._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return gi._readMessage(gi.initialize(),new Ce(n))},initialize:function(){return{CapturedApplications:[]}},_writeMessage:function(n,t){var e;return(e=n.CapturedApplications)!=null&&e.length&&t.writeRepeatedMessage(1,n.CapturedApplications,pi._writeMessage),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=pi.initialize();t.readMessage(r,pi._readMessage),n.CapturedApplications.push(r);break}default:{t.skipField();break}}return n}},pi={encode:function(n){return pi._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return pi._readMessage(pi.initialize(),new Ce(n))},initialize:function(){return{AppName:"",AppPath:""}},_writeMessage:function(n,t){return n.AppName&&t.writeString(1,n.AppName),n.AppPath&&t.writeString(2,n.AppPath),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.AppName=t.readString();break}case 2:{n.AppPath=t.readString();break}default:{t.skipField();break}}return n}},M_={encode:function(n){return new Uint8Array},decode:function(n){return{}},initialize:function(){return{}},_writeMessage:function(n,t){return t},_readMessage:function(n,t){return n}},bo={encode:function(n){return bo._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return bo._readMessage(bo.initialize(),new Ce(n))},initialize:function(){return{Settings:Sn.initialize(),SettingsOptions:gi.initialize()}},_writeMessage:function(n,t){return n.Settings&&t.writeMessage(1,n.Settings,Sn._writeMessage),n.SettingsOptions&&t.writeMessage(2,n.SettingsOptions,gi._writeMessage),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{t.readMessage(n.Settings,Sn._readMessage);break}case 2:{t.readMessage(n.SettingsOptions,gi._readMessage);break}default:{t.skipField();break}}return n}},xo={encode:function(n){return xo._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return xo._readMessage(xo.initialize(),new Ce(n))},initialize:function(){return{Meta:[],FullText:""}},_writeMessage:function(n,t){var e;return(e=n.Meta)!=null&&e.length&&t.writeRepeatedMessage(1,n.Meta,mi._writeMessage),n.FullText&&t.writeString(2,n.FullText),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{const r=mi.initialize();t.readMessage(r,mi._readMessage),n.Meta.push(r);break}case 2:{n.FullText=t.readString();break}default:{t.skipField();break}}return n}},mi={encode:function(n){return mi._writeMessage(n,new Mr).getResultBuffer()},decode:function(n){return mi._readMessage(mi.initialize(),new Ce(n))},initialize:function(){return{Text:"",Confidence:0,Height:0,Width:0,X:0,Y:0}},_writeMessage:function(n,t){return n.Text&&t.writeString(1,n.Text),n.Confidence&&t.writeDouble(2,n.Confidence),n.Height&&t.writeDouble(3,n.Height),n.Width&&t.writeDouble(4,n.Width),n.X&&t.writeDouble(5,n.X),n.Y&&t.writeDouble(6,n.Y),t},_readMessage:function(n,t){for(;t.nextField();)switch(t.getFieldNumber()){case 1:{n.Text=t.readString();break}case 2:{n.Confidence=t.readDouble();break}case 3:{n.Height=t.readDouble();break}case 4:{n.Width=t.readDouble();break}case 5:{n.X=t.readDouble();break}case 6:{n.Y=t.readDouble();break}default:{t.skipField();break}}return n}};function Ke(n){"@babel/helpers - typeof";return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(n)}function yt(n){if(n===null||n===!0||n===!1)return NaN;var t=Number(n);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function $(n,t){if(t.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+t.length+" present")}function X(n){$(1,arguments);var t=Object.prototype.toString.call(n);return n instanceof Date||Ke(n)==="object"&&t==="[object Date]"?new Date(n.getTime()):typeof n=="number"||t==="[object Number]"?new Date(n):((typeof n=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function va(n,t){$(2,arguments);var e=X(n),r=yt(t);return isNaN(r)?new Date(NaN):(r&&e.setDate(e.getDate()+r),e)}function _a(n,t){$(2,arguments);var e=X(n),r=yt(t);if(isNaN(r))return new Date(NaN);if(!r)return e;var i=e.getDate(),s=new Date(e.getTime());s.setMonth(e.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(e.setFullYear(s.getFullYear(),s.getMonth(),i),e)}function Ni(n,t){if($(2,arguments),!t||Ke(t)!=="object")return new Date(NaN);var e=t.years?yt(t.years):0,r=t.months?yt(t.months):0,i=t.weeks?yt(t.weeks):0,s=t.days?yt(t.days):0,o=t.hours?yt(t.hours):0,a=t.minutes?yt(t.minutes):0,l=t.seconds?yt(t.seconds):0,c=X(n),h=r||e?_a(c,r+e*12):c,u=s||i?va(h,s+i*7):h,d=a+o*60,f=l+d*60,g=f*1e3,p=new Date(u.getTime()+g);return p}function E_(n,t){$(2,arguments);var e=X(n).getTime(),r=yt(t);return new Date(e+r)}var P_={};function sn(){return P_}function F_(n,t){var e,r,i,s,o,a,l,c;$(1,arguments);var h=sn(),u=yt((e=(r=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=X(n),f=d.getDay(),g=(f<u?7:0)+f-u;return d.setDate(d.getDate()-g),d.setHours(0,0,0,0),d}function Uo(n){var t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),n.getTime()-t.getTime()}function xi(n){$(1,arguments);var t=X(n);return t.setHours(0,0,0,0),t}var A_=864e5;function I_(n,t){$(2,arguments);var e=xi(n),r=xi(t),i=e.getTime()-Uo(e),s=r.getTime()-Uo(r);return Math.round((i-s)/A_)}function wc(n,t){$(2,arguments);var e=yt(t);return _a(n,e*12)}function R_(n){$(1,arguments);var t;if(n&&typeof n.forEach=="function")t=n;else if(Ke(n)==="object"&&n!==null)t=Array.prototype.slice.call(n);else return new Date(NaN);var e;return t.forEach(function(r){var i=X(r);(e===void 0||e<i||isNaN(Number(i)))&&(e=i)}),e||new Date(NaN)}function L_(n){$(1,arguments);var t;if(n&&typeof n.forEach=="function")t=n;else if(Ke(n)==="object"&&n!==null)t=Array.prototype.slice.call(n);else return new Date(NaN);var e;return t.forEach(function(r){var i=X(r);(e===void 0||e>i||isNaN(i.getDate()))&&(e=i)}),e||new Date(NaN)}function vi(n,t){$(2,arguments);var e=X(n),r=X(t),i=e.getTime()-r.getTime();return i<0?-1:i>0?1:i}var bc=6e4,Cf=36e5,j_=1e3;function Ka(n,t){$(2,arguments);var e=xi(n),r=xi(t);return e.getTime()===r.getTime()}function V_(n){return $(1,arguments),n instanceof Date||Ke(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ve(n){if($(1,arguments),!V_(n)&&typeof n!="number")return!1;var t=X(n);return!isNaN(Number(t))}function B_(n,t){$(2,arguments);var e=X(n),r=X(t),i=e.getFullYear()-r.getFullYear(),s=e.getMonth()-r.getMonth();return i*12+s}function N_(n,t){$(2,arguments);var e=X(n),r=X(t);return e.getFullYear()-r.getFullYear()}function Rh(n,t){var e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function U_(n,t){$(2,arguments);var e=X(n),r=X(t),i=Rh(e,r),s=Math.abs(I_(e,r));e.setDate(e.getDate()-i*s);var o=+(Rh(e,r)===-i),a=i*(s-o);return a===0?0:a}function xc(n,t){return $(2,arguments),X(n).getTime()-X(t).getTime()}var Lh={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},H_="trunc";function Sc(n){return n?Lh[n]:Lh[H_]}function W_(n,t,e){$(2,arguments);var r=xc(n,t)/Cf;return Sc(e==null?void 0:e.roundingMethod)(r)}function Y_(n,t,e){$(2,arguments);var r=xc(n,t)/bc;return Sc(e==null?void 0:e.roundingMethod)(r)}function Tf(n){$(1,arguments);var t=X(n);return t.setHours(23,59,59,999),t}function Cc(n){$(1,arguments);var t=X(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function X_(n){$(1,arguments);var t=X(n);return Tf(t).getTime()===Cc(t).getTime()}function z_(n,t){$(2,arguments);var e=X(n),r=X(t),i=vi(e,r),s=Math.abs(B_(e,r)),o;if(s<1)o=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-i*s);var a=vi(e,r)===-i;X_(X(n))&&s===1&&vi(n,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function $_(n,t,e){$(2,arguments);var r=xc(n,t)/1e3;return Sc(e==null?void 0:e.roundingMethod)(r)}function G_(n,t){$(2,arguments);var e=X(n),r=X(t),i=vi(e,r),s=Math.abs(N_(e,r));e.setFullYear(1584),r.setFullYear(1584);var o=vi(e,r)===-i,a=i*(s-Number(o));return a===0?0:a}function q_(n,t){var e;$(1,arguments);var r=n||{},i=X(r.start),s=X(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=i;l.setHours(0,0,0,0);var c=Number((e=t==null?void 0:t.step)!==null&&e!==void 0?e:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(X(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function jh(n){$(1,arguments);var t=X(n);return t.setSeconds(0,0),t}function K_(n){$(1,arguments);var t=n||{},e=X(t.start),r=X(t.end),i=r.getTime(),s=[];if(!(e.getTime()<=i))throw new RangeError("Invalid interval");var o=e;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=i;)s.push(X(o)),o.setMonth(o.getMonth()+1);return s}function Df(n){$(1,arguments);var t=X(n);return t.setDate(1),t.setHours(0,0,0,0),t}function Z_(n){$(1,arguments);var t=X(n),e=t.getFullYear();return t.setFullYear(e+1,0,0),t.setHours(23,59,59,999),t}function Q_(n){$(1,arguments);var t=X(n),e=new Date(0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function J_(n){$(1,arguments);var t=n||{},e=X(t.start),r=X(t.end),i=r.getTime();if(!(e.getTime()<=i))throw new RangeError("Invalid interval");var s=[],o=e;for(o.setHours(0,0,0,0),o.setMonth(0,1);o.getTime()<=i;)s.push(X(o)),o.setFullYear(o.getFullYear()+1);return s}function ty(n){$(1,arguments);var t=X(n),e=t.getFullYear(),r=9+Math.floor(e/10)*10;return t.setFullYear(r,11,31),t.setHours(23,59,59,999),t}function ey(n,t){var e,r,i,s,o,a,l,c;$(1,arguments);var h=sn(),u=yt((e=(r=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=X(n),f=d.getDay(),g=(f<u?-7:0)+6-(f-u);return d.setDate(d.getDate()+g),d.setHours(23,59,59,999),d}function Of(n,t){$(2,arguments);var e=yt(t);return E_(n,-e)}var ry=864e5;function ny(n){$(1,arguments);var t=X(n),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=e-r;return Math.floor(i/ry)+1}function Si(n){$(1,arguments);var t=1,e=X(n),r=e.getUTCDay(),i=(r<t?7:0)+r-t;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function kf(n){$(1,arguments);var t=X(n),e=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(e+1,0,4),r.setUTCHours(0,0,0,0);var i=Si(r),s=new Date(0);s.setUTCFullYear(e,0,4),s.setUTCHours(0,0,0,0);var o=Si(s);return t.getTime()>=i.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function iy(n){$(1,arguments);var t=kf(n),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var r=Si(e);return r}var sy=6048e5;function Mf(n){$(1,arguments);var t=X(n),e=Si(t).getTime()-iy(t).getTime();return Math.round(e/sy)+1}function Xn(n,t){var e,r,i,s,o,a,l,c;$(1,arguments);var h=sn(),u=yt((e=(r=(i=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=X(n),f=d.getUTCDay(),g=(f<u?7:0)+f-u;return d.setUTCDate(d.getUTCDate()-g),d.setUTCHours(0,0,0,0),d}function Tc(n,t){var e,r,i,s,o,a,l,c;$(1,arguments);var h=X(n),u=h.getUTCFullYear(),d=sn(),f=yt((e=(r=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(u+1,0,f),g.setUTCHours(0,0,0,0);var p=Xn(g,t),_=new Date(0);_.setUTCFullYear(u,0,f),_.setUTCHours(0,0,0,0);var w=Xn(_,t);return h.getTime()>=p.getTime()?u+1:h.getTime()>=w.getTime()?u:u-1}function oy(n,t){var e,r,i,s,o,a,l,c;$(1,arguments);var h=sn(),u=yt((e=(r=(i=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1),d=Tc(n,t),f=new Date(0);f.setUTCFullYear(d,0,u),f.setUTCHours(0,0,0,0);var g=Xn(f,t);return g}var ay=6048e5;function Ef(n,t){$(1,arguments);var e=X(n),r=Xn(e,t).getTime()-oy(e,t).getTime();return Math.round(r/ay)+1}function wt(n,t){for(var e=n<0?"-":"",r=Math.abs(n).toString();r.length<t;)r="0"+r;return e+r}var ly={y:function(t,e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return wt(e==="yy"?i%100:i,e.length)},M:function(t,e){var r=t.getUTCMonth();return e==="M"?String(r+1):wt(r+1,2)},d:function(t,e){return wt(t.getUTCDate(),e.length)},a:function(t,e){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,e){return wt(t.getUTCHours()%12||12,e.length)},H:function(t,e){return wt(t.getUTCHours(),e.length)},m:function(t,e){return wt(t.getUTCMinutes(),e.length)},s:function(t,e){return wt(t.getUTCSeconds(),e.length)},S:function(t,e){var r=e.length,i=t.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return wt(s,e.length)}};const ln=ly;var Kn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cy={G:function(t,e,r){var i=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){var i=t.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return ln.y(t,e)},Y:function(t,e,r,i){var s=Tc(t,i),o=s>0?s:1-s;if(e==="YY"){var a=o%100;return wt(a,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):wt(o,e.length)},R:function(t,e){var r=kf(t);return wt(r,e.length)},u:function(t,e){var r=t.getUTCFullYear();return wt(r,e.length)},Q:function(t,e,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return wt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,r){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return wt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,r){var i=t.getUTCMonth();switch(e){case"M":case"MM":return ln.M(t,e);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,r){var i=t.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return wt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,r,i){var s=Ef(t,i);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):wt(s,e.length)},I:function(t,e,r){var i=Mf(t);return e==="Io"?r.ordinalNumber(i,{unit:"week"}):wt(i,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):ln.d(t,e)},D:function(t,e,r){var i=ny(t);return e==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):wt(i,e.length)},E:function(t,e,r){var i=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,r,i){var s=t.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return wt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,i){var s=t.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return wt(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){var i=t.getUTCDay(),s=i===0?7:i;switch(e){case"i":return String(s);case"ii":return wt(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,r){var i=t.getUTCHours(),s=i/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){var i=t.getUTCHours(),s;switch(i===12?s=Kn.noon:i===0?s=Kn.midnight:s=i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){var i=t.getUTCHours(),s;switch(i>=17?s=Kn.evening:i>=12?s=Kn.afternoon:i>=4?s=Kn.morning:s=Kn.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ln.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):ln.H(t,e)},K:function(t,e,r){var i=t.getUTCHours()%12;return e==="Ko"?r.ordinalNumber(i,{unit:"hour"}):wt(i,e.length)},k:function(t,e,r){var i=t.getUTCHours();return i===0&&(i=24),e==="ko"?r.ordinalNumber(i,{unit:"hour"}):wt(i,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):ln.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ln.s(t,e)},S:function(t,e){return ln.S(t,e)},X:function(t,e,r,i){var s=i._originalDate||t,o=s.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return Bh(o);case"XXXX":case"XX":return An(o);case"XXXXX":case"XXX":default:return An(o,":")}},x:function(t,e,r,i){var s=i._originalDate||t,o=s.getTimezoneOffset();switch(e){case"x":return Bh(o);case"xxxx":case"xx":return An(o);case"xxxxx":case"xxx":default:return An(o,":")}},O:function(t,e,r,i){var s=i._originalDate||t,o=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Vh(o,":");case"OOOO":default:return"GMT"+An(o,":")}},z:function(t,e,r,i){var s=i._originalDate||t,o=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Vh(o,":");case"zzzz":default:return"GMT"+An(o,":")}},t:function(t,e,r,i){var s=i._originalDate||t,o=Math.floor(s.getTime()/1e3);return wt(o,e.length)},T:function(t,e,r,i){var s=i._originalDate||t,o=s.getTime();return wt(o,e.length)}};function Vh(n,t){var e=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return e+String(i);var o=t||"";return e+String(i)+o+wt(s,2)}function Bh(n,t){if(n%60===0){var e=n>0?"-":"+";return e+wt(Math.abs(n)/60,2)}return An(n,t)}function An(n,t){var e=t||"",r=n>0?"-":"+",i=Math.abs(n),s=wt(Math.floor(i/60),2),o=wt(i%60,2);return r+s+e+o}const hy=cy;var Nh=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Pf=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},uy=function(t,e){var r=t.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Nh(t,e);var o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Nh(i,e)).replace("{{time}}",Pf(s,e))},dy={p:Pf,P:uy};const Fl=dy;var fy=["D","DD"],gy=["YY","YYYY"];function Ff(n){return fy.indexOf(n)!==-1}function Af(n){return gy.indexOf(n)!==-1}function Ho(n,t,e){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var py={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},my=function(t,e,r){var i,s=py[t];return typeof s=="string"?i=s:e===1?i=s.one:i=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const vy=my;function Za(n){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.width?String(t.width):n.defaultWidth,r=n.formats[e]||n.formats[n.defaultWidth];return r}}var _y={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yy={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wy={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},by={date:Za({formats:_y,defaultWidth:"full"}),time:Za({formats:yy,defaultWidth:"full"}),dateTime:Za({formats:wy,defaultWidth:"full"})};const xy=by;var Sy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cy=function(t,e,r,i){return Sy[t]};const Ty=Cy;function Ui(n){return function(t,e){var r=e!=null&&e.context?String(e.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,o=e!=null&&e.width?String(e.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{var a=n.defaultWidth,l=e!=null&&e.width?String(e.width):n.defaultWidth;i=n.values[l]||n.values[a]}var c=n.argumentCallback?n.argumentCallback(t):t;return i[c]}}var Dy={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Oy={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ky={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},My={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ey={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Py={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fy=function(t,e){var r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ay={ordinalNumber:Fy,era:Ui({values:Dy,defaultWidth:"wide"}),quarter:Ui({values:Oy,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ui({values:ky,defaultWidth:"wide"}),day:Ui({values:My,defaultWidth:"wide"}),dayPeriod:Ui({values:Ey,defaultWidth:"wide",formattingValues:Py,defaultFormattingWidth:"wide"})};const Iy=Ay;function Hi(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=t.match(i);if(!s)return null;var o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Ly(a,function(u){return u.test(o)}):Ry(a,function(u){return u.test(o)}),c;c=n.valueCallback?n.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c;var h=t.slice(o.length);return{value:c,rest:h}}}function Ry(n,t){for(var e in n)if(n.hasOwnProperty(e)&&t(n[e]))return e}function Ly(n,t){for(var e=0;e<n.length;e++)if(t(n[e]))return e}function jy(n){return function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(n.matchPattern);if(!r)return null;var i=r[0],s=t.match(n.parsePattern);if(!s)return null;var o=n.valueCallback?n.valueCallback(s[0]):s[0];o=e.valueCallback?e.valueCallback(o):o;var a=t.slice(i.length);return{value:o,rest:a}}}var Vy=/^(\d+)(th|st|nd|rd)?/i,By=/\d+/i,Ny={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uy={any:[/^b/i,/^(a|c)/i]},Hy={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wy={any:[/1/i,/2/i,/3/i,/4/i]},Yy={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xy={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zy={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$y={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gy={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qy={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ky={ordinalNumber:jy({matchPattern:Vy,parsePattern:By,valueCallback:function(t){return parseInt(t,10)}}),era:Hi({matchPatterns:Ny,defaultMatchWidth:"wide",parsePatterns:Uy,defaultParseWidth:"any"}),quarter:Hi({matchPatterns:Hy,defaultMatchWidth:"wide",parsePatterns:Wy,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Hi({matchPatterns:Yy,defaultMatchWidth:"wide",parsePatterns:Xy,defaultParseWidth:"any"}),day:Hi({matchPatterns:zy,defaultMatchWidth:"wide",parsePatterns:$y,defaultParseWidth:"any"}),dayPeriod:Hi({matchPatterns:Gy,defaultMatchWidth:"any",parsePatterns:qy,defaultParseWidth:"any"})};const Zy=Ky;var Qy={code:"en-US",formatDistance:vy,formatLong:xy,formatRelative:Ty,localize:Iy,match:Zy,options:{weekStartsOn:0,firstWeekContainsDate:1}};const If=Qy;var Jy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ew=/^'([^]*?)'?$/,rw=/''/g,nw=/[a-zA-Z]/;function vs(n,t,e){var r,i,s,o,a,l,c,h,u,d,f,g,p,_,w,y,C,S;$(2,arguments);var k=String(t),A=sn(),N=(r=(i=e==null?void 0:e.locale)!==null&&i!==void 0?i:A.locale)!==null&&r!==void 0?r:If,R=yt((s=(o=(a=(l=e==null?void 0:e.firstWeekContainsDate)!==null&&l!==void 0?l:e==null||(c=e.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:A.firstWeekContainsDate)!==null&&o!==void 0?o:(u=A.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(R>=1&&R<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=yt((f=(g=(p=(_=e==null?void 0:e.weekStartsOn)!==null&&_!==void 0?_:e==null||(w=e.locale)===null||w===void 0||(y=w.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&p!==void 0?p:A.weekStartsOn)!==null&&g!==void 0?g:(C=A.locale)===null||C===void 0||(S=C.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&f!==void 0?f:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var ot=X(n);if(!Ve(ot))throw new RangeError("Invalid time value");var mt=Uo(ot),ht=Of(ot,mt),at={firstWeekContainsDate:R,weekStartsOn:W,locale:N,_originalDate:ot},dt=k.match(tw).map(function(lt){var nt=lt[0];if(nt==="p"||nt==="P"){var q=Fl[nt];return q(lt,N.formatLong)}return lt}).join("").match(Jy).map(function(lt){if(lt==="''")return"'";var nt=lt[0];if(nt==="'")return iw(lt);var q=hy[nt];if(q)return!(e!=null&&e.useAdditionalWeekYearTokens)&&Af(lt)&&Ho(lt,t,String(n)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&Ff(lt)&&Ho(lt,t,String(n)),q(ht,lt,N.localize,at);if(nt.match(nw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+nt+"`");return lt}).join("");return dt}function iw(n){var t=n.match(ew);return t?t[1].replace(rw,"'"):n}function sw(n,t){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n}function ow(n,t){var e;if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var r=X(n);if(!Ve(r))throw new RangeError("Invalid time value");var i=Number((e=t==null?void 0:t.fractionDigits)!==null&&e!==void 0?e:0);if(!(i>=0&&i<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var s=wt(r.getDate(),2),o=wt(r.getMonth()+1,2),a=r.getFullYear(),l=wt(r.getHours(),2),c=wt(r.getMinutes(),2),h=wt(r.getSeconds(),2),u="";if(i>0){var d=r.getMilliseconds(),f=Math.floor(d*Math.pow(10,i-3));u="."+wt(f,i)}var g="",p=r.getTimezoneOffset();if(p!==0){var _=Math.abs(p),w=wt(yt(_/60),2),y=wt(_%60,2),C=p<0?"+":"-";g="".concat(C).concat(w,":").concat(y)}else g="Z";return"".concat(a,"-").concat(o,"-").concat(s,"T").concat(l,":").concat(c,":").concat(h).concat(u).concat(g)}function aw(n){$(1,arguments);var t=X(n),e=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(e,r+1,0),i.setHours(0,0,0,0),i.getDate()}function Us(n){$(1,arguments);var t=X(n),e=t.getFullYear(),r=Math.floor(e/10)*10;return r}function ar(n){return $(1,arguments),X(n).getFullYear()}function lw(n){$(1,arguments);var t=X(n.start),e=X(n.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(e.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(G_(e,t));var i=vi(e,t),s=Ni(t,{years:i*r.years});r.months=Math.abs(z_(e,s));var o=Ni(s,{months:i*r.months});r.days=Math.abs(U_(e,o));var a=Ni(o,{days:i*r.days});r.hours=Math.abs(W_(e,a));var l=Ni(a,{hours:i*r.hours});r.minutes=Math.abs(Y_(e,l));var c=Ni(l,{minutes:i*r.minutes});return r.seconds=Math.abs($_(e,c)),r}function _s(n,t){$(2,arguments);var e=X(n),r=X(t);return e.getTime()>r.getTime()}function ys(n,t){$(2,arguments);var e=X(n),r=X(t);return e.getTime()<r.getTime()}function Uh(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function cw(n,t){if(n){if(typeof n=="string")return Uh(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Uh(n,t):void 0}}function Hh(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=cw(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return o=c.done,c},e:function(c){a=!0,s=c},f:function(){try{o||e.return==null||e.return()}finally{if(a)throw s}}}}function J(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Al(n,t){return Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},Al(n,t)}function kt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Al(n,t)}function Wo(n){return Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wo(n)}function Rf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rf=function(){return!!n})()}function hw(n,t){if(t&&(Ke(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J(n)}function Mt(n){var t=Rf();return function(){var e,r=Wo(n);if(t){var i=Wo(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return hw(this,e)}}function bt(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function uw(n,t){if(Ke(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t||"default");if(Ke(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Lf(n){var t=uw(n,"string");return Ke(t)=="symbol"?t:t+""}function Wh(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Lf(r.key),r)}}function xt(n,t,e){return t&&Wh(n.prototype,t),e&&Wh(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function G(n,t,e){return(t=Lf(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var dw=10,jf=function(){function n(){bt(this,n),G(this,"priority",void 0),G(this,"subPriority",0)}return xt(n,[{key:"validate",value:function(e,r){return!0}}]),n}(),fw=function(n){kt(e,n);var t=Mt(e);function e(r,i,s,o,a){var l;return bt(this,e),l=t.call(this),l.value=r,l.validateValue=i,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return xt(e,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),e}(jf),gw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",dw),G(J(r),"subPriority",-1),r}return xt(e,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),e}(jf),Pt=function(){function n(){bt(this,n),G(this,"incompatibleTokens",void 0),G(this,"priority",void 0),G(this,"subPriority",void 0)}return xt(n,[{key:"run",value:function(e,r,i,s){var o=this.parse(e,r,i,s);return o?{setter:new fw(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(e,r,i){return!0}}]),n}(),pw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",140),G(J(r),"incompatibleTokens",["R","u","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),ie={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},br={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function se(n,t){return n&&{value:t(n.value),rest:n.rest}}function Qt(n,t){var e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function xr(n,t){var e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};var r=e[1]==="+"?1:-1,i=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:r*(i*Cf+s*bc+o*j_),rest:t.slice(e[0].length)}}function Vf(n){return Qt(ie.anyDigitsSigned,n)}function te(n,t){switch(n){case 1:return Qt(ie.singleDigit,t);case 2:return Qt(ie.twoDigits,t);case 3:return Qt(ie.threeDigits,t);case 4:return Qt(ie.fourDigits,t);default:return Qt(new RegExp("^\\d{1,"+n+"}"),t)}}function Yo(n,t){switch(n){case 1:return Qt(ie.singleDigitSigned,t);case 2:return Qt(ie.twoDigitsSigned,t);case 3:return Qt(ie.threeDigitsSigned,t);case 4:return Qt(ie.fourDigitsSigned,t);default:return Qt(new RegExp("^-?\\d{1,"+n+"}"),t)}}function Dc(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Bf(n,t){var e=t>0,r=e?t:1-t,i;if(r<=50)i=n||100;else{var s=r+50,o=Math.floor(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return e?i:1-i}function Nf(n){return n%400===0||n%4===0&&n%100!==0}var mw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",130),G(J(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return se(te(4,i),a);case"yo":return se(o.ordinalNumber(i,{unit:"year"}),a);default:return se(te(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var l=Bf(o.year,a);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),vw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",130),G(J(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return se(te(4,i),a);case"Yo":return se(o.ordinalNumber(i,{unit:"year"}),a);default:return se(te(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var l=Tc(i,a);if(o.isTwoDigitYear){var c=Bf(o.year,l);return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Xn(i,a)}var h=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(h,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Xn(i,a)}}]),e}(Pt),_w=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",130),G(J(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s){return Yo(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Si(a)}}]),e}(Pt),yw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",130),G(J(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s){return Yo(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),ww=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",120),G(J(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return te(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),bw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",120),G(J(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return te(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),xw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),G(J(r),"priority",110),r}return xt(e,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"M":return se(Qt(ie.month,i),a);case"MM":return se(te(2,i),a);case"Mo":return se(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),Sw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",110),G(J(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"L":return se(Qt(ie.month,i),a);case"LL":return se(te(2,i),a);case"Lo":return se(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),e}(Pt);function Cw(n,t,e){$(2,arguments);var r=X(n),i=yt(t),s=Ef(r,e)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var Tw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",100),G(J(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"w":return Qt(ie.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return Xn(Cw(i,o,a),a)}}]),e}(Pt);function Dw(n,t){$(2,arguments);var e=X(n),r=yt(t),i=Mf(e)-r;return e.setUTCDate(e.getUTCDate()-i*7),e}var Ow=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",100),G(J(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"I":return Qt(ie.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Si(Dw(i,o))}}]),e}(Pt),kw=[31,28,31,30,31,30,31,31,30,31,30,31],Mw=[31,29,31,30,31,30,31,31,30,31,30,31],Ew=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"subPriority",1),G(J(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"d":return Qt(ie.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Nf(o),l=i.getUTCMonth();return a?s>=1&&s<=Mw[l]:s>=1&&s<=kw[l]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),Pw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"subpriority",1),G(J(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return Qt(ie.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Nf(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),e}(Pt);function Oc(n,t,e){var r,i,s,o,a,l,c,h;$(2,arguments);var u=sn(),d=yt((r=(i=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&i!==void 0?i:(c=u.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=X(n),g=yt(t),p=f.getUTCDay(),_=g%7,w=(_+7)%7,y=(w<d?7:0)+g-p;return f.setUTCDate(f.getUTCDate()+y),f}var Fw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Oc(i,o,a),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),Aw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o,a){var l=function(h){var u=Math.floor((h-1)/7)*7;return(h+a.weekStartsOn+6)%7+u};switch(s){case"e":case"ee":return se(te(s.length,i),l);case"eo":return se(o.ordinalNumber(i,{unit:"day"}),l);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Oc(i,o,a),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),Iw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o,a){var l=function(h){var u=Math.floor((h-1)/7)*7;return(h+a.weekStartsOn+6)%7+u};switch(s){case"c":case"cc":return se(te(s.length,i),l);case"co":return se(o.ordinalNumber(i,{unit:"day"}),l);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Oc(i,o,a),i.setUTCHours(0,0,0,0),i}}]),e}(Pt);function Rw(n,t){$(2,arguments);var e=yt(t);e%7===0&&(e=e-7);var r=1,i=X(n),s=i.getUTCDay(),o=e%7,a=(o+7)%7,l=(a<r?7:0)+e-s;return i.setUTCDate(i.getUTCDate()+l),i}var Lw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",90),G(J(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){var a=function(c){return c===0?7:c};switch(s){case"i":case"ii":return te(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return se(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return se(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return se(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return se(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=Rw(i,o),i.setUTCHours(0,0,0,0),i}}]),e}(Pt),jw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",80),G(J(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dc(o),0,0,0),i}}]),e}(Pt),Vw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",80),G(J(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dc(o),0,0,0),i}}]),e}(Pt),Bw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",80),G(J(r),"incompatibleTokens",["a","b","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dc(o),0,0,0),i}}]),e}(Pt),Nw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",70),G(J(r),"incompatibleTokens",["H","K","k","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"h":return Qt(ie.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),e}(Pt),Uw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",70),G(J(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"H":return Qt(ie.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),e}(Pt),Hw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",70),G(J(r),"incompatibleTokens",["h","H","k","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"K":return Qt(ie.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),e}(Pt),Ww=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",70),G(J(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"k":return Qt(ie.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),e}(Pt),Yw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",60),G(J(r),"incompatibleTokens",["t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"m":return Qt(ie.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),e}(Pt),Xw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",50),G(J(r),"incompatibleTokens",["t","T"]),r}return xt(e,[{key:"parse",value:function(i,s,o){switch(s){case"s":return Qt(ie.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return te(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),e}(Pt),zw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",30),G(J(r),"incompatibleTokens",["t","T"]),r}return xt(e,[{key:"parse",value:function(i,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return se(te(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),e}(Pt),$w=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",10),G(J(r),"incompatibleTokens",["t","T","x"]),r}return xt(e,[{key:"parse",value:function(i,s){switch(s){case"X":return xr(br.basicOptionalMinutes,i);case"XX":return xr(br.basic,i);case"XXXX":return xr(br.basicOptionalSeconds,i);case"XXXXX":return xr(br.extendedOptionalSeconds,i);case"XXX":default:return xr(br.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),e}(Pt),Gw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",10),G(J(r),"incompatibleTokens",["t","T","X"]),r}return xt(e,[{key:"parse",value:function(i,s){switch(s){case"x":return xr(br.basicOptionalMinutes,i);case"xx":return xr(br.basic,i);case"xxxx":return xr(br.basicOptionalSeconds,i);case"xxxxx":return xr(br.extendedOptionalSeconds,i);case"xxx":default:return xr(br.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),e}(Pt),qw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",40),G(J(r),"incompatibleTokens","*"),r}return xt(e,[{key:"parse",value:function(i){return Vf(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),e}(Pt),Kw=function(n){kt(e,n);var t=Mt(e);function e(){var r;bt(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s)),G(J(r),"priority",20),G(J(r),"incompatibleTokens","*"),r}return xt(e,[{key:"parse",value:function(i){return Vf(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),e}(Pt),Zw={G:new pw,y:new mw,Y:new vw,R:new _w,u:new yw,Q:new ww,q:new bw,M:new xw,L:new Sw,w:new Tw,I:new Ow,d:new Ew,D:new Pw,E:new Fw,e:new Aw,c:new Iw,i:new Lw,a:new jw,b:new Vw,B:new Bw,h:new Nw,H:new Uw,K:new Hw,k:new Ww,m:new Yw,s:new Xw,S:new zw,X:new $w,x:new Gw,t:new qw,T:new Kw},Qw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,t1=/^'([^]*?)'?$/,e1=/''/g,r1=/\S/,n1=/[a-zA-Z]/;function Yh(n,t,e,r){var i,s,o,a,l,c,h,u,d,f,g,p,_,w,y,C,S,k;$(3,arguments);var A=String(n),N=String(t),R=sn(),W=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:R.locale)!==null&&i!==void 0?i:If;if(!W.match)throw new RangeError("locale must contain match property");var ot=yt((o=(a=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(h=r.locale)===null||h===void 0||(u=h.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:R.firstWeekContainsDate)!==null&&a!==void 0?a:(d=R.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(ot>=1&&ot<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var mt=yt((g=(p=(_=(w=r==null?void 0:r.weekStartsOn)!==null&&w!==void 0?w:r==null||(y=r.locale)===null||y===void 0||(C=y.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&_!==void 0?_:R.weekStartsOn)!==null&&p!==void 0?p:(S=R.locale)===null||S===void 0||(k=S.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&g!==void 0?g:0);if(!(mt>=0&&mt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(N==="")return A===""?X(e):new Date(NaN);var ht={firstWeekContainsDate:ot,weekStartsOn:mt,locale:W},at=[new gw],dt=N.match(Jw).map(function(O){var T=O[0];if(T in Fl){var B=Fl[T];return B(O,W.formatLong)}return O}).join("").match(Qw),lt=[],nt=Hh(dt),q;try{var et=function(){var T=q.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Af(T)&&Ho(T,N,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Ff(T)&&Ho(T,N,n);var B=T[0],ft=Zw[B];if(ft){var _t=ft.incompatibleTokens;if(Array.isArray(_t)){var m=lt.find(function(D){return _t.includes(D.token)||D.token===B});if(m)throw new RangeError("The format string mustn't contain `".concat(m.fullToken,"` and `").concat(T,"` at the same time"))}else if(ft.incompatibleTokens==="*"&&lt.length>0)throw new RangeError("The format string mustn't contain `".concat(T,"` and any other token at the same time"));lt.push({token:B,fullToken:T});var v=ft.run(A,T,W.match,ht);if(!v)return{v:new Date(NaN)};at.push(v.setter),A=v.rest}else{if(B.match(n1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");if(T==="''"?T="'":B==="'"&&(T=i1(T)),A.indexOf(T)===0)A=A.slice(T.length);else return{v:new Date(NaN)}}};for(nt.s();!(q=nt.n()).done;){var Xt=et();if(Ke(Xt)==="object")return Xt.v}}catch(O){nt.e(O)}finally{nt.f()}if(A.length>0&&r1.test(A))return new Date(NaN);var Ut=at.map(function(O){return O.priority}).sort(function(O,T){return T-O}).filter(function(O,T,B){return B.indexOf(O)===T}).map(function(O){return at.filter(function(T){return T.priority===O}).sort(function(T,B){return B.subPriority-T.subPriority})}).map(function(O){return O[0]}),ee=X(e);if(isNaN(ee.getTime()))return new Date(NaN);var Et=Of(ee,Uo(ee)),ce={},Gt=Hh(Ut),Ae;try{for(Gt.s();!(Ae=Gt.n()).done;){var zt=Ae.value;if(!zt.validate(Et,ht))return new Date(NaN);var E=zt.set(Et,ce,ht);Array.isArray(E)?(Et=E[0],sw(ce,E[1])):Et=E}}catch(O){Gt.e(O)}finally{Gt.f()}return Et}function i1(n){return n.match(t1)[1].replace(e1,"'")}function Xh(n){$(1,arguments);var t=X(n);return t.setMinutes(0,0,0),t}function s1(n,t){$(2,arguments);var e=Xh(n),r=Xh(t);return e.getTime()===r.getTime()}function o1(n,t){$(2,arguments);var e=jh(n),r=jh(t);return e.getTime()===r.getTime()}function Il(n,t){$(2,arguments);var e=X(n),r=X(t);return e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()}function zh(n,t){$(2,arguments);var e=X(n),r=X(t);return e.getFullYear()===r.getFullYear()}function a1(n,t){$(2,arguments);var e=X(n).getTime(),r=X(t.start).getTime(),i=X(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return e>=r&&e<=i}function l1(n,t){$(2,arguments);var e=yt(t);return va(n,-e)}function c1(n){return $(1,arguments),Math.floor(n*bc)}function h1(n,t){$(2,arguments);var e=X(n),r=yt(t),i=e.getFullYear(),s=e.getDate(),o=new Date(0);o.setFullYear(i,r,15),o.setHours(0,0,0,0);var a=aw(o);return e.setMonth(r,Math.min(s,a)),e}function $h(n,t){if($(2,arguments),Ke(t)!=="object"||t===null)throw new RangeError("values parameter must be an object");var e=X(n);return isNaN(e.getTime())?new Date(NaN):(t.year!=null&&e.setFullYear(t.year),t.month!=null&&(e=h1(e,t.month)),t.date!=null&&e.setDate(yt(t.date)),t.hours!=null&&e.setHours(yt(t.hours)),t.minutes!=null&&e.setMinutes(yt(t.minutes)),t.seconds!=null&&e.setSeconds(yt(t.seconds)),t.milliseconds!=null&&e.setMilliseconds(yt(t.milliseconds)),e)}function u1(n,t,e){var r,i,s,o,a,l,c,h;$(2,arguments);var u=sn(),d=yt((r=(i=(s=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(a=e.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&i!==void 0?i:(c=u.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=X(n),g=yt(t),p=f.getDay(),_=g%7,w=(_+7)%7,y=7-d,C=g<0||g>6?g-(p+y)%7:(w+y)%7-(p+y)%7;return va(f,C)}function d1(n){$(1,arguments);var t=X(n),e=t.getFullYear(),r=Math.floor(e/10)*10;return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}function f1(n,t){$(2,arguments);var e=yt(t);return _a(n,-e)}function Uf(n,t){$(2,arguments);var e=yt(t);return wc(n,-e)}const Oi=Jv("relapse",()=>{const n=Dt(!1),t=Dt(null),e=Dt(null),r=Z(()=>t.value),i=Z(()=>r.value&&r.value.Captures.length>0?r.value.Captures:[]),s=Z(()=>i.value.findIndex(g=>g.IsReal)||0),o=Z(()=>i.value.findLastIndex(g=>g.IsReal)||0),a=Z(()=>t.value?t.value.Summary:null),l=Z(()=>e.value),c=Z(()=>{let g=new Date;return r.value&&(g=new Date(r.value.Bod)),g});async function h(){e.value=await T_({})}async function u(g){let p=await D_(g);e.value&&(e.value.Settings=p)}async function d(g){try{let p=await O_({Dt:ow(xi(g))});t.value=p}catch(p){console.error("loadDay error",p)}}async function f(){await d(new Date)}return{isHelpShown:n,day:t,settings:e,currentDay:r,currentDaySummary:a,captures:i,earliestCaptureIndex:s,latestCaptureIndex:o,appSettings:l,currentDate:c,loadSettings:h,saveSettings:u,loadDay:d,loadToday:f}});class g1{constructor(t="http://localhost:5020/events?stream=messages"){Aa(this,"src");Aa(this,"callbacks");this.src=new EventSource(t),this.callbacks={},this.src.onmessage=e=>{const r=JSON.parse(e.data);if(this.callbacks[r.messageType])for(let i of Array.from(this.callbacks[r.messageType]))i(r.data)}}addEvent(t,e){this.callbacks[t]?this.callbacks[t].add(e):(this.callbacks[t]=new Set,this.callbacks[t].add(e))}}const p1=new g1;function ws(n,t){p1.addEvent(n,t)}function Hf(n,t=null,e="MainWindow"){console.log("triggering event",n,"on window",e);let r="http://localhost:5020/trigger?qs=1";n&&(r+=`&event=${n}`),e&&(r+=`&window=${e}`),fetch(r,{method:"POST",headers:{"Content-Type":"text/plain"},body:t}).then(i=>i.json()).then(i=>console.log(i)).catch(i=>console.error("Error:",i))}const m1=pe({__name:"App",setup(n){let t=Dt(!0);const e=Oi();function r(){Hf("maximise")}function i(){console.log("onWindowBlur happened"),t.value=!1}function s(){console.log("onWindowFocus happened"),t.value=!0}return nn(()=>{console.log("document.title",document.title),ws("blur",i),ws("focus",s),e.loadSettings()}),(o,a)=>{const l=Je("router-view");return Q(),st("div",{class:Be(["main-body",{"is-focused":ne(t),"is-blurred":!ne(t)}])},[V("div",{class:"handlebar",onDblclick:r,style:{"--wails-draggable":"drag"}},null,32),Tt(l)],2)}}});/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ni=typeof document<"u";function Wf(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function v1(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Wf(n.default)}const Ft=Object.assign;function Qa(n,t){const e={};for(const r in t){const i=t[r];e[r]=mr(i)?i.map(n):n(i)}return e}const is=()=>{},mr=Array.isArray,Yf=/#/g,_1=/&/g,y1=/\//g,w1=/=/g,b1=/\?/g,Xf=/\+/g,x1=/%5B/g,S1=/%5D/g,zf=/%5E/g,C1=/%60/g,$f=/%7B/g,T1=/%7C/g,Gf=/%7D/g,D1=/%20/g;function kc(n){return encodeURI(""+n).replace(T1,"|").replace(x1,"[").replace(S1,"]")}function O1(n){return kc(n).replace($f,"{").replace(Gf,"}").replace(zf,"^")}function Rl(n){return kc(n).replace(Xf,"%2B").replace(D1,"+").replace(Yf,"%23").replace(_1,"%26").replace(C1,"`").replace($f,"{").replace(Gf,"}").replace(zf,"^")}function k1(n){return Rl(n).replace(w1,"%3D")}function M1(n){return kc(n).replace(Yf,"%23").replace(b1,"%3F")}function E1(n){return n==null?"":M1(n).replace(y1,"%2F")}function bs(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const P1=/\/$/,F1=n=>n.replace(P1,"");function Ja(n,t,e="/"){let r,i={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),i=n(s)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=L1(r??t,e),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:bs(o)}}function A1(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Gh(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function I1(n,t,e){const r=t.matched.length-1,i=e.matched.length-1;return r>-1&&r===i&&Ci(t.matched[r],e.matched[i])&&qf(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function Ci(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function qf(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!R1(n[e],t[e]))return!1;return!0}function R1(n,t){return mr(n)?qh(n,t):mr(t)?qh(t,n):n===t}function qh(n,t){return mr(t)?n.length===t.length&&n.every((e,r)=>e===t[r]):n.length===1&&n[0]===t}function L1(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=e.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return e.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const cn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xs;(function(n){n.pop="pop",n.push="push"})(xs||(xs={}));var ss;(function(n){n.back="back",n.forward="forward",n.unknown=""})(ss||(ss={}));function j1(n){if(!n)if(ni){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),F1(n)}const V1=/^[^#]+#/;function B1(n,t){return n.replace(V1,"#")+t}function N1(n,t){const e=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const ya=()=>({left:window.scrollX,top:window.scrollY});function U1(n){let t;if("el"in n){const e=n.el,r=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=N1(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Kh(n,t){return(history.state?history.state.position-t:-1)+n}const Ll=new Map;function H1(n,t){Ll.set(n,t)}function W1(n){const t=Ll.get(n);return Ll.delete(n),t}let Y1=()=>location.protocol+"//"+location.host;function Kf(n,t){const{pathname:e,search:r,hash:i}=t,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Gh(l,"")}return Gh(e,n)+r+i}function X1(n,t,e,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=Kf(n,location),g=e.value,p=t.value;let _=0;if(d){if(e.value=f,t.value=d,o&&o===g){o=null;return}_=p?d.position-p.position:0}else r(f);i.forEach(w=>{w(e.value,g,{delta:_,type:xs.pop,direction:_?_>0?ss.forward:ss.back:ss.unknown})})};function l(){o=e.value}function c(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(f),f}function h(){const{history:d}=window;d.state&&d.replaceState(Ft({},d.state,{scroll:ya()}),"")}function u(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function Zh(n,t,e,r=!1,i=!1){return{back:n,current:t,forward:e,replaced:r,position:window.history.length,scroll:i?ya():null}}function z1(n){const{history:t,location:e}=window,r={value:Kf(n,e)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const u=n.indexOf("#"),d=u>-1?(e.host&&document.querySelector("base")?n:n.slice(u))+l:Y1()+n+l;try{t[h?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),e[h?"replace":"assign"](d)}}function o(l,c){const h=Ft({},t.state,Zh(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,c){const h=Ft({},i.value,t.state,{forward:l,scroll:ya()});s(h.current,h,!0);const u=Ft({},Zh(r.value,l,null),{position:h.position+1},c);s(l,u,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function $1(n){n=j1(n);const t=z1(n),e=X1(n,t.state,t.location,t.replace);function r(s,o=!0){o||e.pauseListeners(),history.go(s)}const i=Ft({location:"",base:n,go:r,createHref:B1.bind(null,n)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function G1(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),$1(n)}function q1(n){return typeof n=="string"||n&&typeof n=="object"}function Zf(n){return typeof n=="string"||typeof n=="symbol"}const Qf=Symbol("");var Qh;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Qh||(Qh={}));function Ti(n,t){return Ft(new Error,{type:n,[Qf]:!0},t)}function Fr(n,t){return n instanceof Error&&Qf in n&&(t==null||!!(n.type&t))}const Jh="[^/]+?",K1={sensitive:!1,strict:!1,start:!0,end:!0},Z1=/[.+*?^${}()[\]/\\]/g;function Q1(n,t){const e=Ft({},K1,t),r=[];let i=e.start?"^":"";const s=[];for(const c of n){const h=c.length?[]:[90];e.strict&&!c.length&&(i+="/");for(let u=0;u<c.length;u++){const d=c[u];let f=40+(e.sensitive?.25:0);if(d.type===0)u||(i+="/"),i+=d.value.replace(Z1,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:_,regexp:w}=d;s.push({name:g,repeatable:p,optional:_});const y=w||Jh;if(y!==Jh){f+=10;try{new RegExp(`(${y})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+S.message)}}let C=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;u||(C=_&&c.length<2?`(?:/${C})`:"/"+C),_&&(C+="?"),i+=C,f+=20,_&&(f+=-8),p&&(f+=-20),y===".*"&&(f+=-50)}h.push(f)}r.push(h)}if(e.strict&&e.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function a(c){const h=c.match(o),u={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",g=s[d-1];u[g.name]=f&&g.repeatable?f.split("/"):f}return u}function l(c){let h="",u=!1;for(const d of n){(!u||!h.endsWith("/"))&&(h+="/"),u=!1;for(const f of d)if(f.type===0)h+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:_}=f,w=g in c?c[g]:"";if(mr(w)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=mr(w)?w.join("/"):w;if(!y)if(_)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):u=!0);else throw new Error(`Missing required param "${g}"`);h+=y}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function J1(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=t[e]-n[e];if(r)return r;e++}return n.length<t.length?n.length===1&&n[0]===40+40?-1:1:n.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Jf(n,t){let e=0;const r=n.score,i=t.score;for(;e<r.length&&e<i.length;){const s=J1(r[e],i[e]);if(s)return s;e++}if(Math.abs(i.length-r.length)===1){if(tu(r))return 1;if(tu(i))return-1}return i.length-r.length}function tu(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const tb={type:0,value:""},eb=/[a-zA-Z0-9_]/;function rb(n){if(!n)return[[]];if(n==="/")return[[tb]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(f){throw new Error(`ERR (${e})/"${c}": ${f}`)}let e=0,r=e;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",h="";function u(){c&&(e===0?s.push({type:0,value:c}):e===1||e===2||e===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),e=1):d();break;case 4:d(),e=r;break;case 1:l==="("?e=2:eb.test(l)?d():(u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:e=3:h+=l;break;case 3:u(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${c}"`),u(),o(),i}function nb(n,t,e){const r=Q1(rb(n.path),e),i=Ft(r,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ib(n,t){const e=[],r=new Map;t=iu({strict:!1,end:!0,sensitive:!1},t);function i(u){return r.get(u)}function s(u,d,f){const g=!f,p=ru(u);p.aliasOf=f&&f.record;const _=iu(t,u),w=[p];if("alias"in u){const S=typeof u.alias=="string"?[u.alias]:u.alias;for(const k of S)w.push(ru(Ft({},p,{components:f?f.record.components:p.components,path:k,aliasOf:f?f.record:p})))}let y,C;for(const S of w){const{path:k}=S;if(d&&k[0]!=="/"){const A=d.record.path,N=A[A.length-1]==="/"?"":"/";S.path=d.record.path+(k&&N+k)}if(y=nb(S,d,_),f?f.alias.push(y):(C=C||y,C!==y&&C.alias.push(y),g&&u.name&&!nu(y)&&o(u.name)),tg(y)&&l(y),p.children){const A=p.children;for(let N=0;N<A.length;N++)s(A[N],y,f&&f.children[N])}f=f||y}return C?()=>{o(C)}:is}function o(u){if(Zf(u)){const d=r.get(u);d&&(r.delete(u),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(u);d>-1&&(e.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return e}function l(u){const d=ab(u,e);e.splice(d,0,u),u.record.name&&!nu(u)&&r.set(u.record.name,u)}function c(u,d){let f,g={},p,_;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Ti(1,{location:u});_=f.record.name,g=Ft(eu(d.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),u.params&&eu(u.params,f.keys.map(C=>C.name))),p=f.stringify(g)}else if(u.path!=null)p=u.path,f=e.find(C=>C.re.test(p)),f&&(g=f.parse(p),_=f.record.name);else{if(f=d.name?r.get(d.name):e.find(C=>C.re.test(d.path)),!f)throw Ti(1,{location:u,currentLocation:d});_=f.record.name,g=Ft({},d.params,u.params),p=f.stringify(g)}const w=[];let y=f;for(;y;)w.unshift(y.record),y=y.parent;return{name:_,path:p,params:g,matched:w,meta:ob(w)}}n.forEach(u=>s(u));function h(){e.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function eu(n,t){const e={};for(const r of t)r in n&&(e[r]=n[r]);return e}function ru(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:sb(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function sb(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const r in n.components)t[r]=typeof e=="object"?e[r]:e;return t}function nu(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ob(n){return n.reduce((t,e)=>Ft(t,e.meta),{})}function iu(n,t){const e={};for(const r in n)e[r]=r in t?t[r]:n[r];return e}function ab(n,t){let e=0,r=t.length;for(;e!==r;){const s=e+r>>1;Jf(n,t[s])<0?r=s:e=s+1}const i=lb(n);return i&&(r=t.lastIndexOf(i,r-1)),r}function lb(n){let t=n;for(;t=t.parent;)if(tg(t)&&Jf(n,t)===0)return t}function tg({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function cb(n){const t={};if(n===""||n==="?")return t;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Xf," "),o=s.indexOf("="),a=bs(o<0?s:s.slice(0,o)),l=o<0?null:bs(s.slice(o+1));if(a in t){let c=t[a];mr(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function su(n){let t="";for(let e in n){const r=n[e];if(e=k1(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(mr(r)?r.map(s=>s&&Rl(s)):[r&&Rl(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+e,s!=null&&(t+="="+s))})}return t}function hb(n){const t={};for(const e in n){const r=n[e];r!==void 0&&(t[e]=mr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const ub=Symbol(""),ou=Symbol(""),Mc=Symbol(""),eg=Symbol(""),jl=Symbol("");function Wi(){let n=[];function t(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function pn(n,t,e,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Ti(4,{from:e,to:t})):d instanceof Error?l(d):q1(d)?l(Ti(2,{from:t,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},h=s(()=>n.call(r&&r.instances[i],t,e,c));let u=Promise.resolve(h);n.length<3&&(u=u.then(c)),u.catch(d=>l(d))})}function tl(n,t,e,r,i=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Wf(l)){const h=(l.__vccOpts||l)[t];h&&s.push(pn(h,e,r,o,a,i))}else{let c=l();s.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=v1(h)?h.default:h;o.mods[a]=h,o.components[a]=u;const f=(u.__vccOpts||u)[t];return f&&pn(f,e,r,o,a,i)()}))}}return s}function au(n){const t=Tr(Mc),e=Tr(eg),r=Z(()=>{const l=ne(n.to);return t.resolve(l)}),i=Z(()=>{const{matched:l}=r.value,{length:c}=l,h=l[c-1],u=e.matched;if(!h||!u.length)return-1;const d=u.findIndex(Ci.bind(null,h));if(d>-1)return d;const f=lu(l[c-2]);return c>1&&lu(h)===f&&u[u.length-1].path!==f?u.findIndex(Ci.bind(null,l[c-2])):d}),s=Z(()=>i.value>-1&&mb(e.params,r.value.params)),o=Z(()=>i.value>-1&&i.value===e.matched.length-1&&qf(e.params,r.value.params));function a(l={}){if(pb(l)){const c=t[ne(n.replace)?"replace":"push"](ne(n.to)).catch(is);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Z(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function db(n){return n.length===1?n[0]:n}const fb=pe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:au,setup(n,{slots:t}){const e=Es(au(n)),{options:r}=Tr(Mc),i=Z(()=>({[cu(n.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[cu(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const s=t.default&&db(t.default(e));return n.custom?s:hf("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},s)}}}),gb=fb;function pb(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function mb(n,t){for(const e in t){const r=t[e],i=n[e];if(typeof r=="string"){if(r!==i)return!1}else if(!mr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function lu(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const cu=(n,t,e)=>n??t??e,vb=pe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const r=Tr(jl),i=Z(()=>n.route||r.value),s=Tr(ou,0),o=Z(()=>{let c=ne(s);const{matched:h}=i.value;let u;for(;(u=h[c])&&!u.components;)c++;return c}),a=Z(()=>i.value.matched[o.value]);vo(ou,Z(()=>o.value+1)),vo(ub,a),vo(jl,i);const l=Dt();return Dr(()=>[l.value,a.value,n.name],([c,h,u],[d,f,g])=>{h&&(h.instances[u]=c,f&&f!==h&&c&&c===d&&(h.leaveGuards.size||(h.leaveGuards=f.leaveGuards),h.updateGuards.size||(h.updateGuards=f.updateGuards))),c&&h&&(!f||!Ci(h,f)||!d)&&(h.enterCallbacks[u]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=i.value,h=n.name,u=a.value,d=u&&u.components[h];if(!d)return hu(e.default,{Component:d,route:c});const f=u.props[h],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,_=hf(d,Ft({},g,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(u.instances[h]=null)},ref:l}));return hu(e.default,{Component:_,route:c})||_}}});function hu(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const _b=vb;function yb(n){const t=ib(n.routes,n),e=n.parseQuery||cb,r=n.stringifyQuery||su,i=n.history,s=Wi(),o=Wi(),a=Wi(),l=Up(cn);let c=cn;ni&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Qa.bind(null,E=>""+E),u=Qa.bind(null,E1),d=Qa.bind(null,bs);function f(E,O){let T,B;return Zf(E)?(T=t.getRecordMatcher(E),B=O):B=E,t.addRoute(B,T)}function g(E){const O=t.getRecordMatcher(E);O&&t.removeRoute(O)}function p(){return t.getRoutes().map(E=>E.record)}function _(E){return!!t.getRecordMatcher(E)}function w(E,O){if(O=Ft({},O||l.value),typeof E=="string"){const v=Ja(e,E,O.path),D=t.resolve({path:v.path},O),L=i.createHref(v.fullPath);return Ft(v,D,{params:d(D.params),hash:bs(v.hash),redirectedFrom:void 0,href:L})}let T;if(E.path!=null)T=Ft({},E,{path:Ja(e,E.path,O.path).path});else{const v=Ft({},E.params);for(const D in v)v[D]==null&&delete v[D];T=Ft({},E,{params:u(v)}),O.params=u(O.params)}const B=t.resolve(T,O),ft=E.hash||"";B.params=h(d(B.params));const _t=A1(r,Ft({},E,{hash:O1(ft),path:B.path})),m=i.createHref(_t);return Ft({fullPath:_t,hash:ft,query:r===su?hb(E.query):E.query||{}},B,{redirectedFrom:void 0,href:m})}function y(E){return typeof E=="string"?Ja(e,E,l.value.path):Ft({},E)}function C(E,O){if(c!==E)return Ti(8,{from:O,to:E})}function S(E){return N(E)}function k(E){return S(Ft(y(E),{replace:!0}))}function A(E){const O=E.matched[E.matched.length-1];if(O&&O.redirect){const{redirect:T}=O;let B=typeof T=="function"?T(E):T;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=y(B):{path:B},B.params={}),Ft({query:E.query,hash:E.hash,params:B.path!=null?{}:E.params},B)}}function N(E,O){const T=c=w(E),B=l.value,ft=E.state,_t=E.force,m=E.replace===!0,v=A(T);if(v)return N(Ft(y(v),{state:typeof v=="object"?Ft({},ft,v.state):ft,force:_t,replace:m}),O||T);const D=T;D.redirectedFrom=O;let L;return!_t&&I1(r,B,T)&&(L=Ti(16,{to:D,from:B}),ee(B,B,!0,!1)),(L?Promise.resolve(L):ot(D,B)).catch(P=>Fr(P)?Fr(P,2)?P:Ut(P):et(P,D,B)).then(P=>{if(P){if(Fr(P,2))return N(Ft({replace:m},y(P.to),{state:typeof P.to=="object"?Ft({},ft,P.to.state):ft,force:_t}),O||D)}else P=ht(D,B,!0,m,ft);return mt(D,B,P),P})}function R(E,O){const T=C(E,O);return T?Promise.reject(T):Promise.resolve()}function W(E){const O=Gt.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(E):E()}function ot(E,O){let T;const[B,ft,_t]=wb(E,O);T=tl(B.reverse(),"beforeRouteLeave",E,O);for(const v of B)v.leaveGuards.forEach(D=>{T.push(pn(D,E,O))});const m=R.bind(null,E,O);return T.push(m),zt(T).then(()=>{T=[];for(const v of s.list())T.push(pn(v,E,O));return T.push(m),zt(T)}).then(()=>{T=tl(ft,"beforeRouteUpdate",E,O);for(const v of ft)v.updateGuards.forEach(D=>{T.push(pn(D,E,O))});return T.push(m),zt(T)}).then(()=>{T=[];for(const v of _t)if(v.beforeEnter)if(mr(v.beforeEnter))for(const D of v.beforeEnter)T.push(pn(D,E,O));else T.push(pn(v.beforeEnter,E,O));return T.push(m),zt(T)}).then(()=>(E.matched.forEach(v=>v.enterCallbacks={}),T=tl(_t,"beforeRouteEnter",E,O,W),T.push(m),zt(T))).then(()=>{T=[];for(const v of o.list())T.push(pn(v,E,O));return T.push(m),zt(T)}).catch(v=>Fr(v,8)?v:Promise.reject(v))}function mt(E,O,T){a.list().forEach(B=>W(()=>B(E,O,T)))}function ht(E,O,T,B,ft){const _t=C(E,O);if(_t)return _t;const m=O===cn,v=ni?history.state:{};T&&(B||m?i.replace(E.fullPath,Ft({scroll:m&&v&&v.scroll},ft)):i.push(E.fullPath,ft)),l.value=E,ee(E,O,T,m),Ut()}let at;function dt(){at||(at=i.listen((E,O,T)=>{if(!Ae.listening)return;const B=w(E),ft=A(B);if(ft){N(Ft(ft,{replace:!0,force:!0}),B).catch(is);return}c=B;const _t=l.value;ni&&H1(Kh(_t.fullPath,T.delta),ya()),ot(B,_t).catch(m=>Fr(m,12)?m:Fr(m,2)?(N(Ft(y(m.to),{force:!0}),B).then(v=>{Fr(v,20)&&!T.delta&&T.type===xs.pop&&i.go(-1,!1)}).catch(is),Promise.reject()):(T.delta&&i.go(-T.delta,!1),et(m,B,_t))).then(m=>{m=m||ht(B,_t,!1),m&&(T.delta&&!Fr(m,8)?i.go(-T.delta,!1):T.type===xs.pop&&Fr(m,20)&&i.go(-1,!1)),mt(B,_t,m)}).catch(is)}))}let lt=Wi(),nt=Wi(),q;function et(E,O,T){Ut(E);const B=nt.list();return B.length?B.forEach(ft=>ft(E,O,T)):console.error(E),Promise.reject(E)}function Xt(){return q&&l.value!==cn?Promise.resolve():new Promise((E,O)=>{lt.add([E,O])})}function Ut(E){return q||(q=!E,dt(),lt.list().forEach(([O,T])=>E?T(E):O()),lt.reset()),E}function ee(E,O,T,B){const{scrollBehavior:ft}=n;if(!ni||!ft)return Promise.resolve();const _t=!T&&W1(Kh(E.fullPath,0))||(B||!T)&&history.state&&history.state.scroll||null;return ca().then(()=>ft(E,O,_t)).then(m=>m&&U1(m)).catch(m=>et(m,E,O))}const Et=E=>i.go(E);let ce;const Gt=new Set,Ae={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:_,getRoutes:p,resolve:w,options:n,push:S,replace:k,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:nt.add,isReady:Xt,install(E){const O=this;E.component("RouterLink",gb),E.component("RouterView",_b),E.config.globalProperties.$router=O,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>ne(l)}),ni&&!ce&&l.value===cn&&(ce=!0,S(i.location).catch(ft=>{}));const T={};for(const ft in cn)Object.defineProperty(T,ft,{get:()=>l.value[ft],enumerable:!0});E.provide(Mc,O),E.provide(eg,Od(T)),E.provide(jl,l);const B=E.unmount;Gt.add(E),E.unmount=function(){Gt.delete(E),Gt.size<1&&(c=cn,at&&at(),at=null,l.value=cn,ce=!1,q=!1),B()}}};function zt(E){return E.reduce((O,T)=>O.then(()=>W(T)),Promise.resolve())}return Ae}function wb(n,t){const e=[],r=[],i=[],s=Math.max(t.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(n.matched.find(c=>Ci(c,a))?r.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(c=>Ci(c,l))||i.push(l))}return[e,r,i]}function b(n,t,e){return(t=function(r){var i=function(s,o){if(typeof s!="object"||!s)return s;var a=s[Symbol.toPrimitive];if(a!==void 0){var l=a.call(s,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(r,"string");return typeof i=="symbol"?i:i+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function uu(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function x(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?uu(Object(e),!0).forEach(function(r){b(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):uu(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function qt(n,t){if(n==null)return{};var e,r,i=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}function Er(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}class du{constructor(){b(this,"browserShadowBlurConstant",1),b(this,"DPI",96),b(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),b(this,"perfLimitSizeTotal",2097152),b(this,"maxCacheSideLimit",4096),b(this,"minCacheSideLimit",256),b(this,"disableStyleCopyPaste",!1),b(this,"enableGLFiltering",!0),b(this,"textureSize",4096),b(this,"forceGLPutImageData",!1),b(this,"cachesBoundsOfCurve",!1),b(this,"fontPaths",{}),b(this,"NUM_FRACTION_DIGITS",4)}}const Ot=new class extends du{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=x(x({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const t=new du,e=(n==null?void 0:n.reduce((r,i)=>(r[i]=t[i],r),{}))||t;this.configure(e)}},Tn=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return console[n]("fabric",...e)};let Cr=class extends Error{constructor(t,e){super("fabric: ".concat(t),e)}};class bb extends Cr{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class xb{}class Sb extends xb{testPrecision(t,e){const r="precision ".concat(e,` float;
void main(){}`),i=t.createShader(t.FRAGMENT_SHADER);return!!i&&(t.shaderSource(i,r),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(e,r)),e.getExtension("WEBGL_lose_context").loseContext(),Tn("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const Cb={};let fu;const kr=()=>fu||(fu={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Sb,dispose(){},copyPasteData:Cb}),ki=()=>kr().document,wa=()=>kr().window,rg=()=>{var n;return Math.max((n=Ot.devicePixelRatio)!==null&&n!==void 0?n:wa().devicePixelRatio,1)},os=new class{constructor(){b(this,"charWidthsCache",{}),b(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:t,fontStyle:e,fontWeight:r}=n;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const i=this.charWidthsCache[t],s="".concat(e.toLowerCase(),"_").concat((r+"").toLowerCase());return i[s]||(i[s]={}),i[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:t}=Ot,e=Math.sqrt(t*n);return[Math.floor(e),Math.floor(t/e)]}},Vl="6.7.1";function So(){}const Is=Math.PI/2,Xo=2*Math.PI,Ec=Math.PI/180,Fe=Object.freeze([1,0,0,1,0,0]),Pc=16,hn=.4477152502,vt="center",It="left",Ne="top",Bl="bottom",re="right",Ue="none",Fc=/\r?\n/,ng="moving",ba="scaling",ig="rotating",Ac="rotate",sg="skewing",Ss="resizing",Tb="modifyPoly",Db="modifyPath",zo="changed",xa="scale",We="scaleX",nr="scaleY",Mi="skewX",Ei="skewY",he="fill",He="stroke",$o="modified",Zn="json",el="svg",tt=new class{constructor(){this[Zn]=new Map,this[el]=new Map}has(n){return this[Zn].has(n)}getClass(n){const t=this[Zn].get(n);if(!t)throw new Cr("No class registered for ".concat(n));return t}setClass(n,t){t?this[Zn].set(t,n):(this[Zn].set(n.type,n),this[Zn].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[el].get(n)}setSVGClass(n,t){this[el].set(t??n.type.toLowerCase(),n)}},Go=new class extends Array{remove(n){const t=this.indexOf(n);t>-1&&this.splice(t,1)}cancelAll(){const n=this.splice(0);return n.forEach(t=>t.abort()),n}cancelByCanvas(n){if(!n)return[];const t=this.filter(e=>{var r;return e.target===n||typeof e.target=="object"&&((r=e.target)===null||r===void 0?void 0:r.canvas)===n});return t.forEach(e=>e.abort()),t}cancelByTarget(n){if(!n)return[];const t=this.filter(e=>e.target===n);return t.forEach(e=>e.abort()),t}};let Ob=class{constructor(){b(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(r=>{let[i,s]=r;this.on(i,s)}),()=>this.off(t);if(e){const r=t;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(e),()=>this.off(r,e)}return()=>!1}once(t,e){if(typeof t=="object"){const r=[];return Object.entries(t).forEach(i=>{let[s,o]=i;r.push(this.once(s,o))}),()=>r.forEach(i=>i())}if(e){const r=this.on(t,function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];e.call(this,...s),r()});return r}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const r=this.__eventListeners[t],i=r.indexOf(e);i>-1&&r.splice(i,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof t=="object"?Object.entries(t).forEach(r=>{let[i,s]=r;this._removeEventListener(i,s)}):this._removeEventListener(t,e)}fire(t,e){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[t])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,e||{})}};const ii=(n,t)=>{const e=n.indexOf(t);return e!==-1&&n.splice(e,1),n},Zr=n=>{if(n===0)return 1;switch(Math.abs(n)/Is){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Qr=n=>{if(n===0)return 0;const t=n/Is,e=Math.sign(n);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(n)};let M=class Oe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new Oe(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new Oe(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new Oe(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new Oe(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new Oe(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new Oe(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new Oe(this.x/t.x,this.y/t.y)}scalarDivide(t){return new Oe(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new Oe(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}midPointFrom(t){return this.lerp(t)}min(t){return new Oe(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new Oe(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,r=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=r}clone(){return new Oe(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ic;const r=Qr(t),i=Zr(t),s=this.subtract(e);return new Oe(s.x*i-s.y*r,s.x*r+s.y*i).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Oe(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}};const Ic=new M(0,0),Co=n=>!!n&&Array.isArray(n._objects);function og(n){class t extends n{constructor(){super(...arguments),b(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return!!this._objects.includes(r)||!!i&&this._objects.some(s=>s instanceof t&&s.contains(r,!0))}complexity(){return this._objects.reduce((r,i)=>r+=i.complexity?i.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(ii(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(ii(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return ii(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return ii(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r!==this._objects[i]&&(ii(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],h=new M(i,s),u=h.add(new M(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(h,u)||f.isContainedWithinRect(h,u)||l&&f.containsPoint(h)||l&&f.containsPoint(u))&&c.push(f)}return c}}return t}let ag=class extends Ob{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}};function To(n){return wa().requestAnimationFrame(n)}function kb(n){return wa().cancelAnimationFrame(n)}let Mb=0;const Dn=()=>Mb++,Jr=()=>{const n=ki().createElement("canvas");if(!n||n.getContext===void 0)throw new Cr("Failed to create `canvas` element");return n},Eb=()=>ki().createElement("img"),ir=n=>{const t=Jr();return t.width=n.width,t.height=n.height,t},lg=(n,t,e)=>n.toDataURL("image/".concat(t),e),cg=(n,t,e)=>new Promise((r,i)=>{n.toBlob(r,"image/".concat(t),e)}),oe=n=>n*Ec,tn=n=>n/Ec,Pb=n=>n.every((t,e)=>t===Fe[e]),Le=(n,t,e)=>new M(n).transform(t,e),ur=n=>{const t=1/(n[0]*n[3]-n[1]*n[2]),e=[t*n[3],-t*n[1],-t*n[2],t*n[0],0,0],{x:r,y:i}=new M(n[4],n[5]).transform(e,!0);return e[4]=-r,e[5]=-i,e},ye=(n,t,e)=>[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],e?0:n[0]*t[4]+n[2]*t[5]+n[4],e?0:n[1]*t[4]+n[3]*t[5]+n[5]],Rc=(n,t)=>n.reduceRight((e,r)=>r&&e?ye(r,e,t):r||e,void 0)||Fe.concat(),hg=n=>{let[t,e]=n;return Math.atan2(e,t)},qo=n=>{const t=hg(n),e=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(e),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],e);return{angle:tn(t),scaleX:r,scaleY:i,skewX:tn(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Rs=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Pi(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=oe(n),i=Zr(r),s=Qr(r);return[i,s,-s,i,t?t-(i*t-s*e):0,e?e-(s*t+i*e):0]}const Lc=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},ug=n=>Math.tan(oe(n)),dg=n=>[1,0,ug(n),1,0,0],fg=n=>[1,ug(n),0,1,0,0],Sa=n=>{let{scaleX:t=1,scaleY:e=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n,a=Lc(r?-t:t,i?-e:e);return s&&(a=ye(a,dg(s),!0)),o&&(a=ye(a,fg(o),!0)),a},Fb=n=>{const{translateX:t=0,translateY:e=0,angle:r=0}=n;let i=Rs(t,e);r&&(i=ye(i,Pi({angle:r})));const s=Sa(n);return Pb(s)||(i=ye(i,s)),i},Do=function(n){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(t&&t.aborted)return i(new bb("loadImage"));const s=Eb();let o;t&&(o=function(l){s.src="",i(l)},t.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(t==null||t.removeEventListener("abort",o)),r(s)};n?(s.onload=a,s.onerror=function(){o&&(t==null||t.removeEventListener("abort",o)),i(new Cr("Error loading ".concat(s.src)))},e&&(s.crossOrigin=e),s.src=n):a()})},Cs=function(n){let{signal:t,reviver:e=So}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];t&&t.addEventListener("abort",i,{once:!0}),Promise.all(n.map(o=>tt.getClass(o.type).fromObject(o,{signal:t}).then(a=>(e(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(a=>{a.dispose&&a.dispose()}),i(o)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},Ca=function(n){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,r)=>{const i=[];t&&t.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&a.type&&tt.has(a.type)?Cs([a],{signal:t}).then(l=>{let[c]=l;return i.push(c),c}):a),o=Object.keys(n);Promise.all(s).then(a=>a.reduce((l,c,h)=>(l[o[h]]=c,l),{})).then(e).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{t&&t.removeEventListener("abort",r)})})},Fi=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{})},jc=(n,t)=>Object.keys(n).reduce((e,r)=>(t(n[r],r,n)&&(e[r]=n[r]),e),{}),Yt=(n,t)=>parseFloat(Number(n).toFixed(t)),Ts=n=>"matrix("+n.map(t=>Yt(t,Ot.NUM_FRACTION_DIGITS)).join(" ")+")",Qe=n=>!!n&&n.toLive!==void 0,gu=n=>!!n&&typeof n.toObject=="function",pu=n=>!!n&&n.offsetX!==void 0&&"source"in n,In=n=>!!n&&"multiSelectionStacking"in n;function gg(n){const t=n&&hr(n);let e=0,r=0;if(!n||!t)return{left:e,top:r};let i=n;const s=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;i&&(i.parentNode||i.host)&&(i=i.parentNode||i.host,i===t?(e=o.scrollLeft||s.scrollLeft||0,r=o.scrollTop||s.scrollTop||0):(e+=i.scrollLeft||0,r+=i.scrollTop||0),i.nodeType!==1||i.style.position!=="fixed"););return{left:e,top:r}}const hr=n=>n.ownerDocument||null,pg=n=>{var t;return((t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},mg=function(n,t,e){let{width:r,height:i}=e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),t.scale(s,s))},Nl=(n,t)=>{let{width:e,height:r}=t;e&&(n.style.width=typeof e=="number"?"".concat(e,"px"):e),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function mu(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Ue,n}let vg=class{constructor(t){b(this,"_originalCanvasStyle",void 0),b(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(r=t)&&r.getContext!==void 0?t:t&&ki().getElementById(t)||Jr();var r;if(e.hasAttribute("data-fabric"))throw new Cr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:r}=t;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(e)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:r,ctx:i}=this.lower;mg(r,i,t,e)}setCSSDimensions(t){Nl(this.lower.el,t)}calcOffset(){return function(t){var e;const r=t&&hr(t),i={left:0,top:0};if(!r)return i;const s=((e=pg(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};i.left+=parseInt(s.borderLeftWidth,10)||0,i.top+=parseInt(s.borderTopWidth,10)||0,i.left+=parseInt(s.paddingLeft,10)||0,i.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;t.getBoundingClientRect!==void 0&&(o=t.getBoundingClientRect());const l=gg(t);return{left:o.left+l.left-(a.clientLeft||0)+i.left,top:o.top+l.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){kr().dispose(this.lower.el),delete this.lower}};const Ab={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Fe]};let Vc=class _g extends og(ag){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return _g.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new vg(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];const s=super.insertAt(t,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Tn("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?rg():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const i=x({width:this.width,height:this.height},t);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const r=t,i=[...this.viewportTransform],s=Le(t,ur(i));i[0]=e,i[3]=e;const o=Le(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(t){this.zoomToPoint(new M(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new M(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=To(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,r=ur(this.viewportTransform),i=Le({x:0,y:0},r),s=Le({x:t,y:e},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new M(a.x,o.y),bl:new M(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(kb(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,i)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const r=this.viewportTransform;t.save(),t.transform(...r),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let r=0,i=e.length;r<i;++r)e[r]&&e[r].render(t)}_renderBackgroundOrOverlay(t,e){const r=this["".concat(e,"Color")],i=this["".concat(e,"Image")],s=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!r&&!i)return;const a=Qe(r);if(r){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=a?r.toLive(t):r,o&&t.transform(...s),a){t.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&t.transform(...l)}t.fill(),t.restore()}if(i){t.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&t.transform(...s),i.render(t),this.skipOffscreen=l,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new M(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new M(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new M(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new M(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new M(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Le(this.getCenterPoint(),ur(this.viewportTransform))}_centerObject(t,e){t.setXY(e,vt,vt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,t,e):null;return x(x(x({version:Vl},Fi(this,e)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,t,e))},this.__serializeBgOverlay(t,e)),i?{clipPath:i}:null)}_toObject(t,e,r){let i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);const s=t[e](r);return this.includeDefaultValues||(t.includeDefaultValues=!!i),s}__serializeBgOverlay(t,e){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Qe(o)?o.excludeFromExport||(r.background=o.toObject(e)):o&&(r.background=o),Qe(a)?a.excludeFromExport||(r.overlay=a.toObject(e)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,t,e)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,t,e)),r}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const r=[];return this._setSVGPreamble(r,t),this._setSVGHeader(r,t),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",e),this._setSVGObjects(r,e),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",e),r.push("</svg>"),r.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const r=e.width||"".concat(this.width),i=e.height||"".concat(this.height),s=Ot.NUM_FRACTION_DIGITS,o=e.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(Yt(-l[4]/l[0],s)," ").concat(Yt(-l[5]/l[3],s)," ").concat(Yt(this.width/l[0],s)," ").concat(Yt(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Vl,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(Dn()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(Qe(e)){const r=this["".concat(t,"Vpt")],i=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return e.toSVG(s,{additionalTransform:r?Ts(i):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},r=Ot.fontPaths;this._objects.forEach(function s(o){t.push(o),Co(o)&&o._objects.forEach(s)}),t.forEach(s=>{if(!(o=s)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=s;!e[l]&&r[l]&&(e[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(h=>{let{fontFamily:u=""}=h;!e[u]&&r[u]&&(e[u]=!0)})}))});const i=Object.keys(e).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(t,r,e)})}_setSVGObject(t,e,r){t.push(e.toSVG(r))}_setSVGBgOverlayImage(t,e,r){const i=this[e];i&&!i.excludeFromExport&&i.toSVG&&t.push(i.toSVG(r))}_setSVGBgOverlayColor(t,e){const r=this["".concat(e,"Color")];if(r)if(Qe(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(e,"Vpt")]?Ts(ur(this.viewportTransform)):"";t.push('<rect transform="'.concat(a," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(i!=="repeat-y"&&i!=="no-repeat"||!pu(r)?s:r.source.width,'" height="').concat(i!=="repeat-x"&&i!=="no-repeat"||!pu(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Cr("`json` is undefined"));const i=typeof t=="string"?JSON.parse(t):t,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:h}=i,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Cs(s,{reviver:e,signal:r}),Ca({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:h},{signal:r})]).then(d=>{let[f,g]=d;return this.clear(),this.add(...f),this.set(i),this.set(g),this.renderOnAddRemove=u,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=ir(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=t,o=i*(s?this.getRetinaScaling():1);return lg(this.toCanvasElement(o,t),e,r)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=t,o=i*(s?this.getRetinaScaling():1);return cg(this.toCanvasElement(o,t),e,r)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(e||this.width)*t,l=(r||this.height)*t,c=this.getZoom(),h=this.width,u=this.height,d=this.skipControlsDrawing,f=c*t,g=this.viewportTransform,p=[f,0,0,f,(g[4]-(i||0))*t,(g[5]-(s||0))*t],_=this.enableRetinaScaling,w=ir({width:a,height:l}),y=o?this._objects.filter(C=>o(C)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),y),this.viewportTransform=g,this.width=h,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=_,this.skipControlsDrawing=d,w}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Go.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const r=()=>{this.destroy(),t(!0)};r.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}};b(Vc,"ownDefaults",Ab);const Ib=["touchstart","touchmove","touchend"],Rb=n=>{const t=gg(n.target),e=function(r){const i=r.changedTouches;return i&&i[0]?i[0]:r}(n);return new M(e.clientX+t.left,e.clientY+t.top)},Ul=n=>Ib.includes(n.type)||n.pointerType==="touch",vu=n=>{n.preventDefault(),n.stopPropagation()},Yr=n=>{let t=0,e=0,r=0,i=0;for(let s=0,o=n.length;s<o;s++){const{x:a,y:l}=n[s];(a>r||!s)&&(r=a),(a<t||!s)&&(t=a),(l>i||!s)&&(i=l),(l<e||!s)&&(e=l)}return{left:t,top:e,width:r-t,height:i-e}},Lb=["translateX","translateY","scaleX","scaleY"],jb=(n,t)=>Ko(n,ye(t,n.calcOwnMatrix())),Ko=(n,t)=>{const e=qo(t),{translateX:r,translateY:i,scaleX:s,scaleY:o}=e,a=qt(e,Lb),l=new M(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(l,vt,vt)},Vb=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},yg=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Bc=(n,t,e)=>{const r=n/2,i=t/2,s=[new M(-r,-i),new M(r,-i),new M(-r,i),new M(r,i)].map(a=>a.transform(e)),o=Yr(s);return new M(o.width,o.height)},Ta=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fe;return ye(ur(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe),n)},_i=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fe;return n.transform(Ta(t,e))},Bb=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fe;return n.transform(Ta(t,e),!0)},Nb=(n,t,e)=>{const r=Ta(t,e);return Ko(n,ye(r,n.calcOwnMatrix())),r},wg=(n,t)=>{var e;const{transform:{target:r}}=t;(e=r.canvas)===null||e===void 0||e.fire("object:".concat(n),x(x({},t),{},{target:r})),r.fire(n,t)},Ub={left:-.5,top:-.5,center:0,bottom:.5,right:.5},le=n=>typeof n=="string"?Ub[n]:n-.5,Zo="not-allowed";function bg(n){return le(n.originX)===le(vt)&&le(n.originY)===le(vt)}function _u(n){return .5-le(n)}const pr=(n,t)=>n[t],xg=(n,t,e,r)=>({e:n,transform:t,pointer:new M(e,r)});function Sg(n,t){const e=n.getTotalAngle()+tn(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Nc(n,t,e,r,i){var s;let{target:o,corner:a}=n;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,h=o.padding/c,u=function(d,f,g,p){const _=d.getRelativeCenterPoint(),w=g!==void 0&&p!==void 0?d.translateToGivenOrigin(_,vt,vt,g,p):new M(d.left,d.top);return(d.angle?f.rotate(-oe(d.angle),_):f).subtract(w)}(o,new M(r,i),t,e);return u.x>=h&&(u.x-=h),u.x<=-h&&(u.x+=h),u.y>=h&&(u.y-=h),u.y<=h&&(u.y+=h),u.x-=l.offsetX,u.y-=l.offsetY,u}const Hb=(n,t,e,r)=>{const{target:i,offsetX:s,offsetY:o}=t,a=e-s,l=r-o,c=!pr(i,"lockMovementX")&&i.left!==a,h=!pr(i,"lockMovementY")&&i.top!==l;return c&&i.set(It,a),h&&i.set(Ne,l),(c||h)&&wg(ng,xg(n,t,e,r)),c||h},yu={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},rl=(n,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n),wu=(n,t,e,r)=>{n/=255,t/=255,e/=255;const i=Math.max(n,t,e),s=Math.min(n,t,e);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(t-e)/c+(t<e?6:0);break;case t:o=(e-n)/c+2;break;case e:o=(n-t)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},bu=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Hs=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),xu=n=>{let[t,e,r,i=1]=n;const s=Math.round(.3*t+.59*e+.11*r);return[s,s,s,i]};class Lt{constructor(t){if(b(this,"isUnrecognised",!1),t)if(t instanceof Lt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,r,i,s=1]=t;this.setSource([e,r,i,s])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in yu&&(t=yu[t]),t==="transparent"?[255,255,255,0]:Lt.sourceFromHex(t)||Lt.sourceFromRgb(t)||Lt.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,r]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,r]=wu(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(r,"%)")}toHsla(){const[t,e,r,i]=wu(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,r,i]=this.getSource();return"".concat(Hs(t)).concat(Hs(e)).concat(Hs(r)).concat(Hs(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(xu(this.getSource())),this}toBlackWhite(t){const[e,,,r]=xu(this.getSource()),i=e<(t||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(t){t instanceof Lt||(t=new Lt(t));const e=this.getSource(),r=t.getSource(),[i,s,o]=e.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([i,s,o,e[3]]),this}static fromRgb(t){return Lt.fromRgba(t)}static fromRgba(t){return new Lt(Lt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[r,i,s]=e.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,i,s,bu(e[4])]}}static fromHsl(t){return Lt.fromHsla(t)}static fromHsla(t){return new Lt(Lt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const r=(Lt.parseAngletoDegrees(e[1])%360+360)%360/360,i=parseFloat(e[2])/100,s=parseFloat(e[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,h=2*s-c;o=rl(h,c,r+1/3),a=rl(h,c,r),l=rl(h,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),bu(e[4])]}static fromHex(t){return new Lt(Lt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let r;r=e.length<=4?e.split("").map(l=>l+l):e.match(/.{2}/g);const[i,s,o,a=255]=r.map(l=>parseInt(l,16));return[i,s,o,a/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),r=parseFloat(e);return e.includes("rad")?tn(r):e.includes("turn")?360*r:r}}const yi=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pc;const e=/\D{0,2}$/.exec(n),r=parseFloat(n),i=Ot.DPI;switch(e==null?void 0:e[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*t;default:return r}},Wb=n=>{const[t,e]=n.trim().split(" "),[r,i]=(s=t)&&s!==Ue?[s.slice(1,4),s.slice(5,8)]:s===Ue?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:e||"meet",alignX:r,alignY:i}},Ds=function(n,t){let e,r,i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const s=new Lt(t),o=s.getAlpha();e=s.toRgb(),o!==1&&(r=o.toString())}else e="none";return i?"".concat(n,": ").concat(e,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(e,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")};let Cg=class{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Ue,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),d=Ds(he,this.fill);return[Ds(He,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",e,"; ","opacity: ",c,";",u,h].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Ts(r));return"".concat(i).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=t.indexOf("COMMON_PARTS");return t[s]=i,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,u=this.stroke,d=this.fill,f=this.shadow,g=[],p=t.indexOf("COMMON_PARTS");let _;l&&(l.clipPathId="CLIPPATH_".concat(Dn()),_='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),h&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons(),` >
`);const w=[o,c,e?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return t[p]=w,Qe(d)&&g.push(d.toSVG(this)),Qe(u)&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),l&&g.push(_),g.push(t.join("")),g.push(`</g>
`),h&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==he?' paint-order="'.concat(this.paintFirst,'" '):""}};function Da(n){return new RegExp("^("+n.join("|")+")\\b","i")}const zn="textDecorationThickness",Tg=["fontSize","fontWeight","fontFamily","fontStyle"],Dg=["underline","overline","linethrough"],Og=[...Tg,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],kg=[...Og,...Dg,"textBackgroundColor","direction",zn],Yb=[...Tg,...Dg,He,"strokeWidth",he,"deltaY","textBackgroundColor",zn],Xb={_reNewline:Fc,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:It,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:It,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[zn]:66.667},Sr="justify",Qo="justify-left",as="justify-right",ls="justify-center";var Su,Cu,Tu;const dr=String.raw(Su||(Su=Er(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),nl=String.raw(Cu||(Cu=Er(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),zb=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+dr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+dr+"))?\\s+(.*)"),$b={cx:It,x:It,r:"radius",cy:Ne,y:Ne,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":zn},il="font-size",sl="clip-path";Da(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Da(["symbol","image","marker","pattern","view","svg"]);const Du=Da(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(Tu||(Tu=Er(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),dr,nl,dr,nl,dr,nl,dr));const Gb=new M(1,0),Mg=new M,Eg=(n,t)=>n.rotate(t),Hl=(n,t)=>new M(t).subtract(n),Wl=n=>n.distanceFrom(Mg),Yl=(n,t)=>Math.atan2(cs(n,t),Kb(n,t)),qb=n=>Yl(Gb,n),Uc=n=>n.eq(Mg)?n:n.scalarDivide(Wl(n)),Pg=function(n){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Uc(new M(-n.y,n.x).scalarMultiply(t?1:-1))},cs=(n,t)=>n.x*t.y-n.y*t.x,Kb=(n,t)=>n.x*t.x+n.y*t.y,Ou=(n,t,e)=>{if(n.eq(t)||n.eq(e))return!0;const r=cs(t,e),i=cs(t,n),s=cs(e,n);return r>=0?i>=0&&s<=0:!(i<=0&&s>=0)},ku="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Mu=new RegExp("(?:\\s|^)"+ku+ku+"("+dr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Xr{constructor(t){const e=typeof t=="string"?Xr.parseShadow(t):t;Object.assign(this,Xr.ownDefaults,e),this.id=Dn()}static parseShadow(t){const e=t.trim(),[,r=0,i=0,s=0]=(Mu.exec(e)||[]).map(o=>parseFloat(o)||0);return{color:(e.replace(Mu,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:i,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=Eg(new M(this.offsetX,this.offsetY),oe(-t.angle)),r=new Lt(this.color);let i=40,s=40;return t.width&&t.height&&(i=100*Yt((Math.abs(e.x)+this.blur)/t.width,Ot.NUM_FRACTION_DIGITS)+20,s=100*Yt((Math.abs(e.y)+this.blur)/t.height,Ot.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(i,'%" width="').concat(100+2*i,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Yt(this.blur?this.blur/2:0,Ot.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Yt(e.x,Ot.NUM_FRACTION_DIGITS),'" dy="').concat(Yt(e.y,Ot.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Xr.ownDefaults;return this.includeDefaultValues?t:jc(t,(r,i)=>r!==e[i])}static async fromObject(t){return new this(t)}}b(Xr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),b(Xr,"type","shadow"),tt.setClass(Xr,"shadow");const Di=(n,t,e)=>Math.max(n,Math.min(t,e)),Zb=[Ne,It,We,nr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Mi,Ei],on=[he,He,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Qb={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:It,originY:Ne,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:he,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Jb=(n,t,e,r)=>-e*Math.cos(n/r*Is)+e+t,tx=()=>!1;class Hc{constructor(t){let{startValue:e,byValue:r,duration:i=500,delay:s=0,easing:o=Jb,onStart:a=So,onChange:l=So,onComplete:c=So,abort:h=tx,target:u}=t;b(this,"_state","pending"),b(this,"durationProgress",0),b(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=h,this.target=u,this.startValue=e,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>To(t),this.delay):To(t)}tick(t){const e=(t||+new Date)-this.startTime,r=Math.min(e,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),To(this.tick)))}register(){Go.push(this)}unregister(){Go.remove(this)}abort(){this._state="aborted",this.unregister()}}const ex=["startValue","endValue"];class rx extends Hc{constructor(t){let{startValue:e=0,endValue:r=100}=t;super(x(x({},qt(t,ex)),{},{startValue:e,byValue:r-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const nx=["startValue","endValue"];class ix extends Hc{constructor(t){let{startValue:e=[0],endValue:r=[100]}=t;super(x(x({},qt(t,nx)),{},{startValue:e,byValue:r.map((i,s)=>i-e[s])}))}calculate(t){const e=this.startValue.map((r,i)=>this.easing(t,r,this.byValue[i],this.duration,i));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const sx=["startValue","endValue","easing","onChange","onComplete","abort"],ox=(n,t,e,r)=>t+e*(1-Math.cos(n/r*Is)),ol=n=>n&&((t,e,r)=>n(new Lt(t).toRgba(),e,r));class ax extends Hc{constructor(t){let{startValue:e,endValue:r,easing:i=ox,onChange:s,onComplete:o,abort:a}=t,l=qt(t,sx);const c=new Lt(e).getSource(),h=new Lt(r).getSource();super(x(x({},l),{},{startValue:c,byValue:h.map((u,d)=>u-c[d]),easing:i,onChange:ol(s),onComplete:ol(o),abort:ol(a)}))}calculate(t){const[e,r,i,s]=this.startValue.map((a,l)=>this.easing(t,a,this.byValue[l],this.duration,l)),o=[...[e,r,i].map(Math.round),Di(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function Fg(n){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(n)?new ix(n):new rx(n);return t.start(),t}function lx(n){const t=new ax(n);return t.start(),t}class Kt{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.points=this.points.concat(e.filter(i=>!this.includes(i))),this}static isPointContained(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(r))return t.eq(e);if(e.x===r.x)return t.x===e.x&&(i||t.y>=Math.min(e.y,r.y)&&t.y<=Math.max(e.y,r.y));if(e.y===r.y)return t.y===e.y&&(i||t.x>=Math.min(e.x,r.x)&&t.x<=Math.max(e.x,r.x));{const s=Hl(e,r),o=Hl(e,t).divide(s);return i?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const r=new M(t).setX(Math.min(t.x-1,...e.map(s=>s.x)));let i=0;for(let s=0;s<e.length;s++){const o=this.intersectSegmentSegment(e[s],e[(s+1)%e.length],t,r);if(o.includes(t))return!0;i+=+(o.status==="Intersection")}return i%2==1}static intersectLineLine(t,e,r,i){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=e.x-t.x,l=e.y-t.y,c=i.x-r.x,h=i.y-r.y,u=t.x-r.x,d=t.y-r.y,f=c*d-h*u,g=a*d-l*u,p=h*a-c*l;if(p!==0){const _=f/p,w=g/p;return(s||0<=_&&_<=1)&&(o||0<=w&&w<=1)?new Kt("Intersection").append(new M(t.x+_*a,t.y+_*l)):new Kt}if(f===0||g===0){const _=s||o||Kt.isPointContained(t,r,i)||Kt.isPointContained(e,r,i)||Kt.isPointContained(r,t,e)||Kt.isPointContained(i,t,e);return new Kt(_?"Coincident":void 0)}return new Kt("Parallel")}static intersectSegmentLine(t,e,r,i){return Kt.intersectLineLine(t,e,r,i,!1,!0)}static intersectSegmentSegment(t,e,r,i){return Kt.intersectLineLine(t,e,r,i,!1,!1)}static intersectLinePolygon(t,e,r){let i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Kt,o=r.length;for(let a,l,c,h=0;h<o;h++){if(a=r[h],l=r[(h+1)%o],c=Kt.intersectLineLine(t,e,a,l,i,!1),c.status==="Coincident")return c;s.append(...c.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(t,e,r){return Kt.intersectLinePolygon(t,e,r,!1)}static intersectPolygonPolygon(t,e){const r=new Kt,i=t.length,s=[];for(let o=0;o<i;o++){const a=t[o],l=t[(o+1)%i],c=Kt.intersectSegmentPolygon(a,l,e);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===t.length?new Kt("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(t,e,r){const i=e.min(r),s=e.max(r),o=new M(s.x,i.y),a=new M(i.x,s.y);return Kt.intersectPolygonPolygon(t,[i,o,s,a])}}class cx extends ag{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Le(t,this.group.calcTransformMatrix()):t}setXY(t,e,r){this.group&&(t=Le(t,ur(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,r)}getRelativeXY(){return new M(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:r,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),s=[t,e,r,i];if(this.group){const o=this.group.calcTransformMatrix();return s.map(a=>Le(a,o))}return s}intersectsWithRect(t,e){return Kt.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Kt.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:r,top:i,width:s,height:o}=this.getBoundingRect();return r>=t.x&&r+s<=e.x&&i>=t.y&&i+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Kt.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=e.x&&r.x>=t.x&&r.y<=e.y&&r.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(r=>(r.x>=e.x||r.x<=t.x)&&(r.y>=e.y||r.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return Yr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(We,t),this._set(nr,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?tn(hg(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||Fe.concat()}calcACoords(){const t=Pi({angle:this.angle}),{x:e,y:r}=this.getRelativeCenterPoint(),i=Rs(e,r),s=ye(i,t),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Le({x:-a,y:-l},s),tr:Le({x:a,y:-l},s),bl:Le({x:-a,y:l},s),br:Le({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,le(this.originX),le(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const r=this.transformMatrixKey(t),i=this.matrixCache;return i&&i.key.every((s,o)=>s===r[o])?i.value:(this.group&&(e=ye(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:r,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Fb(i);return this.ownMatrixCache={key:t,value:s},s}_getNonTransformedDimensions(){return new M(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=x({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),r=e.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=e.width+i,a=e.height+i;let l;return l=e.skewX===0&&e.skewY===0?new M(o*e.scaleX,a*e.scaleY):Bc(o,a,Sa(e)),l.scalarAdd(s)}translateToGivenOrigin(t,e,r,i,s){let o=t.x,a=t.y;const l=le(i)-le(e),c=le(s)-le(r);if(l||c){const h=this._getTransformedDimensions();o+=l*h.x,a+=c*h.y}return new M(o,a)}translateToCenterPoint(t,e,r){if(e===vt&&r===vt)return t;const i=this.translateToGivenOrigin(t,e,r,vt,vt);return this.angle?i.rotate(oe(this.angle),t):i}translateToOriginPoint(t,e,r){const i=this.translateToGivenOrigin(t,vt,vt,e,r);return this.angle?i.rotate(oe(this.angle),t):i}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Le(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new M(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,r){const i=this.translateToCenterPoint(t,e,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),It,Ne)}}const hx=["type"],ux=["extraParam"];let Ar=class Oo extends cx{static getDefaults(){return Oo.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Tn("warn","Setting type has no effect",t)}constructor(t){super(),b(this,"_cacheContext",null),Object.assign(this,Oo.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Jr(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,r=t.height,i=Ot.maxCacheSideLimit,s=Ot.minCacheSideLimit;if(e<=i&&r<=i&&e*r<=Ot.perfLimitSizeTotal)return e<s&&(t.width=s),r<s&&(t.height=s),t;const o=e/r,[a,l]=os.limitDimsByArea(o),c=Di(s,a,i),h=Di(s,l,i);return e>c&&(t.zoomX/=e/c,t.width=c,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),r=e.x*t.x/this.scaleX,i=e.y*t.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(i+2),zoomX:t.x,zoomY:t.y,x:r,y:i}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:r,height:i,zoomX:s,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==t.width||i!==t.height,h=this.zoomX!==s||this.zoomY!==o;if(!t||!e)return!1;if(c||h){r!==t.width||i!==t.height?(t.width=r,t.height=i):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const u=a/2,d=l/2;return this.cacheTranslationX=Math.round(t.width/2-u)+u,this.cacheTranslationY=Math.round(t.height/2-d)+d,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(s,o),this.zoomX=s,this.zoomY=o,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,r=this.calcTransformMatrix(!e);t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new M(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=qo(this.calcTransformMatrix());return new M(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return t.scalarMultiply(e*r)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==We&&t!==nr||(e=this._constrainScale(e)),t===We&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Xr||(e=new Xr(e));const r=this[t]!==e;return this[t]=e,r&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:r,cacheTranslationX:i,cacheTranslationY:s}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:r,cacheTranslationX:i,cacheTranslationY:s,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===He&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,r){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0),t.restore()}drawObject(t,e,r){const i=this.fill,s=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,r),this.fill=i,this.stroke=s}createClipPathLayer(t,e){const r=ir(e),i=r.getContext("2d");if(i.translate(e.cacheTranslationX,e.cacheTranslationY),i.scale(e.zoomX,e.zoomY),t._cacheCanvas=r,e.parentClipPaths.forEach(s=>{s.transform(i)}),e.parentClipPaths.push(t),t.absolutePositioned){const s=ur(this.calcTransformMatrix());i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}return t.transform(i),t.drawObject(i,!0,e),r}_drawClipPath(t,e,r){if(!e)return;e._transformDone=!0;const i=this.createClipPathLayer(e,r);this.drawClipPathOnCache(t,e,i)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,r=this._cacheContext;return!(!e||!r||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&r&&!t&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height),r.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const r=e.stroke;r&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,Qe(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(t,r):(t.strokeStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:r}=e;r&&(Qe(r)?(t.fillStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.fillStyle=r)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(r==null?void 0:r.viewportTransform)||Fe,a=s*i,l=o*i,c=e.nonScaling?new M(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Ot.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,t.shadowOffsetX=e.offsetX*a*c.x,t.shadowOffsetY=e.offsetY*l*c.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!Qe(e))return{offsetX:0,offsetY:0};const r=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,s=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,i,s):t.transform(1,0,0,1,i,s),r&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(t){this.paintFirst===He?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),o=i.x/this.scaleX/s,a=i.y/this.scaleY/s,l=ir({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(i.zoomX/this.scaleX/s,i.zoomY/this.scaleY/s),this._applyPatternGradientTransform(c,e),c.fillStyle=e.toLive(t),c.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/i.zoomX,s*this.scaleY/i.zoomY),t.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new M(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(tt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=yg(this),r=this.group,i=this.shadow,s=Math.abs,o=t.enableRetinaScaling?rg():1,a=(t.multiplier||1)*o,l=t.canvasProvider||(y=>new Vc(y,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Vb(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&Nb(this,this.getViewportTransform()),this.setCoords();const c=Jr(),h=this.getBoundingRect(),u=this.shadow,d=new M;if(u){const y=u.blur,C=u.nonScaling?new M(1,1):this.getObjectScaling();d.x=2*Math.round(s(u.offsetX)+y)*s(C.x),d.y=2*Math.round(s(u.offsetY)+y)*s(C.y)}const f=h.width+d.x,g=h.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(g);const p=l(c);t.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new M(p.width/2,p.height/2),vt,vt);const _=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const w=p.toCanvasElement(a||1,t);return this.set("canvas",_),this.shadow=i,r&&(this.group=r),this.set(e),this.setCoords(),p._objects=[],p.destroy(),w}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return lg(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return cg(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:r,originY:i}=this;if(e){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=vt,this.originY=vt,this.left=s,this.top=o}if(this.set("angle",t),e){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,i);this.left=s,this.top=o,this.originX=r,this.originY=i}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Go.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&kr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,e),r},{})}_animate(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=t.split("."),s=this.constructor.colorProperties.includes(i[i.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,h=x(x({},r),{},{target:this,startValue:a??i.reduce((u,d)=>u[d],this),endValue:e,abort:o==null?void 0:o.bind(this),onChange:(u,d,f)=>{i.reduce((g,p,_)=>(_===i.length-1&&(g[p]=u),g[p]),this),l&&l(u,d,f)},onComplete:(u,d,f)=>{this.setCoords(),c&&c(u,d,f)}});return s?lx(h):Fg(h)}isDescendantOf(t){const{parent:e,group:r}=this;return e===t||r===t||!!e&&e.isDescendantOf(t)||!!r&&r!==e&&r.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),r=t.getAncestors();if(e.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[t,...r.slice(0,r.length-1)],common:[this]};for(let i,s=0;s<e.length;s++){if(i=e[s],i===t)return{fork:[this,...e.slice(0,s)],otherFork:[],common:e.slice(s)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[t,...r.slice(0,o)],common:[this,...e]};if(i===r[o])return{fork:[this,...e.slice(0,s)],otherFork:[t,...r.slice(0,o)],common:e.slice(s)}}}return{fork:[this,...e],otherFork:[t,...r],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const r=e.common[0]||this.canvas;if(!r)return;const i=e.fork.pop(),s=e.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Oo.customProperties,this.constructor.customProperties||[]);let e;const r=Ot.NUM_FRACTION_DIGITS,{clipPath:i,fill:s,stroke:o,shadow:a,strokeDashArray:l,left:c,top:h,originX:u,originY:d,width:f,height:g,strokeWidth:p,strokeLineCap:_,strokeDashOffset:w,strokeLineJoin:y,strokeUniform:C,strokeMiterLimit:S,scaleX:k,scaleY:A,angle:N,flipX:R,flipY:W,opacity:ot,visible:mt,backgroundColor:ht,fillRule:at,paintFirst:dt,globalCompositeOperation:lt,skewX:nt,skewY:q}=this;i&&!i.excludeFromExport&&(e=i.toObject(t.concat("inverted","absolutePositioned")));const et=Ut=>Yt(Ut,r),Xt=x(x({},Fi(this,t)),{},{type:this.constructor.type,version:Vl,originX:u,originY:d,left:et(c),top:et(h),width:et(f),height:et(g),fill:gu(s)?s.toObject():s,stroke:gu(o)?o.toObject():o,strokeWidth:et(p),strokeDashArray:l&&l.concat(),strokeLineCap:_,strokeDashOffset:w,strokeLineJoin:y,strokeUniform:C,strokeMiterLimit:et(S),scaleX:et(k),scaleY:et(A),angle:et(N),flipX:R,flipY:W,opacity:et(ot),shadow:a&&a.toObject(),visible:mt,backgroundColor:ht,fillRule:at,paintFirst:dt,globalCompositeOperation:lt,skewX:et(nt),skewY:et(q)},e?{clipPath:e}:null);return this.includeDefaultValues?Xt:this._removeDefaultValues(Xt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),r=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return jc(t,(i,s)=>{if(s===It||s===Ne||s==="type")return!0;const o=r[s];return i!==o&&!(Array.isArray(i)&&Array.isArray(o)&&i.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=qt(t,hx),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:i}=r,s=qt(r,ux);return Ca(e,s).then(o=>i?(delete o[i],new this(e[i],o)):new this(o))}static fromObject(t,e){return this._fromObject(t,e)}};b(Ar,"stateProperties",Zb),b(Ar,"cacheProperties",on),b(Ar,"ownDefaults",Qb),b(Ar,"type","FabricObject"),b(Ar,"colorProperties",[he,He,"backgroundColor"]),b(Ar,"customProperties",[]),tt.setClass(Ar),tt.setClass(Ar,"object");const Ai=(n,t,e)=>(r,i,s,o)=>{const a=t(r,i,s,o);return a&&wg(n,x(x({},xg(r,i,s,o)),e)),a};function Ii(n){return(t,e,r,i)=>{const{target:s,originX:o,originY:a}=e,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),h=n(t,e,r,i);return s.setPositionByOrigin(c,e.originX,e.originY),h}}const Eu=Ai(Ss,Ii((n,t,e,r)=>{const i=Nc(t,t.originX,t.originY,e,r);if(le(t.originX)===le(vt)||le(t.originX)===le(re)&&i.x<0||le(t.originX)===le(It)&&i.x>0){const{target:s}=t,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=bg(t)?2:1,l=s.width,c=Math.abs(i.x*a/s.scaleX)-o;return s.set("width",Math.max(c,1)),l!==s.width}return!1}));function dx(n,t,e,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?He:he,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let h,u=t,d=e;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(h=s,n.scale(1,o/s),d=e*s/o):o>s?(h=o,n.scale(s/o,1),u=t*o/s):h=s,n.beginPath(),n.arc(u,d,h/2,0,Xo,!1),n[l](),c&&n.stroke(),n.restore()}function fx(n,t,e,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:i.transparentCorners,l=a?He:he,c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),h=s/2,u=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.translate(t,e);const d=i.getTotalAngle();n.rotate(oe(d)),n["".concat(l,"Rect")](-h,-u,s,o),c&&n.strokeRect(-h,-u,s,o),n.restore()}class lr{constructor(t){b(this,"visible",!0),b(this,"actionName",xa),b(this,"angle",0),b(this,"x",0),b(this,"y",0),b(this,"offsetX",0),b(this,"offsetY",0),b(this,"sizeX",0),b(this,"sizeY",0),b(this,"touchSizeX",0),b(this,"touchSizeY",0),b(this,"cursorStyle","crosshair"),b(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,r,i){var s;let{tl:o,tr:a,br:l,bl:c}=i;return((s=e.canvas)===null||s===void 0?void 0:s.getActiveObject())===e&&e.isControlVisible(t)&&Kt.isPointInPolygon(r,[o,a,l,c])}getActionHandler(t,e,r){return this.actionHandler}getMouseDownHandler(t,e,r){return this.mouseDownHandler}getMouseUpHandler(t,e,r){return this.mouseUpHandler}cursorStyleHandler(t,e,r){return e.cursorStyle}getActionName(t,e,r){return e.actionName}getVisibility(t,e){var r,i;return(r=(i=t._controlsVisibility)===null||i===void 0?void 0:i[e])!==null&&r!==void 0?r:this.visible}setVisibility(t,e,r){this.visible=t}positionHandler(t,e,r,i){return new M(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,r,i,s,o){const a=Rc([Rs(r,i),Pi({angle:t}),Lc((s?this.touchSizeX:this.sizeX)||e,(s?this.touchSizeY:this.sizeY)||e)]);return{tl:new M(-.5,-.5).transform(a),tr:new M(.5,-.5).transform(a),br:new M(.5,.5).transform(a),bl:new M(-.5,.5).transform(a)}}render(t,e,r,i,s){((i=i||{}).cornerStyle||s.cornerStyle)==="circle"?dx.call(this,t,e,r,i,s):fx.call(this,t,e,r,i,s)}}const gx=(n,t,e)=>e.lockRotation?Zo:t.cursorStyle,px=Ai(ig,Ii((n,t,e,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=t;const h=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(pr(i,"lockRotation"))return!1;const u=Math.atan2(o-h.y,s-h.x),d=Math.atan2(r-h.y,e-h.x);let f=tn(d-u+a);if(i.snapAngle&&i.snapAngle>0){const p=i.snapAngle,_=i.snapThreshold||p,w=Math.ceil(f/p)*p,y=Math.floor(f/p)*p;Math.abs(f-y)<_?f=y:Math.abs(f-w)<_&&(f=w)}f<0&&(f=360+f),f%=360;const g=i.angle!==f;return i.angle=f,g}));function Ag(n,t){const e=t.canvas,r=n[e.uniScaleKey];return e.uniformScaling&&!r||!e.uniformScaling&&r}function Ig(n,t,e){const r=pr(n,"lockScalingX"),i=pr(n,"lockScalingY");if(r&&i||!t&&(r||i)&&e||r&&t==="x"||i&&t==="y")return!0;const{width:s,height:o,strokeWidth:a}=n;return s===0&&a===0&&t!=="y"||o===0&&a===0&&t!=="x"}const mx=["e","se","s","sw","w","nw","n","ne","e"],Gi=(n,t,e)=>{const r=Ag(n,e);if(Ig(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",r))return Zo;const i=Sg(e,t);return"".concat(mx[i],"-resize")};function Wc(n,t,e,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=t.target,o=i.by,a=Ag(n,s);let l,c,h,u,d,f;if(Ig(s,o,a))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,h=t.scaleY*t.gestureScale;else{if(l=Nc(t,t.originX,t.originY,e,r),d=o!=="y"?Math.sign(l.x||t.signX||1):1,f=o!=="x"?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=d),t.signY||(t.signY=f),pr(s,"lockScalingFlip")&&(t.signX!==d||t.signY!==f))return!1;if(u=s._getTransformedDimensions(),a&&!o){const _=Math.abs(l.x)+Math.abs(l.y),{original:w}=t,y=_/(Math.abs(u.x*w.scaleX/s.scaleX)+Math.abs(u.y*w.scaleY/s.scaleY));c=w.scaleX*y,h=w.scaleY*y}else c=Math.abs(l.x*s.scaleX/u.x),h=Math.abs(l.y*s.scaleY/u.y);bg(t)&&(c*=2,h*=2),t.signX!==d&&o!=="y"&&(t.originX=_u(t.originX),c*=-1,t.signX=d),t.signY!==f&&o!=="x"&&(t.originY=_u(t.originY),h*=-1,t.signY=f)}const g=s.scaleX,p=s.scaleY;return o?(o==="x"&&s.set(We,c),o==="y"&&s.set(nr,h)):(!pr(s,"lockScalingX")&&s.set(We,c),!pr(s,"lockScalingY")&&s.set(nr,h)),g!==s.scaleX||p!==s.scaleY}const Ws=Ai(ba,Ii((n,t,e,r)=>Wc(n,t,e,r))),vx=Ai(ba,Ii((n,t,e,r)=>Wc(n,t,e,r,{by:"x"}))),_x=Ai(ba,Ii((n,t,e,r)=>Wc(n,t,e,r,{by:"y"}))),yx=["target","ex","ey","skewingSide"],al={x:{counterAxis:"y",scale:We,skew:Mi,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:nr,skew:Ei,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},wx=["ns","nesw","ew","nwse"],bx=(n,t,e)=>{if(t.x!==0&&pr(e,"lockSkewingY")||t.y!==0&&pr(e,"lockSkewingX"))return Zo;const r=Sg(e,t)%4;return"".concat(wx[r],"-resize")};function Rg(n,t,e,r,i){const{target:s}=e,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:h}=al[n];if(pr(s,l))return!1;const{origin:u,flip:d}=al[o],f=le(e[u])*(s[d]?-1:1),g=-Math.sign(f)*(s[h]?-1:1),p=.5*-((s[c]===0&&Nc(e,vt,vt,r,i)[n]>0||s[c]>0?1:-1)*g)+.5;return Ai(sg,Ii((w,y,C,S)=>function(k,A,N){let{target:R,ex:W,ey:ot,skewingSide:mt}=A,ht=qt(A,yx);const{skew:at}=al[k],dt=N.subtract(new M(W,ot)).divide(new M(R.scaleX,R.scaleY))[k],lt=R[at],nt=ht[at],q=Math.tan(oe(nt)),et=k==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,Xt=2*dt*mt/Math.max(et,1)+q,Ut=tn(Math.atan(Xt));R.set(at,Ut);const ee=lt!==R[at];if(ee&&k==="y"){const{skewX:Et,scaleX:ce}=R,Gt=R._getTransformedDimensions({skewY:lt}),Ae=R._getTransformedDimensions(),zt=Et!==0?Gt.x/Ae.x:1;zt!==1&&R.set(We,zt*ce)}return ee}(n,y,new M(C,S))))(t,x(x({},e),{},{[a]:p,skewingSide:g}),r,i)}const xx=(n,t,e,r)=>Rg("x",n,t,e,r),Sx=(n,t,e,r)=>Rg("y",n,t,e,r);function Oa(n,t){return n[t.canvas.altActionKey]}const Ys=(n,t,e)=>{const r=Oa(n,e);return t.x===0?r?Mi:nr:t.y===0?r?Ei:We:""},si=(n,t,e)=>Oa(n,e)?bx(0,t,e):Gi(n,t,e),Pu=(n,t,e,r)=>Oa(n,t.target)?Sx(n,t,e,r):vx(n,t,e,r),Fu=(n,t,e,r)=>Oa(n,t.target)?xx(n,t,e,r):_x(n,t,e,r),Lg=()=>({ml:new lr({x:-.5,y:0,cursorStyleHandler:si,actionHandler:Pu,getActionName:Ys}),mr:new lr({x:.5,y:0,cursorStyleHandler:si,actionHandler:Pu,getActionName:Ys}),mb:new lr({x:0,y:.5,cursorStyleHandler:si,actionHandler:Fu,getActionName:Ys}),mt:new lr({x:0,y:-.5,cursorStyleHandler:si,actionHandler:Fu,getActionName:Ys}),tl:new lr({x:-.5,y:-.5,cursorStyleHandler:Gi,actionHandler:Ws}),tr:new lr({x:.5,y:-.5,cursorStyleHandler:Gi,actionHandler:Ws}),bl:new lr({x:-.5,y:.5,cursorStyleHandler:Gi,actionHandler:Ws}),br:new lr({x:.5,y:.5,cursorStyleHandler:Gi,actionHandler:Ws}),mtr:new lr({x:0,y:-.5,actionHandler:px,cursorStyleHandler:gx,offsetY:-40,withConnection:!0,actionName:Ac})}),Cx=()=>({mr:new lr({x:.5,y:0,actionHandler:Eu,cursorStyleHandler:si,actionName:Ss}),ml:new lr({x:-.5,y:0,actionHandler:Eu,cursorStyleHandler:si,actionName:Ss})}),Tx=()=>x(x({},Lg()),Cx());class Os extends Ar{static getDefaults(){return x(x({},super.getDefaults()),Os.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Os.ownDefaults),this.setOptions(t)}static createControls(){return{controls:Lg()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,r=e.target,i=e.action;if(this===r&&i&&i.startsWith(xa))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i],a=this.controls[s];if(a.shouldActivate(s,this,t,e?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:a,coord:this.oCoords[s]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),r=Rs(e.x,e.y),i=Pi({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=ye(r,i),o=ye(t,s),a=ye(o,[1/t[0],0,0,1/t[3],0,0]),l=this.group?qo(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),h={};return this.forEachControl((u,d)=>{const f=u.positionHandler(c,a,this,u);h[d]=Object.assign(f,this._calcCornerCoords(u,f))}),h}_calcCornerCoords(t,e){const r=this.getTotalAngle();return{corner:t.calcCornerCoords(r,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(r,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/i[0],1/i[3]),t.rotate(oe(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=x({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);t.save(),t.strokeStyle=i.borderColor,this._setLineDash(t,i.borderDashArray),this.strokeBorders(t,e),i.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=x({hasBorders:r,hasControls:i},e),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=ye(o,this.calcTransformMatrix()),h=qo(c);t.save(),t.translate(h.translateX,h.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(h.angle-=180),t.rotate(oe(this.group?h.angle:this.angle)),a&&this.drawBorders(t,h,e),l&&this.drawControls(t,e),t.restore()}drawBorders(t,e,r){let i;if(r&&r.forActiveSelection||this.group){const s=Bc(this.width,this.height,Sa(e)),o=this.isStrokeAccountedForInDimensions()?Ic:(this.strokeUniform?new M().scalarAdd(this.canvas?this.canvas.getZoom():1):new M(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,i,r)}drawControlsConnectingLines(t,e){let r=!1;t.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,t.moveTo(i.x*e.x,i.y*e.y),t.lineTo(i.x*e.x+i.offsetX,i.y*e.y+i.offsetY))}),r&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=x({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},e);t.setTransform(r,0,0,r,0,0),t.strokeStyle=t.fillStyle=a.cornerColor,this.transparentCorners||(t.strokeStyle=a.cornerStrokeColor),this._setLineDash(t,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const h=this.oCoords[c];l.render(t,h.x,h.y,a,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[r,i]=e;return this.setControlVisible(r,i)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const r=this.canvas.viewportTransform;e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(e);const i=this.width+4,s=this.height+4;return e.clearRect(-i/2,-s/2,i,s),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function jg(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r)||Object.create(null))})}),n}b(Os,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Te extends Os{}jg(Te,[Cg]),tt.setClass(Te),tt.setClass(Te,"object");const Dx=(n,t,e,r)=>{const i=2*(r=Math.round(r))+1,{data:s}=n.getImageData(t-r,e-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class Vg{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new M(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new M(1/this.options.scaleX,1/this.options.scaleY):new M(1,1)}createSideVector(t,e){const r=Hl(t,e);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(t,e,r){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new M(t);return e.y+=e.x*Math.tan(oe(this.options.skewY)),e.x+=e.y*Math.tan(oe(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const Ox=new M;class wi extends Vg{static getOrthogonalRotationFactor(t,e){const r=e?Yl(t,e):qb(t);return Math.abs(r)<Is?-1:1}constructor(t,e,r,i){super(i),b(this,"AB",void 0),b(this,"AC",void 0),b(this,"alpha",void 0),b(this,"bisector",void 0),this.A=new M(t),this.B=new M(e),this.C=new M(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Yl(this.AB,this.AC),this.bisector=Uc(Eg(this.AB.eq(Ox)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e),s=Pg(i),o=wi.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*o)}projectBevel(){const t=[];return(this.alpha%Xo==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),r=1/Math.sin(e/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?Wl(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Wl(i)/this.strokeProjectionMagnitude<=s&&t.push(this.applySkew(this.A.add(i))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const r=[],i=new M(wi.getOrthogonalRotationFactor(this.bisector),wi.getOrthogonalRotationFactor(new M(this.bisector.y,this.bisector.x)));return[new M(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new M(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(s=>{Ou(s,t,e)&&r.push(this.A.add(s))}),r}projectRoundWithSkew(t,e){const r=[],{skewX:i,skewY:s,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new M(Math.tan(oe(i)),Math.tan(oe(s))),h=this.strokeProjectionMagnitude,u=l?h/a/Math.sqrt(1/a**2+1/o**2*c.y**2):h/Math.sqrt(1+c.y**2),d=new M(Math.sqrt(Math.max(h**2-u**2,0)),u),f=l?h/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):h/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new M(f,Math.sqrt(Math.max(h**2-f**2,0)));return[g,g.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p)).forEach(p=>{Ou(p,t,e)&&r.push(this.applySkew(this.A).add(p))}),r}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%Xo==0,r=this.applySkew(this.A),i=t[e?0:2].subtract(r),s=t[e?1:0].subtract(r),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=cs(i,o)>0,l=a?i:s,c=a?s:i;return this.isSkewed()?t.push(...this.projectRoundWithSkew(l,c)):t.push(...this.projectRoundNoSkew(l,c)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class Au extends Vg{constructor(t,e,r){super(r),this.A=new M(t),this.T=new M(e)}calcOrthogonalProjection(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(t,e);return this.scaleUnitVector(Pg(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new M(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new wi(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new M(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Uc(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(r);t.push(i.add(e),i.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const kx=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const i=n.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new M(o)),s),[new M(n[0])]);if(i.length===1)e=!0;else if(!e){const s=i[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(i,a=>!a.eq(s));i.splice(o+1)}return i.forEach((s,o,a)=>{let l,c;o===0?(c=a[1],l=e?s:a[a.length-1]):o===a.length-1?(l=a[o-1],c=e?s:a[0]):(l=a[o-1],c=a[o+1]),e&&a.length===1?r.push(...new Au(s,s,t).project()):!e||o!==0&&o!==a.length-1?r.push(...new wi(s,l,c,t).project()):r.push(...new Au(s,o===0?c:l,t).project())}),r},Yc=n=>{const t={};return Object.keys(n).forEach(e=>{t[e]={},Object.keys(n[e]).forEach(r=>{t[e][r]=x({},n[e][r])})}),t},Mx=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Yi;const Xc=n=>{if(Yi||Yi||(Yi="Intl"in wa()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Yi){const t=Yi.segment(n);return Array.from(t).map(e=>{let{segment:r}=e;return r})}return Ex(n)},Ex=n=>{const t=[];for(let e,r=0;r<n.length;r++)(e=Px(n,r))!==!1&&t.push(e);return t},Px=(n,t)=>{const e=n.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return n.charAt(t);if(55296<=e&&e<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},zc=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==t.fill||n.stroke!==t.stroke||n.strokeWidth!==t.strokeWidth||n.fontSize!==t.fontSize||n.fontFamily!==t.fontFamily||n.fontWeight!==t.fontWeight||n.fontStyle!==t.fontStyle||n.textDecorationThickness!==t.textDecorationThickness||n.textBackgroundColor!==t.textBackgroundColor||n.deltaY!==t.deltaY||e&&(n.overline!==t.overline||n.underline!==t.underline||n.linethrough!==t.linethrough)},Fx=(n,t)=>{const e=t.split(`
`),r=[];let i=-1,s={};n=Yc(n);for(let o=0;o<e.length;o++){const a=Xc(e[o]);if(n[o])for(let l=0;l<a.length;l++){i++;const c=n[o][l];c&&Object.keys(c).length>0&&(zc(s,c,!0)?r.push({start:i,end:i+1,style:c}):r[r.length-1].end++),s=c||{}}else i+=a.length,s={}}return r},Ax=(n,t)=>{if(!Array.isArray(n))return Yc(n);const e=t.split(Fc),r={};let i=-1,s=0;for(let o=0;o<e.length;o++){const a=Xc(e[o]);for(let l=0;l<a.length;l++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][l]=x({},n[s].style),i===n[s].end-1&&s++)}return r},kn=["display","transform",he,"fill-opacity","fill-rule","opacity",He,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Iu(n,t){const e=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),i&&t.length&&(o=new RegExp("#"+i+s,"i"),t=t.replace(o,"")),r&&t.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+s,"i"),t=t.replace(o,"")}return t.length===0}function Ix(n,t){let e=!0;const r=Iu(n,t.pop());return r&&t.length&&(e=function(i,s){let o,a=!0;for(;i.parentElement&&i.parentElement.nodeType===1&&s.length;)a&&(o=s.pop()),a=Iu(i=i.parentElement,o);return s.length===0}(n,t)),r&&e&&t.length===0}const Rx=n=>{var t;return(t=$b[n])!==null&&t!==void 0?t:n},Lx=new RegExp("(".concat(dr,")"),"gi"),jx=n=>n.replace(Lx," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Ru,Lu,ju,Vu,Bu,Nu,Uu;const Ee="(".concat(dr,")"),Vx=String.raw(Ru||(Ru=Er(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ee),Bx=String.raw(Lu||(Lu=Er(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ee),Nx=String.raw(ju||(ju=Er(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ee,Ee,Ee),Ux=String.raw(Vu||(Vu=Er(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ee,Ee),Hx=String.raw(Bu||(Bu=Er(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ee,Ee),Wx=String.raw(Nu||(Nu=Er(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ee,Ee,Ee,Ee,Ee,Ee),$c="(?:".concat(Wx,"|").concat(Hx,"|").concat(Nx,"|").concat(Ux,"|").concat(Vx,"|").concat(Bx,")"),Yx="(?:".concat($c,"*)"),Xx=String.raw(Uu||(Uu=Er(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),Yx),zx=new RegExp(Xx),$x=new RegExp($c),Gx=new RegExp($c,"g");function Xl(n){const t=[];if(!(n=jx(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!zx.test(n))return[...Fe];for(const e of n.matchAll(Gx)){const r=$x.exec(e[0]);if(!r)continue;let i=Fe;const s=r.filter(g=>!!g),[,o,...a]=s,[l,c,h,u,d,f]=a.map(g=>parseFloat(g));switch(o){case"translate":i=Rs(l,c);break;case Ac:i=Pi({angle:l},{x:c,y:h});break;case xa:i=Lc(l,c);break;case Mi:i=dg(l);break;case Ei:i=fg(l);break;case"matrix":i=[l,c,h,u,d,f]}t.push(i)}return Rc(t)}function qx(n,t,e,r){const i=Array.isArray(t);let s,o=t;if(n!==he&&n!==He||t!==Ue){if(n==="strokeUniform")return t==="non-scaling-stroke";if(n==="strokeDashArray")o=t===Ue?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=e&&e.transformMatrix?ye(e.transformMatrix,Xl(t)):Xl(t);else if(n==="visible")o=t!==Ue&&t!=="hidden",e&&e.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(t),e&&e.opacity!==void 0&&(o*=e.opacity);else if(n==="textAnchor")o=t==="start"?It:t==="end"?re:vt;else if(n==="charSpacing"||n===zn)s=yi(t,r)/r*1e3;else if(n==="paintFirst"){const a=t.indexOf(he),l=t.indexOf(He);o=he,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=He)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return t;if(n==="imageSmoothing")return t==="optimizeQuality";s=i?t.map(yi):yi(t,r)}}else o="";return!i&&isNaN(s)?o:s}function Kx(n,t){const e=n.match(zb);if(!e)return;const r=e[1],i=e[3],s=e[4],o=e[5],a=e[6];r&&(t.fontStyle=r),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(t.fontSize=yi(s)),a&&(t.fontFamily=a),o&&(t.lineHeight=o==="normal"?1:o)}function Zx(n,t){n.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[r,i]=e.split(":");t[r.trim().toLowerCase()]=i.trim()})}function Qx(n){const t={},e=n.getAttribute("style");return e&&(typeof e=="string"?Zx(e,t):function(r,i){Object.entries(r).forEach(s=>{let[o,a]=s;a!==void 0&&(i[o.toLowerCase()]=a)})}(e,t)),t}const Jx={stroke:"strokeOpacity",fill:"fillOpacity"};function an(n,t,e){if(!n)return{};let r,i={},s=Pc;n.parentNode&&Du.test(n.parentNode.nodeName)&&(i=an(n.parentElement,t,e),i.fontSize&&(r=s=yi(i.fontSize)));const o=x(x(x({},t.reduce((c,h)=>{const u=n.getAttribute(h);return u&&(c[h]=u),c},{})),function(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={};for(const d in h)Ix(c,d.split(" "))&&(u=x(x({},u),h[d]));return u}(n,e)),Qx(n));o[sl]&&n.setAttribute(sl,o[sl]),o[il]&&(r=yi(o[il],s),o[il]="".concat(r));const a={};for(const c in o){const h=Rx(c),u=qx(h,o[c],i,r);a[h]=u}a&&a.font&&Kx(a.font,a);const l=x(x({},i),a);return Du.test(n.nodeName)?l:function(c){const h=Te.getDefaults();return Object.entries(Jx).forEach(u=>{let[d,f]=u;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!h[d])return;c[d]=h[d]}if(c[d].indexOf("url(")===0)return;const g=new Lt(c[d]);c[d]=g.setAlpha(Yt(g.getAlpha()*c[f],2)).toRgba()}),c}(l)}const tS=["left","top","width","height","visible"],Bg=["rx","ry"];class Pe extends Te{static getDefaults(){return x(x({},super.getDefaults()),Pe.ownDefaults)}constructor(t){super(),Object.assign(this,Pe.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:r}=this,i=-e/2,s=-r/2,o=this.rx?Math.min(this.rx,e/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;t.beginPath(),t.moveTo(i+o,s),t.lineTo(i+e-o,s),l&&t.bezierCurveTo(i+e-hn*o,s,i+e,s+hn*a,i+e,s+a),t.lineTo(i+e,s+r-a),l&&t.bezierCurveTo(i+e,s+r-hn*a,i+e-hn*o,s+r,i+e-o,s+r),t.lineTo(i+o,s+r),l&&t.bezierCurveTo(i+hn*o,s+r,i,s+r-hn*a,i,s+r-a),t.lineTo(i,s+a),l&&t.bezierCurveTo(i,s+hn*a,i+hn*o,s,i+o,s),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Bg,...t])}_toSVG(){const{width:t,height:e,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,r){const i=an(t,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=i,h=qt(i,tS);return new this(x(x(x({},e),h),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}b(Pe,"type","Rect"),b(Pe,"cacheProperties",[...on,...Bg]),b(Pe,"ownDefaults",{rx:0,ry:0}),b(Pe,"ATTRIBUTE_NAMES",[...kn,"x","y","rx","ry","width","height"]),tt.setClass(Pe),tt.setSVGClass(Pe);const Nr="initialization",Jo="added",Gc="removed",ta="imperative",Ng=(n,t)=>{const{strokeUniform:e,strokeWidth:r,width:i,height:s,group:o}=t,a=o&&o!==n?Ta(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?t.getRelativeCenterPoint().transform(a):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),h=e&&c?Bb(new M(r,r),void 0,n.calcTransformMatrix()):Ic,u=!e&&c?r:0,d=Bc(i+u,s+u,Rc([a,t.calcOwnMatrix()],!0)).add(h).scalarDivide(2);return[l.subtract(d),l.add(d)]};class ka{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:r,strategy:i}=t;return e===Nr||e===ta||!!r&&i!==r}shouldLayoutClipPath(t){let{type:e,target:{clipPath:r}}=t;return e!==Nr&&r&&!r.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:r,target:i}=e;if(r===ta&&e.overrides)return e.overrides;if(t.length===0)return;const{left:s,top:o,width:a,height:l}=Yr(t.map(u=>Ng(i,u)).reduce((u,d)=>u.concat(d),[])),c=new M(a,l),h=new M(s,o).add(c.scalarDivide(2));if(r===Nr){const u=this.getInitialSize(e,{size:c,center:h});return{center:h,relativeCorrection:new M(0,0),size:u}}return{center:h.transform(i.calcOwnMatrix()),size:c}}}b(ka,"type","strategy");class zl extends ka{shouldPerformLayout(t){return!0}}b(zl,"type","fit-content"),tt.setClass(zl);const eS=["strategy"],rS=["target","strategy","bubbles","prevStrategy"],Ug="layoutManager";class ks{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new zl;b(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=x(x({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const r=this.getLayoutResult(e);r&&this.commitLayout(e,r),this.onAfterLayout(e,r),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:r}=e;return[$o,ng,Ss,ig,ba,sg,zo,Tb,Db].map(i=>t.on(i,s=>this.performLayout(i===$o?{type:"object_modified",trigger:i,e:s,target:r}:{type:"object_modifying",trigger:i,e:s,target:r})))}subscribe(t,e){this.unsubscribe(t,e);const r=this.attachHandlers(t,e);this._subscriptions.set(t,r)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(r=>r()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:r}=t,{canvas:i}=e;if(r===Nr||r===Jo?this.subscribeTargets(t):r===Gc&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),i&&i.fire("object:layout:before",{target:e,context:t}),r===ta&&t.deep){const s=qt(t,eS);e.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(x(x({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(t){const{target:e,strategy:r,type:i}=t,s=r.calcLayoutResult(t,e.getObjects());if(!s)return;const o=i===Nr?new M:e.getRelativeCenterPoint(),{center:a,correction:l=new M,relativeCorrection:c=new M}=s,h=o.subtract(a).add(l).transform(i===Nr?Fe:ur(e.calcOwnMatrix()),!0).add(c);return{result:s,prevCenter:o,nextCenter:a,offset:h}}commitLayout(t,e){const{target:r}=t,{result:{size:i},nextCenter:s}=e;var o,a;r.set({width:i.x,height:i.y}),this.layoutObjects(t,e),t.type===Nr?r.set({left:(o=t.x)!==null&&o!==void 0?o:s.x+i.x*le(r.originX),top:(a=t.y)!==null&&a!==void 0?a:s.y+i.y*le(r.originY)}):(r.setPositionByOrigin(s,vt,vt),r.setCoords(),r.set("dirty",!0))}layoutObjects(t,e){const{target:r}=t;r.forEachObject(i=>{i.group===r&&this.layoutObject(t,e,i)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,r.clipPath)}layoutObject(t,e,r){let{offset:i}=e;r.set({left:r.left+i.x,top:r.top+i.y})}onAfterLayout(t,e){const{target:r,strategy:i,bubbles:s,prevStrategy:o}=t,a=qt(t,rS),{canvas:l}=r;r.fire("layout:after",{context:t,result:e}),l&&l.fire("object:layout:after",{context:t,result:e,target:r});const c=r.parent;s&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(x(x({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(r=>r())),t.clear()}toObject(){return{type:Ug,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}tt.setClass(ks,Ug);const nS=["type","objects","layoutManager"];class iS extends ks{performLayout(){}}class Hn extends og(Te){static getDefaults(){return x(x({},super.getDefaults()),Hn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),b(this,"_activeObjects",[]),b(this,"__objectSelectionTracker",void 0),b(this,"__objectSelectionDisposer",void 0),Object.assign(this,Hn.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var r;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(i=>{this.enterGroup(i,!1)}),this.layoutManager=(r=e.layoutManager)!==null&&r!==void 0?r:new ks,this.layoutManager.performLayout({type:Nr,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Tn("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Tn("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,r,i)=>this.canEnterGroup(e)&&i.indexOf(e)===r)}add(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(e),s=super.add(...i);return this._onAfterObjectsChange(Jo,i),s}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(t,...s);return this._onAfterObjectsChange(Jo,s),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(Gc,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const r=this[t];return super._set(t,e),t==="canvas"&&r!==e&&(this._objects||[]).forEach(i=>{i._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:r}=e;const i=this._activeObjects;if(t)i.push(r),this._set("dirty",!0);else if(i.length>0){const s=i.indexOf(r);s>-1&&(i.splice(s,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&Ko(t,ye(ur(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===t||t.isDescendantOf(r))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(Ko(t,ye(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const r=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const t=Te.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,r){this._renderBackground(t);for(let s=0;s<this._objects.length;s++){var i;const o=this._objects[s];(i=this.canvas)!==null&&i!==void 0&&i.preserveObjectStacking&&o.group!==this?(t.save(),t.transform(...ur(this.calcTransformMatrix())),o.render(t),t.restore()):o.group===this&&o.render(t)}this._drawClipPath(t,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(x({target:this,type:ta},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[t||"toObject"](e);return i.includeDefaultValues=s,o})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return x(x(x({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=Pe.prototype._toSVG.call(this),r=e.indexOf("COMMON_PARTS");e[r]='for="group" ';const i=e.join("");return t?t(i):i}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(t);r&&e.push("		",r);for(let i=0;i<this._objects.length;i++)e.push("		",this._objects[i].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],r=this._createSVGBgRect(t);r&&e.push("	",r);for(let i=0;i<this._objects.length;i++)e.push("	",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:r,objects:i=[],layoutManager:s}=t,o=qt(t,nS);return Promise.all([Cs(i,e),Ca(o,e)]).then(a=>{let[l,c]=a;const h=new this(l,x(x(x({},o),c),{},{layoutManager:new iS}));if(s){const u=tt.getClass(s.type),d=tt.getClass(s.strategy);h.layoutManager=new u(new d)}else h.layoutManager=new ks;return h.layoutManager.subscribeTargets({type:Nr,target:h,targets:h.getObjects()}),h.setCoords(),h})}}b(Hn,"type","Group"),b(Hn,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),tt.setClass(Hn);const sS=(n,t)=>Math.min(t.width/n.width,t.height/n.height),oS=(n,t)=>Math.max(t.width/n.width,t.height/n.height),$l="\\s*,?\\s*",Xi="".concat($l,"(").concat(dr,")"),aS="".concat(Xi).concat(Xi).concat(Xi).concat($l,"([01])").concat($l,"([01])").concat(Xi).concat(Xi),lS={m:"l",M:"L"},cS=(n,t,e,r,i,s,o,a,l,c,h)=>{const u=Zr(n),d=Qr(n),f=Zr(t),g=Qr(t),p=e*i*f-r*s*g+o,_=r*i*f+e*s*g+a;return["C",c+l*(-e*i*d-r*s*u),h+l*(-r*i*d+e*s*u),p+l*(e*i*g+r*s*f),_+l*(r*i*g-e*s*f),p,_]},Hu=(n,t,e,r)=>{const i=Math.atan2(t,n),s=Math.atan2(r,e);return s>=i?s-i:2*Math.PI-(i-s)};function Wu(n,t,e,r,i,s,o,a){let l;if(Ot.cachesBoundsOfCurve&&(l=[...arguments].join(),os.boundsOfCurveCache[l]))return os.boundsOfCurveCache[l];const c=Math.sqrt,h=Math.abs,u=[],d=[[0,0],[0,0]];let f=6*n-12*e+6*i,g=-3*n+9*e-9*i+3*o,p=3*e-3*n;for(let S=0;S<2;++S){if(S>0&&(f=6*t-12*r+6*s,g=-3*t+9*r-9*s+3*a,p=3*r-3*t),h(g)<1e-12){if(h(f)<1e-12)continue;const W=-p/f;0<W&&W<1&&u.push(W);continue}const k=f*f-4*p*g;if(k<0)continue;const A=c(k),N=(-f+A)/(2*g);0<N&&N<1&&u.push(N);const R=(-f-A)/(2*g);0<R&&R<1&&u.push(R)}let _=u.length;const w=_,y=Hg(n,t,e,r,i,s,o,a);for(;_--;){const{x:S,y:k}=y(u[_]);d[0][_]=S,d[1][_]=k}d[0][w]=n,d[1][w]=t,d[0][w+1]=o,d[1][w+1]=a;const C=[new M(Math.min(...d[0]),Math.min(...d[1])),new M(Math.max(...d[0]),Math.max(...d[1]))];return Ot.cachesBoundsOfCurve&&(os.boundsOfCurveCache[l]=C),C}const hS=(n,t,e)=>{let[r,i,s,o,a,l,c,h]=e;const u=((d,f,g,p,_,w,y)=>{if(g===0||p===0)return[];let C=0,S=0,k=0;const A=Math.PI,N=y*Ec,R=Qr(N),W=Zr(N),ot=.5*(-W*d-R*f),mt=.5*(-W*f+R*d),ht=g**2,at=p**2,dt=mt**2,lt=ot**2,nt=ht*at-ht*dt-at*lt;let q=Math.abs(g),et=Math.abs(p);if(nt<0){const B=Math.sqrt(1-nt/(ht*at));q*=B,et*=B}else k=(_===w?-1:1)*Math.sqrt(nt/(ht*dt+at*lt));const Xt=k*q*mt/et,Ut=-k*et*ot/q,ee=W*Xt-R*Ut+.5*d,Et=R*Xt+W*Ut+.5*f;let ce=Hu(1,0,(ot-Xt)/q,(mt-Ut)/et),Gt=Hu((ot-Xt)/q,(mt-Ut)/et,(-ot-Xt)/q,(-mt-Ut)/et);w===0&&Gt>0?Gt-=2*A:w===1&&Gt<0&&(Gt+=2*A);const Ae=Math.ceil(Math.abs(Gt/A*2)),zt=[],E=Gt/Ae,O=8/3*Math.sin(E/4)*Math.sin(E/4)/Math.sin(E/2);let T=ce+E;for(let B=0;B<Ae;B++)zt[B]=cS(ce,T,W,R,q,et,ee,Et,O,C,S),C=zt[B][5],S=zt[B][6],ce=T,T+=E;return zt})(c-n,h-t,i,s,a,l,o);for(let d=0,f=u.length;d<f;d++)u[d][1]+=n,u[d][2]+=t,u[d][3]+=n,u[d][4]+=t,u[d][5]+=n,u[d][6]+=t;return u},uS=n=>{let t=0,e=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const c of n){const h=[...c];let u;switch(h[0]){case"l":h[1]+=t,h[2]+=e;case"L":t=h[1],e=h[2],u=["L",t,e];break;case"h":h[1]+=t;case"H":t=h[1],u=["L",t,e];break;case"v":h[1]+=e;case"V":e=h[1],u=["L",t,e];break;case"m":h[1]+=t,h[2]+=e;case"M":t=h[1],e=h[2],r=h[1],i=h[2],u=["M",t,e];break;case"c":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e,h[5]+=t,h[6]+=e;case"C":a=h[3],l=h[4],t=h[5],e=h[6],u=["C",h[1],h[2],a,l,t,e];break;case"s":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e;case"S":o==="C"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=h[3],e=h[4],u=["C",a,l,h[1],h[2],t,e],a=u[3],l=u[4];break;case"q":h[1]+=t,h[2]+=e,h[3]+=t,h[4]+=e;case"Q":a=h[1],l=h[2],t=h[3],e=h[4],u=["Q",a,l,t,e];break;case"t":h[1]+=t,h[2]+=e;case"T":o==="Q"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=h[1],e=h[2],u=["Q",a,l,t,e];break;case"a":h[6]+=t,h[7]+=e;case"A":hS(t,e,h).forEach(d=>s.push(d)),t=h[6],e=h[7];break;case"z":case"Z":t=r,e=i,u=["Z"]}u?(s.push(u),o=u[0]):o=""}return s},ea=(n,t,e,r)=>Math.sqrt((e-n)**2+(r-t)**2),Hg=(n,t,e,r,i,s,o,a)=>l=>{const c=l**3,h=(f=>3*f**2*(1-f))(l),u=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new M(o*c+i*h+e*u+n*d,a*c+s*h+r*u+t*d)},Wg=n=>n**2,Yg=n=>2*n*(1-n),Xg=n=>(1-n)**2,dS=(n,t,e,r,i,s,o,a)=>l=>{const c=Wg(l),h=Yg(l),u=Xg(l),d=3*(u*(e-n)+h*(i-e)+c*(o-i)),f=3*(u*(r-t)+h*(s-r)+c*(a-s));return Math.atan2(f,d)},fS=(n,t,e,r,i,s)=>o=>{const a=Wg(o),l=Yg(o),c=Xg(o);return new M(i*a+e*l+n*c,s*a+r*l+t*c)},gS=(n,t,e,r,i,s)=>o=>{const a=1-o,l=2*(a*(e-n)+o*(i-e)),c=2*(a*(r-t)+o*(s-r));return Math.atan2(c,l)},Yu=(n,t,e)=>{let r=new M(t,e),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=ea(r.x,r.y,o.x,o.y),r=o}return i},pS=(n,t)=>{let e,r=0,i=0,s={x:n.x,y:n.y},o=x({},s),a=.01,l=0;const c=n.iterator,h=n.angleFinder;for(;i<t&&a>1e-4;)o=c(r),l=r,e=ea(s.x,s.y,o.x,o.y),e+i>t?(r-=a,a/=2):(s=o,r+=a,i+=e);return x(x({},o),{},{angle:h(l)})},zg=n=>{let t,e,r=0,i=0,s=0,o=0,a=0;const l=[];for(const c of n){const h={x:i,y:s,command:c[0],length:0};switch(c[0]){case"M":e=h,e.x=o=i=c[1],e.y=a=s=c[2];break;case"L":e=h,e.length=ea(i,s,c[1],c[2]),i=c[1],s=c[2];break;case"C":t=Hg(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),e=h,e.iterator=t,e.angleFinder=dS(i,s,c[1],c[2],c[3],c[4],c[5],c[6]),e.length=Yu(t,i,s),i=c[5],s=c[6];break;case"Q":t=fS(i,s,c[1],c[2],c[3],c[4]),e=h,e.iterator=t,e.angleFinder=gS(i,s,c[1],c[2],c[3],c[4]),e.length=Yu(t,i,s),i=c[3],s=c[4];break;case"Z":e=h,e.destX=o,e.destY=a,e.length=ea(i,s,o,a),i=o,s=a}r+=e.length,l.push(e)}return l.push({length:r,x:i,y:s}),l},mS=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zg(n),r=0;for(;t-e[r].length>0&&r<e.length-2;)t-=e[r].length,r++;const i=e[r],s=t/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return x(x({},new M(i.x,i.y).lerp(new M(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return x(x({},new M(i.x,i.y).lerp(new M(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":case"Q":return pS(i,t)}},vS=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Xu=new RegExp(aS,"g"),_S=new RegExp(dr,"gi"),yS={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},wS=n=>{var t;const e=[],r=(t=n.match(vS))!==null&&t!==void 0?t:[];for(const i of r){const s=i[0];if(s==="z"||s==="Z"){e.push([s]);continue}const o=yS[s.toLowerCase()];let a=[];if(s==="a"||s==="A"){Xu.lastIndex=0;for(let l=null;l=Xu.exec(i);)a.push(...l.slice(1))}else a=i.match(_S)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),h=lS[s];c[0]=l>0&&h?h:s;for(let u=0;u<o;u++)c[u+1]=parseFloat(a[l+u]);e.push(c)}}return e},bS=(n,t)=>n.map(e=>e.map((r,i)=>i===0||t===void 0?r:Yt(r,t)).join(" ")).join(" ");function Gl(n,t){const e=n.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(r=>{let[i,s]=r;return e.setProperty(i,s)}))}class xS extends vg{constructor(t){let{allowTouchScrolling:e=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),b(this,"upper",void 0),b(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:e}),this.applyCanvasStyle(s,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:t}=this.lower,e=Jr();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=ki().createElement("div");return t.setAttribute("data-fabric","wrapper"),Gl(t,{position:"relative"}),mu(t),t}applyCanvasStyle(t,e){const{styles:r,allowTouchScrolling:i}=e;Gl(t,x(x({},r),{},{"touch-action":i?"manipulation":Ue})),mu(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:r,ctx:i}=this.upper;mg(r,i,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Nl(this.upper.el,t),Nl(this.container,t)}cleanupDOM(t){const e=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(t),e.removeChild(i),e.removeChild(r),e.parentNode&&e.parentNode.replaceChild(r,e)}dispose(){super.dispose(),kr().dispose(this.upper.el),delete this.upper,delete this.container}}class Ma extends Vc{constructor(){super(...arguments),b(this,"targets",[]),b(this,"_hoveredTargets",[]),b(this,"_objectsToRender",void 0),b(this,"_currentTransform",null),b(this,"_groupSelector",null),b(this,"contextTopDirty",!1)}static getDefaults(){return x(x({},super.getDefaults()),Ma.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new xS(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),r=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-e+i,-r+i),s.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(s),t.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return Dx(s,a,a,a)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(r=>!!r&&t[r]===!0):t[e])}_shouldClearSelection(t,e){const r=this.getActiveObjects(),i=this._activeObject;return!!(!e||e&&i&&r.length>1&&r.indexOf(e)===-1&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e)}_shouldCenterTransform(t,e,r){if(!t)return;let i;return e===xa||e===We||e===nr||e===Ss?i=this.centeredScaling||t.centeredScaling:e===Ac&&(i=this.centeredRotation||t.centeredRotation),i?!r:r}_getOriginFromCorner(t,e){const r={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?r.x=re:["mr","tr","br"].includes(e)&&(r.x=It),["tl","mt","tr"].includes(e)?r.y=Bl:["bl","mb","br"].includes(e)&&(r.y=Ne)),r}_setupCurrentTransform(t,e,r){var i;const s=e.group?_i(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:a}=e.getActiveControl()||{},l=r&&a?(i=a.getActionHandler(t,e,a))===null||i===void 0?void 0:i.bind(a):Hb,c=((f,g,p,_)=>{if(!g||!f)return"drag";const w=_.controls[g];return w.getActionName(p,w,_)})(r,o,t,e),h=t[this.centeredKey],u=this._shouldCenterTransform(e,c,h)?{x:vt,y:vt}:this._getOriginFromCorner(e,o),d={target:e,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:oe(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:h,original:x(x({},yg(e)),{},{originX:u.x,originY:u.y})};this._currentTransform=d,this.fire("before:transform",{e:t,transform:d})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new M(e,r).transform(this.viewportTransform),a=new M(e+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),h=Math.min(o.y,a.y),u=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(c,h,u-c,d-h)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,c+=l,h+=l,u-=l,d-=l,Te.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(c,h,u-c,d-h))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r.findControl(e,Ul(t))||i.length>1&&this.searchPossibleTargets([r],e))return r;if(r===this.searchPossibleTargets([r],e)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}return r}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let r=t.getCoords();const i=this.getZoom(),s=t.padding/i;if(s){const[o,a,l,c]=r,h=Math.atan2(a.y-o.y,a.x-o.x),u=Zr(h)*s,d=Qr(h)*s,f=u+d,g=u-d;r=[new M(o.x-g,o.y-f),new M(a.x+f,a.y-g),new M(l.x+g,l.y+f),new M(c.x-f,c.y+g)]}return Kt.isPointInPolygon(e,r)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,_i(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let r=t.length;for(;r--;){const i=t[r];if(this._checkTarget(i,e)){if(Co(i)&&i.subTargetCheck){const s=this._searchPossibleTargets(i._objects,e);s&&this.targets.push(s)}return i}}}searchPossibleTargets(t,e){const r=this._searchPossibleTargets(t,e);if(r&&Co(r)&&r.interactive&&this.targets[0]){const i=this.targets;for(let s=i.length-1;s>0;s--){const o=i[s];if(!Co(o)||!o.interactive)return o}return i[0]}return r}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=Rb(t),o=i.width||0,a=i.height||0;o&&a||(Ne in i&&Bl in i&&(a=Math.abs(i.top-i.bottom)),re in i&&It in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,e||(s=_i(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new M(1,1):new M(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Jr(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return In(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];t.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e,target:l}),a.push(l))}),s.forEach(l=>{t.includes(l)||(r=!0,l.fire("selected",{e,target:l}),o.push(l))}),t.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(i=!0,this.fire("selection:cleared",{e,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(t,e){const r=this.getActiveObjects(),i=this._setActiveObject(t,e);return this._fireSelectionEvents(r,e),i}_setActiveObject(t,e){const r=this._activeObject;return r!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,In(t)&&r!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const r=this._activeObject;return!!r&&!r.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(t),In(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),r=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[r]});const i=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),i}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,r=e.target,i={e:t,target:r,transform:e,action:e.action};r._scaling&&(r._scaling=!1),r.setCoords(),e.actionPerformed&&(this.fire("object:modified",i),r.fire($o,i))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;In(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,r){const i=this._realizeGroupTransformOnObject(t),s=super._toObject(t,e,r);return t.set(i),s}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&In(e)&&this._activeObject===e){const r=Fi(t,["angle","flipX","flipY",It,We,nr,Mi,Ei,Ne]);return jb(t,e.calcOwnMatrix()),r}return{}}_setSVGObject(t,e,r){const i=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,r),e.set(i)}}b(Ma,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class SS{constructor(t){b(this,"targets",[]),b(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:i}=t.getActiveObject()||{};i&&i.focus()},r=t.upperCanvasEl;r.addEventListener("click",e),this.__disposer=()=>r.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),ii(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const CS=["target","oldTarget","fireCanvas","e"],ze={passive:!1},Qn=(n,t)=>{const e=n.getViewportPoint(t),r=n.getScenePoint(t);return{viewportPoint:e,scenePoint:r,pointer:e,absolutePointer:r}},un=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return n.addEventListener(...e)},Ze=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return n.removeEventListener(...e)},TS={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Ms extends Ma{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),b(this,"_isClick",void 0),b(this,"textEditingManager",new SS(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(un,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const r=this.upperCanvasEl,i=this._getEventPrefix();t(pg(r),"resize",this._onResize),t(r,i+"down",this._onMouseDown),t(r,"".concat(i,"move"),this._onMouseMove,ze),t(r,"".concat(i,"out"),this._onMouseOut),t(r,"".concat(i,"enter"),this._onMouseEnter),t(r,"wheel",this._onMouseWheel),t(r,"contextmenu",this._onContextMenu),t(r,"click",this._onClick),t(r,"dblclick",this._onClick),t(r,"dragstart",this._onDragStart),t(r,"dragend",this._onDragEnd),t(r,"dragover",this._onDragOver),t(r,"dragenter",this._onDragEnter),t(r,"dragleave",this._onDragLeave),t(r,"drop",this._onDrop),this.enablePointerEvents||t(r,"touchstart",this._onTouchStart,ze)}removeListeners(){this.addOrRemove(Ze,"remove");const t=this._getEventPrefix(),e=hr(this.upperCanvasEl);Ze(e,"".concat(t,"up"),this._onMouseUp),Ze(e,"touchend",this._onTouchEnd,ze),Ze(e,"".concat(t,"move"),this._onMouseMove,ze),Ze(e,"touchmove",this._onMouseMove,ze),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,r=x({e:t},Qn(this,t));this.fire("mouse:out",x(x({},r),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",x({},r)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",x(x({},r),{},{target:i})),i&&i.fire("mouseout",x({},r))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",x({e:t},Qn(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const r={e:t,target:e};return this.fire("dragstart",r),e.fire("dragstart",r),void un(this.upperCanvasEl,"drag",this._onDragProgress)}vu(t)}_renderDragEffects(t,e,r){let i=!1;const s=this._dropTarget;s&&s!==e&&s!==r&&(s.clearContextTop(),i=!0),e==null||e.clearContextTop(),r!==e&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(t),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==Ue,r=e?this._activeObject:void 0,i={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:r};Ze(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:r,targets:i}=this.findDragTargets(t),s=this._dragSource,o={e:t,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(e,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(t)&&(a=r),r.fire(e,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(t)&&(a=c),c.fire(e,o)}this._renderDragEffects(t,s,a),this._dropTarget=a}_onDragEnter(t){const{target:e,targets:r}=this.findDragTargets(t),i={e:t,target:e,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(e,i)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:r}=this.findDragTargets(t),i=this._basicEventHandler("drop:before",x({e:t,target:e,subTargets:r,dragSource:this._dragSource},Qn(this,t)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(t){const e=this.findTarget(t),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:r});return this.stopContextMenu&&vu(t),this._basicEventHandler("contextmenu",i),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||r&&this._target===r)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,s=this._getEventPrefix(),o=hr(i);un(o,"touchend",this._onTouchEnd,ze),e&&un(o,"touchmove",this._onMouseMove,ze),Ze(i,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();Ze(e,"".concat(r,"move"),this._onMouseMove,ze);const i=hr(e);un(i,"".concat(r,"up"),this._onMouseUp),un(i,"".concat(r,"move"),this._onMouseMove,ze)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),r=hr(this.upperCanvasEl);Ze(r,"touchend",this._onTouchEnd,ze),Ze(r,"touchmove",this._onMouseMove,ze),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{un(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(t)){const i=hr(this.upperCanvasEl);Ze(i,"".concat(r,"up"),this._onMouseUp),Ze(i,"".concat(r,"move"),this._onMouseMove,ze),un(e,"".concat(r,"move"),this._onMouseMove,ze)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const r=this._currentTransform,i=this._isClick,s=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(t),c=r.actionPerformed),!i){const h=s===this._activeObject;this.handleSelection(t),c||(c=this._shouldRender(s)||!h&&s===this._activeObject)}if(s){const h=s.findControl(this.getViewportPoint(t),Ul(t)),{key:u,control:d}=h||{};if(l=u,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,t),c=!0;else if(d){const f=d.getMouseUpHandler(t,s,d);f&&(a=this.getScenePoint(t),f.call(d,t,r,a.x,a.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const h=r.target&&r.target.controls[r.corner],u=h&&h.getMouseUpHandler(t,r.target,h);a=a||this.getScenePoint(t),u&&u.call(h,t,r,a.x,a.y)}this._setCursorFromEvent(t,s),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),c?this.requestRenderAll():i||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:r,subTargets:i=[]}=e;this.fire(t,e),r&&r.fire(t,e);for(let s=0;s<i.length;s++)i[s]!==r&&i[s].fire(t,e);return e}_handleEvent(t,e,r){const i=this._target,s=this.targets||[],o=x(x(x({e:t,target:i,subTargets:s},Qn(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?r:{});this.fire("mouse:".concat(e),o),i&&i.fire("mouse".concat(e),o);for(let a=0;a<s.length;a++)s[a]!==i&&s[a].fire("mouse".concat(e),o)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,r=!!e&&e===this._activeObject;const{button:i}=t;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(t,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let s=this._shouldRender(e),o=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,o=!0,s=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const a=this.getScenePoint(t);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(r=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const a=e.findControl(this.getViewportPoint(t),Ul(t));if(e===this._activeObject&&(a||!o)){this._setupCurrentTransform(t,e,r);const l=a?a.control:void 0,c=this.getScenePoint(t),h=l&&l.getMouseDownHandler(t,e,l);h&&h.call(l,t,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=_i(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const r=this.getScenePoint(t);e.deltaX=r.x-e.x,e.deltaY=r.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const r=this.findTarget(t);this._setCursorFromEvent(t,r),this._fireOverOutEvents(t,r)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e:t,target:s[a],oldTarget:i[a]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",x(x({},e),{},{target:t,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",x(x({},e),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:r,oldTarget:i,fireCanvas:s,e:o}=e,a=qt(e,CS);const{targetIn:l,targetOut:c,canvasIn:h,canvasOut:u}=TS[t],d=i!==r;if(i&&d){const f=x(x({},a),{},{e:o,target:i,nextTarget:r},Qn(this,o));s&&this.fire(u,f),i.fire(c,f)}if(r&&d){const f=x(x({},a),{},{e:o,target:r,previousTarget:i},Qn(this,o));s&&this.fire(h,f),r.fire(l,f)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),r=this._currentTransform,i=r.target,s=i.group?_i(e,void 0,i.group.calcTransformMatrix()):e;r.shiftKey=t.shiftKey,r.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,r){const{action:i,actionHandler:s,target:o}=e,a=!!s&&s(t,e,r.x,r.y);a&&o.setCoords(),i==="drag"&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let r=e.hoverCursor||this.hoverCursor;const i=In(this._activeObject)?this._activeObject:null,s=(!i||e.group!==i)&&e.findControl(this.getViewportPoint(t));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(t,o,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(t,e){const r=this._activeObject,i=In(r);if(r&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(r!==e||i)&&(i||!e.isDescendantOf(r)&&!r.isDescendantOf(e))&&!e.onSelect({e:t})&&!r.getActiveControl()){if(i){const s=r.getObjects();if(e===r){const o=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!e.selectable)return!1}e.group===r?(r.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),t)):(r.multiSelectAdd(e),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,t)}else{r.isEditing&&r.exitEditing();const s=new(tt.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(r,e),this._hoveredTarget=s,this._setActiveObject(s,t),this._fireSelectionEvents([r],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new M(e,r),a=o.add(new M(i,s)),l=o.min(a),c=o.max(a).subtract(l),h=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),u=o.eq(a)?h[0]?[h[0]]:[]:h.length>1?h.filter(d=>!d.onSelect({e:t})).reverse():h;if(u.length===1)this.setActiveObject(u[0],t);else if(u.length>1){const d=tt.getClass("ActiveSelection");this.setActiveObject(new d(u,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const $g={x1:0,y1:0,x2:0,y2:0},DS=x(x({},$g),{},{r1:0,r2:0}),oi=(n,t)=>isNaN(n)&&typeof t=="number"?t:n,OS=/^(\d+\.\d+)%|(\d+)%$/;function Gg(n){return n&&OS.test(n)}function qg(n,t){const e=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Gg(n)?100:1):NaN;return Di(0,oi(e,t),1)}const kS=/\s*;\s*/,MS=/\s*:\s*/;function ES(n,t){let e,r;const i=n.getAttribute("style");if(i){const o=i.split(kS);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(MS).map(h=>h.trim());l==="stop-color"?e=c:l==="stop-opacity"&&(r=c)}}const s=new Lt(e||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:qg(n.getAttribute("offset"),0),color:s.toRgb(),opacity:oi(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*t}}function PS(n,t){const e=[],r=n.getElementsByTagName("stop"),i=qg(t,1);for(let s=r.length;s--;)e.push(ES(r[s],i));return e}function Kg(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Zg(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function or(n,t){return n.getAttribute(t)}function FS(n,t){return function(e,r){let i,{width:s,height:o,gradientUnits:a}=r;return Object.keys(e).reduce((l,c)=>{const h=e[c];return h==="Infinity"?i=1:h==="-Infinity"?i=0:(i=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&Gg(h)&&(i*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(i*=s),c!=="y1"&&c!=="y2"||(i*=o)))),l[c]=i,l},{})}(Kg(n)==="linear"?function(e){return{x1:or(e,"x1")||0,y1:or(e,"y1")||0,x2:or(e,"x2")||"100%",y2:or(e,"y2")||0}}(n):function(e){return{x1:or(e,"fx")||or(e,"cx")||"50%",y1:or(e,"fy")||or(e,"cy")||"50%",r1:0,x2:or(e,"cx")||"50%",y2:or(e,"cy")||"50%",r2:or(e,"r")||"50%"}}(n),x(x({},t),{},{gradientUnits:Zg(n)}))}class Xs{constructor(t){const{type:e="linear",gradientUnits:r="pixels",coords:i={},colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=t||{};Object.assign(this,{type:e,gradientUnits:r,coords:x(x({},e==="radial"?DS:$g),i),colorStops:s,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Dn()):Dn()})}addColorStop(t){for(const e in t){const r=new Lt(t[e]);this.colorStops.push({offset:parseFloat(e),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(t){return x(x({},Fi(this,t)),{},{type:this.type,coords:x({},this.coords),colorStops:this.colorStops.map(e=>x({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():Fe.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(u=>x({},u)).sort((u,d)=>u.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;s==="objectBoundingBox"?(a/=t.width,l/=t.height):(a+=t.width/2,l+=t.height/2),(c=t)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=t.pathOffset.x,l-=t.pathOffset.y),i[4]-=a,i[5]-=l;const h=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(Ts(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:d,x2:f,y2:g}=this.coords;r.push("<linearGradient ",h,' x1="',u,'" y1="',d,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:u,y1:d,x2:f,y2:g,r1:p,r2:_}=this.coords,w=p>_;r.push("<radialGradient ",h,' cx="',w?u:f,'" cy="',w?d:g,'" r="',w?p:_,'" fx="',w?f:u,'" fy="',w?g:d,`">
`),w&&(o.reverse(),o.forEach(C=>{C.offset=1-C.offset}));const y=Math.min(p,_);if(y>0){const C=y/Math.max(p,_);o.forEach(S=>{S.offset+=C*(1-S.offset)})}}return o.forEach(u=>{let{color:d,offset:f,opacity:g}=u;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(t){const{x1:e,y1:r,x2:i,y2:s,r1:o,r2:a}=this.coords,l=this.type==="linear"?t.createLinearGradient(e,r,i,s):t.createRadialGradient(e,r,o,i,s,a);return this.colorStops.forEach(c=>{let{color:h,opacity:u,offset:d}=c;l.addColorStop(d,u!==void 0?new Lt(h).setAlpha(u).toRgba():h)}),l}static async fromObject(t){const{colorStops:e,gradientTransform:r}=t;return new this(x(x({},t),{},{colorStops:e?e.map(i=>x({},i)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(t,e,r){const i=Zg(t),s=e._findCenterFromElement();return new this(x({id:t.getAttribute("id")||void 0,type:Kg(t),coords:FS(t,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:PS(t,r.opacity),gradientUnits:i,gradientTransform:Xl(t.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:e.width/2-s.x,offsetY:e.height/2-s.y}:{offsetX:0,offsetY:0}))}}b(Xs,"type","Gradient"),tt.setClass(Xs,"gradient"),tt.setClass(Xs,"linear"),tt.setClass(Xs,"radial");const AS=["type","source","patternTransform"];class ll{get type(){return"pattern"}set type(t){Tn("warn","Setting type has no effect",t)}constructor(t){b(this,"repeat","repeat"),b(this,"offsetX",0),b(this,"offsetY",0),b(this,"crossOrigin",""),this.id=Dn(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:r}=this;return x(x({},Fi(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:r,offsetX:Yt(this.offsetX,Ot.NUM_FRACTION_DIGITS),offsetY:Yt(this.offsetY,Ot.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:r}=t;const{source:i,repeat:s,id:o}=this,a=oi(this.offsetX/e,0),l=oi(this.offsetY/r,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):oi(i.width/e,0),h=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):oi(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(h,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:r,source:i,patternTransform:s}=t,o=qt(t,AS);const a=await Do(i,x(x({},e),{},{crossOrigin:o.crossOrigin}));return new this(x(x({},o),{},{patternTransform:s&&s.slice(0),source:a}))}}b(ll,"type","Pattern"),tt.setClass(ll),tt.setClass(ll,"pattern");const IS=["path","left","top"],RS=["d"];class Rn extends Te{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=e,o=qt(e,IS);super(),Object.assign(this,Rn.ownDefaults),this.setOptions(o),this._setPath(t||[],!0),typeof i=="number"&&this.set(It,i),typeof s=="number"&&this.set(Ne,s)}_setPath(t,e){this.path=uS(Array.isArray(t)?t:wS(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new M(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,r=-this.pathOffset.y;t.beginPath();for(const i of this.path)switch(i[0]){case"L":t.lineTo(i[1]+e,i[2]+r);break;case"M":t.moveTo(i[1]+e,i[2]+r);break;case"C":t.bezierCurveTo(i[1]+e,i[2]+r,i[3]+e,i[4]+r,i[5]+e,i[6]+r);break;case"Q":t.quadraticCurveTo(i[1]+e,i[2]+r,i[3]+e,i[4]+r);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=bS(this.path,Ot.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Ot.NUM_FRACTION_DIGITS;return" translate(".concat(Yt(-this.pathOffset.x,t),", ").concat(Yt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:r,pathOffset:i}=this._calcDimensions();this.set({width:e,height:r,pathOffset:i}),t&&this.setPositionByOrigin(i,vt,vt)}_calcBoundsFromPath(){const t=[];let e=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],t.push({x:e,y:r},{x:i,y:s});break;case"M":i=o[1],s=o[2],e=i,r=s;break;case"C":t.push(...Wu(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":t.push(...Wu(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=e,s=r}return Yr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return x(x({},t),{},{pathOffset:new M(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,r){const i=an(t,this.ATTRIBUTE_NAMES,r),{d:s}=i;return new this(s,x(x(x({},qt(i,RS)),e),{},{left:void 0,top:void 0}))}}b(Rn,"type","Path"),b(Rn,"cacheProperties",[...on,"path","fillRule"]),b(Rn,"ATTRIBUTE_NAMES",[...kn,"d"]),tt.setClass(Rn),tt.setSVGClass(Rn);const LS=["left","top","radius"],Qg=["radius","startAngle","endAngle","counterClockwise"];class Rr extends Te{static getDefaults(){return x(x({},super.getDefaults()),Rr.ownDefaults)}constructor(t){super(),Object.assign(this,Rr.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,oe(this.startAngle),oe(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(We)}getRadiusY(){return this.get("radius")*this.get(nr)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Qg,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,r=oe(this.startAngle),i=oe(this.endAngle),s=Zr(r)*e,o=Qr(r)*e,a=Zr(i)*e,l=Qr(i)*e,c=t>180?1:0,h=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(c," ").concat(h," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,r){const i=an(t,this.ATTRIBUTE_NAMES,r),{left:s=0,top:o=0,radius:a=0}=i;return new this(x(x({},qt(i,LS)),{},{radius:a,left:s-a,top:o-a}))}static fromObject(t){return super._fromObject(t)}}b(Rr,"type","Circle"),b(Rr,"cacheProperties",[...on,...Qg]),b(Rr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),b(Rr,"ATTRIBUTE_NAMES",["cx","cy","r",...kn]),tt.setClass(Rr),tt.setSVGClass(Rr);const jS=["x1","y1","x2","y2"],VS=["x1","y1","x2","y2"],ql=["x1","x2","y1","y2"];class Ln extends Te{constructor(){let[t,e,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ln.ownDefaults),this.setOptions(s),this.x1=t,this.x2=r,this.y1=e,this.y2=i,this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(It,o),typeof a=="number"&&this.set(Ne,a)}_setWidthHeight(){const{x1:t,y1:e,x2:r,y2:i}=this;this.width=Math.abs(r-t),this.height=Math.abs(i-e);const{left:s,top:o,width:a,height:l}=Yr([{x:t,y:e},{x:r,y:i}]),c=new M(s+a/2,o+l/2);this.setPositionByOrigin(c,vt,vt)}_set(t,e){return super._set(t,e),ql.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const r=t.strokeStyle;var i;Qe(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r}_findCenterFromElement(){return new M((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:r,y2:i,width:s,height:o}=this,a=t<=e?-1:1,l=r<=i?-1:1;return{x1:a*s/2,x2:a*-s/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:t,x2:e,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(r,'" x2="').concat(e,'" y2="').concat(i,`" />
`)]}static async fromElement(t,e,r){const i=an(t,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:o=0,x2:a=0,y2:l=0}=i;return new this([s,o,a,l],qt(i,jS))}static fromObject(t){let{x1:e,y1:r,x2:i,y2:s}=t,o=qt(t,VS);return this._fromObject(x(x({},o),{},{points:[e,r,i,s]}),{extraParam:"points"})}}b(Ln,"type","Line"),b(Ln,"cacheProperties",[...on,...ql]),b(Ln,"ATTRIBUTE_NAMES",kn.concat(ql)),tt.setClass(Ln),tt.setSVGClass(Ln);class jn extends Te{static getDefaults(){return x(x({},super.getDefaults()),jn.ownDefaults)}constructor(t){super(),Object.assign(this,jn.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,r),t.lineTo(0,-r),t.lineTo(e,r),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}b(jn,"type","Triangle"),b(jn,"ownDefaults",{width:100,height:100}),tt.setClass(jn),tt.setSVGClass(jn);const Jg=["rx","ry"];class Lr extends Te{static getDefaults(){return x(x({},super.getDefaults()),Lr.ownDefaults)}constructor(t){super(),Object.assign(this,Lr.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(We)}getRy(){return this.get("ry")*this.get(nr)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Jg,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,Xo,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,r){const i=an(t,this.ATTRIBUTE_NAMES,r);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}function BS(n){if(!n)return[];const t=n.replace(/,/g," ").trim().split(/\s+/),e=[];for(let r=0;r<t.length;r+=2)e.push({x:parseFloat(t[r]),y:parseFloat(t[r+1])});return e}b(Lr,"type","Ellipse"),b(Lr,"cacheProperties",[...on,...Jg]),b(Lr,"ownDefaults",{rx:0,ry:0}),b(Lr,"ATTRIBUTE_NAMES",[...kn,"cx","cy","rx","ry"]),tt.setClass(Lr),tt.setSVGClass(Lr);const NS=["left","top"],tp={exactBoundingBox:!1};class cr extends Te{static getDefaults(){return x(x({},super.getDefaults()),cr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),b(this,"strokeDiff",void 0),Object.assign(this,cr.ownDefaults),this.setOptions(e),this.points=t;const{left:r,top:i}=e;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(It,r),typeof i=="number"&&this.set(Ne,i)}isOpen(){return!0}_projectStrokeOnPoints(t){return kx(this.points,t,this.isOpen())}_calcDimensions(t){t=x({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(c=>c.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new M,strokeOffset:new M,strokeDiff:new M};const r=Yr(e),i=Sa(x(x({},t),{},{scaleX:1,scaleY:1})),s=Yr(this.points.map(c=>Le(c,i,!0))),o=new M(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(oe(this.skewX)),l-=a*Math.tan(oe(this.skewY))),x(x({},r),{},{pathOffset:new M(a,l),strokeOffset:new M(s.left,s.top).subtract(new M(r.left,r.top)).multiply(o),strokeDiff:new M(r.width,r.height).subtract(new M(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const t=Yr(this.points);return new M(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:r,width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a,strokeDiff:l}),t&&this.setPositionByOrigin(new M(e+i/2,r+s/2),vt,vt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new M(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var e,r;const{width:a,height:l}=this._calcDimensions(t);o=new M((e=t.width)!==null&&e!==void 0?e:a,(r=t.height)!==null&&r!==void 0?r:l)}else{var i,s;o=new M((i=t.width)!==null&&i!==void 0?i:this.width,(s=t.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new M(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const r=this.initialized&&this[t]!==e,i=super._set(t,e);return this.exactBoundingBox&&r&&((t===We||t===nr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),i}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:r,y:i}=e;return{x:r,y:i}})})}_toSVG(){const t=[],e=this.pathOffset.x,r=this.pathOffset.y,i=Ot.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)t.push(Yt(this.points[s].x-e,i),",",Yt(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<e;s++){const o=this.points[s];t.lineTo(o.x-r,o.y-i)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,r){return new this(BS(t.getAttribute("points")),x(x({},qt(an(t,this.ATTRIBUTE_NAMES,r),NS)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}b(cr,"ownDefaults",tp),b(cr,"type","Polyline"),b(cr,"layoutProperties",[Mi,Ei,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),b(cr,"cacheProperties",[...on,"points"]),b(cr,"ATTRIBUTE_NAMES",[...kn]),tt.setClass(cr),tt.setSVGClass(cr);class zs extends cr{isOpen(){return!1}}b(zs,"ownDefaults",tp),b(zs,"type","Polygon"),tt.setClass(zs),tt.setSVGClass(zs);class ep extends Te{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const r in e)for(const i in e[r])for(const s in e[r][i])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const r=e===void 0?this.styles:{0:this.styles[e]};for(const i in r)for(const s in r[i])if(r[i][s][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let r,i,s=0,o=!0,a=0;for(const l in e){r=0;for(const c in e[l]){const h=e[l][c]||{};s++,h[t]!==void 0?(i?h[t]!==i&&(o=!1):i=h[t],h[t]===this[t]&&delete h[t]):o=!1,Object.keys(h).length!==0?r++:delete e[l][c]}r===0&&delete e[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&s===a&&(this[t]=i,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let r,i,s;for(i in e){for(s in r=e[i],r)delete r[s][t],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete e[i]}}_extendStyles(t,e){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(t);this._getLineStyle(r)||this._setLineStyle(r);const s=jc(x(x({},this._getStyleDeclaration(r,i)),e),o=>o!==void 0);this._setStyleDeclaration(r,i,s)}getSelectionStyles(t,e,r){const i=[];for(let s=t;s<(e||t);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(t,e){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i)}setSelectionStyles(t,e,r){for(let i=e;i<(r||e);i++)this._extendStyles(i,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var r;const i=this.styles&&this.styles[t];return i&&(r=i[e])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(t,e){return x(x({},Fi(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,r){this.styles[t][e]=r}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}b(ep,"_styleProperties",Yb);const US=/  +/g,HS=/"/g;function cl(n,t,e,r,i){return"		".concat(function(s,o){let{left:a,top:l,width:c,height:h}=o,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ot.NUM_FRACTION_DIGITS;const d=Ds(he,s,!1),[f,g,p,_]=[a,l,c,h].map(w=>Yt(w,u));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(g,'" width="').concat(p,'" height="').concat(_,'"></rect>')}(n,{left:t,top:e,width:r,height:i}),`
`)}const WS=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let hl;class ke extends ep{static getDefaults(){return x(x({},super.getDefaults()),ke.ownDefaults)}constructor(t,e){super(),b(this,"__charBounds",[]),Object.assign(this,ke.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=zg(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Sr)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,r,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Sr||l!==c-1&&!this.isEndOfWrapping(l))&&(i=0,s=this._textLines[l],e=this.getLineWidth(l),e<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,t=(this.width-e)/r;for(let h=0;h<=s.length;h++)o=this.__charBounds[l][h],this._reSpaceAndTab.test(s[h])?(o.width+=t,o.kernedWidth+=t,o.left+=i,i+=t):o.left+=i}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const r=e?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(t<=r[i].length)return{lineIndex:i,charIndex:t};t-=r[i].length+this.missingNewlineOffset(i,e)}return{lineIndex:i-1,charIndex:r[i-1].length<t?r[i-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===He?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,r){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case vt:t.textBaseline="middle";break;case"ascender":t.textBaseline=Ne;break;case"descender":t.textBaseline=Bl}t.font=this._getFontDeclaration(e,r)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,r=this._textLines.length;e<r;e++){const i=this.getLineWidth(e);i>t&&(t=i)}return t}_renderTextLine(t,e,r,i,s,o){this._renderChars(t,e,r,i,s,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let h,u,d=0,f=0,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let p=0;p<l;p++){const _=this.__charBounds[s][p];u=this.getValueOfPropertyAt(s,p,"textBackgroundColor"),this.path?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),t.fillStyle=u,u&&t.fillRect(-_.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),_.width,a/this.lineHeight),t.restore()):u!==g?(h=r+c+f,this.direction==="rtl"&&(h=this.width-h-d),t.fillStyle=g,g&&t.fillRect(h,i,d,a/this.lineHeight),f=_.left,d=_.width,g=u):d+=_.kernedWidth}u&&!this.path&&(h=r+c+f,this.direction==="rtl"&&(h=this.width-h-d),t.fillStyle=u,t.fillRect(h,i,d,a/this.lineHeight)),i+=a}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,r,i){const s=os.getFontCache(e),o=this._getFontDeclaration(e),a=r+t,l=r&&o===this._getFontDeclaration(i),c=e.fontSize/this.CACHE_FONT_SIZE;let h,u,d,f;if(r&&s[r]!==void 0&&(d=s[r]),s[t]!==void 0&&(f=h=s[t]),l&&s[a]!==void 0&&(u=s[a],f=u-d),h===void 0||d===void 0||u===void 0){const g=function(){return hl||(hl=ir({width:0,height:0}).getContext("2d")),hl}();this._setTextStyles(g,e,!0),h===void 0&&(f=h=g.measureText(t).width,s[t]=h),d===void 0&&l&&r&&(d=g.measureText(r).width,s[r]=d),l&&u===void 0&&(u=g.measureText(a).width,s[a]=u,f=u-d)}return{width:h*c,kernedWidth:f*c}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,r,i=0;const s=this.pathSide===re,o=this.path,a=this._textLines[t],l=a.length,c=new Array(l);this.__charBounds[t]=c;for(let h=0;h<l;h++){const u=a[h];r=this._getGraphemeBox(u,t,h,e),c[h]=r,i+=r.kernedWidth,e=u}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let h=0;const u=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case It:h=s?u-i:0;break;case vt:h=(u-i)/2;break;case re:h=s?0:u-i}h+=this.pathStartOffset*(s?-1:1);for(let d=s?l-1:0;s?d>=0:d<l;s?d--:d++)r=c[d],h>u?h%=u:h<0&&(h+=u),this._setGraphemeOnPath(h,r),h+=r.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(t,e){const r=t+e.kernedWidth/2,i=this.path,s=mS(i.path,r,i.segmentsInfo);e.renderLeft=s.x-i.pathOffset.x,e.renderTop=s.y-i.pathOffset.y,e.angle=s.angle+(this.pathSide===re?Math.PI:0)}_getGraphemeBox(t,e,r,i,s){const o=this.getCompleteStyleDeclaration(e,r),a=i?this.getCompleteStyleDeclaration(e,r-1):{},l=this._measureChar(t,o,i,a);let c,h=l.kernedWidth,u=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),u+=c,h+=c);const d={width:u,left:0,height:o.fontSize,kernedWidth:h,deltaY:o.deltaY};if(r>0&&!s){const f=this.__charBounds[e][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let r=1,i=this._textLines[t].length;r<i;r++)e=Math.max(this.getHeightOfChar(t,r),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let r=0,i=this._textLines.length;r<i;r++)t=this.getHeightOfLine(r),e+=r===i-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,h=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],i+h,s+r+c,o),r+=l}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(he))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,r,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Sr),c=this.path,h=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,u=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=e.direction;let g,p,_,w,y,C="",S=0;if(e.save(),f!==this.direction&&(e.canvas.setAttribute("dir",u?"ltr":"rtl"),e.direction=u?"ltr":"rtl",e.textAlign=u?It:re),s-=a*this._fontSizeFraction/this.lineHeight,h)return this._renderChar(t,e,o,0,r.join(""),i,s),void e.restore();for(let k=0,A=r.length-1;k<=A;k++)w=k===A||this.charSpacing||c,C+=r[k],_=this.__charBounds[o][k],S===0?(i+=d*(_.kernedWidth-_.width),S+=_.width):S+=_.kernedWidth,l&&!w&&this._reSpaceAndTab.test(r[k])&&(w=!0),w||(g=g||this.getCompleteStyleDeclaration(o,k),p=this.getCompleteStyleDeclaration(o,k+1),w=zc(g,p,!1)),w&&(c?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),this._renderChar(t,e,o,k,C,-S/2,0),e.restore()):(y=i,this._renderChar(t,e,o,k,C,y,s)),C="",g=p,i+=d*S,S=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,r=this.height+this.strokeWidth,i=ir({width:e,height:r}),s=i.getContext("2d");return i.width=e,i.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(e,0),s.lineTo(e,r),s.lineTo(0,r),s.closePath(),s.translate(e/2,r/2),s.fillStyle=t.toLive(s),this._applyPatternGradientTransform(s,t),s.fill(),s.createPattern(i,"no-repeat")}handleFiller(t,e,r){let i,s;return Qe(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,t.translate(i,s),t[e]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(t[e]=r.toLive(t),this._applyPatternGradientTransform(t,r)):(t[e]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:r,strokeWidth:i}=e;return t.lineWidth=i,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",r)}_setFillStyles(t,e){let{fill:r}=e;return this.handleFiller(t,"fillStyle",r)}_renderChar(t,e,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),h=t==="fillText"&&c.fill,u=t==="strokeText"&&c.stroke&&c.strokeWidth;if(u||h){if(e.save(),e.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(e),l.deltaY&&(a+=l.deltaY),h){const d=this._setFillStyles(e,c);e.fillText(s,o-d.offsetX,a-d.offsetY)}if(u){const d=this._setStrokeStyles(e,c);e.strokeText(s,o-d.offsetX,a-d.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,r){const i=this.get2DCursorLocation(t,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),r=this.width-e,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(t);let a=0;return i===Sr||i===ls&&!o||i===as&&!o||i===Qo&&!o?0:(i===vt&&(a=r/2),i===re&&(a=r),i===ls&&(a=r/2),i===as&&(a=r),s==="rtl"&&(i===re||i===Sr||i===as?a=0:i===It||i===Qo?a=-r:i!==vt&&i!==ls||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,r){var i;return(i=this._getStyleDeclaration(t,e)[r])!==null&&i!==void 0?i:this[r]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=e==="linethrough"?.5:e==="overline"?1:0,l=this.offsets[e];for(let c=0,h=this._textLines.length;c<h;c++){const u=this.getHeightOfLine(c);if(!this[e]&&!this.styleHas(e,c)){r+=u;continue}const d=this._textLines[c],f=u/this.lineHeight,g=this._getLineLeftOffset(c);let p=0,_=0,w=this.getValueOfPropertyAt(c,0,e),y=this.getValueOfPropertyAt(c,0,he),C=this.getValueOfPropertyAt(c,0,zn),S=w,k=y,A=C;const N=r+f*(1-this._fontSizeFraction);let R=this.getHeightOfChar(c,0),W=this.getValueOfPropertyAt(c,0,"deltaY");for(let ht=0,at=d.length;ht<at;ht++){const dt=this.__charBounds[c][ht];S=this.getValueOfPropertyAt(c,ht,e),k=this.getValueOfPropertyAt(c,ht,he),A=this.getValueOfPropertyAt(c,ht,zn);const lt=this.getHeightOfChar(c,ht),nt=this.getValueOfPropertyAt(c,ht,"deltaY");if(s&&S&&k){const q=this.fontSize*A/1e3;t.save(),t.fillStyle=y,t.translate(dt.renderLeft,dt.renderTop),t.rotate(dt.angle),t.fillRect(-dt.kernedWidth/2,l*lt+nt-a*q,dt.kernedWidth,q),t.restore()}else if((S!==w||k!==y||lt!==R||A!==C||nt!==W)&&_>0){const q=this.fontSize*C/1e3;let et=i+g+p;this.direction==="rtl"&&(et=this.width-et-_),w&&y&&C&&(t.fillStyle=y,t.fillRect(et,N+l*R+W-a*q,_,q)),p=dt.left,_=dt.width,w=S,C=A,y=k,R=lt,W=nt}else _+=dt.kernedWidth}let ot=i+g+p;this.direction==="rtl"&&(ot=this.width-ot-_),t.fillStyle=k;const mt=this.fontSize*A/1e3;S&&k&&A&&t.fillRect(ot,N+l*R+W-a*mt,_-o,mt),r+=u}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||ke.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,r,"".concat(s?this.CACHE_FONT_SIZE:i,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Xc(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),r=new Array(e.length),i=[`
`];let s=[];for(let o=0;o<e.length;o++)r[o]=this.graphemeSplit(e[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:e,graphemeText:s,graphemeLines:r}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject([...kg,...t])),{},{styles:Fx(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:r}=this.constructor;super.set(t,e);let i=!1,s=!1;if(typeof t=="object")for(const o in t)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(t),s=t==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,r){const i=an(t,ke.ATTRIBUTE_NAMES,r),s=x(x({},e),i),{textAnchor:o=It,textDecoration:a="",dx:l=0,dy:c=0,top:h=0,left:u=0,fontSize:d=Pc,strokeWidth:f=1}=s,g=qt(s,WS),p=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),x({left:u+l,top:h+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},g)),_=p.getScaledHeight()/p.height,w=((p.height+p.strokeWidth)*p.lineHeight-p.height)*_,y=p.getScaledHeight()+w;let C=0;return o===vt&&(C=p.getScaledWidth()/2),o===re&&(C=p.getScaledWidth()),p.set({left:p.left-C,top:p.top-(y-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:f}),p}static fromObject(t){return this._fromObject(x(x({},t),{},{styles:Ax(t.styles||{},t.text)}),{extraParam:"text"})}}b(ke,"textLayoutProperties",Og),b(ke,"cacheProperties",[...on,...kg]),b(ke,"ownDefaults",Xb),b(ke,"type","Text"),b(ke,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),b(ke,"ATTRIBUTE_NAMES",kn.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),jg(ke,[class extends Cg{_toSVG(){const n=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(n){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:n,withShadow:!0,additionalTransform:Ts(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:t,textSpans:e}=n;const r=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(HS,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(n,t){const e=[],r=[];let i,s=n;this.backgroundColor&&r.push(...cl(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),this.direction==="rtl"&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,t+i,s),this._setSVGTextLineText(e,o,t+i,s),s+=this.getHeightOfLine(o);return{textSpans:e,textBgRects:r}}_createTextCharSpan(n,t,e,r,i){const s=Ot.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(t,n!==n.trim()||!!n.match(US)),a=o?'style="'.concat(o,'"'):"",l=t.deltaY,c=l?' dy="'.concat(Yt(l,s),'" '):"",{angle:h,renderLeft:u,renderTop:d,width:f}=i;let g="";if(u!==void 0){const p=f/2;h&&(g=' rotate="'.concat(Yt(tn(h),s),'"'));const _=Pi({angle:tn(h)});_[4]=u,_[5]=d;const w=new M(-p,0).transform(_);e=w.x,r=w.y}return'<tspan x="'.concat(Yt(e,s),'" y="').concat(Yt(r,s),'" ').concat(c).concat(g).concat(a,">").concat(Mx(n),"</tspan>")}_setSVGTextLineText(n,t,e,r){const i=this.getHeightOfLine(t),s=this.textAlign.includes(Sr),o=this._textLines[t];let a,l,c,h,u,d="",f=0;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)u=g===p||this.charSpacing||this.path,d+=o[g],c=this.__charBounds[t][g],f===0?(e+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,s&&!u&&this._reSpaceAndTab.test(o[g])&&(u=!0),u||(a=a||this.getCompleteStyleDeclaration(t,g),l=this.getCompleteStyleDeclaration(t,g+1),u=zc(a,l,!0)),u&&(h=this._getStyleDeclaration(t,g),n.push(this._createTextCharSpan(d,h,e,r,c)),d="",a=l,this.direction==="rtl"?e-=f:e+=f,f=0)}_setSVGTextLineBg(n,t,e,r){const i=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let h=0;h<i.length;h++){const{left:u,width:d,kernedWidth:f}=this.__charBounds[t][h];o=this.getValueOfPropertyAt(t,h,"textBackgroundColor"),o!==c?(c&&n.push(...cl(c,e+l,r,a,s)),l=u,a=d,c=o):a+=f}o&&n.push(...cl(c,e+l,r,a,s))}_getSVGLineTopOffset(n){let t,e=0;for(t=0;t<n;t++)e+=this.getHeightOfLine(t);const r=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," text-decoration-thickness: ").concat(Yt(this.textDecorationThickness*this.getObjectScaling().y/10,Ot.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(n,t){const{fontFamily:e,strokeWidth:r,stroke:i,fill:s,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:h,linethrough:u,overline:d,underline:f}=n,g=this.getSvgTextDecoration({underline:f??this.underline,overline:d??this.overline,linethrough:u??this.linethrough}),p=h||this.textDecorationThickness;return[i?Ds(He,i):"",r?"stroke-width: ".concat(r,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",g?"text-decoration: ".concat(g,"; text-decoration-thickness: ").concat(Yt(p*this.getObjectScaling().y/10,Ot.NUM_FRACTION_DIGITS),"%; "):"",s?Ds(he,s):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(t=>n[t.replace("-","")]).join(" ")}}]),tt.setClass(ke),tt.setSVGClass(ke);class YS{constructor(t){b(this,"target",void 0),b(this,"__mouseDownInPlace",!1),b(this,"__dragStartFired",!1),b(this,"__isDraggingOver",!1),b(this,"__dragStartSelection",void 0),b(this,"__dragImageDisposer",void 0),b(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,r=e.getSelectionStartFromPointer(t);return e.isEditing&&r>=e.selectionStart&&r<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var r;let{selectionStart:i,selectionEnd:s}=e;const o=this.target,a=o.canvas,l=new M(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),h=new M(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),u=a.getScenePoint(t).subtract(h),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),g=h.subtract(new M(f.left,f.top)),p=a.viewportTransform,_=g.add(u).transform(p,!0),w=o.backgroundColor,y=Yc(o.styles);o.backgroundColor="";const C={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(C,0,i),o.setSelectionStyles(C,s,o.text.length),o.dirty=!0;const S=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=w,o.styles=y,o.dirty=!0,Gl(S,{position:"fixed",left:"".concat(-S.width,"px"),border:Ue,width:"".concat(S.width/d,"px"),height:"".concat(S.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{S.remove()},hr(t.target||this.target.hiddenTextarea).body.appendChild(S),(r=t.dataTransfer)===null||r===void 0||r.setDragImage(S,_.x,_.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,r=this.isActive();if(r&&t.dataTransfer){const i=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},s=e._text.slice(i.selectionStart,i.selectionEnd).join(""),o=x({text:e.text,value:s},i);t.dataTransfer.setData("text/plain",s),t.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:e.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),r}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),r=this.__dragStartSelection;return e<r.selectionStart||e>r.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const r=this.targetCanDrop(e);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,r=this.targetCanDrop(e);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:r}=t,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(e=r.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},h=s[Math.max(0,s.length-1)],u=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(h)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),t.didDrop=!0,t.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+u,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(zo,{index:l+u,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=e.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Ue;l===Ue?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire(zo,{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const zu=/[ \n\.,;!\?\-]/;class XS extends ke{constructor(){super(...arguments),b(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:r,delay:i,onComplete:s}=t;return Fg({startValue:this._currentCursorOpacity,endValue:e,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,r=t-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r--;for(;/\S/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findWordBoundaryRight(t){let e=0,r=t;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}findLineBoundaryLeft(t){let e=0,r=t-1;for(;!/\n/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findLineBoundaryRight(t){let e=0,r=t;for(;!/\n/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}searchWordBoundary(t,e){const r=this._text;let i=t>0&&this._reSpace.test(r[t])&&(e===-1||!Fc.test(r[t-1]))?t-1:t,s=r[i];for(;i>0&&i<r.length&&!zu.test(s);)i+=e,s=r[i];return e===-1&&zu.test(s)&&i++,i}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const r=this.searchWordBoundary(t,-1),i=Math.max(r,this.searchWordBoundary(t,1));this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const r=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.selectionStart=r,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;hr(e).activeElement!==e&&e.focus();const r=this.getSelectionStartFromPointer(t),i=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&i!==s||i!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,r){const i=r.slice(0,t),s=this.graphemeSplit(i).length;if(t===e)return{selectionStart:s,selectionEnd:s};const o=r.slice(t,e);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,r){const i=r.slice(0,t).join("").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),r=this.get2DCursorLocation(t),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=e.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,h=c.width/l,u=c.height/l,d=h-o,f=u-o,g=new M(e.left+a,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new M(c.clientWidth/h,c.clientHeight/u));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire($o),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(t,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(e,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[r]){const h=parseInt(c,10);h>=o&&(a[h-l]=a[c],delete a[c])}}}shiftLineStyles(t,e){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>t&&(this.styles[s+e]=r[s],r[s-e]||delete this.styles[s])}}insertNewlineStyleObject(t,e,r,i){const s={},o=this._unwrappedTextLines[t].length,a=o===e;let l=!1;r||(r=1),this.shiftLineStyles(t,r);const c=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const u in this.styles[t]){const d=parseInt(u,10);d>=e&&(l=!0,s[d-e]=this.styles[t][u],a&&e===0||delete this.styles[t][u])}let h=!1;for(l&&!a&&(this.styles[t+r]=s,h=!0),(h||o>e)&&r--;r>0;)i&&i[r-1]?this.styles[t+r]={0:x({},i[r-1])}:c?this.styles[t+r]={0:x({},c)}:delete this.styles[t+r],r--;this._forceClearCache=!0}insertCharStyleObject(t,e,r,i){this.styles||(this.styles={});const s=this.styles[t],o=s?x({},s):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=e&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+r]=x({},i[r]));return}if(!s)return;const a=s[e?e-1:1];for(;a&&r--;)this.styles[t][e+r]=x({},a)}insertNewStyleBlock(t,e,r){const i=this.get2DCursorLocation(e,!0),s=[0];let o,a=0;for(let l=0;l<t.length;l++)t[l]===`
`?(a++,s[a]=0):s[a]++;for(s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],a),o=1;o<a;o++)s[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,s[o],r):r&&this.styles[i.lineIndex+o]&&r[0]&&(this.styles[i.lineIndex+o][0]=r[0]),r=r&&r.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,s[o],r)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(t);this.insertNewStyleBlock(s,r,e),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,r){r<=t?(e===t?this._selectionDirection=It:this._selectionDirection===re&&(this._selectionDirection=It,this.selectionEnd=t),this.selectionStart=r):r>t&&r<e?this._selectionDirection===re?this.selectionEnd=r:this.selectionStart=r:(e===t?this._selectionDirection=re:this._selectionDirection===It&&(this._selectionDirection=re,this.selectionStart=e),this.selectionEnd=r)}}class zS extends XS{initHiddenTextarea(){const t=this.canvas&&hr(this.canvas.getElement())||ki(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return e.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return e.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:r,selectionStart:i,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(zo),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(r).graphemeText,l=this._text.length,c=a.length,h=this.selectionStart,u=this.selectionEnd,d=h!==u;let f,g,p,_,w=c-l;const y=this.fromStringToGraphemeSelection(i,s,r),C=h>y.selectionStart;d?(g=this._text.slice(h,u),w+=u-h):c<l&&(g=C?this._text.slice(u+w,u):this._text.slice(h,h-w));const S=a.slice(y.selectionEnd-w,y.selectionEnd);if(g&&g.length&&(S.length&&(f=this.getSelectionStyles(h,h+1,!1),f=S.map(()=>f[0])),d?(p=h,_=u):C?(p=u-g.length,_=u):(p=u,_=u+g.length),this.removeStyleFromTo(p,_)),S.length){const{copyPasteData:k}=kr();e&&S.join("")===k.copiedText&&!Ot.disableStyleCopyPaste&&(f=k.copiedTextStyle),this.insertNewStyleBlock(S,h,f)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:r,selectionEnd:i}=e;this.compositionStart=r,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=kr();t.copiedText=this.getSelectedText(),Ot.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let r,i=this._getLineLeftOffset(t);return e>0&&(r=this.__charBounds[t][e-1],i+=r.left+r.width),i}getDownCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||t.metaKey||t.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),h=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-h)}_getIndexOnLine(t,e){const r=this._textLines[t];let i,s,o=this._getLineLeftOffset(t),a=0;for(let l=0,c=r.length;l<c;l++)if(i=this.__charBounds[t][l].width,o+=i,o>e){s=!0;const h=o-i,u=o,d=Math.abs(h-e);a=Math.abs(u-e)<d?l:l-1;break}return s||(a=r.length-1),a}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const r=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===re);if(e.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const i=this.text.length;this.selectionStart=Di(0,this.selectionStart,i),this.selectionEnd=Di(0,this.selectionEnd,i),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===It?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,r){let i;if(t.altKey)i=this["findWordBoundary".concat(r)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=r==="Left"?-1:1,!0;i=this["findLineBoundary".concat(r)](this[e])}return i!==void 0&&this[e]!==i&&(this[e]=i,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=It,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===re&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=It,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const r="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===It&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=re,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=re,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const $u=n=>!!n.button;class $S extends zS{constructor(){super(...arguments),b(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new YS(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:r}=t;this.canvas&&this.editable&&!$u(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(t){let{e,transform:r}=t;const i=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||$u(e)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),r=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(r,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(ur(this.calcTransformMatrix())).add(new M(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let c=0;c<this._textLines.length&&r<=e.y;c++)r+=this.getHeightOfLine(c),s=c,c>0&&(i+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(s));const a=this._textLines[s].length,l=this.__charBounds[s];for(let c=0;c<a;c++){const h=o+l[c].kernedWidth;if(e.x<=h){Math.abs(e.x-h)<=Math.abs(e.x-o)&&i++;break}o=h,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const $s="moveCursorUp",Gs="moveCursorDown",qs="moveCursorLeft",Ks="moveCursorRight",Zs="exitEditing",Gu=(n,t)=>{const e=t.getRetinaScaling();n.setTransform(e,0,0,e,0,0);const r=t.viewportTransform;n.transform(r[0],r[1],r[2],r[3],r[4],r[5])},GS=x({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Zs,27:Zs,33:$s,34:Gs,35:Ks,36:qs,37:qs,38:$s,39:Ks,40:Gs},keysMapRtl:{9:Zs,27:Zs,33:$s,34:Gs,35:qs,36:Ks,37:Ks,38:$s,39:qs,40:Gs},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ur extends $S{static getDefaults(){return x(x({},super.getDefaults()),Ur.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,x(x({},Ur.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Ms&&this.canvas.textEditingManager.remove(this),e instanceof Ms&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,r)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,r)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(t);return this.isEditing=e,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),i=r.length>0;let s,o=t;if(i){s=ir(t.canvas),o=s.getContext("2d"),Gu(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,e):this.renderCursor(o,e),i)for(const a of r){const l=a.clipPath,c=ir(t.canvas),h=c.getContext("2d");if(Gu(h,this.canvas),!l.absolutePositioned){const u=a.calcTransformMatrix();h.transform(u[0],u[1],u[2],u[3],u[4],u[5])}l.transform(h),l.drawObject(h,!0,{}),this.drawClipPathOnCache(o,l,c)}i&&(t.setTransform(1,0,0,1,0,0),t.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(t);for(let c=0;c<s;c++)e+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:e,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===re||this.textAlign===Sr||this.textAlign===as?l.left*=-1:this.textAlign===It||this.textAlign===Qo?l.left=o-(r>0?r:0):this.textAlign!==vt&&this.textAlign!==ls||(l.left=o-(r>0?r:0))),l}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const r=this.get2DCursorLocation(t),i=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(i,s,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(i,s,"deltaY"),h=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,s,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-l/2,top:h+e.top+c,width:l,height:o}}_renderCursor(t,e,r){const{color:i,opacity:s,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,e);t.fillStyle=i,t.globalAlpha=s,t.fillRect(o,a,l,c)}renderSelection(t,e){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,r,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,r){const i=e.selectionStart,s=e.selectionEnd,o=this.textAlign.includes(Sr),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=a.lineIndex,h=l.lineIndex,u=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=h;f++){const g=this._getLineLeftOffset(f)||0;let p=this.getHeightOfLine(f),_=0,w=0,y=0;if(f===c&&(w=this.__charBounds[c][u].left),f>=c&&f<h)y=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===h)if(d===0)y=this.__charBounds[h][d].left;else{const N=this._getWidthOfCharSpacing();y=this.__charBounds[h][d-1].left+this.__charBounds[h][d-1].width-N}_=p,(this.lineHeight<1||f===h&&this.lineHeight>1)&&(p/=this.lineHeight);let C=r.left+g+w,S=p,k=0;const A=y-w;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",S=1,k=p):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===re||this.textAlign===Sr||this.textAlign===as?C=this.width-C-A:this.textAlign===It||this.textAlign===Qo?C=r.left+g-y:this.textAlign!==vt&&this.textAlign!==ls||(C=r.left+g-y)),t.fillRect(C,r.top+r.topOffset+k,A,S),r.topOffset+=_}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,he)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}b(Ur,"ownDefaults",GS),b(Ur,"type","IText"),tt.setClass(Ur),tt.setClass(Ur,"i-text");class Vn extends Ur{static getDefaults(){return x(x({},super.getDefaults()),Vn.ownDefaults)}constructor(t,e){super(t,x(x({},Vn.ownDefaults),e))}static createControls(){return{controls:Tx()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Sr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,r=0,i=0;const s={};for(let o=0;o<t.graphemeLines.length;o++)t.graphemeText[i]===`
`&&o>0?(r=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:e,offset:r},i+=t.graphemeLines[o].length,r+=t.graphemeLines[o].length;return s}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];r&&(e=r.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,r=0,i=t+1,s=!1;const o=this._styleMap[t],a=this._styleMap[t+1];o&&(t=o.line,r=o.offset),a&&(i=a.line,s=i===t,e=a.offset);const l=t===void 0?this.styles:{line:this.styles[t]};for(const c in l)for(const h in l[c]){const u=parseInt(h,10);if(u>=r&&(!s||u<e))for(const d in l[c][h])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];if(!r)return{};t=r.line,e=r.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,r){const i=this._styleMap[t];super._setStyleDeclaration(i.line,i.offset+e,r)}_deleteStyleDeclaration(t,e){const r=this._styleMap[t];super._deleteStyleDeclaration(r.line,r.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const r=this.getGraphemeDataForRender(t),i=[];for(let s=0;s<r.wordsData.length;s++)i.push(...this._wrapLine(s,e,r));return this.isWrapping=!1,i}getGraphemeDataForRender(t){const e=this.splitByGrapheme,r=e?"":" ";let i=0;return{wordsData:t.map((s,o)=>{let a=0;const l=e?this.graphemeSplit(s):this.wordSplit(s);return l.length===0?[{word:[],width:0}]:l.map(c=>{const h=e?[c]:this.graphemeSplit(c),u=this._measureWord(h,o,a);return i=Math.max(u,i),a+=h.length+r.length,{word:h,width:u}})}),largestWordWidth:i}}_measureWord(t,e){let r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,a=t.length;o<a;o++)s+=this._getGraphemeBox(t[o],e,o+i,r,!0).kernedWidth,r=t[o];return s}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,r){let{largestWordWidth:i,wordsData:s}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],h=l?"":" ";let u=0,d=[],f=0,g=0,p=!0;e-=o;const _=Math.max(e,i,this.dynamicMinWidth),w=s[t];let y;for(f=0,y=0;y<w.length;y++){const{word:C,width:S}=w[y];f+=C.length,u+=g+S-a,u>_&&!p?(c.push(d),d=[],u=S,p=!0):u+=a,p||l||d.push(h),d=d.concat(C),g=l?0:this._measureWord([h],t,f),f++,p=!1}return y&&c.push(d),i+o>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+o),c}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),r=this._wrapText(e.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return e.lines=i,e.graphemeLines=r,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const r=parseInt(e,10);if(this._textLines[r]){const i=this._styleMap[e].line;t.set("".concat(i),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}b(Vn,"type","Textbox"),b(Vn,"textLayoutProperties",[...Ur.textLayoutProperties,"width"]),b(Vn,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),tt.setClass(Vn);class qu extends ka{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:r}=t,{clipPath:i,group:s}=r;if(!i||!this.shouldPerformLayout(t))return;const{width:o,height:a}=Yr(Ng(r,i)),l=new M(o,a);if(i.absolutePositioned)return{center:_i(i.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const c=i.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:h=new M,correction:u=new M}=this.calcBoundingBox(e,t)||{};return{center:h.add(c),correction:u.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}b(qu,"type","clip-path"),tt.setClass(qu);class Ku extends ka{getInitialSize(t,e){let{target:r}=t,{size:i}=e;return new M(r.width||i.x,r.height||i.y)}}b(Ku,"type","fixed"),tt.setClass(Ku);class qS extends ks{subscribeTargets(t){const e=t.target;t.targets.reduce((r,i)=>(i.parent&&r.add(i.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[e]})})}unsubscribeTargets(t){const e=t.target,r=e.getObjects();t.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{!r.some(s=>s.parent===i)&&i.layoutManager.unsubscribeTargets({target:i,targets:[e]})})}}class Bn extends Hn{static getDefaults(){return x(x({},super.getDefaults()),Bn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Bn.ownDefaults),this.setOptions(e);const{left:r,top:i,layoutManager:s}=e;this.groupInit(t,{left:r,top:i,layoutManager:s??new qS})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(Tn("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const r=new Set;e.forEach(i=>{const{parent:s}=i;s&&r.add(s)}),t===Gc?r.forEach(i=>{i._onAfterObjectsChange(Jo,e)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,r){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=x(x({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(t,i);super._renderControls(t,e),t.restore()}}b(Bn,"type","ActiveSelection"),b(Bn,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),tt.setClass(Bn),tt.setClass(Bn,"activeSelection");class KS{constructor(){b(this,"resources",{})}applyFilters(t,e,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(e,0,0,r,i);const a={sourceWidth:r,sourceHeight:i,imageData:o.getImageData(0,0,r,i),originalEl:e,originalImageData:o.getImageData(0,0,r,i),canvasEl:s,ctx:o,filterBackend:this};t.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===i||(s.width=l.width,s.height=l.height),o.putImageData(l,0,0),a}}class rp{constructor(){let{tileSize:t=Ot.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),b(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const r=ir({width:t,height:e}),i=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=r,this.gl=i)}applyFilters(t,e,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,e));const h={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,c?void 0:e),targetTexture:this.createTexture(a,r,i),originalTexture:c||this.createTexture(a,r,i,c?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,u),t.forEach(d=>{d&&d.applyTo(h)}),function(d){const f=d.targetCanvas,g=f.width,p=f.height,_=d.destinationWidth,w=d.destinationHeight;g===_&&p===w||(f.width=_,f.height=w)}(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(u),l.setTransform(1,0,0,1,0,0),h}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:h,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=t,p=t.createTexture();return t.bindTexture(a,p),t.texParameteri(a,u,s||o),t.texParameteri(a,d,s||o),t.texParameteri(a,f,h),t.texParameteri(a,g,h),i?t.texImage2D(a,0,l,l,c,i):t.texImage2D(a,0,l,e,r,0,l,c,null),p}getCachedTexture(t,e,r){const{textureCache:i}=this;if(i[t])return i[t];{const s=this.createTexture(this.gl,e.width,e.height,e,r);return s&&(i[t]=s),s}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const r=t.canvas,i=e.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(t,e){const r=e.targetCanvas.getContext("2d"),i=e.destinationWidth,s=e.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,i,s,t.RGBA,t.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const r=t.getExtension("WEBGL_debug_renderer_info");if(r){const i=t.getParameter(r.UNMASKED_RENDERER_WEBGL),s=t.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),s&&(e.vendor=s.toLowerCase())}return this.gpuInfo=e,e}}let ul;function ZS(){const{WebGLProbe:n}=kr();return n.queryWebGL(Jr()),Ot.enableGLFiltering&&n.isSupported(Ot.textureSize)?new rp({tileSize:Ot.textureSize}):new KS}function dl(){return!ul&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(ul=ZS()),ul}const QS=["filters","resizeFilter","src","crossOrigin","type"],np=["cropX","cropY"];class Ge extends Te{static getDefaults(){return x(x({},super.getDefaults()),Ge.ownDefaults)}constructor(t,e){super(),b(this,"_lastScaleX",1),b(this,"_lastScaleY",1),b(this,"_filterScalingX",1),b(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Ge.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(Dn()),this.setElement(typeof t=="string"?(this.canvas&&hr(this.canvas.getElement())||ki()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(r),(e=t.classList)===null||e===void 0||e.add(Ge.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=dl(!1);e instanceof rp&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&kr().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,-r),t.lineTo(e,-r),t.lineTo(e,r),t.lineTo(-e,r),t.lineTo(-e,-r),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(r=>{r&&e.push(r.toObject())}),x(x({},super.toObject([...np,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,r=-this.width/2,i=-this.height/2;let s=[],o=[],a="",l="";if(!e)return[];if(this.hasCrop()){const c=Dn();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return s=this.paintFirst!==he?s.concat(o,t):s.concat(t,o),s}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Do(t,{crossOrigin:e,signal:r}).then(i=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&s>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=s);const a=ir(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=s,dl().applyFilters([t],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,r=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){const s=ir({width:r,height:i});this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1);dl().applyFilters(t,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=e.naturalWidth||e.width,h=e.naturalHeight||e.height,u=a*r,d=l*i,f=Math.min(s*r,c-u),g=Math.min(o*i,h-d),p=-s/2,_=-o/2,w=Math.min(s,c/r-a),y=Math.min(o,h/i-l);e&&t.drawImage(e,u,d,f,g,p,_,w,y)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=t||r.width,this.height=e||r.height}parsePreserveAspectRatioAttribute(){const t=Wb(this.preserveAspectRatio||""),e=this.width,r=this.height,i={width:e,height:r};let s,o=this._element.width,a=this._element.height,l=1,c=1,h=0,u=0,d=0,f=0;return!t||t.alignX===Ue&&t.alignY===Ue?(l=e/o,c=r/a):(t.meetOrSlice==="meet"&&(l=c=sS(this._element,i),s=(e-o*l)/2,t.alignX==="Min"&&(h=-s),t.alignX==="Max"&&(h=s),s=(r-a*c)/2,t.alignY==="Min"&&(u=-s),t.alignY==="Max"&&(u=s)),t.meetOrSlice==="slice"&&(l=c=oS(this._element,i),s=o-e/l,t.alignX==="Mid"&&(d=s/2),t.alignX==="Max"&&(d=s),s=a-r/c,t.alignY==="Mid"&&(f=s/2),t.alignY==="Max"&&(f=s),o=e/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:h,offsetTop:u,cropX:d,cropY:f}}static fromObject(t,e){let{filters:r,resizeFilter:i,src:s,crossOrigin:o,type:a}=t,l=qt(t,QS);return Promise.all([Do(s,x(x({},e),{},{crossOrigin:o})),r&&Cs(r,e),i&&Cs([i],e),Ca(l,e)]).then(c=>{let[h,u=[],[d]=[],f={}]=c;return new this(h,x(x({},l),{},{src:s,filters:u,resizeFilter:d},f))})}static fromURL(t){let{crossOrigin:e=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Do(t,{crossOrigin:e,signal:r}).then(s=>new this(s,i))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const i=an(t,this.ATTRIBUTE_NAMES,r);return this.fromURL(i["xlink:href"]||i.href,e,i).catch(s=>(Tn("log","Unable to parse Image",s),null))}}b(Ge,"type","Image"),b(Ge,"cacheProperties",[...on,...np]),b(Ge,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),b(Ge,"CSS_CANVAS","canvas-img"),b(Ge,"ATTRIBUTE_NAMES",[...kn,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),tt.setClass(Ge),tt.setSVGClass(Ge);Da(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ea=n=>n.webgl!==void 0,qc="precision highp float",JS=`
    `.concat(qc,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),tC=["type"],eC=["type"],rC=new RegExp(qc,"g");class ue{get type(){return this.constructor.type}constructor(){let t=qt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tC);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return JS}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=kr();i!=="highp"&&(e=e.replace(rC,qc.replace("highp",i)));const s=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),a=t.createProgram();if(!s||!o||!a)throw new Cr("Vertex, fragment shader or program creation error");if(t.shaderSource(s,r),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))throw new Cr("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(s)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Cr("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(a,s),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Cr('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(a)));const l=this.getUniformLocations(t,a)||{};return l.uStepW=t.getUniformLocation(a,"uStepW"),l.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(t,a),uniformLocations:l}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const r=this.constructor.uniformLocations,i={};for(let s=0;s<r.length;s++)i[r[s]]=t.getUniformLocation(e,r[s]);return i}sendAttributeData(t,e,r){const i=e.aPosition,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const r=t.destinationWidth,i=t.destinationHeight;t.sourceWidth===r&&t.sourceHeight===i||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,r,i)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){Ea(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,r=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(r.program),this.sendAttributeData(e,r.attributeLocations,t.aPosition),e.uniform1f(r.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(r.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,r.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,r){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:r}=t,i=ir({width:e,height:r});t.helpLayer=i}}toObject(){const t=Object.keys(this.constructor.defaults||{});return x({type:this.type},t.reduce((e,r)=>(e[r]=this[r],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(qt(t,eC))}}b(ue,"type","BaseFilter"),b(ue,"uniformLocations",[]);const nC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Qs extends ue{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(nC[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const r=new Lt(this.color).getSource(),i=this.alpha,s=r[0]*i,o=r[1]*i,a=r[2]*i,l=1-i;for(let c=0;c<e.length;c+=4){const h=e[c],u=e[c+1],d=e[c+2];let f,g,p;switch(this.mode){case"multiply":f=h*s/255,g=u*o/255,p=d*a/255;break;case"screen":f=255-(255-h)*(255-s)/255,g=255-(255-u)*(255-o)/255,p=255-(255-d)*(255-a)/255;break;case"add":f=h+s,g=u+o,p=d+a;break;case"difference":f=Math.abs(h-s),g=Math.abs(u-o),p=Math.abs(d-a);break;case"subtract":f=h-s,g=u-o,p=d-a;break;case"darken":f=Math.min(h,s),g=Math.min(u,o),p=Math.min(d,a);break;case"lighten":f=Math.max(h,s),g=Math.max(u,o),p=Math.max(d,a);break;case"overlay":f=s<128?2*h*s/255:255-2*(255-h)*(255-s)/255,g=o<128?2*u*o/255:255-2*(255-u)*(255-o)/255,p=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=s+h-2*s*h/255,g=o+u-2*o*u/255,p=a+d-2*a*d/255;break;case"tint":f=s+h*l,g=o+u*l,p=a+d*l}e[c]=f,e[c+1]=g,e[c+2]=p}}sendUniformData(t,e){const r=new Lt(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(e.uColor,r)}}b(Qs,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),b(Qs,"type","BlendColor"),b(Qs,"uniformLocations",["uColor"]),tt.setClass(Qs);const iC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},sC=["type","image"];class Js extends ue{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return iC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,r=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,r,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:r}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/r,1]}applyTo2d(t){let{imageData:{data:e,width:r,height:i},filterBackend:{resources:s}}=t;const o=this.image;s.blendImage||(s.blendImage=Jr());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const c=l.getImageData(0,0,r,i).data;for(let h=0;h<e.length;h+=4){const u=e[h],d=e[h+1],f=e[h+2],g=e[h+3],p=c[h],_=c[h+1],w=c[h+2],y=c[h+3];switch(this.mode){case"multiply":e[h]=u*p/255,e[h+1]=d*_/255,e[h+2]=f*w/255,e[h+3]=g*y/255;break;case"mask":e[h+3]=y}}}sendUniformData(t,e){const r=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,r)}toObject(){return x(x({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:r,image:i}=t,s=qt(t,sC);return Ge.fromObject(i,e).then(o=>new this(x(x({},s),{},{image:o})))}}b(Js,"type","BlendImage"),b(Js,"defaults",{mode:"multiply",alpha:1}),b(Js,"uniformLocations",["uTransformMatrix","uImage"]),tt.setClass(Js);class to extends ue{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){Ea(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:r,height:i}}=t;this.aspectRatio=r/i,this.horizontal=!0;let s=this.getBlurValue()*r;const o=new Uint8ClampedArray(e),a=15,l=4*r;for(let c=0;c<e.length;c+=4){let h=0,u=0,d=0,f=0,g=0;const p=c-c%l,_=p+l;for(let w=-14;w<a;w++){const y=w/a,C=4*Math.floor(s*y),S=1-Math.abs(y);let k=c+C;k<p?k=p:k>_&&(k=_);const A=e[k+3]*S;h+=e[k]*A,u+=e[k+1]*A,d+=e[k+2]*A,f+=A,g+=S}o[c]=h/f,o[c+1]=u/f,o[c+2]=d/f,o[c+3]=f/g}this.horizontal=!1,s=this.getBlurValue()*i;for(let c=0;c<o.length;c+=4){let h=0,u=0,d=0,f=0,g=0;const p=c%l,_=o.length-l+p;for(let w=-14;w<a;w++){const y=w/a,C=Math.floor(s*y)*l,S=1-Math.abs(y);let k=c+C;k<p?k=p:k>_&&(k=_);const A=o[k+3]*S;h+=o[k]*A,u+=o[k+1]*A,d+=o[k+2]*A,f+=A,g+=S}e[c]=h/f,e[c+1]=u/f,e[c+2]=d/f,e[c+3]=f/g}}sendUniformData(t,e){const r=this.chooseRightDelta();t.uniform2fv(e.uDelta,r)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:r}=this;return e?r>1&&(t=1/r):r<1&&(t=r),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}b(to,"type","Blur"),b(to,"defaults",{blur:0}),b(to,"uniformLocations",["uDelta"]),tt.setClass(to);class eo extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=Math.round(255*this.brightness);for(let i=0;i<e.length;i+=4)e[i]+=r,e[i+1]+=r,e[i+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}b(eo,"type","Brightness"),b(eo,"defaults",{brightness:0}),b(eo,"uniformLocations",["uBrightness"]),tt.setClass(eo);const ip={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class ai extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,r=this.matrix,i=this.colorsOnly;for(let s=0;s<e.length;s+=4){const o=e[s],a=e[s+1],l=e[s+2];if(e[s]=o*r[0]+a*r[1]+l*r[2]+255*r[4],e[s+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],e[s+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!i){const c=e[s+3];e[s]+=c*r[3],e[s+1]+=c*r[8],e[s+2]+=c*r[13],e[s+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(t,e){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,s)}toObject(){return x(x({},super.toObject()),{},{matrix:[...this.matrix]})}}function $n(n,t){var e;const r=(b(e=class extends ai{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),b(e,"defaults",{colorsOnly:!1,matrix:t}),e);return tt.setClass(r,n),r}b(ai,"type","ColorMatrix"),b(ai,"defaults",ip),b(ai,"uniformLocations",["uColorMatrix","uConstants"]),tt.setClass(ai);$n("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);$n("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);$n("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);$n("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);$n("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);$n("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);$n("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Zu extends ue{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){Ea(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(r=>tt.getClass(r.type).fromObject(r,e))).then(r=>new this({subFilters:r}))}}b(Zu,"type","Composed"),tt.setClass(Zu);class ro extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const r=Math.floor(255*this.contrast),i=259*(r+255)/(255*(259-r));for(let s=0;s<e.length;s+=4)e[s]=i*(e[s]-128)+128,e[s+1]=i*(e[s+1]-128)+128,e[s+2]=i*(e[s+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}b(ro,"type","Contrast"),b(ro,"defaults",{contrast:0}),b(ro,"uniformLocations",["uContrast"]),tt.setClass(ro);const oC={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class no extends ue{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return oC[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,r=e.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=e.width,l=e.height,c=t.ctx.createImageData(a,l),h=c.data,u=this.opaque?1:0;let d,f,g,p,_,w,y,C,S,k,A,N,R;for(A=0;A<l;A++)for(k=0;k<a;k++){for(_=4*(A*a+k),d=0,f=0,g=0,p=0,R=0;R<s;R++)for(N=0;N<s;N++)y=A+R-o,w=k+N-o,y<0||y>=l||w<0||w>=a||(C=4*(y*a+w),S=i[R*s+N],d+=r[C]*S,f+=r[C+1]*S,g+=r[C+2]*S,u||(p+=r[C+3]*S));h[_]=d,h[_+1]=f,h[_+2]=g,h[_+3]=u?r[_+3]:p}t.imageData=c}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return x(x({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}b(no,"type","Convolute"),b(no,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),b(no,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),tt.setClass(no);const sp="Gamma";class io extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,i),a.g[l]=255*Math.pow(l/255,s),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<e.length;l+=4)e[l]=a.r[e[l]],e[l+1]=a.g[e[l+1]],e[l+2]=a.b[e[l+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:sp,gamma:this.gamma.concat()}}}b(io,"type",sp),b(io,"defaults",{gamma:[1,1,1]}),b(io,"uniformLocations",["uGamma"]),tt.setClass(io);const aC={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class so extends ue{applyTo2d(t){let{imageData:{data:e}}=t;for(let r,i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],a=e[i+2];switch(this.mode){case"average":r=(s+o+a)/3;break;case"lightness":r=(Math.min(s,o,a)+Math.max(s,o,a))/2;break;case"luminosity":r=.21*s+.72*o+.07*a}e[i+2]=e[i+1]=e[i]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return aC[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}b(so,"type","Grayscale"),b(so,"defaults",{mode:"average"}),b(so,"uniformLocations",["uMode"]),tt.setClass(so);const lC=x(x({},ip),{},{rotation:0});class fl extends ai{calculateMatrix(){const t=this.rotation*Math.PI,e=Zr(t),r=Qr(t),i=1/3,s=Math.sqrt(i)*r,o=1-e;this.matrix=[e+o/3,i*o-s,i*o+s,0,0,i*o+s,e+i*o,i*o-s,0,0,i*o-s,i*o+s,e+i*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}b(fl,"type","HueRotation"),b(fl,"defaults",lC),tt.setClass(fl);class oo extends ue{applyTo2d(t){let{imageData:{data:e}}=t;for(let r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2],this.alpha&&(e[r+3]=255-e[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}b(oo,"type","Invert"),b(oo,"defaults",{alpha:!1,invert:!0}),b(oo,"uniformLocations",["uInvert","uAlpha"]),tt.setClass(oo);class ao extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=this.noise;for(let i=0;i<e.length;i+=4){const s=(.5-Math.random())*r;e[i]+=s,e[i+1]+=s,e[i+2]+=s}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}b(ao,"type","Noise"),b(ao,"defaults",{noise:0}),b(ao,"uniformLocations",["uNoise","uSeed"]),tt.setClass(ao);class lo extends ue{applyTo2d(t){let{imageData:{data:e,width:r,height:i}}=t;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*s*r+4*o,l=e[a],c=e[a+1],h=e[a+2],u=e[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const g=4*d*r+4*f;e[g]=l,e[g+1]=c,e[g+2]=h,e[g+3]=u}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}b(lo,"type","Pixelate"),b(lo,"defaults",{blocksize:4}),b(lo,"uniformLocations",["uBlocksize"]),tt.setClass(lo);class co extends ue{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=255*this.distance,i=new Lt(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<e.length;a+=4){const l=e[a],c=e[a+1],h=e[a+2];l>s[0]&&c>s[1]&&h>s[2]&&l<o[0]&&c<o[1]&&h<o[2]&&(e[a+3]=0)}}sendUniformData(t,e){const r=new Lt(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];t.uniform4fv(e.uLow,s),t.uniform4fv(e.uHigh,o)}}b(co,"type","RemoveColor"),b(co,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),b(co,"uniformLocations",["uLow","uHigh"]),tt.setClass(co);class ho extends ue{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=t(s*e);return i}generateShader(t){const e=new Array(t);for(let r=1;r<=t;r++)e[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){Ea(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const r=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(r)/r}}applyTo2d(t){const e=t.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=e.width,o=e.height,a=Math.round(s*r),l=Math.round(o*i);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(t,s,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(t,s,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(t,s,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(t,s,o,a,l):new ImageData(a,l),t.imageData=c}sliceByTwo(t,e,r,i,s){const o=t.imageData,a=.5;let l=!1,c=!1,h=e*a,u=r*a;const d=t.filterBackend.resources;let f=0,g=0;const p=e;let _=0;d.sliceByTwo||(d.sliceByTwo=Jr());const w=d.sliceByTwo;(w.width<1.5*e||w.height<r)&&(w.width=1.5*e,w.height=r);const y=w.getContext("2d");for(y.clearRect(0,0,1.5*e,r),y.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)e=h,r=u,i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,l=!0),s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,c=!0),y.drawImage(w,f,g,e,r,p,_,h,u),f=p,g=_,_+=u;return y.getImageData(f,g,i,s)}lanczosResize(t,e,r,i,s){const o=t.imageData.data,a=t.ctx.createImageData(i,s),l=a.data,c=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,u=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(h*this.lanczosLobes/2),p=Math.ceil(u*this.lanczosLobes/2),_={},w={x:0,y:0},y={x:0,y:0};return function C(S){let k,A,N,R,W,ot,mt,ht,at,dt,lt;for(w.x=(S+.5)*h,y.x=Math.floor(w.x),k=0;k<s;k++){for(w.y=(k+.5)*u,y.y=Math.floor(w.y),W=0,ot=0,mt=0,ht=0,at=0,A=y.x-g;A<=y.x+g;A++)if(!(A<0||A>=e)){dt=Math.floor(1e3*Math.abs(A-w.x)),_[dt]||(_[dt]={});for(let nt=y.y-p;nt<=y.y+p;nt++)nt<0||nt>=r||(lt=Math.floor(1e3*Math.abs(nt-w.y)),_[dt][lt]||(_[dt][lt]=c(Math.sqrt(Math.pow(dt*d,2)+Math.pow(lt*f,2))/1e3)),N=_[dt][lt],N>0&&(R=4*(nt*e+A),W+=N,ot+=N*o[R],mt+=N*o[R+1],ht+=N*o[R+2],at+=N*o[R+3]))}R=4*(k*i+S),l[R]=ot/W,l[R+1]=mt/W,l[R+2]=ht/W,l[R+3]=at/W}return++S<i?C(S):a}(0)}bilinearFiltering(t,e,r,i,s){let o,a,l,c,h,u,d,f,g,p,_,w,y,C=0;const S=this.rcpScaleX,k=this.rcpScaleY,A=4*(e-1),N=t.imageData.data,R=t.ctx.createImageData(i,s),W=R.data;for(d=0;d<s;d++)for(f=0;f<i;f++)for(h=Math.floor(S*f),u=Math.floor(k*d),g=S*f-h,p=k*d-u,y=4*(u*e+h),_=0;_<4;_++)o=N[y+_],a=N[y+4+_],l=N[y+A+_],c=N[y+A+4+_],w=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,W[C++]=w;return R}hermiteFastResize(t,e,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),h=t.imageData.data,u=t.ctx.createImageData(i,s),d=u.data;for(let f=0;f<s;f++)for(let g=0;g<i;g++){const p=4*(g+f*i);let _=0,w=0,y=0,C=0,S=0,k=0,A=0;const N=(f+.5)*a;for(let R=Math.floor(f*a);R<(f+1)*a;R++){const W=Math.abs(N-(R+.5))/c,ot=(g+.5)*o,mt=W*W;for(let ht=Math.floor(g*o);ht<(g+1)*o;ht++){let at=Math.abs(ot-(ht+.5))/l;const dt=Math.sqrt(mt+at*at);dt>1&&dt<-1||(_=2*dt*dt*dt-3*dt*dt+1,_>0&&(at=4*(ht+R*e),A+=_*h[at+3],y+=_,h[at+3]<255&&(_=_*h[at+3]/250),C+=_*h[at],S+=_*h[at+1],k+=_*h[at+2],w+=_))}}d[p]=C/w,d[p+1]=S/w,d[p+2]=k/w,d[p+3]=A/y}return u}}b(ho,"type","Resize"),b(ho,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),b(ho,"uniformLocations",["uDelta","uTaps"]),tt.setClass(ho);class uo extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=-this.saturation;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],a=e[i+2],l=Math.max(s,o,a);e[i]+=l!==s?(l-s)*r:0,e[i+1]+=l!==o?(l-o)*r:0,e[i+2]+=l!==a?(l-a)*r:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}b(uo,"type","Saturation"),b(uo,"defaults",{saturation:0}),b(uo,"uniformLocations",["uSaturation"]),tt.setClass(uo);class fo extends ue{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const r=-this.vibrance;for(let i=0;i<e.length;i+=4){const s=e[i],o=e[i+1],a=e[i+2],l=Math.max(s,o,a),c=(s+o+a)/3,h=2*Math.abs(l-c)/255*r;e[i]+=l!==s?(l-s)*h:0,e[i+1]+=l!==o?(l-o)*h:0,e[i+2]+=l!==a?(l-a)*h:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}b(fo,"type","Vibrance"),b(fo,"defaults",{vibrance:0}),b(fo,"uniformLocations",["uVibrance"]),tt.setClass(fo);const cC={class:"zoom"},hC=pe({__name:"Zoom",props:{value:{}},emits:["input","middle-clicked"],setup(n,{emit:t}){const e=t,r=n,i=Z(()=>Math.round(r.value*100)+"%");function s(){e("middle-clicked")}function o(){l(r.value-.05)}function a(){l(r.value+.05)}function l(c){e("input",c)}return nn(()=>{ws("zoom-function",c=>{c==="in"?a():c==="out"?o():c==="reset"&&s()})}),(c,h)=>{const u=Je("ico");return Q(),st("div",cC,[mn(c.$slots,"left"),V("button",{class:"side-btn zoom-down is-left",onClick:o},[Tt(u,{icon:"minus",size:"small"})]),V("button",{class:"zoom-btn",onClick:s},ve(i.value),1),V("button",{class:"side-btn zoom-up is-right",onClick:a},[Tt(u,{icon:"plus",size:"small"})])])}}});const uC={class:"screenshot-viewer"},dC=pe({__name:"ScreenshotViewer",props:{currentCapture:{}},setup(n){let t,e,r,i;const s=Dt(.5),o=Dt(),a=n,l=Z(()=>{let y="";const C=a.currentCapture;if(C&&C.Fullpath)try{y="http://localhost:5020/capture?path="+C.Fullpath}catch{}return y});async function c(){if(l.value){let y=await Ge.fromURL(l.value);y.left=0,y.top=0,y.selectable=!1,y.hoverCursor="-webkit-grab",y.moveCursor="-webkit-grabbing",t.add(y),t.remove(i),i=y}else t.remove(i)}let h="";Dr(()=>a.currentCapture,()=>{var y,C;((y=a.currentCapture)==null?void 0:y.Dt)!=h&&(c(),h=((C=a.currentCapture)==null?void 0:C.Dt)||"")});function u(y){const C=t.width/2,S=t.height/3;d(C,S,y)}function d(y,C,S){S>=.09&&S<2.1&&(s.value=S,t.zoomToPoint(new M(y,C),S))}function f(){s.value=.7,t.selection=!1,t.defaultCursor="-webkit-grab",t.absolutePan(new M(-50,-60)),t.setZoom(s.value),g()}function g(){t.setDimensions({width:window.innerWidth,height:window.innerHeight-30})}let p=0;function _(y){let C=-y.deltaY||-y.detail,S=50,k=.05;if((C<-100||C>100)&&(S=10,k=.05),p+S<+new Date){p=+new Date;var A=Math.max(-1,Math.min(1,C));let N=s.value+A*k;N=Math.round(N*100),N=N/100,d(e,r,N)}}async function w(){var y,C;if((y=a.currentCapture)!=null&&y.Dt){let S=await k_({Dt:(C=a.currentCapture)==null?void 0:C.Dt});for(let k=0;k<S.Meta.length;k++){const A=S.Meta[k];console.log(A.Text,{width:A.Width+4,height:A.Height+4,left:A.X-2,top:A.Y-2});let N=new Pe({width:A.Width,height:A.Height,left:A.X,top:A.Y,fill:"transparent",stroke:"#f55f5566",strokeWidth:1,lockMovementY:!0,lockMovementX:!0,lockScalingFlip:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockSkewingX:!0,lockSkewingY:!0,selectable:!1,hoverCursor:"pointer"});N.on("mouseover",()=>{N.set("stroke","#f55f55"),t.renderAll()}),N.on("mouseout",()=>{N.set("stroke","#f55f5566"),t.renderAll()}),N.on("mousedown",()=>{Hf("copy",A.Text),console.log("on mousedown rect",A.Text)}),t.add(N)}}}return nn(()=>{let y=!1;t=new Ms("screenshot-viewer"),t.selection=!1,t.absolutePan(new M(-50,-50)),t.on("mouse:up",C=>{t.defaultCursor="-webkit-grab",C.target&&(C.target.hoverCursor="-webkit-grab"),y=!1}),t.on("mouse:down",C=>{t.defaultCursor="-webkit-grabbing",C.target&&(C.target.hoverCursor="-webkit-grabbing"),y=!0}),t.on("mouse:move",C=>{let S=C.e;if(e=S.layerX,r=S.layerY,y&&C&&S){var k=new M(S.movementX,S.movementY);t.relativePan(k)}}),window.addEventListener("resize",g),document.addEventListener("mousewheel",_,!1),c(),f()}),Fs(()=>{window.addEventListener("resize",g),document.removeEventListener("mousewheel",_,!1)}),(y,C)=>(Q(),st("div",uC,[Tt(hC,{value:s.value,onInput:u,onMiddleClicked:f},{left:Gr(()=>[V("button",{class:"btn zoom-btn gap-right",onClick:w},"xxx")]),_:1},8,["value"]),V("canvas",{ref_key:"canvasEl",ref:o,id:"screenshot-viewer",width:"1280",height:"800"},null,512)]))}});const fC={class:"footer-summary"},op=pe({__name:"SummaryFooter",props:{currentImageIndex:{},isFollowing:{type:Boolean}},emits:["minute-index-change","toggle-follow"],setup(n,{emit:t}){const e=Oi();Dt(!1),Dt(0);const r=yc(e),i=xn(r,"currentDaySummary"),s=Z(()=>{if(i.value){let o={start:0,end:c1(i.value.TotalCapturedMinutes)*1e3},a=lw(o);return`${a.hours}:${a.minutes}:${a.seconds}`}return""});return nn(()=>{}),Fs(()=>{}),(o,a)=>(Q(),st("footer",fC,ve(ne(s)),1))}});(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".v3dp__popout[data-v-65eb861b]{z-index:10;position:absolute;text-align:center;width:17.5em;background-color:var(--popout-bg-color);box-shadow:var(--box-shadow);border-radius:var(--border-radius);padding:8px 0 1em;color:var(--text-color)}.v3dp__popout *[data-v-65eb861b]{color:inherit;font-size:inherit;font-weight:inherit}.v3dp__popout[data-v-65eb861b] button{background:none;border:none;outline:none}.v3dp__popout[data-v-65eb861b] button:not(:disabled){cursor:pointer}.v3dp__heading[data-v-65eb861b]{width:100%;display:flex;height:var(--heading-size);line-height:var(--heading-size);font-weight:var(--heading-weight)}.v3dp__heading__button[data-v-65eb861b]{background:none;border:none;padding:0;display:flex;justify-content:center;align-items:center;width:var(--heading-size)}button.v3dp__heading__center[data-v-65eb861b]:hover,.v3dp__heading__button[data-v-65eb861b]:not(:disabled):hover{background-color:var(--heading-hover-color)}.v3dp__heading__center[data-v-65eb861b]{flex:1}.v3dp__heading__icon[data-v-65eb861b]{height:12px;stroke:var(--arrow-color)}.v3dp__heading__button:disabled .v3dp__heading__icon[data-v-65eb861b]{stroke:var(--elem-disabled-color)}.v3dp__subheading[data-v-65eb861b],.v3dp__elements[data-v-65eb861b]{display:grid;grid-template-columns:var(--popout-column-definition);font-size:var(--elem-font-size)}.v3dp__subheading[data-v-65eb861b]{margin-top:1em}.v3dp__divider[data-v-65eb861b]{border:1px solid var(--divider-color);border-radius:3px}.v3dp__elements[data-v-65eb861b] button:disabled{color:var(--elem-disabled-color)}.v3dp__elements[data-v-65eb861b] button{padding:.3em .6em}.v3dp__elements[data-v-65eb861b] button span{display:block;line-height:1.9em;height:1.8em;border-radius:var(--elem-border-radius)}.v3dp__elements[data-v-65eb861b] button:not(:disabled):hover span{background-color:var(--elem-hover-bg-color);color:var(--elem-hover-color)}.v3dp__elements[data-v-65eb861b] button.selected span{background-color:var(--elem-selected-bg-color);color:var(--elem-selected-color)}.v3dp__elements[data-v-65eb861b] button.current span{font-weight:var(--elem-current-font-weight);outline:1px solid var(--elem-current-outline-color)}.v3dp__column[data-v-81ac698d]{display:flex;flex-direction:column;overflow-y:auto;height:190px}.v3dp__datepicker{--popout-bg-color: var(--vdp-bg-color, #fff);--box-shadow: var( --vdp-box-shadow, 0 4px 10px 0 rgba(128, 144, 160, .1), 0 0 1px 0 rgba(128, 144, 160, .81) );--text-color: var(--vdp-text-color, #000000);--border-radius: var(--vdp-border-radius, 3px);--heading-size: var(--vdp-heading-size, 2.5em);--heading-weight: var(--vdp-heading-weight, bold);--heading-hover-color: var(--vdp-heading-hover-color, #eeeeee);--arrow-color: var(--vdp-arrow-color, currentColor);--elem-color: var(--vdp-elem-color, currentColor);--elem-disabled-color: var(--vdp-disabled-color, #d5d9e0);--elem-hover-color: var(--vdp-hover-color, #fff);--elem-hover-bg-color: var(--vdp-hover-bg-color, #0baf74);--elem-selected-color: var(--vdp-selected-color, #fff);--elem-selected-bg-color: var(--vdp-selected-bg-color, #0baf74);--elem-current-outline-color: var(--vdp-current-date-outline-color, #888);--elem-current-font-weight: var(--vdp-current-date-font-weight, bold);--elem-font-size: var(--vdp-elem-font-size, .8em);--elem-border-radius: var(--vdp-elem-border-radius, 3px);--divider-color: var(--vdp-divider-color, var(--elem-disabled-color));position:relative}.v3dp__clearable{display:inline;position:relative;left:-15px;cursor:pointer}")),document.head.appendChild(n)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const gC=["year","month","day","time","custom"],pC=pe({emits:{elementClick:n=>Ve(n),left:()=>!0,right:()=>!0,heading:()=>!0},props:{headingClickable:{type:Boolean,default:!1},leftDisabled:{type:Boolean,default:!1},rightDisabled:{type:Boolean,default:!1},columnCount:{type:Number,default:7},items:{type:Array,default:()=>[]},viewMode:{type:String,required:!0,validate:n=>typeof n=="string"&&gC.includes(n)}}}),Ri=(n,t)=>{const e=n.__vccOpts||n;for(const[r,i]of t)e[r]=i;return e},Kc=n=>(Jp("data-v-65eb861b"),n=n(),tm(),n),mC={class:"v3dp__heading"},vC=["disabled"],_C=Kc(()=>V("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[V("g",{fill:"none","fill-rule":"evenodd"},[V("path",{stroke:"none",d:"M-9 16V-8h24v24z"}),V("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 0L1 4l4 4"})])],-1)),yC=["disabled"],wC=Kc(()=>V("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[V("g",{fill:"none","fill-rule":"evenodd"},[V("path",{stroke:"none",d:"M15-8v24H-9V-8z"}),V("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M1 8l4-4-4-4"})])],-1)),bC={class:"v3dp__body"},xC={class:"v3dp__subheading"},SC=Kc(()=>V("hr",{class:"v3dp__divider"},null,-1)),CC={class:"v3dp__elements"},TC=["disabled","onClick"];function DC(n,t,e,r,i,s){return Q(),st("div",{class:Be(["v3dp__popout",`v3dp__popout-${n.viewMode}`]),style:bn({"--popout-column-definition":`repeat(${n.columnCount}, 1fr)`}),onMousedown:t[3]||(t[3]=vn(()=>{},["prevent"]))},[V("div",mC,[V("button",{class:"v3dp__heading__button v3dp__heading__button__left",disabled:n.leftDisabled,onClick:t[0]||(t[0]=vn(o=>n.$emit("left"),["stop","prevent"]))},[mn(n.$slots,"arrow-left",{},()=>[_C],!0)],8,vC),(Q(),rr(Nd(n.headingClickable?"button":"span"),{class:"v3dp__heading__center",onClick:t[1]||(t[1]=vn(o=>n.$emit("heading"),["stop","prevent"]))},{default:Gr(()=>[mn(n.$slots,"heading",{},void 0,!0)]),_:3})),V("button",{class:"v3dp__heading__button v3dp__heading__button__right",disabled:n.rightDisabled,onClick:t[2]||(t[2]=vn(o=>n.$emit("right"),["stop","prevent"]))},[mn(n.$slots,"arrow-right",{},()=>[wC],!0)],8,yC)]),V("div",bC,["subheading"in n.$slots?(Q(),st(Jt,{key:0},[V("div",xC,[mn(n.$slots,"subheading",{},void 0,!0)]),SC],64)):Yn("",!0),V("div",CC,[mn(n.$slots,"body",{},()=>[(Q(!0),st(Jt,null,Wn(n.items,o=>(Q(),st("button",{key:o.key,disabled:o.disabled,class:Be([{selected:o.selected,current:o.current},`v3dp__element__button__${n.viewMode}`]),onClick:vn(a=>n.$emit("elementClick",o.value),["stop","prevent"])},[V("span",null,ve(o.display),1)],10,TC))),128))],!0)])])],38)}const Pa=Ri(pC,[["render",DC],["__scopeId","data-v-65eb861b"]]),OC=pe({components:{PickerPopup:Pa},emits:{"update:pageDate":n=>Ve(n),select:n=>Ve(n)},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(n,{emit:t}){const e=Z(()=>d1(n.pageDate)),r=Z(()=>ty(n.pageDate)),i=(c,h,u)=>!h&&!u?!0:!(h&&ar(c)<ar(h)||u&&ar(c)>ar(u)),s=Z(()=>J_({start:e.value,end:r.value}).map(c=>({value:c,key:String(ar(c)),display:ar(c),selected:!!n.selected&&ar(c)===ar(n.selected),disabled:!i(c,n.lowerLimit,n.upperLimit)}))),o=Z(()=>{const c=ar(e.value),h=ar(r.value);return`${c} - ${h}`}),a=Z(()=>n.lowerLimit&&(Us(n.lowerLimit)===Us(n.pageDate)||ys(n.pageDate,n.lowerLimit))),l=Z(()=>n.upperLimit&&(Us(n.upperLimit)===Us(n.pageDate)||_s(n.pageDate,n.upperLimit)));return{years:s,heading:o,leftDisabled:a,rightDisabled:l,previousPage:()=>t("update:pageDate",Uf(n.pageDate,10)),nextPage:()=>t("update:pageDate",wc(n.pageDate,10))}}});function kC(n,t,e,r,i,s){const o=Je("picker-popup");return Q(),rr(o,{columnCount:3,leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,items:n.years,viewMode:"year",onLeft:n.previousPage,onRight:n.nextPage,onElementClick:t[0]||(t[0]=a=>n.$emit("select",a))},{heading:Gr(()=>[Kr(ve(n.heading),1)]),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}const MC=Ri(OC,[["render",kC]]),EC=pe({components:{PickerPopup:Pa},emits:{"update:pageDate":n=>Ve(n),select:n=>Ve(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"LLL"},locale:{type:Object,required:!1},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(n,{emit:t}){const e=Z(()=>Q_(n.pageDate)),r=Z(()=>Z_(n.pageDate)),i=Z(()=>h=>vs(h,n.format,{locale:n.locale})),s=(h,u,d)=>!u&&!d?!0:!(u&&ys(h,Df(u))||d&&_s(h,Cc(d))),o=Z(()=>K_({start:e.value,end:r.value}).map(h=>({value:h,display:i.value(h),key:i.value(h),selected:!!n.selected&&Il(n.selected,h),disabled:!s(h,n.lowerLimit,n.upperLimit)}))),a=Z(()=>ar(e.value)),l=Z(()=>n.lowerLimit&&(zh(n.lowerLimit,n.pageDate)||ys(n.pageDate,n.lowerLimit))),c=Z(()=>n.upperLimit&&(zh(n.upperLimit,n.pageDate)||_s(n.pageDate,n.upperLimit)));return{months:o,heading:a,leftDisabled:l,rightDisabled:c,previousPage:()=>t("update:pageDate",Uf(n.pageDate,1)),nextPage:()=>t("update:pageDate",wc(n.pageDate,1))}}});function PC(n,t,e,r,i,s){const o=Je("picker-popup");return Q(),rr(o,{headingClickable:"",columnCount:3,items:n.months,leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,viewMode:"month",onLeft:n.previousPage,onRight:n.nextPage,onHeading:t[0]||(t[0]=a=>n.$emit("back")),onElementClick:t[1]||(t[1]=a=>n.$emit("select",a))},{heading:Gr(()=>[Kr(ve(n.heading),1)]),_:1},8,["items","leftDisabled","rightDisabled","onLeft","onRight"])}const FC=Ri(EC,[["render",PC]]),AC=pe({components:{PickerPopup:Pa},emits:{"update:pageDate":n=>Ve(n),select:n=>Ve(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"dd"},headingFormat:{type:String,required:!1,default:"LLLL yyyy"},weekdayFormat:{type:String,required:!1,default:"EE"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:n=>typeof n=="number"&&Number.isInteger(n)&&n>=0&&n<=6},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1}},setup(n,{emit:t}){const e=Z(()=>f=>g=>vs(g,f,{locale:n.locale,weekStartsOn:n.weekStartsOn})),r=Z(()=>Df(n.pageDate)),i=Z(()=>Cc(n.pageDate)),s=Z(()=>({start:r.value,end:i.value})),o=Z(()=>({start:F_(r.value,{weekStartsOn:n.weekStartsOn}),end:ey(i.value,{weekStartsOn:n.weekStartsOn})})),a=Z(()=>{const f=n.weekStartsOn,g=e.value(n.weekdayFormat);return Array.from(Array(7)).map((p,_)=>(f+_)%7).map(p=>u1(new Date,p,{weekStartsOn:n.weekStartsOn})).map(g)}),l=(f,g,p,_)=>{var w,y;return(w=_==null?void 0:_.dates)!=null&&w.some(C=>Ka(f,C))||(y=_==null?void 0:_.predicate)!=null&&y.call(_,f)?!1:!g&&!p?!0:!(g&&ys(f,xi(g))||p&&_s(f,Tf(p)))},c=Z(()=>{const f=new Date,g=e.value(n.format);return q_(o.value).map(p=>({value:p,display:g(p),selected:!!n.selected&&Ka(n.selected,p),current:Ka(f,p),disabled:!n.allowOutsideInterval&&!a1(p,s.value)||!l(p,n.lowerLimit,n.upperLimit,n.disabledDates),key:e.value("yyyy-MM-dd")(p)}))}),h=Z(()=>e.value(n.headingFormat)(n.pageDate)),u=Z(()=>n.lowerLimit&&(Il(n.lowerLimit,n.pageDate)||ys(n.pageDate,n.lowerLimit))),d=Z(()=>n.upperLimit&&(Il(n.upperLimit,n.pageDate)||_s(n.pageDate,n.upperLimit)));return{weekDays:a,days:c,heading:h,leftDisabled:u,rightDisabled:d,previousPage:()=>t("update:pageDate",f1(n.pageDate,1)),nextPage:()=>t("update:pageDate",_a(n.pageDate,1))}}});function IC(n,t,e,r,i,s){const o=Je("picker-popup");return Q(),rr(o,{headingClickable:"",leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,items:n.days,viewMode:"day",onLeft:n.previousPage,onRight:n.nextPage,onHeading:t[0]||(t[0]=a=>n.$emit("back")),onElementClick:t[1]||(t[1]=a=>n.$emit("select",a))},{heading:Gr(()=>[Kr(ve(n.heading),1)]),subheading:Gr(()=>[(Q(!0),st(Jt,null,Wn(n.weekDays,(a,l)=>(Q(),st("span",{key:a,class:Be(`v3dp__subheading__weekday__${l}`)},ve(a),3))),128))]),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}const RC=Ri(AC,[["render",IC]]);function Qu(n,t){const e=n.getBoundingClientRect(),r={height:n.clientHeight,width:n.clientWidth},i=t.getBoundingClientRect();if(!(i.top>=e.top&&i.bottom<=e.top+r.height)){const s=i.top-e.top,o=i.bottom-e.bottom;Math.abs(s)<Math.abs(o)?n.scrollTop+=s:n.scrollTop+=o}}const LC=pe({components:{PickerPopup:Pa},emits:{select:n=>Ve(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},visible:{type:Boolean,required:!0},disabledTime:{type:Object,required:!1}},setup(n,{emit:t}){const e=Dt(null),r=Dt(null),i=Z(()=>n.pageDate??n.selected),s=Dt(i.value.getHours()),o=Dt(i.value.getMinutes());Dr(()=>n.selected,u=>{let d=0,f=0;u&&(d=u.getHours(),f=u.getMinutes()),s.value=d,o.value=f});const a=Z(()=>[...Array(24).keys()].map(u=>({value:u,date:$h(new Date(i.value.getTime()),{hours:u,minutes:o.value,seconds:0}),selected:s.value===u,ref:Dt(null)}))),l=Z(()=>[...Array(60).keys()].map(u=>({value:u,date:$h(new Date(i.value.getTime()),{hours:s.value,minutes:u,seconds:0}),selected:o.value===u,ref:Dt(null)}))),c=u=>{o.value=u.value,t("select",u.date)},h=()=>{const u=a.value.find(f=>{var g,p;return((p=(g=f.ref.value)==null?void 0:g.classList)==null?void 0:p.contains("selected"))??!1}),d=l.value.find(f=>{var g,p;return((p=(g=f.ref.value)==null?void 0:g.classList)==null?void 0:p.contains("selected"))??!1});u&&d&&(Qu(e.value,u.ref.value),Qu(r.value,d.ref.value))};return Dr(()=>n.visible,u=>{u&&ca(h)}),{hoursListRef:e,minutesListRef:r,hours:s,minutes:o,hoursList:a,minutesList:l,padStartZero:u=>`0${u}`.substr(-2),selectMinutes:c,isEnabled:u=>{var d,f,g,p;return!((f=(d=n.disabledTime)==null?void 0:d.dates)!=null&&f.some(_=>s1(u,_)&&o1(u,_))||(p=(g=n.disabledTime)==null?void 0:g.predicate)!=null&&p.call(g,u))},scroll:h}}}),jC={ref:"hoursListRef",class:"v3dp__column"},VC=["disabled","onClick"],BC={ref:"minutesListRef",class:"v3dp__column"},NC=["disabled","onClick"];function UC(n,t,e,r,i,s){const o=Je("picker-popup");return Q(),rr(o,{headingClickable:"",columnCount:2,leftDisabled:!0,rightDisabled:!0,viewMode:"time",onHeading:t[0]||(t[0]=a=>n.$emit("back"))},{heading:Gr(()=>[Kr(ve(n.padStartZero(n.hours))+":"+ve(n.padStartZero(n.minutes)),1)]),body:Gr(()=>[V("div",jC,[(Q(!0),st(Jt,null,Wn(n.hoursList,a=>(Q(),st("button",{key:a.value,ref_for:!0,ref:a.ref,class:Be([{selected:a.selected},"v3dp__element_button__hour"]),disabled:!n.isEnabled(a.date),onClick:vn(l=>n.hours=a.value,["stop","prevent"])},[V("span",null,ve(n.padStartZero(a.value)),1)],10,VC))),128))],512),V("div",BC,[(Q(!0),st(Jt,null,Wn(n.minutesList,a=>(Q(),st("button",{key:a.value,ref_for:!0,ref:a.ref,class:Be([{selected:a.selected},"v3dp__element_button__minute"]),disabled:!n.isEnabled(a.date),onClick:vn(l=>n.selectMinutes(a),["stop","prevent"])},[V("span",null,ve(n.padStartZero(a.value)),1)],10,NC))),128))],512)]),_:1})}const HC=Ri(LC,[["render",UC],["__scopeId","data-v-81ac698d"]]),go=["time","day","month","year"],WC=(n,t,e=void 0)=>{let r=e||new Date;return n&&(r=R_([n,r])),t&&(r=L_([t,r])),r},YC=pe({components:{YearPicker:MC,MonthPicker:FC,DayPicker:RC,TimePicker:HC},inheritAttrs:!1,props:{placeholder:{type:String,default:""},modelValue:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1},disabledTime:{type:Object,required:!1},upperLimit:{type:Date,required:!1},lowerLimit:{type:Date,required:!1},startingView:{type:String,required:!1,default:"day",validate:n=>typeof n=="string"&&go.includes(n)},startingViewDate:{type:Date,required:!1,default:()=>new Date},dayPickerHeadingFormat:{type:String,required:!1,default:"LLLL yyyy"},monthListFormat:{type:String,required:!1,default:"LLL"},weekdayFormat:{type:String,required:!1,default:"EE"},dayFormat:{type:String,required:!1,default:"dd"},inputFormat:{type:String,required:!1,default:"yyyy-MM-dd"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:n=>[0,1,2,3,4,5,6].includes(n)},disabled:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,required:!1,default:!1},typeable:{type:Boolean,required:!1,default:!1},minimumView:{type:String,required:!1,default:"day",validate:n=>typeof n=="string"&&go.includes(n)}},emits:{"update:modelValue":n=>n==null||Ve(n),decadePageChanged:n=>!0,yearPageChanged:n=>!0,monthPageChanged:n=>!0,opened:()=>!0,closed:()=>!0},setup(n,{emit:t,attrs:e}){const r=Dt("none"),i=Dt(n.startingViewDate),s=Dt(null),o=Dt(!1),a=Dt("");Ua(()=>{const S=Yh(a.value,n.inputFormat,new Date,{locale:n.locale});Ve(S)&&(i.value=S)}),Ua(()=>a.value=n.modelValue&&Ve(n.modelValue)?vs(n.modelValue,n.inputFormat,{locale:n.locale}):"");const l=(S="none")=>{n.disabled||(S!=="none"&&r.value==="none"&&(i.value=n.modelValue||WC(n.lowerLimit,n.upperLimit,i.value)),r.value=S,t(S!=="none"?"opened":"closed"))};Ua(()=>{n.disabled&&(r.value="none")});const c=(S,k)=>{i.value=k,S==="year"?t("decadePageChanged",k):S==="month"?t("yearPageChanged",k):S==="day"&&t("monthPageChanged",k)},h=S=>{i.value=S,n.minimumView==="year"?(l("none"),t("update:modelValue",S)):r.value="month"},u=S=>{i.value=S,n.minimumView==="month"?(l("none"),t("update:modelValue",S)):r.value="day"},d=S=>{i.value=S,n.minimumView==="day"?(l("none"),t("update:modelValue",S)):r.value="time"},f=S=>{l("none"),t("update:modelValue",S)},g=()=>{n.clearable&&(l("none"),t("update:modelValue",null),i.value=n.startingViewDate)},p=()=>o.value=!0,_=()=>l(C.value),w=()=>{o.value=!1,l()},y=S=>{const k=S.keyCode?S.keyCode:S.which;if([27,13].includes(k)&&s.value.blur(),n.typeable){const A=Yh(s.value.value,n.inputFormat,new Date,{locale:n.locale});Ve(A)&&a.value===vs(A,n.inputFormat,{locale:n.locale})&&(a.value=s.value.value,t("update:modelValue",A))}},C=Z(()=>{const S=go.indexOf(n.startingView),k=go.indexOf(n.minimumView);return S<k?n.minimumView:n.startingView});return{blur:w,focus:_,click:p,input:a,inputRef:s,pageDate:i,renderView:l,updatePageDate:c,selectYear:h,selectMonth:u,selectDay:d,selectTime:f,keyUp:y,viewShown:r,goBackFromTimepicker:()=>n.startingView==="time"&&n.minimumView==="time"?null:r.value="day",clearModelValue:g,initialView:C,log:S=>console.log(S),variables:S=>Object.fromEntries(Object.entries(S??{}).filter(([k,A])=>k.startsWith("--")))}}}),XC={class:"v3dp__input_wrapper"},zC=["readonly","placeholder","disabled","tabindex"],$C={class:"v3dp__clearable"};function GC(n,t,e,r,i,s){const o=Je("year-picker"),a=Je("month-picker"),l=Je("day-picker"),c=Je("time-picker");return Q(),st("div",{class:"v3dp__datepicker",style:bn(n.variables(n.$attrs.style))},[V("div",XC,[Fn(V("input",vc({type:"text",ref:"inputRef",readonly:!n.typeable,"onUpdate:modelValue":t[0]||(t[0]=h=>n.input=h)},n.$attrs,{placeholder:n.placeholder,disabled:n.disabled,tabindex:n.disabled?-1:0,onKeyup:t[1]||(t[1]=(...h)=>n.keyUp&&n.keyUp(...h)),onBlur:t[2]||(t[2]=(...h)=>n.blur&&n.blur(...h)),onFocus:t[3]||(t[3]=(...h)=>n.focus&&n.focus(...h)),onClick:t[4]||(t[4]=(...h)=>n.click&&n.click(...h))}),null,16,zC),[[S0,n.input]]),Fn(V("div",$C,[mn(n.$slots,"clear",{onClear:n.clearModelValue},()=>[V("i",{onClick:t[5]||(t[5]=h=>n.clearModelValue())},"x")])],512),[[ei,n.clearable&&n.modelValue]])]),Fn(Tt(o,{pageDate:n.pageDate,"onUpdate:pageDate":t[6]||(t[6]=h=>n.updatePageDate("year",h)),selected:n.modelValue,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,onSelect:n.selectYear},null,8,["pageDate","selected","lowerLimit","upperLimit","onSelect"]),[[ei,n.viewShown==="year"]]),Fn(Tt(a,{pageDate:n.pageDate,"onUpdate:pageDate":t[7]||(t[7]=h=>n.updatePageDate("month",h)),selected:n.modelValue,onSelect:n.selectMonth,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,format:n.monthListFormat,locale:n.locale,onBack:t[8]||(t[8]=h=>n.viewShown="year")},null,8,["pageDate","selected","onSelect","lowerLimit","upperLimit","format","locale"]),[[ei,n.viewShown==="month"]]),Fn(Tt(l,{pageDate:n.pageDate,"onUpdate:pageDate":t[9]||(t[9]=h=>n.updatePageDate("day",h)),selected:n.modelValue,weekStartsOn:n.weekStartsOn,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,headingFormat:n.dayPickerHeadingFormat,disabledDates:n.disabledDates,locale:n.locale,weekdayFormat:n.weekdayFormat,"allow-outside-interval":n.allowOutsideInterval,format:n.dayFormat,onSelect:n.selectDay,onBack:t[10]||(t[10]=h=>n.viewShown="month")},null,8,["pageDate","selected","weekStartsOn","lowerLimit","upperLimit","headingFormat","disabledDates","locale","weekdayFormat","allow-outside-interval","format","onSelect"]),[[ei,n.viewShown==="day"]]),Fn(Tt(c,{pageDate:n.pageDate,visible:n.viewShown==="time",selected:n.modelValue,disabledTime:n.disabledTime,onSelect:n.selectTime,onBack:n.goBackFromTimepicker},null,8,["pageDate","visible","selected","disabledTime","onSelect","onBack"]),[[ei,n.viewShown==="time"]])],4)}const qC=Ri(YC,[["render",GC]]);function Ju(n){return new Date(n.replace("Z","").replace("T"," "))}const KC={ref:"timelineCanvas",id:"timeline-viewer",width:"1280",height:"40"},ZC={class:"tick-text"},QC={class:"tick hours-total"},JC={class:"tick-text"};function po(n,t,e){let i=n.e.layerX/t,s=Math.round(i*e);return s>=e-1&&(s=e-2),s<=0&&(s=0),s}const ap=pe({__name:"Timeline",props:{currentImageIndex:{},isFollowing:{type:Boolean}},emits:["day-change","minute-index-change","toggle-follow"],setup(n,{emit:t}){const e="#86DA9D",r=Oi();let i=null,s,o;const a=Dt(!1),l=Dt(0),c=Dt(.1),h=Dt("");function u(){d("toggle-follow",!f.isFollowing)}const d=t,f=n,g=Z(()=>{var O;return((O=r.currentDay)==null?void 0:O.Captures)||[]}),p=Z(()=>r.currentDay);Dr(p,()=>{Et()}),Dr(()=>f.currentImageIndex,()=>{Et()});const _=Z(()=>{if(r.currentDay&&r.currentDay.Captures)return r.currentDay.Captures[f.currentImageIndex]}),w=Z(()=>{if(_.value&&_.value.Dt)return Ju(_.value.Dt)}),y=Z(()=>a.value?"opacity:1;":"opacity:0;"),C=Z(()=>0),S=Z(()=>[...g.value.filter(T=>{let B=new Date(T.Dt);return B.getMinutes()===0&&B.getSeconds()===0})]);function k(){const O=l1(w.value,1);r.loadDay(O)}function A(){const O=va(w.value,1);r.loadDay(O)}function N(){r.loadToday()}function R(O){O&&r.loadDay(O)}function W(O=1){O=-1*O;var T=f.currentImageIndex+O;lt(T)}function ot(O=1){var T=f.currentImageIndex+O;lt(T)}function mt(){l.value=1,h.value="prev"}function ht(){l.value=0,c.value=.1,h.value=""}function at(){l.value=1,h.value="next"}function dt(){l.value=0,c.value=.1,h.value=""}function lt(O){d("minute-index-change",O),nt(O)}function nt(O){console.log("moveMinuteLinePosition happend");var T=Ut(O);s.set({left:T}),i.renderAll()}function q(O){var T=Ut(O);o.set({left:T,height:60}),i.renderAll()}function et(){o.set({height:0}),i.renderAll()}function Xt(O){return`left: ${O/(S.value.length-1)*100}%;`}function Ut(O){var T=0;return i&&i.width?i.width*(O/g.value.length*100)/100:T}function ee(O){if(O){let T=Ju(O);if(T)return vs(T,"haa")}return""}function Et(){console.log("redrawingcanvas"),i||(i=new Ms("timeline-viewer"));let O="";document&&document.documentElement&&(O=getComputedStyle(document.documentElement).getPropertyValue("--theme-input-bg")),i.setDimensions({width:window.innerWidth-(200+220+7*1),height:34}),i.clear();let T=0;i&&i.width&&(T=i.width*(1/g.value.length*100)/100);let B=!1,ft=0;for(let _t=0;_t<g.value.length;_t++){let m=g.value[_t],v=Ut(_t);_t===0?(B=m.IsReal,ft=v):B!==m.IsReal?(i.add(new Pe({width:v-ft,height:40,left:ft,top:0,stroke:m.IsReal?O:e,fill:m.IsReal?O:e,selectable:!1})),ft=v,B=m.IsReal):_t===g.value.length-1&&i.add(new Pe({width:v-ft,height:40,left:ft,top:0,stroke:m.IsReal?e:O,fill:m.IsReal?e:O,selectable:!1}))}s=new Pe({width:T,height:60,left:Ut(f.currentImageIndex),top:0,stroke:"#f2ae57",fill:"#f2ae57",selectable:!1}),o=new Pe({width:T*1,height:0,left:Ut(f.currentImageIndex),top:-1,stroke:"#F65C26",fill:"#F65C26",selectable:!1}),i.add(s),i.add(o),a.value=!0}function ce(O=1){W(O)}function Gt(O=1){ot(O)}Dt(0),Dt(100);function Ae(O){O==="prevDay"?k():O==="nextDay"?A():O==="today"&&N(),O==="left"?ce():O==="right"?Gt():O==="left-1min"?ce(2):O==="right-1min"&&Gt(2)}let zt;function E(O){O.matches,a.value=!1,Et()}return nn(()=>{let O=!1;i||(i=new Ms("timeline-viewer")),i.selection=!1,i.setDimensions({width:window.innerWidth-40,height:40}),Et(),ws("time-function",T=>{console.log("ev",T),Ae(T)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",E),window.addEventListener("resize",Et),i.on("mouse:up",T=>{lt(po(T,i.width,g.value.length)),O=!1}),i.on("mouse:down",T=>{lt(po(T,i.width,g.value.length)),O=!0}),i.on("mouse:out",T=>{et()}),i.on("mouse:move",T=>{T&&T.e&&(O?lt(po(T,i.width,g.value.length)):q(po(T,i.width,g.value.length)))})}),Fs(()=>{clearInterval(zt),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",E),window.removeEventListener("resize",Et)}),(O,T)=>{var ft;const B=Je("ico");return Q(),st("div",{class:"timeline",style:bn(y.value)},[V("button",{class:"side-btn prev-day",onClick:k,title:"Previous Day"},[Tt(B,{icon:"arrow-from-right"})]),T[3]||(T[3]=V("div",{class:"splitter"},null,-1)),V("button",{class:"side-btn prev-minute",onClick:T[0]||(T[0]=_t=>ce(1)),onMousedown:mt,onMouseup:ht,title:"Previous 30 Seconds"},[Tt(B,{icon:"angle-left"})],32),T[4]||(T[4]=V("div",{class:"splitter"},null,-1)),V("button",{class:Be(["side-btn prev-minute",{"toggle-follow-on":O.isFollowing}]),onClick:u,title:"Follow Captures"},[Tt(B,{icon:"repeat-square-icon"})],2),T[5]||(T[5]=V("div",{class:"splitter"},null,-1)),V("div",{class:"canvas-bg",style:bn(y.value)},[V("canvas",KC,null,512),(Q(!0),st(Jt,null,Wn(S.value,(_t,m)=>(Q(),st("div",{class:"tick",style:bn(Xt(m)),key:m},[T[2]||(T[2]=Kr("   ",-1)),V("div",ZC,ve(ee(_t.Dt)),1)],4))),128))],4),T[6]||(T[6]=V("div",{class:"splitter"},null,-1)),(Q(),st("div",{class:"picker",key:(ft=ne(w))==null?void 0:ft.toISOString()},[Tt(ne(qC),{"model-value":ne(w),"input-format":"d MMM yyyy h:mm:ss aa","onUpdate:modelValue":R},null,8,["model-value"])])),T[7]||(T[7]=V("div",{class:"splitter"},null,-1)),V("button",{class:"side-btn next-30-sec",onClick:T[1]||(T[1]=_t=>Gt(1)),onMousedown:at,onMouseup:dt,title:"Next 30 Seconds"},[Tt(B,{icon:"angle-right"})],32),T[8]||(T[8]=V("div",{class:"splitter"},null,-1)),V("button",{class:"side-btn next-day",onClick:A,title:"Next Day"},[Tt(B,{icon:"arrow-from-left"})]),V("div",QC,[V("div",JC,[Tt(B,{icon:"clock",class:"is-small-icon"}),V("div",null,ve(C.value),1)])])],4)}}});const t2=pe({__name:"Home",setup(n){const t=Oi(),e=yc(t),r=xn(e,"currentDay"),i=xn(e,"earliestCaptureIndex"),s=xn(e,"latestCaptureIndex");let o=Dt(-1),a=Dt(!1);const l=Z(()=>{if(r.value&&r.value.Captures)return r.value.Captures[o.value]});return nn(async()=>{await t.loadToday(),o.value<0&&(o.value=i.value||0),ws("screen-captured",async c=>{var h;c&&c.Bod===((h=t.currentDay)==null?void 0:h.Bod)&&(await t.loadDay(new Date(t.currentDay.Bod)),a.value&&(o.value=s.value||o.value))}),t.loadSettings()}),(c,h)=>(Q(),st(Jt,null,[r.value?(Q(),rr(ap,{key:0,"current-image-index":ne(o),onMinuteIndexChange:h[0]||(h[0]=u=>Nt(o)?o.value=u:o=u),"is-following":ne(a),onToggleFollow:h[1]||(h[1]=u=>Nt(a)?a.value=!ne(a):a=!ne(a))},null,8,["current-image-index","is-following"])):Yn("",!0),Tt(dC,{"current-capture":l.value},null,8,["current-capture"]),Tt(op)],64))}}),e2={key:1,class:"day-summary"},r2={class:"day-summary-table",border:"1"},n2=pe({__name:"DaySummary",setup(n){const t=Oi(),e=yc(t),r=xn(e,"currentDay");xn(e,"earliestCaptureIndex"),xn(e,"latestCaptureIndex");let i=Dt(-1),s=Dt(!1);const o=Z(()=>{if(r.value)return r.value.Captures.filter(a=>a.IsReal)});return nn(async()=>{await t.loadToday()}),(a,l)=>(Q(),st(Jt,null,[r.value?(Q(),rr(ap,{key:0,"current-image-index":ne(i),onMinuteIndexChange:l[0]||(l[0]=c=>Nt(i)?i.value=c:i=c),"is-following":ne(s),onToggleFollow:l[1]||(l[1]=c=>Nt(s)?s.value=!ne(s):s=!ne(s))},null,8,["current-image-index","is-following"])):Yn("",!0),r.value?(Q(),st("div",e2,[Kr(ve(r.value.Summary)+" ",1),V("table",r2,[V("tbody",null,[(Q(!0),st(Jt,null,Wn(o.value,(c,h)=>(Q(),st("tr",null,[V("td",null,ve(c.AppName),1)]))),256))])])])):Yn("",!0),Tt(op)],64))}});const i2={name:"about",components:{},computed:{},methods:{},data:function(){return{}},mounted(){}};function s2(n,t,e,r,i,s){return Q(),st("div",null,[...t[0]||(t[0]=[V("div",{class:"about"},[V("div",{class:"block"},[V("div"),V("h1",null,"Relapse"),V("h2",null," Created by "),V("h3",null,[Kr(" Lead Developer @ "),V("br"),Kr(" NERDY - ")])])],-1)])])}const o2=_c(i2,[["render",s2]]);var Kl={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(n){return t=>["number","string","boolean"].indexOf(typeof t)!==-1||t==null},required:!1},modelValue:{validator:function(n){return t=>["number","string","boolean"].indexOf(typeof t)!==-1||t==null},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1},aria:{required:!1,type:Object,default:()=>({})}},setup(n,t){const e=function(o,a,l){const{value:c,modelValue:h,falseValue:u,trueValue:d,disabled:f}=zi(o),g=h&&h.value!==void 0?h:c,p=Z(()=>g.value===d.value),_=C=>{a.emit("input",C),a.emit("update:modelValue",C),a.emit("change",C)},w=()=>{_(d.value)},y=()=>{_(u.value)};return[null,void 0,!1,0,"0","off"].indexOf(g.value)!==-1&&[u.value,d.value].indexOf(g.value)===-1&&y(),[!0,1,"1","on"].indexOf(g.value)!==-1&&[u.value,d.value].indexOf(g.value)===-1&&w(),{externalValue:g,checked:p,update:_,check:w,uncheck:y,handleInput:C=>{_(C.target.checked?d.value:u.value)},handleClick:()=>{f.value||(p.value?y():w())}}}(n,t),r=function(o,a,l){const{trueValue:c,falseValue:h,onLabel:u,offLabel:d}=zi(o),f=l.checked,g=l.update;return{label:Z(()=>{let p=f.value?u.value:d.value;return p||(p="&nbsp;"),p}),toggle:()=>{g(f.value?h.value:c.value)},on:()=>{g(c.value)},off:()=>{g(h.value)}}}(n,0,{checked:e.checked,update:e.update}),i=function(o,a,l){const c=zi(o),h=c.disabled,u=l.checked,d=Z(()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...c.classes.value}));return{classList:Z(()=>({container:d.value.container,toggle:[d.value.toggle,h.value?u.value?d.value.toggleOnDisabled:d.value.toggleOffDisabled:u.value?d.value.toggleOn:d.value.toggleOff],handle:[d.value.handle,h.value?u.value?d.value.handleOnDisabled:d.value.handleOffDisabled:u.value?d.value.handleOn:d.value.handleOff],label:d.value.label}))}}(n,0,{checked:e.checked}),s=function(o,a,l){const{disabled:c}=zi(o),h=l.check,u=l.uncheck,d=l.checked;return{handleSpace:()=>{c.value||(d.value?u():h())}}}(n,0,{check:e.check,uncheck:e.uncheck,checked:e.checked});return{...e,...i,...r,...s}}};const a2=["tabindex","aria-checked","aria-describedby","aria-labelledby"],l2=["id","name","value","checked","disabled"],c2=["innerHTML"],h2=["checked"];Kl.render=function(n,t,e,r,i,s){return Q(),st("div",vc({class:n.classList.container,tabindex:e.disabled?void 0:0,"aria-checked":n.checked,"aria-describedby":e.describedby,"aria-labelledby":e.labelledby,role:"switch"},e.aria,{onKeypress:t[1]||(t[1]=O0(vn((...o)=>n.handleSpace&&n.handleSpace(...o),["prevent"]),["space"]))}),[Fn(V("input",{type:"checkbox",id:e.id,name:e.name,value:e.trueValue,checked:n.checked,disabled:e.disabled},null,8,l2),[[ei,!1]]),V("div",{class:Be(n.classList.toggle),onClick:t[0]||(t[0]=(...o)=>n.handleClick&&n.handleClick(...o))},[V("span",{class:Be(n.classList.handle)},null,2),mn(n.$slots,"label",{checked:n.checked,classList:n.classList},()=>[V("span",{class:Be(n.classList.label),innerHTML:n.label},null,10,c2)]),e.required?(Q(),st("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:n.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,h2)):Yn("v-if",!0)],2)],16,a2)},Kl.__file="src/Toggle.vue";const u2=pe({__name:"AppRejectionToggle",props:{app:{},rejections:{}},emits:["input"],setup(n,{emit:t}){const e=t,r=n;Z(()=>r.rejections.includes(r.app.AppName)?"is-reject":"is-capturing");const i=Z(()=>!r.rejections.includes(r.app.AppName));function s(){i.value?a():o()}function o(){e("input",{app:r.app,state:"CAPTURING"})}function a(){e("input",{app:r.app,state:"REJECTING"})}return(l,c)=>(Q(),rr(ne(Kl),{"model-value":i.value,"on-label":"Capture","off-label":"Ignore",onInput:s},null,8,["model-value"]))}});const d2={name:"numeric",computed:{},props:{value:{type:Number,required:!0},min:Number,max:Number},methods:{numberUp(){var n=this.value+1;this.numberChanged(n)},numberDown(){var n=this.value-1;this.numberChanged(n)},numberChanged(n){typeof n=="number"||(n=n.target.value),n>this.min&&n<this.max&&this.$emit("updated",n)},blurred(){this.$forceUpdate()}}},f2={class:"numeric-input-wrapper"},g2=["value"];function p2(n,t,e,r,i,s){const o=Je("ico");return Q(),st("div",f2,[V("input",{class:"numeric-input",value:e.value,onInput:t[0]||(t[0]=(...a)=>s.numberChanged&&s.numberChanged(...a)),onBlur:t[1]||(t[1]=(...a)=>s.blurred&&s.blurred(...a))},null,40,g2),V("button",{class:"number-btn number-up",onClick:t[2]||(t[2]=(...a)=>s.numberUp&&s.numberUp(...a))},[Tt(o,{icon:"angle-up",size:"small"})]),V("button",{class:"number-btn number-down",onClick:t[3]||(t[3]=(...a)=>s.numberDown&&s.numberDown(...a))},[Tt(o,{icon:"angle-down",size:"small"})])])}const m2=_c(d2,[["render",p2]]);function Zt(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function Hr(n){return function t(e){return arguments.length===0||Zt(e)?t:n.apply(this,arguments)}}function Jn(n){return function t(e,r){switch(arguments.length){case 0:return t;case 1:return Zt(e)?t:Hr(function(i){return n(e,i)});default:return Zt(e)&&Zt(r)?t:Zt(e)?Hr(function(i){return n(i,r)}):Zt(r)?Hr(function(i){return n(e,i)}):n(e,r)}}}function v2(n){return function t(e,r,i){switch(arguments.length){case 0:return t;case 1:return Zt(e)?t:Jn(function(s,o){return n(e,s,o)});case 2:return Zt(e)&&Zt(r)?t:Zt(e)?Jn(function(s,o){return n(s,r,o)}):Zt(r)?Jn(function(s,o){return n(e,s,o)}):Hr(function(s){return n(e,r,s)});default:return Zt(e)&&Zt(r)&&Zt(i)?t:Zt(e)&&Zt(r)?Jn(function(s,o){return n(s,o,i)}):Zt(e)&&Zt(i)?Jn(function(s,o){return n(s,r,o)}):Zt(r)&&Zt(i)?Jn(function(s,o){return n(e,s,o)}):Zt(e)?Hr(function(s){return n(s,r,i)}):Zt(r)?Hr(function(s){return n(e,s,i)}):Zt(i)?Hr(function(s){return n(e,r,s)}):n(e,r,i)}}}var _2=Hr(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});const y2=_2;function w2(n){return new RegExp(n.source,n.flags?n.flags:(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":"")+(n.dotAll?"s":""))}function lp(n,t,e){if(e||(e=new x2),b2(n))return n;var r=function(s){var o=e.get(n);if(o)return o;e.set(n,s);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=t?lp(n[a],!0,e):n[a]);return s};switch(y2(n)){case"Object":return r(Object.create(Object.getPrototypeOf(n)));case"Array":return r([]);case"Date":return new Date(n.valueOf());case"RegExp":return w2(n);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return n.slice();default:return n}}function b2(n){var t=typeof n;return n==null||t!="object"&&t!="function"}var x2=function(){function n(){this.map={},this.length=0}return n.prototype.set=function(t,e){const r=this.hash(t);let i=this.map[r];i||(this.map[r]=i=[]),i.push([t,e]),this.length+=1},n.prototype.hash=function(t){let e=[];for(var r in t)e.push(Object.prototype.toString.call(t[r]));return e.join()},n.prototype.get=function(t){if(this.length<=180){for(const i in this.map){const s=this.map[i];for(let o=0;o<s.length;o+=1){const a=s[o];if(a[0]===t)return a[1]}}return}const e=this.hash(t),r=this.map[e];if(r)for(let i=0;i<r.length;i+=1){const s=r[i];if(s[0]===t)return s[1]}},n}(),S2=Hr(function(t){return t!=null&&typeof t.clone=="function"?t.clone():lp(t,!0)});const td=S2;var C2=v2(function(t,e,r){var i=Array.prototype.slice.call(r,0);return i.splice(t,e),i});const T2=C2,D2={class:"settings"},O2={key:0,class:"settings-content"},k2={class:"form-field"},M2={class:"form-field"},E2={class:"app-exclusions"},P2={class:"app-name"},F2={class:"app-toggle"},A2=pe({__name:"Settings",setup(n){const t=Oi(),e=Z(()=>!!t.appSettings),r=Z(()=>{var l;return(l=t.appSettings)==null?void 0:l.Settings}),i=Z(()=>{var l;return((l=t.appSettings)==null?void 0:l.Settings.Rejections)||[]}),s=Z(()=>{var l;return(l=t.appSettings)==null?void 0:l.SettingsOptions});nn(()=>{t.loadSettings()});function o(l){if(r.value){let c=td(t.appSettings.Settings);c.RetainForXDays=l}}function a({app:l,state:c}){if(console.log(l,c),r.value){let h=td(t.appSettings.Settings);h.Rejections||(h.Rejections=[]);let u=h.Rejections.indexOf(l.AppName);console.log("appNameIndex",h.Rejections,l.AppName,u),c==="CAPTURING"?u>=0&&(h.Rejections=T2(u,1,h.Rejections)):u===-1&&h.Rejections.push(l.AppName),t.saveSettings(h)}}return(l,c)=>(Q(),st("div",D2,[c[2]||(c[2]=V("div",{class:"title-bar"},[V("h4",{class:"title is-4 has-text-centered pt-1"},"Settings")],-1)),e.value&&r.value&&s.value?(Q(),st("div",O2,[V("div",k2,[c[0]||(c[0]=V("label",null,"Retain Screenshots for Days",-1)),Tt(m2,{min:6,max:91,value:r.value.RetainForXDays,onUpdated:o},null,8,["value"])]),V("div",M2,[c[1]||(c[1]=V("label",null," Active application capture rejection ",-1)),V("div",E2,[V("table",null,[(Q(!0),st(Jt,null,Wn(s.value.CapturedApplications,h=>(Q(),st("tr",{class:"",key:h.AppName},[V("td",P2,ve(h.AppName),1),V("td",F2,[Tt(u2,{app:h,rejections:i.value,onInput:a},null,8,["app","rejections"])])]))),128))])])])])):Yn("",!0)]))}});yn.baseURL="http://localhost:5020";const Fa=E0(m1),I2=[{path:"/",component:t2},{path:"/summary",component:n2},{path:"/about",component:o2},{path:"/settings",component:A2}],R2=yb({history:G1(),routes:I2}),L2=$v();Fa.use(R2);Fa.use(L2);Fa.component("ico",Xv);Fa.mount("#app");

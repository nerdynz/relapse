var lg=Object.defineProperty;var cg=(n,e,t)=>e in n?lg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Uo=(n,e,t)=>(cg(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Za(n,e){const t=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const We={},jn=[],Qt=()=>{},ug=()=>!1,hg=/^on[^a-z]/,lo=n=>hg.test(n),Qa=n=>n.startsWith("onUpdate:"),ft=Object.assign,Ja=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},dg=Object.prototype.hasOwnProperty,ke=(n,e)=>dg.call(n,e),le=Array.isArray,Vn=n=>co(n)==="[object Map]",hh=n=>co(n)==="[object Set]",fe=n=>typeof n=="function",at=n=>typeof n=="string",el=n=>typeof n=="symbol",Ye=n=>n!==null&&typeof n=="object",dh=n=>Ye(n)&&fe(n.then)&&fe(n.catch),fh=Object.prototype.toString,co=n=>fh.call(n),fg=n=>co(n).slice(8,-1),gh=n=>co(n)==="[object Object]",tl=n=>at(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ts=Za(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uo=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},gg=/-(\w)/g,pr=uo(n=>n.replace(gg,(e,t)=>t?t.toUpperCase():"")),pg=/\B([A-Z])/g,Sn=uo(n=>n.replace(pg,"-$1").toLowerCase()),ho=uo(n=>n.charAt(0).toUpperCase()+n.slice(1)),No=uo(n=>n?`on${ho(n)}`:""),Bi=(n,e)=>!Object.is(n,e),Ds=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},js=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},fa=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let uc;const ga=()=>uc||(uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gr(n){if(le(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=at(r)?wg(r):Gr(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(at(n))return n;if(Ye(n))return n}}const mg=/;(?![^(]*\))/g,_g=/:([^]+)/,vg=/\/\*[^]*?\*\//g;function wg(n){const e={};return n.replace(vg,"").split(mg).forEach(t=>{if(t){const r=t.split(_g);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Pt(n){let e="";if(at(n))e=n;else if(le(n))for(let t=0;t<n.length;t++){const r=Pt(n[t]);r&&(e+=r+" ")}else if(Ye(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const yg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bg=Za(yg);function ph(n){return!!n||n===""}const vt=n=>at(n)?n:n==null?"":le(n)||Ye(n)&&(n.toString===fh||!fe(n.toString))?JSON.stringify(n,mh,2):String(n),mh=(n,e)=>e&&e.__v_isRef?mh(n,e.value):Vn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i])=>(t[`${r} =>`]=i,t),{})}:hh(e)?{[`Set(${e.size})`]:[...e.values()]}:Ye(e)&&!le(e)&&!gh(e)?String(e):e;let Vt;class _h{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vt,!e&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Vt;try{return Vt=this,e()}finally{Vt=t}}}on(){Vt=this}off(){Vt=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function vh(n){return new _h(n)}function xg(n,e=Vt){e&&e.active&&e.effects.push(n)}function wh(){return Vt}function Sg(n){Vt&&Vt.cleanups.push(n)}const rl=n=>{const e=new Set(n);return e.w=0,e.n=0,e},yh=n=>(n.w&en)>0,bh=n=>(n.n&en)>0,Cg=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=en},Tg=n=>{const{deps:e}=n;if(e.length){let t=0;for(let r=0;r<e.length;r++){const i=e[r];yh(i)&&!bh(i)?i.delete(n):e[t++]=i,i.w&=~en,i.n&=~en}e.length=t}},Vs=new WeakMap;let bi=0,en=1;const pa=30;let Kt;const _n=Symbol(""),ma=Symbol("");class nl{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,xg(this,r)}run(){if(!this.active)return this.fn();let e=Kt,t=qr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Kt,Kt=this,qr=!0,en=1<<++bi,bi<=pa?Cg(this):hc(this),this.fn()}finally{bi<=pa&&Tg(this),en=1<<--bi,Kt=this.parent,qr=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Kt===this?this.deferStop=!0:this.active&&(hc(this),this.onStop&&this.onStop(),this.active=!1)}}function hc(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let qr=!0;const xh=[];function ti(){xh.push(qr),qr=!1}function ri(){const n=xh.pop();qr=n===void 0?!0:n}function At(n,e,t){if(qr&&Kt){let r=Vs.get(n);r||Vs.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=rl()),Sh(i)}}function Sh(n,e){let t=!1;bi<=pa?bh(n)||(n.n|=en,t=!yh(n)):t=!n.has(Kt),t&&(n.add(Kt),Kt.deps.push(n))}function Or(n,e,t,r,i,s){const o=Vs.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&le(n)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":le(n)?tl(t)&&a.push(o.get("length")):(a.push(o.get(_n)),Vn(n)&&a.push(o.get(ma)));break;case"delete":le(n)||(a.push(o.get(_n)),Vn(n)&&a.push(o.get(ma)));break;case"set":Vn(n)&&a.push(o.get(_n));break}if(a.length===1)a[0]&&_a(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);_a(rl(l))}}function _a(n,e){const t=le(n)?n:[...n];for(const r of t)r.computed&&dc(r);for(const r of t)r.computed||dc(r)}function dc(n,e){(n!==Kt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function Dg(n,e){var t;return(t=Vs.get(n))==null?void 0:t.get(e)}const Og=Za("__proto__,__v_isRef,__isVue"),Ch=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(el)),kg=il(),Mg=il(!1,!0),Pg=il(!0),fc=Eg();function Eg(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=Oe(this);for(let s=0,o=this.length;s<o;s++)At(r,"get",s+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(Oe)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){ti();const r=Oe(this)[e].apply(this,t);return ri(),r}}),n}function Fg(n){const e=Oe(this);return At(e,"has",n),e.hasOwnProperty(n)}function il(n=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(n?e?Gg:Mh:e?kh:Oh).get(r))return r;const o=le(r);if(!n){if(o&&ke(fc,i))return Reflect.get(fc,i,s);if(i==="hasOwnProperty")return Fg}const a=Reflect.get(r,i,s);return(el(i)?Ch.has(i):Og(i))||(n||At(r,"get",i),e)?a:Ue(a)?o&&tl(i)?a:a.value:Ye(a)?n?Eh(a):rs(a):a}}const Ag=Th(),Lg=Th(!0);function Th(n=!1){return function(t,r,i,s){let o=t[r];if(zn(o)&&Ue(o)&&!Ue(i))return!1;if(!n&&(!Bs(i)&&!zn(i)&&(o=Oe(o),i=Oe(i)),!le(t)&&Ue(o)&&!Ue(i)))return o.value=i,!0;const a=le(t)&&tl(r)?Number(r)<t.length:ke(t,r),l=Reflect.set(t,r,i,s);return t===Oe(s)&&(a?Bi(i,o)&&Or(t,"set",r,i):Or(t,"add",r,i)),l}}function Rg(n,e){const t=ke(n,e);n[e];const r=Reflect.deleteProperty(n,e);return r&&t&&Or(n,"delete",e,void 0),r}function Ig(n,e){const t=Reflect.has(n,e);return(!el(e)||!Ch.has(e))&&At(n,"has",e),t}function jg(n){return At(n,"iterate",le(n)?"length":_n),Reflect.ownKeys(n)}const Dh={get:kg,set:Ag,deleteProperty:Rg,has:Ig,ownKeys:jg},Vg={get:Pg,set(n,e){return!0},deleteProperty(n,e){return!0}},Bg=ft({},Dh,{get:Mg,set:Lg}),sl=n=>n,fo=n=>Reflect.getPrototypeOf(n);function ls(n,e,t=!1,r=!1){n=n.__v_raw;const i=Oe(n),s=Oe(e);t||(e!==s&&At(i,"get",e),At(i,"get",s));const{has:o}=fo(i),a=r?sl:t?ll:Ui;if(o.call(i,e))return a(n.get(e));if(o.call(i,s))return a(n.get(s));n!==i&&n.get(e)}function cs(n,e=!1){const t=this.__v_raw,r=Oe(t),i=Oe(n);return e||(n!==i&&At(r,"has",n),At(r,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function us(n,e=!1){return n=n.__v_raw,!e&&At(Oe(n),"iterate",_n),Reflect.get(n,"size",n)}function gc(n){n=Oe(n);const e=Oe(this);return fo(e).has.call(e,n)||(e.add(n),Or(e,"add",n,n)),this}function pc(n,e){e=Oe(e);const t=Oe(this),{has:r,get:i}=fo(t);let s=r.call(t,n);s||(n=Oe(n),s=r.call(t,n));const o=i.call(t,n);return t.set(n,e),s?Bi(e,o)&&Or(t,"set",n,e):Or(t,"add",n,e),this}function mc(n){const e=Oe(this),{has:t,get:r}=fo(e);let i=t.call(e,n);i||(n=Oe(n),i=t.call(e,n)),r&&r.call(e,n);const s=e.delete(n);return i&&Or(e,"delete",n,void 0),s}function _c(){const n=Oe(this),e=n.size!==0,t=n.clear();return e&&Or(n,"clear",void 0,void 0),t}function hs(n,e){return function(r,i){const s=this,o=s.__v_raw,a=Oe(o),l=e?sl:n?ll:Ui;return!n&&At(a,"iterate",_n),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function ds(n,e,t){return function(...r){const i=this.__v_raw,s=Oe(i),o=Vn(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),u=t?sl:e?ll:Ui;return!e&&At(s,"iterate",l?ma:_n),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Rr(n){return function(...e){return n==="delete"?!1:this}}function Ug(){const n={get(s){return ls(this,s)},get size(){return us(this)},has:cs,add:gc,set:pc,delete:mc,clear:_c,forEach:hs(!1,!1)},e={get(s){return ls(this,s,!1,!0)},get size(){return us(this)},has:cs,add:gc,set:pc,delete:mc,clear:_c,forEach:hs(!1,!0)},t={get(s){return ls(this,s,!0)},get size(){return us(this,!0)},has(s){return cs.call(this,s,!0)},add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear"),forEach:hs(!0,!1)},r={get(s){return ls(this,s,!0,!0)},get size(){return us(this,!0)},has(s){return cs.call(this,s,!0)},add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear"),forEach:hs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ds(s,!1,!1),t[s]=ds(s,!0,!1),e[s]=ds(s,!1,!0),r[s]=ds(s,!0,!0)}),[n,t,e,r]}const[Ng,Hg,Wg,Yg]=Ug();function ol(n,e){const t=e?n?Yg:Wg:n?Hg:Ng;return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(ke(t,i)&&i in r?t:r,i,s)}const Xg={get:ol(!1,!1)},zg={get:ol(!1,!0)},$g={get:ol(!0,!1)},Oh=new WeakMap,kh=new WeakMap,Mh=new WeakMap,Gg=new WeakMap;function qg(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kg(n){return n.__v_skip||!Object.isExtensible(n)?0:qg(fg(n))}function rs(n){return zn(n)?n:al(n,!1,Dh,Xg,Oh)}function Ph(n){return al(n,!1,Bg,zg,kh)}function Eh(n){return al(n,!0,Vg,$g,Mh)}function al(n,e,t,r,i){if(!Ye(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=Kg(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function Dr(n){return zn(n)?Dr(n.__v_raw):!!(n&&n.__v_isReactive)}function zn(n){return!!(n&&n.__v_isReadonly)}function Bs(n){return!!(n&&n.__v_isShallow)}function Fh(n){return Dr(n)||zn(n)}function Oe(n){const e=n&&n.__v_raw;return e?Oe(e):n}function go(n){return js(n,"__v_skip",!0),n}const Ui=n=>Ye(n)?rs(n):n,ll=n=>Ye(n)?Eh(n):n;function Ah(n){qr&&Kt&&(n=Oe(n),Sh(n.dep||(n.dep=rl())))}function Lh(n,e){n=Oe(n);const t=n.dep;t&&_a(t)}function Ue(n){return!!(n&&n.__v_isRef===!0)}function Me(n){return Rh(n,!1)}function Zg(n){return Rh(n,!0)}function Rh(n,e){return Ue(n)?n:new Qg(n,e)}class Qg{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Oe(e),this._value=t?e:Ui(e)}get value(){return Ah(this),this._value}set value(e){const t=this.__v_isShallow||Bs(e)||zn(e);e=t?e:Oe(e),Bi(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ui(e),Lh(this))}}function et(n){return Ue(n)?n.value:n}const Jg={get:(n,e,t)=>et(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return Ue(i)&&!Ue(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Ih(n){return Dr(n)?n:new Proxy(n,Jg)}function xi(n){const e=le(n)?new Array(n.length):{};for(const t in n)e[t]=jh(n,t);return e}class ep{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Dg(Oe(this._object),this._key)}}class tp{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Kr(n,e,t){return Ue(n)?n:fe(n)?new tp(n):Ye(n)&&arguments.length>1?jh(n,e,t):Me(n)}function jh(n,e,t){const r=n[e];return Ue(r)?r:new ep(n,e,t)}class rp{constructor(e,t,r,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new nl(e,()=>{this._dirty||(this._dirty=!0,Lh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Oe(this);return Ah(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function np(n,e,t=!1){let r,i;const s=fe(n);return s?(r=n,i=Qt):(r=n.get,i=n.set),new rp(r,i,s||!i,t)}function Zr(n,e,t,r){let i;try{i=r?n(...r):n()}catch(s){po(s,e,t)}return i}function Jt(n,e,t,r){if(fe(n)){const s=Zr(n,e,t,r);return s&&dh(s)&&s.catch(o=>{po(o,e,t)}),s}const i=[];for(let s=0;s<n.length;s++)i.push(Jt(n[s],e,t,r));return i}function po(n,e,t,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Zr(l,null,10,[n,o,a]);return}}ip(n,t,i,r)}function ip(n,e,t,r=!0){console.error(n)}let Ni=!1,va=!1;const _t=[];let lr=0;const Bn=[];let br=null,gn=0;const Vh=Promise.resolve();let cl=null;function mo(n){const e=cl||Vh;return n?e.then(this?n.bind(this):n):e}function sp(n){let e=lr+1,t=_t.length;for(;e<t;){const r=e+t>>>1;Hi(_t[r])<n?e=r+1:t=r}return e}function ul(n){(!_t.length||!_t.includes(n,Ni&&n.allowRecurse?lr+1:lr))&&(n.id==null?_t.push(n):_t.splice(sp(n.id),0,n),Bh())}function Bh(){!Ni&&!va&&(va=!0,cl=Vh.then(Nh))}function op(n){const e=_t.indexOf(n);e>lr&&_t.splice(e,1)}function ap(n){le(n)?Bn.push(...n):(!br||!br.includes(n,n.allowRecurse?gn+1:gn))&&Bn.push(n),Bh()}function vc(n,e=Ni?lr+1:0){for(;e<_t.length;e++){const t=_t[e];t&&t.pre&&(_t.splice(e,1),e--,t())}}function Uh(n){if(Bn.length){const e=[...new Set(Bn)];if(Bn.length=0,br){br.push(...e);return}for(br=e,br.sort((t,r)=>Hi(t)-Hi(r)),gn=0;gn<br.length;gn++)br[gn]();br=null,gn=0}}const Hi=n=>n.id==null?1/0:n.id,lp=(n,e)=>{const t=Hi(n)-Hi(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Nh(n){va=!1,Ni=!0,_t.sort(lp);const e=Qt;try{for(lr=0;lr<_t.length;lr++){const t=_t[lr];t&&t.active!==!1&&Zr(t,null,14)}}finally{lr=0,_t.length=0,Uh(),Ni=!1,cl=null,(_t.length||Bn.length)&&Nh()}}function cp(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||We;let i=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||We;d&&(i=t.map(f=>at(f)?f.trim():f)),h&&(i=t.map(fa))}let a,l=r[a=No(e)]||r[a=No(pr(e))];!l&&s&&(l=r[a=No(Sn(e))]),l&&Jt(l,n,6,i);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Jt(c,n,6,i)}}function Hh(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!fe(n)){const l=c=>{const u=Hh(c,e,!0);u&&(a=!0,ft(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(Ye(n)&&r.set(n,null),null):(le(s)?s.forEach(l=>o[l]=null):ft(o,s),Ye(n)&&r.set(n,o),o)}function _o(n,e){return!n||!lo(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(n,e[0].toLowerCase()+e.slice(1))||ke(n,Sn(e))||ke(n,e))}let mt=null,vo=null;function Us(n){const e=mt;return mt=n,vo=n&&n.type.__scopeId||null,e}function up(n){vo=n}function hp(){vo=null}function kr(n,e=mt,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&Mc(-1);const s=Us(e);let o;try{o=n(...i)}finally{Us(s),r._d&&Mc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ho(n){const{type:e,vnode:t,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=n;let _,y;const w=Us(n);try{if(t.shapeFlag&4){const b=i||r;_=ar(u.call(b,b,h,s,f,d,g)),y=l}else{const b=e;_=ar(b.length>1?b(s,{attrs:l,slots:a,emit:c}):b(s,null)),y=e.props?l:dp(l)}}catch(b){Mi.length=0,po(b,n,1),_=Se(tn)}let T=_;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:P}=T;b.length&&P&7&&(o&&b.some(Qa)&&(y=fp(y,o)),T=$n(T,y))}return t.dirs&&(T=$n(T),T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&(T.transition=t.transition),_=T,Us(w),_}const dp=n=>{let e;for(const t in n)(t==="class"||t==="style"||lo(t))&&((e||(e={}))[t]=n[t]);return e},fp=(n,e)=>{const t={};for(const r in n)(!Qa(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function gp(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?wc(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!_o(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?wc(r,o,c):!0:!!o;return!1}function wc(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!_o(t,s))return!0}return!1}function pp({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const mp=n=>n.__isSuspense;function _p(n,e){e&&e.pendingBranch?le(n)?e.effects.push(...n):e.effects.push(n):ap(n)}function Wo(n,e){return hl(n,null,e)}const fs={};function fr(n,e,t){return hl(n,e,t)}function hl(n,e,{immediate:t,deep:r,flush:i,onTrack:s,onTrigger:o}=We){var a;const l=wh()===((a=ht)==null?void 0:a.scope)?ht:null;let c,u=!1,h=!1;if(Ue(n)?(c=()=>n.value,u=Bs(n)):Dr(n)?(c=()=>n,r=!0):le(n)?(h=!0,u=n.some(b=>Dr(b)||Bs(b)),c=()=>n.map(b=>{if(Ue(b))return b.value;if(Dr(b))return mn(b);if(fe(b))return Zr(b,l,2)})):fe(n)?e?c=()=>Zr(n,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),Jt(n,l,3,[f])}:c=Qt,e&&r){const b=c;c=()=>mn(b())}let d,f=b=>{d=w.onStop=()=>{Zr(b,l,4)}},g;if(Xi)if(f=Qt,e?t&&Jt(e,l,3,[c(),h?[]:void 0,f]):c(),i==="sync"){const b=am();g=b.__watcherHandles||(b.__watcherHandles=[])}else return Qt;let p=h?new Array(n.length).fill(fs):fs;const _=()=>{if(w.active)if(e){const b=w.run();(r||u||(h?b.some((P,R)=>Bi(P,p[R])):Bi(b,p)))&&(d&&d(),Jt(e,l,3,[b,p===fs?void 0:h&&p[0]===fs?[]:p,f]),p=b)}else w.run()};_.allowRecurse=!!e;let y;i==="sync"?y=_:i==="post"?y=()=>Ct(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),y=()=>ul(_));const w=new nl(c,y);e?t?_():p=w.run():i==="post"?Ct(w.run.bind(w),l&&l.suspense):w.run();const T=()=>{w.stop(),l&&l.scope&&Ja(l.scope.effects,w)};return g&&g.push(T),T}function vp(n,e,t){const r=this.proxy,i=at(n)?n.includes(".")?Wh(r,n):()=>r[n]:n.bind(r,r);let s;fe(e)?s=e:(s=e.handler,t=e);const o=ht;Gn(this);const a=hl(i,s.bind(r),t);return o?Gn(o):vn(),a}function Wh(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function mn(n,e){if(!Ye(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),Ue(n))mn(n.value,e);else if(le(n))for(let t=0;t<n.length;t++)mn(n[t],e);else if(hh(n)||Vn(n))n.forEach(t=>{mn(t,e)});else if(gh(n))for(const t in n)mn(n[t],e);return n}function dn(n,e){const t=mt;if(t===null)return n;const r=xo(t)||t.proxy,i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=We]=e[s];o&&(fe(o)&&(o={mounted:o,updated:o}),o.deep&&mn(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function un(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(ti(),Jt(l,t,8,[n.el,a,n,e]),ri())}}function gt(n,e){return fe(n)?(()=>ft({name:n.name},e,{setup:n}))():n}const Oi=n=>!!n.type.__asyncLoader,Yh=n=>n.type.__isKeepAlive;function wp(n,e){Xh(n,"a",e)}function yp(n,e){Xh(n,"da",e)}function Xh(n,e,t=ht){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(wo(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Yh(i.parent.vnode)&&bp(r,e,t,i),i=i.parent}}function bp(n,e,t,r){const i=wo(e,n,r,!0);ns(()=>{Ja(r[e],i)},t)}function wo(n,e,t=ht,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;ti(),Gn(t);const a=Jt(e,t,n,o);return vn(),ri(),a});return r?i.unshift(s):i.push(s),s}}const Pr=n=>(e,t=ht)=>(!Xi||n==="sp")&&wo(n,(...r)=>e(...r),t),xp=Pr("bm"),Er=Pr("m"),Sp=Pr("bu"),Cp=Pr("u"),Tp=Pr("bum"),ns=Pr("um"),Dp=Pr("sp"),Op=Pr("rtg"),kp=Pr("rtc");function Mp(n,e=ht){wo("ec",n,e)}const dl="components";function Xt(n,e){return Gh(dl,n,!0,e)||n}const zh=Symbol.for("v-ndc");function $h(n){return at(n)?Gh(dl,n,!1)||n:n||zh}function Gh(n,e,t=!0,r=!1){const i=mt||ht;if(i){const s=i.type;if(n===dl){const a=im(s,!1);if(a&&(a===e||a===pr(e)||a===ho(pr(e))))return s}const o=yc(i[n]||s[n],e)||yc(i.appContext[n],e);return!o&&r?s:o}}function yc(n,e){return n&&(n[e]||n[pr(e)]||n[ho(pr(e))])}function wn(n,e,t,r){let i;const s=t&&t[r];if(le(n)||at(n)){i=new Array(n.length);for(let o=0,a=n.length;o<a;o++)i[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){i=new Array(n);for(let o=0;o<n;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Ye(n))if(n[Symbol.iterator])i=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(n[c],c,a,s&&s[a])}}else i=[];return t&&(t[r]=i),i}function Wr(n,e,t={},r,i){if(mt.isCE||mt.parent&&Oi(mt.parent)&&mt.parent.isCE)return e!=="default"&&(t.name=e),Se("slot",t,r&&r());let s=n[e];s&&s._c&&(s._d=!1),Q();const o=s&&qh(s(t)),a=ir(Je,{key:t.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&n._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function qh(n){return n.some(e=>Hs(e)?!(e.type===tn||e.type===Je&&!qh(e.children)):!0)?n:null}const wa=n=>n?od(n)?xo(n)||n.proxy:wa(n.parent):null,ki=ft(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>wa(n.parent),$root:n=>wa(n.root),$emit:n=>n.emit,$options:n=>fl(n),$forceUpdate:n=>n.f||(n.f=()=>ul(n.update)),$nextTick:n=>n.n||(n.n=mo.bind(n.proxy)),$watch:n=>vp.bind(n)}),Yo=(n,e)=>n!==We&&!n.__isScriptSetup&&ke(n,e),Pp={get({_:n},e){const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Yo(r,e))return o[e]=1,r[e];if(i!==We&&ke(i,e))return o[e]=2,i[e];if((c=n.propsOptions[0])&&ke(c,e))return o[e]=3,s[e];if(t!==We&&ke(t,e))return o[e]=4,t[e];ya&&(o[e]=0)}}const u=ki[e];let h,d;if(u)return e==="$attrs"&&At(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==We&&ke(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,ke(d,e))return d[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Yo(i,e)?(i[e]=t,!0):r!==We&&ke(r,e)?(r[e]=t,!0):ke(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==We&&ke(n,o)||Yo(e,o)||(a=s[0])&&ke(a,o)||ke(r,o)||ke(ki,o)||ke(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ke(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function bc(n){return le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let ya=!0;function Ep(n){const e=fl(n),t=n.proxy,r=n.ctx;ya=!1,e.beforeCreate&&xc(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:_,beforeDestroy:y,beforeUnmount:w,destroyed:T,unmounted:b,render:P,renderTracked:R,renderTriggered:N,errorCaptured:U,serverPrefetch:G,expose:re,inheritAttrs:me,components:ge,directives:ye,filters:_e}=e;if(c&&Fp(c,r,null),o)for(const pe in o){const he=o[pe];fe(he)&&(r[pe]=he.bind(t))}if(i){const pe=i.call(t,t);Ye(pe)&&(n.data=rs(pe))}if(ya=!0,s)for(const pe in s){const he=s[pe],lt=fe(he)?he.bind(t,t):fe(he.get)?he.get.bind(t,t):Qt,Wt=!fe(he)&&fe(he.set)?he.set.bind(t):Qt,Ze=K({get:lt,set:Wt});Object.defineProperty(r,pe,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:ze=>Ze.value=ze})}if(a)for(const pe in a)Kh(a[pe],r,t,pe);if(l){const pe=fe(l)?l.call(t):l;Reflect.ownKeys(pe).forEach(he=>{Os(he,pe[he])})}u&&xc(u,n,"c");function ne(pe,he){le(he)?he.forEach(lt=>pe(lt.bind(t))):he&&pe(he.bind(t))}if(ne(xp,h),ne(Er,d),ne(Sp,f),ne(Cp,g),ne(wp,p),ne(yp,_),ne(Mp,U),ne(kp,R),ne(Op,N),ne(Tp,w),ne(ns,b),ne(Dp,G),le(re))if(re.length){const pe=n.exposed||(n.exposed={});re.forEach(he=>{Object.defineProperty(pe,he,{get:()=>t[he],set:lt=>t[he]=lt})})}else n.exposed||(n.exposed={});P&&n.render===Qt&&(n.render=P),me!=null&&(n.inheritAttrs=me),ge&&(n.components=ge),ye&&(n.directives=ye)}function Fp(n,e,t=Qt){le(n)&&(n=ba(n));for(const r in n){const i=n[r];let s;Ye(i)?"default"in i?s=gr(i.from||r,i.default,!0):s=gr(i.from||r):s=gr(i),Ue(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function xc(n,e,t){Jt(le(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Kh(n,e,t,r){const i=r.includes(".")?Wh(t,r):()=>t[r];if(at(n)){const s=e[n];fe(s)&&fr(i,s)}else if(fe(n))fr(i,n.bind(t));else if(Ye(n))if(le(n))n.forEach(s=>Kh(s,e,t,r));else{const s=fe(n.handler)?n.handler.bind(t):e[n.handler];fe(s)&&fr(i,s,n)}}function fl(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(c=>Ns(l,c,o,!0)),Ns(l,e,o)),Ye(e)&&s.set(e,l),l}function Ns(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Ns(n,s,t,!0),i&&i.forEach(o=>Ns(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=Ap[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const Ap={data:Sc,props:Cc,emits:Cc,methods:Si,computed:Si,beforeCreate:bt,created:bt,beforeMount:bt,mounted:bt,beforeUpdate:bt,updated:bt,beforeDestroy:bt,beforeUnmount:bt,destroyed:bt,unmounted:bt,activated:bt,deactivated:bt,errorCaptured:bt,serverPrefetch:bt,components:Si,directives:Si,watch:Rp,provide:Sc,inject:Lp};function Sc(n,e){return e?n?function(){return ft(fe(n)?n.call(this,this):n,fe(e)?e.call(this,this):e)}:e:n}function Lp(n,e){return Si(ba(n),ba(e))}function ba(n){if(le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function bt(n,e){return n?[...new Set([].concat(n,e))]:e}function Si(n,e){return n?ft(Object.create(null),n,e):e}function Cc(n,e){return n?le(n)&&le(e)?[...new Set([...n,...e])]:ft(Object.create(null),bc(n),bc(e??{})):e}function Rp(n,e){if(!n)return e;if(!e)return n;const t=ft(Object.create(null),n);for(const r in e)t[r]=bt(n[r],e[r]);return t}function Zh(){return{app:null,config:{isNativeTag:ug,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ip=0;function jp(n,e){return function(r,i=null){fe(r)||(r=ft({},r)),i!=null&&!Ye(i)&&(i=null);const s=Zh(),o=new Set;let a=!1;const l=s.app={_uid:Ip++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:lm,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&fe(c.install)?(o.add(c),c.install(l,...u)):fe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Se(r,i);return d.appContext=s,u&&e?e(d,c):n(d,c,h),a=!0,l._container=c,c.__vue_app__=l,xo(d.component)||d.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){Wi=l;try{return c()}finally{Wi=null}}};return l}}let Wi=null;function Os(n,e){if(ht){let t=ht.provides;const r=ht.parent&&ht.parent.provides;r===t&&(t=ht.provides=Object.create(r)),t[n]=e}}function gr(n,e,t=!1){const r=ht||mt;if(r||Wi){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Wi._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&fe(e)?e.call(r&&r.proxy):e}}function Vp(){return!!(ht||mt||Wi)}function Bp(n,e,t,r=!1){const i={},s={};js(s,bo,1),n.propsDefaults=Object.create(null),Qh(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:Ph(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function Up(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Oe(i),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(_o(n.emitsOptions,d))continue;const f=e[d];if(l)if(ke(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=pr(d);i[g]=xa(l,a,g,f,n,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{Qh(n,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!ke(e,h)&&((u=Sn(h))===h||!ke(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(i[h]=xa(l,a,h,void 0,n,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!ke(e,h))&&(delete s[h],c=!0)}c&&Or(n,"set","$attrs")}function Qh(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ts(l))continue;const c=e[l];let u;i&&ke(i,u=pr(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:_o(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Oe(t),c=a||We;for(let u=0;u<s.length;u++){const h=s[u];t[h]=xa(i,l,h,c[h],n,!ke(c,h))}}return o}function xa(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=ke(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&fe(l)){const{propsDefaults:c}=i;t in c?r=c[t]:(Gn(i),r=c[t]=l.call(null,e),vn())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Sn(t))&&(r=!0))}return r}function Jh(n,e,t=!1){const r=e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!fe(n)){const u=h=>{l=!0;const[d,f]=Jh(h,e,!0);ft(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return Ye(n)&&r.set(n,jn),jn;if(le(s))for(let u=0;u<s.length;u++){const h=pr(s[u]);Tc(h)&&(o[h]=We)}else if(s)for(const u in s){const h=pr(u);if(Tc(h)){const d=s[u],f=o[h]=le(d)||fe(d)?{type:d}:ft({},d);if(f){const g=kc(Boolean,f.type),p=kc(String,f.type);f[0]=g>-1,f[1]=p<0||g<p,(g>-1||ke(f,"default"))&&a.push(h)}}}const c=[o,a];return Ye(n)&&r.set(n,c),c}function Tc(n){return n[0]!=="$"}function Dc(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Oc(n,e){return Dc(n)===Dc(e)}function kc(n,e){return le(e)?e.findIndex(t=>Oc(t,n)):fe(e)&&Oc(e,n)?0:-1}const ed=n=>n[0]==="_"||n==="$stable",gl=n=>le(n)?n.map(ar):[ar(n)],Np=(n,e,t)=>{if(e._n)return e;const r=kr((...i)=>gl(e(...i)),t);return r._c=!1,r},td=(n,e,t)=>{const r=n._ctx;for(const i in n){if(ed(i))continue;const s=n[i];if(fe(s))e[i]=Np(i,s,r);else if(s!=null){const o=gl(s);e[i]=()=>o}}},rd=(n,e)=>{const t=gl(e);n.slots.default=()=>t},Hp=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=Oe(e),js(e,"_",t)):td(e,n.slots={})}else n.slots={},e&&rd(n,e);js(n.slots,bo,1)},Wp=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=We;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(ft(i,e),!t&&a===1&&delete i._):(s=!e.$stable,td(e,i)),o=e}else e&&(rd(n,e),o={default:1});if(s)for(const a in i)!ed(a)&&!(a in o)&&delete i[a]};function Sa(n,e,t,r,i=!1){if(le(n)){n.forEach((d,f)=>Sa(d,e&&(le(e)?e[f]:e),t,r,i));return}if(Oi(r)&&!i)return;const s=r.shapeFlag&4?xo(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===We?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(at(c)?(u[c]=null,ke(h,c)&&(h[c]=null)):Ue(c)&&(c.value=null)),fe(l))Zr(l,a,12,[o,u]);else{const d=at(l),f=Ue(l);if(d||f){const g=()=>{if(n.f){const p=d?ke(h,l)?h[l]:u[l]:l.value;i?le(p)&&Ja(p,s):le(p)?p.includes(s)||p.push(s):d?(u[l]=[s],ke(h,l)&&(h[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else d?(u[l]=o,ke(h,l)&&(h[l]=o)):f&&(l.value=o,n.k&&(u[n.k]=o))};o?(g.id=-1,Ct(g,t)):g()}}}const Ct=_p;function Yp(n){return Xp(n)}function Xp(n,e){const t=ga();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Qt,insertStaticContent:g}=n,p=(m,v,D,k=null,A=null,V=null,q=!1,H=null,X=!!v.dynamicChildren)=>{if(m===v)return;m&&!gi(m,v)&&(k=C(m),ze(m,A,V,!0),m=null),v.patchFlag===-2&&(X=!1,v.dynamicChildren=null);const{type:B,ref:se,shapeFlag:ee}=v;switch(B){case yo:_(m,v,D,k);break;case tn:y(m,v,D,k);break;case Xo:m==null&&w(v,D,k,q);break;case Je:ge(m,v,D,k,A,V,q,H,X);break;default:ee&1?P(m,v,D,k,A,V,q,H,X):ee&6?ye(m,v,D,k,A,V,q,H,X):(ee&64||ee&128)&&B.process(m,v,D,k,A,V,q,H,X,E)}se!=null&&A&&Sa(se,m&&m.ref,V,v||m,!v)},_=(m,v,D,k)=>{if(m==null)r(v.el=a(v.children),D,k);else{const A=v.el=m.el;v.children!==m.children&&c(A,v.children)}},y=(m,v,D,k)=>{m==null?r(v.el=l(v.children||""),D,k):v.el=m.el},w=(m,v,D,k)=>{[m.el,m.anchor]=g(m.children,v,D,k,m.el,m.anchor)},T=({el:m,anchor:v},D,k)=>{let A;for(;m&&m!==v;)A=d(m),r(m,D,k),m=A;r(v,D,k)},b=({el:m,anchor:v})=>{let D;for(;m&&m!==v;)D=d(m),i(m),m=D;i(v)},P=(m,v,D,k,A,V,q,H,X)=>{q=q||v.type==="svg",m==null?R(v,D,k,A,V,q,H,X):G(m,v,A,V,q,H,X)},R=(m,v,D,k,A,V,q,H)=>{let X,B;const{type:se,props:ee,shapeFlag:oe,transition:ue,dirs:xe}=m;if(X=m.el=o(m.type,V,ee&&ee.is,ee),oe&8?u(X,m.children):oe&16&&U(m.children,X,null,k,A,V&&se!=="foreignObject",q,H),xe&&un(m,null,k,"created"),N(X,m,m.scopeId,q,k),ee){for(const Re in ee)Re!=="value"&&!Ts(Re)&&s(X,Re,null,ee[Re],V,m.children,k,A,qe);"value"in ee&&s(X,"value",null,ee.value),(B=ee.onVnodeBeforeMount)&&or(B,k,m)}xe&&un(m,null,k,"beforeMount");const Ne=(!A||A&&!A.pendingBranch)&&ue&&!ue.persisted;Ne&&ue.beforeEnter(X),r(X,v,D),((B=ee&&ee.onVnodeMounted)||Ne||xe)&&Ct(()=>{B&&or(B,k,m),Ne&&ue.enter(X),xe&&un(m,null,k,"mounted")},A)},N=(m,v,D,k,A)=>{if(D&&f(m,D),k)for(let V=0;V<k.length;V++)f(m,k[V]);if(A){let V=A.subTree;if(v===V){const q=A.vnode;N(m,q,q.scopeId,q.slotScopeIds,A.parent)}}},U=(m,v,D,k,A,V,q,H,X=0)=>{for(let B=X;B<m.length;B++){const se=m[B]=H?Nr(m[B]):ar(m[B]);p(null,se,v,D,k,A,V,q,H)}},G=(m,v,D,k,A,V,q)=>{const H=v.el=m.el;let{patchFlag:X,dynamicChildren:B,dirs:se}=v;X|=m.patchFlag&16;const ee=m.props||We,oe=v.props||We;let ue;D&&hn(D,!1),(ue=oe.onVnodeBeforeUpdate)&&or(ue,D,v,m),se&&un(v,m,D,"beforeUpdate"),D&&hn(D,!0);const xe=A&&v.type!=="foreignObject";if(B?re(m.dynamicChildren,B,H,D,k,xe,V):q||he(m,v,H,null,D,k,xe,V,!1),X>0){if(X&16)me(H,v,ee,oe,D,k,A);else if(X&2&&ee.class!==oe.class&&s(H,"class",null,oe.class,A),X&4&&s(H,"style",ee.style,oe.style,A),X&8){const Ne=v.dynamicProps;for(let Re=0;Re<Ne.length;Re++){const nt=Ne[Re],zt=ee[nt],Tn=oe[nt];(Tn!==zt||nt==="value")&&s(H,nt,zt,Tn,A,m.children,D,k,qe)}}X&1&&m.children!==v.children&&u(H,v.children)}else!q&&B==null&&me(H,v,ee,oe,D,k,A);((ue=oe.onVnodeUpdated)||se)&&Ct(()=>{ue&&or(ue,D,v,m),se&&un(v,m,D,"updated")},k)},re=(m,v,D,k,A,V,q)=>{for(let H=0;H<v.length;H++){const X=m[H],B=v[H],se=X.el&&(X.type===Je||!gi(X,B)||X.shapeFlag&70)?h(X.el):D;p(X,B,se,null,k,A,V,q,!0)}},me=(m,v,D,k,A,V,q)=>{if(D!==k){if(D!==We)for(const H in D)!Ts(H)&&!(H in k)&&s(m,H,D[H],null,q,v.children,A,V,qe);for(const H in k){if(Ts(H))continue;const X=k[H],B=D[H];X!==B&&H!=="value"&&s(m,H,B,X,q,v.children,A,V,qe)}"value"in k&&s(m,"value",D.value,k.value)}},ge=(m,v,D,k,A,V,q,H,X)=>{const B=v.el=m?m.el:a(""),se=v.anchor=m?m.anchor:a("");let{patchFlag:ee,dynamicChildren:oe,slotScopeIds:ue}=v;ue&&(H=H?H.concat(ue):ue),m==null?(r(B,D,k),r(se,D,k),U(v.children,D,se,A,V,q,H,X)):ee>0&&ee&64&&oe&&m.dynamicChildren?(re(m.dynamicChildren,oe,D,A,V,q,H),(v.key!=null||A&&v===A.subTree)&&nd(m,v,!0)):he(m,v,D,se,A,V,q,H,X)},ye=(m,v,D,k,A,V,q,H,X)=>{v.slotScopeIds=H,m==null?v.shapeFlag&512?A.ctx.activate(v,D,k,q,X):_e(v,D,k,A,V,q,X):ae(m,v,X)},_e=(m,v,D,k,A,V,q)=>{const H=m.component=Jp(m,k,A);if(Yh(m)&&(H.ctx.renderer=E),em(H),H.asyncDep){if(A&&A.registerDep(H,ne),!m.el){const X=H.subTree=Se(tn);y(null,X,v,D)}return}ne(H,m,v,D,A,V,q)},ae=(m,v,D)=>{const k=v.component=m.component;if(gp(m,v,D))if(k.asyncDep&&!k.asyncResolved){pe(k,v,D);return}else k.next=v,op(k.update),k.update();else v.el=m.el,k.vnode=v},ne=(m,v,D,k,A,V,q)=>{const H=()=>{if(m.isMounted){let{next:se,bu:ee,u:oe,parent:ue,vnode:xe}=m,Ne=se,Re;hn(m,!1),se?(se.el=xe.el,pe(m,se,q)):se=xe,ee&&Ds(ee),(Re=se.props&&se.props.onVnodeBeforeUpdate)&&or(Re,ue,se,xe),hn(m,!0);const nt=Ho(m),zt=m.subTree;m.subTree=nt,p(zt,nt,h(zt.el),C(zt),m,A,V),se.el=nt.el,Ne===null&&pp(m,nt.el),oe&&Ct(oe,A),(Re=se.props&&se.props.onVnodeUpdated)&&Ct(()=>or(Re,ue,se,xe),A)}else{let se;const{el:ee,props:oe}=v,{bm:ue,m:xe,parent:Ne}=m,Re=Oi(v);if(hn(m,!1),ue&&Ds(ue),!Re&&(se=oe&&oe.onVnodeBeforeMount)&&or(se,Ne,v),hn(m,!0),ee&&ce){const nt=()=>{m.subTree=Ho(m),ce(ee,m.subTree,m,A,null)};Re?v.type.__asyncLoader().then(()=>!m.isUnmounted&&nt()):nt()}else{const nt=m.subTree=Ho(m);p(null,nt,D,k,m,A,V),v.el=nt.el}if(xe&&Ct(xe,A),!Re&&(se=oe&&oe.onVnodeMounted)){const nt=v;Ct(()=>or(se,Ne,nt),A)}(v.shapeFlag&256||Ne&&Oi(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&m.a&&Ct(m.a,A),m.isMounted=!0,v=D=k=null}},X=m.effect=new nl(H,()=>ul(B),m.scope),B=m.update=()=>X.run();B.id=m.uid,hn(m,!0),B()},pe=(m,v,D)=>{v.component=m;const k=m.vnode.props;m.vnode=v,m.next=null,Up(m,v.props,k,D),Wp(m,v.children,D),ti(),vc(),ri()},he=(m,v,D,k,A,V,q,H,X=!1)=>{const B=m&&m.children,se=m?m.shapeFlag:0,ee=v.children,{patchFlag:oe,shapeFlag:ue}=v;if(oe>0){if(oe&128){Wt(B,ee,D,k,A,V,q,H,X);return}else if(oe&256){lt(B,ee,D,k,A,V,q,H,X);return}}ue&8?(se&16&&qe(B,A,V),ee!==B&&u(D,ee)):se&16?ue&16?Wt(B,ee,D,k,A,V,q,H,X):qe(B,A,V,!0):(se&8&&u(D,""),ue&16&&U(ee,D,k,A,V,q,H,X))},lt=(m,v,D,k,A,V,q,H,X)=>{m=m||jn,v=v||jn;const B=m.length,se=v.length,ee=Math.min(B,se);let oe;for(oe=0;oe<ee;oe++){const ue=v[oe]=X?Nr(v[oe]):ar(v[oe]);p(m[oe],ue,D,null,A,V,q,H,X)}B>se?qe(m,A,V,!0,!1,ee):U(v,D,k,A,V,q,H,X,ee)},Wt=(m,v,D,k,A,V,q,H,X)=>{let B=0;const se=v.length;let ee=m.length-1,oe=se-1;for(;B<=ee&&B<=oe;){const ue=m[B],xe=v[B]=X?Nr(v[B]):ar(v[B]);if(gi(ue,xe))p(ue,xe,D,null,A,V,q,H,X);else break;B++}for(;B<=ee&&B<=oe;){const ue=m[ee],xe=v[oe]=X?Nr(v[oe]):ar(v[oe]);if(gi(ue,xe))p(ue,xe,D,null,A,V,q,H,X);else break;ee--,oe--}if(B>ee){if(B<=oe){const ue=oe+1,xe=ue<se?v[ue].el:k;for(;B<=oe;)p(null,v[B]=X?Nr(v[B]):ar(v[B]),D,xe,A,V,q,H,X),B++}}else if(B>oe)for(;B<=ee;)ze(m[B],A,V,!0),B++;else{const ue=B,xe=B,Ne=new Map;for(B=xe;B<=oe;B++){const It=v[B]=X?Nr(v[B]):ar(v[B]);It.key!=null&&Ne.set(It.key,B)}let Re,nt=0;const zt=oe-xe+1;let Tn=!1,ac=0;const fi=new Array(zt);for(B=0;B<zt;B++)fi[B]=0;for(B=ue;B<=ee;B++){const It=m[B];if(nt>=zt){ze(It,A,V,!0);continue}let sr;if(It.key!=null)sr=Ne.get(It.key);else for(Re=xe;Re<=oe;Re++)if(fi[Re-xe]===0&&gi(It,v[Re])){sr=Re;break}sr===void 0?ze(It,A,V,!0):(fi[sr-xe]=B+1,sr>=ac?ac=sr:Tn=!0,p(It,v[sr],D,null,A,V,q,H,X),nt++)}const lc=Tn?zp(fi):jn;for(Re=lc.length-1,B=zt-1;B>=0;B--){const It=xe+B,sr=v[It],cc=It+1<se?v[It+1].el:k;fi[B]===0?p(null,sr,D,cc,A,V,q,H,X):Tn&&(Re<0||B!==lc[Re]?Ze(sr,D,cc,2):Re--)}}},Ze=(m,v,D,k,A=null)=>{const{el:V,type:q,transition:H,children:X,shapeFlag:B}=m;if(B&6){Ze(m.component.subTree,v,D,k);return}if(B&128){m.suspense.move(v,D,k);return}if(B&64){q.move(m,v,D,E);return}if(q===Je){r(V,v,D);for(let ee=0;ee<X.length;ee++)Ze(X[ee],v,D,k);r(m.anchor,v,D);return}if(q===Xo){T(m,v,D);return}if(k!==2&&B&1&&H)if(k===0)H.beforeEnter(V),r(V,v,D),Ct(()=>H.enter(V),A);else{const{leave:ee,delayLeave:oe,afterLeave:ue}=H,xe=()=>r(V,v,D),Ne=()=>{ee(V,()=>{xe(),ue&&ue()})};oe?oe(V,xe,Ne):Ne()}else r(V,v,D)},ze=(m,v,D,k=!1,A=!1)=>{const{type:V,props:q,ref:H,children:X,dynamicChildren:B,shapeFlag:se,patchFlag:ee,dirs:oe}=m;if(H!=null&&Sa(H,null,D,m,!0),se&256){v.ctx.deactivate(m);return}const ue=se&1&&oe,xe=!Oi(m);let Ne;if(xe&&(Ne=q&&q.onVnodeBeforeUnmount)&&or(Ne,v,m),se&6)wr(m.component,D,k);else{if(se&128){m.suspense.unmount(D,k);return}ue&&un(m,null,v,"beforeUnmount"),se&64?m.type.remove(m,v,D,A,E,k):B&&(V!==Je||ee>0&&ee&64)?qe(B,v,D,!1,!0):(V===Je&&ee&384||!A&&se&16)&&qe(X,v,D),k&&Lt(m)}(xe&&(Ne=q&&q.onVnodeUnmounted)||ue)&&Ct(()=>{Ne&&or(Ne,v,m),ue&&un(m,null,v,"unmounted")},D)},Lt=m=>{const{type:v,el:D,anchor:k,transition:A}=m;if(v===Je){Rt(D,k);return}if(v===Xo){b(m);return}const V=()=>{i(D),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(m.shapeFlag&1&&A&&!A.persisted){const{leave:q,delayLeave:H}=A,X=()=>q(D,V);H?H(m.el,V,X):X()}else V()},Rt=(m,v)=>{let D;for(;m!==v;)D=d(m),i(m),m=D;i(v)},wr=(m,v,D)=>{const{bum:k,scope:A,update:V,subTree:q,um:H}=m;k&&Ds(k),A.stop(),V&&(V.active=!1,ze(q,m,v,D)),H&&Ct(H,v),Ct(()=>{m.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},qe=(m,v,D,k=!1,A=!1,V=0)=>{for(let q=V;q<m.length;q++)ze(m[q],v,D,k,A)},C=m=>m.shapeFlag&6?C(m.component.subTree):m.shapeFlag&128?m.suspense.next():d(m.anchor||m.el),M=(m,v,D)=>{m==null?v._vnode&&ze(v._vnode,null,null,!0):p(v._vnode||null,m,v,null,null,null,D),vc(),Uh(),v._vnode=m},E={p,um:ze,m:Ze,r:Lt,mt:_e,mc:U,pc:he,pbc:re,n:C,o:n};let W,ce;return e&&([W,ce]=e(E)),{render:M,hydrate:W,createApp:jp(M,W)}}function hn({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function nd(n,e,t=!1){const r=n.children,i=e.children;if(le(r)&&le(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Nr(i[s]),a.el=o.el),t||nd(o,a)),a.type===yo&&(a.el=o.el)}}function zp(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=t[t.length-1],n[i]<c){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const $p=n=>n.__isTeleport,Je=Symbol.for("v-fgt"),yo=Symbol.for("v-txt"),tn=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),Mi=[];let Zt=null;function Q(n=!1){Mi.push(Zt=n?null:[])}function Gp(){Mi.pop(),Zt=Mi[Mi.length-1]||null}let Yi=1;function Mc(n){Yi+=n}function id(n){return n.dynamicChildren=Yi>0?Zt||jn:null,Gp(),Yi>0&&Zt&&Zt.push(n),n}function ie(n,e,t,r,i,s){return id(I(n,e,t,r,i,s,!0))}function ir(n,e,t,r,i){return id(Se(n,e,t,r,i,!0))}function Hs(n){return n?n.__v_isVNode===!0:!1}function gi(n,e){return n.type===e.type&&n.key===e.key}const bo="__vInternal",sd=({key:n})=>n??null,ks=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?at(n)||Ue(n)||fe(n)?{i:mt,r:n,k:e,f:!!t}:n:null);function I(n,e=null,t=null,r=0,i=null,s=n===Je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&sd(e),ref:e&&ks(e),scopeId:vo,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:mt};return a?(pl(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=at(t)?8:16),Yi>0&&!o&&Zt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Zt.push(l),l}const Se=qp;function qp(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===zh)&&(n=tn),Hs(n)){const a=$n(n,e,!0);return t&&pl(a,t),Yi>0&&!s&&Zt&&(a.shapeFlag&6?Zt[Zt.indexOf(n)]=a:Zt.push(a)),a.patchFlag|=-2,a}if(sm(n)&&(n=n.__vccOpts),e){e=Kp(e);let{class:a,style:l}=e;a&&!at(a)&&(e.class=Pt(a)),Ye(l)&&(Fh(l)&&!le(l)&&(l=ft({},l)),e.style=Gr(l))}const o=at(n)?1:mp(n)?128:$p(n)?64:Ye(n)?4:fe(n)?2:0;return I(n,e,t,r,i,o,s,!0)}function Kp(n){return n?Fh(n)||bo in n?ft({},n):n:null}function $n(n,e,t=!1){const{props:r,ref:i,patchFlag:s,children:o}=n,a=e?ml(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&sd(a),ref:e&&e.ref?t&&i?le(i)?i.concat(ks(e)):[i,ks(e)]:ks(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Je?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&$n(n.ssContent),ssFallback:n.ssFallback&&$n(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Mr(n=" ",e=0){return Se(yo,null,n,e)}function yn(n="",e=!1){return e?(Q(),ir(tn,null,n)):Se(tn,null,n)}function ar(n){return n==null||typeof n=="boolean"?Se(tn):le(n)?Se(Je,null,n.slice()):typeof n=="object"?Nr(n):Se(yo,null,String(n))}function Nr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:$n(n)}function pl(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(le(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),pl(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(bo in e)?e._ctx=mt:i===3&&mt&&(mt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:mt},t=32):(e=String(e),r&64?(t=16,e=[Mr(e)]):t=8);n.children=e,n.shapeFlag|=t}function ml(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Pt([e.class,r.class]));else if(i==="style")e.style=Gr([e.style,r.style]);else if(lo(i)){const s=e[i],o=r[i];o&&s!==o&&!(le(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function or(n,e,t,r=null){Jt(n,e,7,[t,r])}const Zp=Zh();let Qp=0;function Jp(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||Zp,s={uid:Qp++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new _h(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jh(r,i),emitsOptions:Hh(r,i),emit:null,emitted:null,propsDefaults:We,inheritAttrs:r.inheritAttrs,ctx:We,data:We,props:We,attrs:We,slots:We,refs:We,setupState:We,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=cp.bind(null,s),n.ce&&n.ce(s),s}let ht=null,_l,Dn,Pc="__VUE_INSTANCE_SETTERS__";(Dn=ga()[Pc])||(Dn=ga()[Pc]=[]),Dn.push(n=>ht=n),_l=n=>{Dn.length>1?Dn.forEach(e=>e(n)):Dn[0](n)};const Gn=n=>{_l(n),n.scope.on()},vn=()=>{ht&&ht.scope.off(),_l(null)};function od(n){return n.vnode.shapeFlag&4}let Xi=!1;function em(n,e=!1){Xi=e;const{props:t,children:r}=n.vnode,i=od(n);Bp(n,t,i,e),Hp(n,r);const s=i?tm(n,e):void 0;return Xi=!1,s}function tm(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=go(new Proxy(n.ctx,Pp));const{setup:r}=t;if(r){const i=n.setupContext=r.length>1?nm(n):null;Gn(n),ti();const s=Zr(r,n,0,[n.props,i]);if(ri(),vn(),dh(s)){if(s.then(vn,vn),e)return s.then(o=>{Ec(n,o,e)}).catch(o=>{po(o,n,0)});n.asyncDep=s}else Ec(n,s,e)}else ad(n,e)}function Ec(n,e,t){fe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ye(e)&&(n.setupState=Ih(e)),ad(n,t)}let Fc;function ad(n,e,t){const r=n.type;if(!n.render){if(!e&&Fc&&!r.render){const i=r.template||fl(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,c=ft(ft({isCustomElement:s,delimiters:a},o),l);r.render=Fc(i,c)}}n.render=r.render||Qt}Gn(n),ti(),Ep(n),ri(),vn()}function rm(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return At(n,"get","$attrs"),e[t]}}))}function nm(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return rm(n)},slots:n.slots,emit:n.emit,expose:e}}function xo(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Ih(go(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ki)return ki[t](n)},has(e,t){return t in e||t in ki}}))}function im(n,e=!0){return fe(n)?n.displayName||n.name:n.name||e&&n.__name}function sm(n){return fe(n)&&"__vccOpts"in n}const K=(n,e)=>np(n,e,Xi);function ld(n,e,t){const r=arguments.length;return r===2?Ye(e)&&!le(e)?Hs(e)?Se(n,null,[e]):Se(n,e):Se(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Hs(t)&&(t=[t]),Se(n,e,t))}const om=Symbol.for("v-scx"),am=()=>gr(om),lm="3.3.4",cm="http://www.w3.org/2000/svg",pn=typeof document<"u"?document:null,Ac=pn&&pn.createElement("template"),um={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e?pn.createElementNS(cm,n):pn.createElement(n,t?{is:t}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>pn.createTextNode(n),createComment:n=>pn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>pn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Ac.innerHTML=r?`<svg>${n}</svg>`:n;const a=Ac.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function hm(n,e,t){const r=n._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function dm(n,e,t){const r=n.style,i=at(t);if(t&&!i){if(e&&!at(e))for(const s in e)t[s]==null&&Ca(r,s,"");for(const s in t)Ca(r,s,t[s])}else{const s=r.display;i?e!==t&&(r.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(r.display=s)}}const Lc=/\s*!important$/;function Ca(n,e,t){if(le(t))t.forEach(r=>Ca(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=fm(n,e);Lc.test(t)?n.setProperty(Sn(r),t.replace(Lc,""),"important"):n[r]=t}}const Rc=["Webkit","Moz","ms"],zo={};function fm(n,e){const t=zo[e];if(t)return t;let r=pr(e);if(r!=="filter"&&r in n)return zo[e]=r;r=ho(r);for(let i=0;i<Rc.length;i++){const s=Rc[i]+r;if(s in n)return zo[e]=s}return e}const Ic="http://www.w3.org/1999/xlink";function gm(n,e,t,r,i){if(r&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Ic,e.slice(6,e.length)):n.setAttributeNS(Ic,e,t);else{const s=bg(e);t==null||s&&!ph(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function pm(n,e,t,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=t;const c=a==="OPTION"?n.getAttribute("value"):n.value,u=t??"";c!==u&&(n.value=u),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=ph(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function Pn(n,e,t,r){n.addEventListener(e,t,r)}function mm(n,e,t,r){n.removeEventListener(e,t,r)}function _m(n,e,t,r,i=null){const s=n._vei||(n._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=vm(e);if(r){const c=s[e]=bm(r,i);Pn(n,a,c,l)}else o&&(mm(n,a,o,l),s[e]=void 0)}}const jc=/(?:Once|Passive|Capture)$/;function vm(n){let e;if(jc.test(n)){e={};let r;for(;r=n.match(jc);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Sn(n.slice(2)),e]}let $o=0;const wm=Promise.resolve(),ym=()=>$o||(wm.then(()=>$o=0),$o=Date.now());function bm(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Jt(xm(r,t.value),e,5,[r])};return t.value=n,t.attached=ym(),t}function xm(n,e){if(le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Vc=/^on[a-z]/,Sm=(n,e,t,r,i=!1,s,o,a,l)=>{e==="class"?hm(n,r,i):e==="style"?dm(n,t,r):lo(e)?Qa(e)||_m(n,e,t,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Cm(n,e,r,i))?pm(n,e,r,s,o,a,l):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),gm(n,e,r,i))};function Cm(n,e,t,r){return r?!!(e==="innerHTML"||e==="textContent"||e in n&&Vc.test(e)&&fe(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Vc.test(e)&&at(t)?!1:e in n}const Bc=n=>{const e=n.props["onUpdate:modelValue"]||!1;return le(e)?t=>Ds(e,t):e};function Tm(n){n.target.composing=!0}function Uc(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Dm={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n._assign=Bc(i);const s=r||i.props&&i.props.type==="number";Pn(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=fa(a)),n._assign(a)}),t&&Pn(n,"change",()=>{n.value=n.value.trim()}),e||(Pn(n,"compositionstart",Tm),Pn(n,"compositionend",Uc),Pn(n,"change",Uc))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:r,number:i}},s){if(n._assign=Bc(s),n.composing||document.activeElement===n&&n.type!=="range"&&(t||r&&n.value.trim()===e||(i||n.type==="number")&&fa(n.value)===e))return;const o=e??"";n.value!==o&&(n.value=o)}},Om=["ctrl","shift","alt","meta"],km={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Om.some(t=>n[`${t}Key`]&&!e.includes(t))},Yr=(n,e)=>(t,...r)=>{for(let i=0;i<e.length;i++){const s=km[e[i]];if(s&&s(t,e))return}return n(t,...r)},Mm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pm=(n,e)=>t=>{if(!("key"in t))return;const r=Sn(t.key);if(e.some(i=>i===r||Mm[i]===r))return n(t)},En={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):pi(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),pi(n,!0),r.enter(n)):r.leave(n,()=>{pi(n,!1)}):pi(n,e))},beforeUnmount(n,{value:e}){pi(n,e)}};function pi(n,e){n.style.display=e?n._vod:"none"}const Em=ft({patchProp:Sm},um);let Nc;function Fm(){return Nc||(Nc=Yp(Em))}const Am=(...n)=>{const e=Fm().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Lm(r);if(!i)return;const s=e._component;!fe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Lm(n){return at(n)?document.querySelector(n):n}const Rm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},Im=I("path",{d:"M280.37 148.26 96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47 488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},null,-1),jm=[Im];function Vm(n,e){return Q(),ie("svg",Rm,jm)}const Bm={render:Vm},Um={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Nm=I("path",{d:"M503.691 189.836 327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"},null,-1),Hm=[Nm];function Wm(n,e){return Q(),ie("svg",Um,Hm)}const Ym={render:Wm},Xm={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},zm=I("path",{d:"M34.52 239.03 228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},null,-1),$m=[zm];function Gm(n,e){return Q(),ie("svg",Xm,$m)}const qm={render:Gm},Km={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},Zm=I("path",{d:"M285.476 272.971 91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},null,-1),Qm=[Zm];function Jm(n,e){return Q(),ie("svg",Km,Qm)}const e0={render:Jm},t0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r0=I("path",{d:"M34.5 239 228.9 44.7c9.4-9.4 24.6-9.4 33.9 0l22.7 22.7c9.4 9.4 9.4 24.5 0 33.9L131.5 256l154 154.7c9.3 9.4 9.3 24.5 0 33.9l-22.7 22.7c-9.4 9.4-24.6 9.4-33.9 0L34.5 273c-9.3-9.4-9.3-24.6 0-34zm192 34 194.3 194.3c9.4 9.4 24.6 9.4 33.9 0l22.7-22.7c9.4-9.4 9.4-24.5 0-33.9L323.5 256l154-154.7c9.3-9.4 9.3-24.5 0-33.9l-22.7-22.7c-9.4-9.4-24.6-9.4-33.9 0L226.5 239c-9.3 9.4-9.3 24.6 0 34z"},null,-1),n0=[r0];function i0(n,e){return Q(),ie("svg",t0,n0)}const s0={render:i0},o0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a0=I("path",{d:"M477.5 273 283.1 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.7c-9.4-9.4-9.4-24.5 0-33.9l154-154.7-154-154.7c-9.3-9.4-9.3-24.5 0-33.9l22.7-22.7c9.4-9.4 24.6-9.4 33.9 0L477.5 239c9.3 9.4 9.3 24.6 0 34zm-192-34L91.1 44.7c-9.4-9.4-24.6-9.4-33.9 0L34.5 67.4c-9.4 9.4-9.4 24.5 0 33.9l154 154.7-154 154.7c-9.3 9.4-9.3 24.5 0 33.9l22.7 22.7c9.4 9.4 24.6 9.4 33.9 0L285.5 273c9.3-9.4 9.3-24.6 0-34z"},null,-1),l0=[a0];function c0(n,e){return Q(),ie("svg",o0,l0)}const u0={render:c0},h0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},d0=I("path",{d:"m31.7 239 136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"},null,-1),f0=[d0];function g0(n,e){return Q(),ie("svg",h0,f0)}const p0={render:g0},m0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},_0=I("path",{d:"m224.3 273-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"},null,-1),v0=[_0];function w0(n,e){return Q(),ie("svg",m0,v0)}const y0={render:w0},b0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},x0=I("path",{d:"M119.5 326.9 3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z"},null,-1),S0=[x0];function C0(n,e){return Q(),ie("svg",b0,S0)}const Hc={render:C0},T0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},D0=I("path",{d:"m136.5 185.1 116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z"},null,-1),O0=[D0];function k0(n,e){return Q(),ie("svg",T0,O0)}const Wc={render:k0},M0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},P0=I("path",{d:"m223.7 239 136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34 136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"},null,-1),E0=[P0];function F0(n,e){return Q(),ie("svg",M0,E0)}const A0={render:F0},L0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},R0=I("path",{d:"m224.3 273-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z"},null,-1),I0=[R0];function j0(n,e){return Q(),ie("svg",L0,I0)}const V0={render:j0},B0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},U0=I("path",{d:"M0 424V88c0-13.3 10.7-24 24-24h24c13.3 0 24 10.7 24 24v336c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24zm254.5-269.6 65.6 65.6H120c-13.3 0-24 10.7-24 24v24c0 13.3 10.7 24 24 24h200.1l-65.6 65.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L441 273c9.4-9.4 9.4-24.6 0-33.9L305.5 103.5c-9.4-9.4-24.6-9.4-33.9 0l-17 17c-9.4 9.4-9.4 24.6-.1 33.9z"},null,-1),N0=[U0];function H0(n,e){return Q(),ie("svg",B0,N0)}const W0={render:H0},Y0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},X0=I("path",{d:"M448 88v336c0 13.3-10.7 24-24 24h-24c-13.3 0-24-10.7-24-24V88c0-13.3 10.7-24 24-24h24c13.3 0 24 10.7 24 24zM193.5 357.6 127.9 292H328c13.3 0 24-10.7 24-24v-24c0-13.3-10.7-24-24-24H127.9l65.6-65.6c9.4-9.4 9.4-24.6 0-33.9l-17-17c-9.4-9.4-24.6-9.4-33.9 0L7 239c-9.4 9.4-9.4 24.6 0 33.9l135.5 135.5c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.3 9.4-24.5.1-33.8z"},null,-1),z0=[X0];function $0(n,e){return Q(),ie("svg",Y0,z0)}const G0={render:$0},q0={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},K0=I("path",{d:"m257.5 445.1-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},null,-1),Z0=[K0];function Q0(n,e){return Q(),ie("svg",q0,Z0)}const J0={render:Q0},e_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},t_=I("path",{d:"m190.5 66.9 22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},null,-1),r_=[t_];function n_(n,e){return Q(),ie("svg",e_,r_)}const i_={render:n_},s_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},o_=I("path",{d:"M288 128a80 80 0 1 0 80 80 80.12 80.12 0 0 0-80-80zm0 128a48 48 0 1 1 48-48 48.05 48.05 0 0 1-48 48zM104 416h368a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H104a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm470.43-87.94a32.12 32.12 0 0 0-3.8-8.06L512 256V80a48 48 0 0 0-48-48H112a48 48 0 0 0-48 48v176L5.38 320A33.45 33.45 0 0 0 0 337.75V448a32 32 0 0 0 32 32h512a32 32 0 0 0 32-32V337.75a31.81 31.81 0 0 0-1.57-9.69zM96 268.44V80a16 16 0 0 1 16-16h352a16 16 0 0 1 16 16v188.44L527.23 320H48.77zM544 448H32v-96h512zM432 104h-32a8 8 0 0 0-8 8v32a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8v-32a8 8 0 0 0-8-8z"},null,-1),a_=[o_];function l_(n,e){return Q(),ie("svg",s_,a_)}const c_={render:l_},u_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},h_=I("path",{d:"M112 368h96c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-96c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm0 394c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V160h352v298z"},null,-1),d_=[h_];function f_(n,e){return Q(),ie("svg",u_,d_)}const g_={render:f_},p_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},m_=I("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-148.9 88.3-81.2-59c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h14c6.6 0 12 5.4 12 12v146.3l70.5 51.3c5.4 3.9 6.5 11.4 2.6 16.8l-8.2 11.3c-3.9 5.3-11.4 6.5-16.8 2.6z"},null,-1),__=[m_];function v_(n,e){return Q(),ie("svg",p_,__)}const w_={render:v_},y_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},b_=I("path",{d:"M376 232H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h368c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"},null,-1),x_=[b_];function S_(n,e){return Q(),ie("svg",y_,x_)}const C_={render:S_},T_={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"},D_=I("path",{d:"M376 232H216V72c0-4.42-3.58-8-8-8h-32c-4.42 0-8 3.58-8 8v160H8c-4.42 0-8 3.58-8 8v32c0 4.42 3.58 8 8 8h160v160c0 4.42 3.58 8 8 8h32c4.42 0 8-3.58 8-8V280h160c4.42 0 8-3.58 8-8v-32c0-4.42-3.58-8-8-8z"},null,-1),O_=[D_];function k_(n,e){return Q(),ie("svg",T_,O_)}const M_={render:k_},P_={xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd","image-rendering":"optimizeQuality","shape-rendering":"geometricPrecision","text-rendering":"geometricPrecision",viewBox:"0 0 512 406.453"},E_=I("path",{"fill-rule":"nonzero",d:"M414.238 63.347h20.374c21.303 0 40.662 8.705 54.67 22.714C503.295 100.073 512 119.442 512 140.735v188.329c0 21.296-8.709 40.655-22.721 54.667s-33.375 22.722-54.667 22.722H77.388c-21.292 0-40.662-8.706-54.674-22.718C8.705 369.727 0 350.368 0 329.064V140.735c0-21.307 8.698-40.666 22.71-54.678s33.368-22.71 54.678-22.71h138.653V14.426C216.041 6.459 222.5 0 230.467 0c3.875 0 7.394 1.527 9.985 4.013l99.797 78.827c6.223 4.914 7.28 13.947 2.366 20.17a14.38 14.38 0 0 1-2.61 2.559l-100.636 79.489c-6.223 4.914-15.255 3.856-20.169-2.366a14.297 14.297 0 0 1-3.09-8.902h-.069v-52.737H77.388c-5.386 0-10.304 2.224-13.881 5.801s-5.801 8.498-5.801 13.881v188.329c0 5.38 2.228 10.298 5.805 13.874 3.58 3.58 8.501 5.808 13.877 5.808h357.224c5.368 0 10.29-2.231 13.87-5.811 3.58-3.581 5.812-8.499 5.812-13.871V140.735c0-5.376-2.228-10.297-5.809-13.878-3.576-3.576-8.494-5.804-13.873-5.804h-20.374V63.347z"},null,-1),F_=[E_];function A_(n,e){return Q(),ie("svg",P_,F_)}const L_={render:A_},Yc=(()=>({...{"ico-home":Bm,"ico-share":Ym,"ico-chevron-left":qm,"ico-chevron-right":e0,"ico-chevron-double-left":s0,"ico-chevron-double-right":u0,"ico-angle-left":p0,"ico-angle-right":y0,"ico-angle-down":Hc,"ico-angle-up":Wc,"ico-arrow-left":J0,"ico-arrow-right":i_,"ico-arrow-down":Hc,"ico-arrow-up":Wc,"ico-angle-double-left":A0,"ico-angle-double-right":V0,"ico-arrow-from-left":W0,"ico-arrow-from-right":G0,"ico-minus":C_,"ico-plus":M_,"ico-camera-polaroid":c_,"ico-calendar-day":g_,"ico-clock":w_,"ico-repeat-square-icon":L_},...{}}))(),R_=gt({name:"Icons",components:Yc,props:{icon:{type:String,required:!0},size:String},data(){return{icons:Yc}},computed:{iconSize(){switch((this.size+"").toLowerCase()){case"small":case"is-small":return"is-small";case"medium":case"is-medium":return"is-medium";case"large":case"is-large":return"is-large";default:return""}},iconName(){let n=this.icon;return typeof this.icon=="string"||(n=this.icon.join("-")),n=n.replaceAll("icon-",""),n="ico-"+n,n},hasIcon(){let n=!!this.icons[this.iconName];return n||console.warn("missing icon",this.iconName),n}}});const vl=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t};function I_(n,e,t,r,i,s){return Q(),ie("span",{class:Pt(["icon",n.iconSize])},[n.hasIcon?(Q(),ir($h(n.iconName),{key:0})):yn("",!0)],2)}const j_=vl(R_,[["render",I_]]);var V_=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let cd;const So=n=>cd=n,ud=Symbol();function Ta(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Pi;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Pi||(Pi={}));function B_(){const n=vh(!0),e=n.run(()=>Me({}));let t=[],r=[];const i=go({install(s){So(i),i._a=s,s.provide(ud,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return!this._a&&!V_?r.push(s):t.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const hd=()=>{};function Xc(n,e,t,r=hd){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&wh()&&Sg(i),i}function On(n,...e){n.slice().forEach(t=>{t(...e)})}const U_=n=>n();function Da(n,e){n instanceof Map&&e instanceof Map&&e.forEach((t,r)=>n.set(r,t)),n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Ta(i)&&Ta(r)&&n.hasOwnProperty(t)&&!Ue(r)&&!Dr(r)?n[t]=Da(i,r):n[t]=r}return n}const N_=Symbol();function H_(n){return!Ta(n)||!n.hasOwnProperty(N_)}const{assign:Ur}=Object;function W_(n){return!!(Ue(n)&&n.effect)}function Y_(n,e,t,r){const{state:i,actions:s,getters:o}=e,a=t.state.value[n];let l;function c(){a||(t.state.value[n]=i?i():{});const u=xi(t.state.value[n]);return Ur(u,s,Object.keys(o||{}).reduce((h,d)=>(h[d]=go(K(()=>{So(t);const f=t._s.get(n);return o[d].call(f,f)})),h),{}))}return l=dd(n,c,e,t,r,!0),l}function dd(n,e,t={},r,i,s){let o;const a=Ur({actions:{}},t),l={deep:!0};let c,u,h=[],d=[],f;const g=r.state.value[n];!s&&!g&&(r.state.value[n]={}),Me({});let p;function _(U){let G;c=u=!1,typeof U=="function"?(U(r.state.value[n]),G={type:Pi.patchFunction,storeId:n,events:f}):(Da(r.state.value[n],U),G={type:Pi.patchObject,payload:U,storeId:n,events:f});const re=p=Symbol();mo().then(()=>{p===re&&(c=!0)}),u=!0,On(h,G,r.state.value[n])}const y=s?function(){const{state:G}=t,re=G?G():{};this.$patch(me=>{Ur(me,re)})}:hd;function w(){o.stop(),h=[],d=[],r._s.delete(n)}function T(U,G){return function(){So(r);const re=Array.from(arguments),me=[],ge=[];function ye(ne){me.push(ne)}function _e(ne){ge.push(ne)}On(d,{args:re,name:U,store:P,after:ye,onError:_e});let ae;try{ae=G.apply(this&&this.$id===n?this:P,re)}catch(ne){throw On(ge,ne),ne}return ae instanceof Promise?ae.then(ne=>(On(me,ne),ne)).catch(ne=>(On(ge,ne),Promise.reject(ne))):(On(me,ae),ae)}}const b={_p:r,$id:n,$onAction:Xc.bind(null,d),$patch:_,$reset:y,$subscribe(U,G={}){const re=Xc(h,U,G.detached,()=>me()),me=o.run(()=>fr(()=>r.state.value[n],ge=>{(G.flush==="sync"?u:c)&&U({storeId:n,type:Pi.direct,events:f},ge)},Ur({},l,G)));return re},$dispose:w},P=rs(b);r._s.set(n,P);const R=r._a&&r._a.runWithContext||U_,N=r._e.run(()=>(o=vh(),R(()=>o.run(e))));for(const U in N){const G=N[U];if(Ue(G)&&!W_(G)||Dr(G))s||(g&&H_(G)&&(Ue(G)?G.value=g[U]:Da(G,g[U])),r.state.value[n][U]=G);else if(typeof G=="function"){const re=T(U,G);N[U]=re,a.actions[U]=G}}return Ur(P,N),Ur(Oe(P),N),Object.defineProperty(P,"$state",{get:()=>r.state.value[n],set:U=>{_(G=>{Ur(G,U)})}}),r._p.forEach(U=>{Ur(P,o.run(()=>U({store:P,app:r._a,pinia:r,options:a})))}),g&&s&&t.hydrate&&t.hydrate(P.$state,g),c=!0,u=!0,P}function X_(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function o(a,l){const c=Vp();return a=a||(c?gr(ud,null):null),a&&So(a),a=cd,a._s.has(r)||(s?dd(r,e,i,a):Y_(r,i,a)),a._s.get(r)}return o.$id=r,o}function wl(n){{n=Oe(n);const e={};for(const t in n){const r=n[t];(Ue(r)||Dr(r))&&(e[t]=Kr(n,t))}return e}}const F=n=>{if(!n)throw new Error("Assertion failed");return n},ct=n=>{throw new Error(n)},J={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},L={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},z_=function(n){switch(n){case J.INT32:case J.INT64:case J.UINT32:case J.UINT64:case J.SINT32:case J.SINT64:case J.BOOL:case J.ENUM:case J.VHASH64:return L.VARINT;case J.DOUBLE:case J.FIXED64:case J.SFIXED64:case J.FHASH64:return L.FIXED64;case J.STRING:case J.MESSAGE:case J.BYTES:return L.DELIMITED;case J.FLOAT:case J.FIXED32:case J.SFIXED32:return L.FIXED32;case J.INVALID:case J.GROUP:default:return L.INVALID}},gs=-1,$_=11754943508222875e-54,Oa=34028234663852886e22,G_=22250738585072014e-324,ka=17976931348623157e292,q_=1048576,K_=8388608,ut=2147483648,Dt=4294967296,fd=4503599627370496,Tt=9223372036854776e3,Ws=18446744073709552e3,Z_=new TextDecoder("utf8");function gd(n){const e=n instanceof Uint8Array?n:new Uint8Array(n);return Z_.decode(e)}const Q_=new TextEncoder;function pd(n){return Q_.encode(n)}function md(n){return n instanceof Uint8Array?n:typeof n=="string"?pd(n):new Uint8Array(n)}function _d(n,e,t){const r=-(n&1);return n=(n>>>1|e<<31)^r,e=e>>>1^r,t(n,e)}function Ma(n,e,t){const r=e>>31;return e=(e<<1|n>>>31)^r,n=n<<1^r,t(n,e)}const J_=48;function Pa(n){F(n.length>0);let e=!1;n[0]==="-"&&(e=!0,n=n.slice(1));const t=[0,0,0,0,0,0,0,0];function r(s,o){for(let a=0;a<8&&(s!==1||o>0);a++){const l=s*t[a]+o;t[a]=l&255,o=l>>>8}}function i(){for(let s=0;s<8;s++)t[s]=~t[s]&255}for(let s=0;s<n.length;s++)r(10,n.charCodeAt(s)-J_);return e&&(i(),r(1,1)),gd(t)}let je=0,Ve=0;const Go=function(n){const e=n<0;n=Math.abs(n);let t=n>>>0,r=Math.floor((n-t)/Dt);r=r>>>0,e&&(r=~r>>>0,t=~t>>>0,t+=1,t>4294967295&&(t=0,r++,r>4294967295&&(r=0))),je=t,Ve=r},vd=function(n){const e=n>>>0,t=Math.floor((n-e)/Dt)>>>0;je=e,Ve=t},ev=function(n){const e=n<0;n=Math.abs(n)*2,vd(n);let t=je,r=Ve;e&&(t==0?r==0?(t=4294967295,r=4294967295):(r--,t=4294967295):t--),je=t,Ve=r},ps=function(n){const e=n.charCodeAt(0),t=n.charCodeAt(1),r=n.charCodeAt(2),i=n.charCodeAt(3),s=n.charCodeAt(4),o=n.charCodeAt(5),a=n.charCodeAt(6),l=n.charCodeAt(7);je=e+(t<<8)+(r<<16)+(i<<24)>>>0,Ve=s+(o<<8)+(a<<16)+(l<<24)>>>0},tv=function(n){const e=n<0?1:0;n=e?-n:n;let t,r;if(n===0){1/n>0?(Ve=0,je=0):(Ve=0,je=2147483648);return}if(isNaN(n)){Ve=0,je=2147483647;return}if(n>Oa){Ve=0,je=(e<<31|2139095040)>>>0;return}if(n<$_){r=Math.round(n/Math.pow(2,-149)),Ve=0,je=(e<<31|r)>>>0;return}t=Math.floor(Math.log(n)/Math.LN2),r=n*Math.pow(2,-t),r=Math.round(r*K_),r>=16777216&&++t,r=r&8388607,Ve=0,je=(e<<31|t+127<<23|r)>>>0},rv=function(n){const e=n<0?1:0;if(n=e?-n:n,n===0){1/n>0?(Ve=0,je=0):(Ve=2147483648,je=0);return}if(isNaN(n)){Ve=2147483647,je=4294967295;return}if(n>ka){Ve=(e<<31|2146435072)>>>0,je=0;return}if(n<G_){const c=n/Math.pow(2,-1074),u=c/Dt;Ve=(e<<31|u)>>>0,je=c>>>0;return}const t=1023,r=-1022;let i=n,s=0;if(i>=2)for(;i>=2&&s<t;)s++,i=i/2;else for(;i<1&&s>r;)i=i*2,s--;const o=n*Math.pow(2,-s),a=o*q_&1048575,l=o*fd>>>0;Ve=(e<<31|s+1023<<20|a)>>>0,je=l},Ys=function(n,e){return e*Dt+(n>>>0)},Ea=function(n,e){const t=e&2147483648;t&&(n=~n+1>>>0,e=~e>>>0,n==0&&(e=e+1>>>0));const r=Ys(n,e);return t?-r:r},nv=function(n,e){return _d(n,e,Ea)},zc=function(n,e){const t=n>>>0&255,r=n>>>8&255,i=n>>>16&255,s=n>>>24&255,o=e>>>0&255,a=e>>>8&255,l=e>>>16&255,c=e>>>24&255;return String.fromCharCode(t,r,i,s,o,a,l,c)};function iv(n){const e=(n>>31)*2+1,t=n>>>23&255,r=n&8388607;return t==255?r?NaN:e*(1/0):t==0?e*Math.pow(2,-149)*r:e*Math.pow(2,t-150)*(r+Math.pow(2,23))}const sv=function(n,e){const t=(e>>31)*2+1,r=e>>>20&2047,i=Dt*(e&1048575)+n;return r==2047?i?NaN:t*(1/0):r==0?t*Math.pow(2,-1074)*i:t*Math.pow(2,r-1075)*(i+fd)},Fa=function(n,e){if(e<=2097151)return Ys(n,e).toString();const t=n&16777215,r=(n>>>24|e<<8)>>>0&16777215,i=e>>16&65535;let s=t+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const l=1e7;s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l);function c(u,h){const d=u?String(u):"";return h?"0000000".slice(d.length)+d:d}return c(a,0)+c(o,a)+c(s,1)},qo=function(n,e){const t=e&2147483648;if(t){n=~n+1>>>0;const i=n==0?1:0;e=~e+i>>>0}const r=Fa(n,e);return t?"-"+r:r};class xr{static alloc(e,t,r){const i=xr.instanceCache_.pop();return i?(e&&i.setBlock(e,t,r),i):new xr(e,t,r)}constructor(e,t,r){this.bytes_=void 0,this.start_=0,this.end_=0,this.cursor_=0,this.error_=!1,e&&this.setBlock(e,t,r)}free(){this.clear(),xr.instanceCache_.length<100&&xr.instanceCache_.push(this)}clone(){return xr.alloc(this.bytes_,this.start_,this.end_-this.start_)}clear(){this.bytes_=void 0,this.start_=0,this.end_=0,this.cursor_=0,this.error_=!1}getBuffer(){return this.bytes_}setBlock(e,t,r){this.bytes_=md(e),this.start_=t??0,this.end_=r!==void 0?this.start_+r:this.bytes_.length,this.cursor_=this.start_}getEnd(){return this.end_}setEnd(e){this.end_=e}reset(){this.cursor_=this.start_}getCursor(){return this.cursor_}setCursor(e){this.cursor_=e}advance(e){this.cursor_+=e,F(this.cursor_<=this.end_)}atEnd(){return this.cursor_==this.end_}pastEnd(){return this.cursor_>this.end_}getError(){return this.error_||this.cursor_<0||this.cursor_>this.end_}readSplitVarint64(e){let t=128,r=0,i=0;for(let s=0;s<4&&t>=128;s++)t=this.bytes_[this.cursor_++],r|=(t&127)<<s*7;if(t>=128&&(t=this.bytes_[this.cursor_++],r|=(t&127)<<28,i|=(t&127)>>4),t>=128)for(let s=0;s<5&&t>=128;s++)t=this.bytes_[this.cursor_++],i|=(t&127)<<s*7+3;if(t<128)return e(r>>>0,i>>>0);ct("Failed to read varint, encoding is invalid."),this.error_=!0}readSplitFixed64(e){const t=this.bytes_,r=this.cursor_;this.cursor_+=8;let i=0,s=0;for(let o=r+7;o>=r;o--)i=i<<8|t[o],s=s<<8|t[o+4];return e(i,s)}skipVarint(){for(;this.bytes_[this.cursor_]&128;)this.cursor_++;this.cursor_++}unskipVarint(e){for(;e>128;)this.cursor_--,e=e>>>7;this.cursor_--}readUnsignedVarint32(){let e;const t=this.bytes_;e=t[this.cursor_+0];let r=e&127;return e<128?(this.cursor_+=1,F(this.cursor_<=this.end_),r):(e=t[this.cursor_+1],r|=(e&127)<<7,e<128?(this.cursor_+=2,F(this.cursor_<=this.end_),r):(e=t[this.cursor_+2],r|=(e&127)<<14,e<128?(this.cursor_+=3,F(this.cursor_<=this.end_),r):(e=t[this.cursor_+3],r|=(e&127)<<21,e<128?(this.cursor_+=4,F(this.cursor_<=this.end_),r):(e=t[this.cursor_+4],r|=(e&15)<<28,e<128?(this.cursor_+=5,F(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,t[this.cursor_++]>=128&&t[this.cursor_++]>=128&&t[this.cursor_++]>=128&&t[this.cursor_++]>=128&&t[this.cursor_++]>=128&&F(!1),F(this.cursor_<=this.end_),r)))))}readSignedVarint32(){return this.readUnsignedVarint32()}readUnsignedVarint32String(){return this.readUnsignedVarint32().toString()}readSignedVarint32String(){return this.readSignedVarint32().toString()}readZigzagVarint32(){const e=this.readUnsignedVarint32();return e>>>1^-(e&1)}readUnsignedVarint64(){return this.readSplitVarint64(Ys)}readUnsignedVarint64String(){return this.readSplitVarint64(Fa)}readSignedVarint64(){return this.readSplitVarint64(Ea)}readSignedVarint64String(){return this.readSplitVarint64(qo)}readZigzagVarint64(){return this.readSplitVarint64(nv)}readSplitZigzagVarint64(e){return this.readSplitVarint64(function(t,r){return _d(t,r,e)})}readZigzagVarintHash64(){return this.readSplitZigzagVarint64(zc)}readZigzagVarint64String(){return this.readSplitZigzagVarint64(qo)}readUint8(){const e=this.bytes_[this.cursor_+0];return this.cursor_+=1,F(this.cursor_<=this.end_),e}readUint16(){const e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,F(this.cursor_<=this.end_),e<<0|t<<8}readUint32(){const e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],i=this.bytes_[this.cursor_+3];return this.cursor_+=4,F(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|i<<24)>>>0}readUint64(){const e=this.readUint32(),t=this.readUint32();return Ys(e,t)}readUint64String(){const e=this.readUint32(),t=this.readUint32();return Fa(e,t)}readInt8(){const e=this.bytes_[this.cursor_+0];return this.cursor_+=1,F(this.cursor_<=this.end_),e<<24>>24}readInt16(){const e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,F(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16}readInt32(){const e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],i=this.bytes_[this.cursor_+3];return this.cursor_+=4,F(this.cursor_<=this.end_),e<<0|t<<8|r<<16|i<<24}readInt64(){const e=this.readUint32(),t=this.readUint32();return Ea(e,t)}readInt64String(){const e=this.readUint32(),t=this.readUint32();return qo(e,t)}readFloat(){const e=this.readUint32();return iv(e)}readDouble(){const e=this.readUint32(),t=this.readUint32();return sv(e,t)}readBool(){return!!this.bytes_[this.cursor_++]}readEnum(){return this.readSignedVarint32()}readString(e){return gd(this.readBytes(e))}readStringWithLength(){const e=this.readUnsignedVarint32();return this.readString(e)}readBytes(e){if(e<0||this.cursor_+e>this.bytes_.length)return this.error_=!0,ct("Invalid byte length!"),new Uint8Array(0);const t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,F(this.cursor_<=this.end_),t}readVarintHash64(){return this.readSplitVarint64(zc)}readFixedHash64(){const e=this.bytes_,t=this.cursor_,r=e[t+0],i=e[t+1],s=e[t+2],o=e[t+3],a=e[t+4],l=e[t+5],c=e[t+6],u=e[t+7];return this.cursor_+=8,String.fromCharCode(r,i,s,o,a,l,c,u)}}xr.instanceCache_=[];class wt{static alloc(e,t,r){const i=wt.instanceCache_.pop();return i?(e&&i.decoder_.setBlock(e,t,r),i):new wt(e,t,r)}constructor(e=void 0,t=void 0,r=void 0){this.decoder_=xr.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=gs,this.nextWireType_=L.INVALID,this.error_=!1,this.readCallbacks_={}}free(){this.decoder_.clear(),this.nextField_=gs,this.nextWireType_=L.INVALID,this.error_=!1,this.readCallbacks_={},wt.instanceCache_.length<100&&wt.instanceCache_.push(this)}getFieldCursor(){return this.fieldCursor_}getCursor(){return this.decoder_.getCursor()}getBuffer(){return this.decoder_.getBuffer()}getFieldNumber(){return this.nextField_}getWireType(){return this.nextWireType_}isDelimited(){return this.nextWireType_==L.DELIMITED}isEndGroup(){return this.nextWireType_==L.END_GROUP}getError(){return this.error_||this.decoder_.getError()}setBlock(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=gs,this.nextWireType_=L.INVALID}reset(){this.decoder_.reset(),this.nextField_=gs,this.nextWireType_=L.INVALID}advance(e){this.decoder_.advance(e)}nextField(){if(this.decoder_.atEnd())return!1;if(this.getError())return ct("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();const e=this.decoder_.readUnsignedVarint32(),t=e>>>3,r=e&7;return r!=L.VARINT&&r!=L.FIXED32&&r!=L.FIXED64&&r!=L.DELIMITED&&r!=L.START_GROUP&&r!=L.END_GROUP?(ct(`Invalid wire type: ${r} (at position ${this.fieldCursor_})`),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=r,!0)}unskipHeader(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)}skipMatchingFields(){const e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()}skipVarintField(){if(this.nextWireType_!=L.VARINT){ct("Invalid wire type for skipVarintField"),this.skipField();return}this.decoder_.skipVarint()}skipDelimitedField(){if(this.nextWireType_!=L.DELIMITED){ct("Invalid wire type for skipDelimitedField"),this.skipField();return}const e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}skipFixed32Field(){if(this.nextWireType_!=L.FIXED32){ct("Invalid wire type for skipFixed32Field"),this.skipField();return}this.decoder_.advance(4)}skipFixed64Field(){if(this.nextWireType_!=L.FIXED64){ct("Invalid wire type for skipFixed64Field"),this.skipField();return}this.decoder_.advance(8)}skipGroup(){const e=this.nextField_;for(;;){if(!this.nextField()){ct("Unmatched start-group tag: stream EOF"),this.error_=!0;return}if(this.nextWireType_==L.END_GROUP){if(this.nextField_!=e){ct("Unmatched end-group tag"),this.error_=!0;return}return}this.skipField()}}skipField(){switch(this.nextWireType_){case L.VARINT:this.skipVarintField();break;case L.FIXED64:this.skipFixed64Field();break;case L.DELIMITED:this.skipDelimitedField();break;case L.FIXED32:this.skipFixed32Field();break;case L.START_GROUP:this.skipGroup();break;default:ct("Invalid wire encoding for field.")}}registerReadCallback(e,t){F(!this.readCallbacks_[e]),this.readCallbacks_[e]=t}runReadCallback(e){const t=this.readCallbacks_[e];return F(!!t),t(this)}readAny(e){switch(this.nextWireType_=z_(e),e){case J.DOUBLE:return this.readDouble();case J.FLOAT:return this.readFloat();case J.INT64:return this.readInt64();case J.UINT64:return this.readUint64();case J.INT32:return this.readInt32();case J.FIXED64:return this.readFixed64();case J.FIXED32:return this.readFixed32();case J.BOOL:return this.readBool();case J.STRING:return this.readString();case J.GROUP:ct("Group field type not supported in readAny()");break;case J.MESSAGE:ct("Message field type not supported in readAny()");break;case J.BYTES:return this.readBytes();case J.UINT32:return this.readUint32();case J.ENUM:return this.readEnum();case J.SFIXED32:return this.readSfixed32();case J.SFIXED64:return this.readSfixed64();case J.SINT32:return this.readSint32();case J.SINT64:return this.readSint64();case J.FHASH64:return this.readFixedHash64();case J.VHASH64:return this.readVarintHash64();default:ct("Invalid field type in readAny()")}return 0}readMessage(e,t){F(this.nextWireType_==L.DELIMITED);const r=this.decoder_.getEnd(),i=this.decoder_.readUnsignedVarint32(),s=this.decoder_.getCursor()+i;this.decoder_.setEnd(s),t(e,this),this.decoder_.setCursor(s),this.decoder_.setEnd(r)}readGroup(e,t,r){F(this.nextWireType_==L.START_GROUP),F(this.nextField_==e),r(t,this),!this.error_&&this.nextWireType_!=L.END_GROUP&&(ct("Group submessage did not end with an END_GROUP tag"),this.error_=!0)}getFieldDecoder(){F(this.nextWireType_==L.DELIMITED);const e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e,i=xr.alloc(this.decoder_.getBuffer(),t,e);return this.decoder_.setCursor(r),i}readInt32(){return F(this.nextWireType_==L.VARINT),this.decoder_.readSignedVarint32()}readInt32String(){return F(this.nextWireType_==L.VARINT),this.decoder_.readSignedVarint32String()}readInt64(){return F(this.nextWireType_==L.VARINT),this.decoder_.readSignedVarint64()}readInt64String(){return F(this.nextWireType_==L.VARINT),this.decoder_.readSignedVarint64String()}readUint32(){return F(this.nextWireType_==L.VARINT),this.decoder_.readUnsignedVarint32()}readUint32String(){return F(this.nextWireType_==L.VARINT),this.decoder_.readUnsignedVarint32String()}readUint64(){return F(this.nextWireType_==L.VARINT),this.decoder_.readUnsignedVarint64()}readUint64String(){return F(this.nextWireType_==L.VARINT),this.decoder_.readUnsignedVarint64String()}readSint32(){return F(this.nextWireType_==L.VARINT),this.decoder_.readZigzagVarint32()}readSint64(){return F(this.nextWireType_==L.VARINT),this.decoder_.readZigzagVarint64()}readSint64String(){return F(this.nextWireType_==L.VARINT),this.decoder_.readZigzagVarint64String()}readFixed32(){return F(this.nextWireType_==L.FIXED32),this.decoder_.readUint32()}readFixed64(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readUint64()}readFixed64String(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readUint64String()}readSfixed32(){return F(this.nextWireType_==L.FIXED32),this.decoder_.readInt32()}readSfixed32String(){return F(this.nextWireType_==L.FIXED32),this.decoder_.readInt32().toString()}readSfixed64(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readInt64()}readSfixed64String(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readInt64String()}readFloat(){return F(this.nextWireType_==L.FIXED32),this.decoder_.readFloat()}readDouble(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readDouble()}readBool(){return F(this.nextWireType_==L.VARINT),!!this.decoder_.readUnsignedVarint32()}readEnum(){return F(this.nextWireType_==L.VARINT),this.decoder_.readSignedVarint64()}readString(){F(this.nextWireType_==L.DELIMITED);const e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)}readBytes(){F(this.nextWireType_==L.DELIMITED);const e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)}readVarintHash64(){return F(this.nextWireType_==L.VARINT),this.decoder_.readVarintHash64()}readSintHash64(){return F(this.nextWireType_==L.VARINT),this.decoder_.readZigzagVarintHash64()}readSplitVarint64(e){return F(this.nextWireType_==L.VARINT),this.decoder_.readSplitVarint64(e)}readFixedHash64(){return F(this.nextWireType_==L.FIXED64),this.decoder_.readFixedHash64()}readSplitFixed64(e){return F(this.nextWireType_==L.FIXED64),this.decoder_.readSplitFixed64(e)}readPackedField_(e){F(this.nextWireType_==L.DELIMITED);const t=this.decoder_.readUnsignedVarint32(),r=this.decoder_.getCursor()+t,i=[];for(;this.decoder_.getCursor()<r;)i.push(e.call(this.decoder_));return i}readPackedInt32(){return this.readPackedField_(this.decoder_.readSignedVarint32)}readPackedInt32String(){return this.readPackedField_(this.decoder_.readSignedVarint32String)}readPackedInt64(){return this.readPackedField_(this.decoder_.readSignedVarint64)}readPackedInt64String(){return this.readPackedField_(this.decoder_.readSignedVarint64String)}readPackedUint32(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)}readPackedUint32String(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)}readPackedUint64(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)}readPackedUint64String(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)}readPackedSint32(){return this.readPackedField_(this.decoder_.readZigzagVarint32)}readPackedSint64(){return this.readPackedField_(this.decoder_.readZigzagVarint64)}readPackedSint64String(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)}readPackedFixed32(){return this.readPackedField_(this.decoder_.readUint32)}readPackedFixed64(){return this.readPackedField_(this.decoder_.readUint64)}readPackedFixed64String(){return this.readPackedField_(this.decoder_.readUint64String)}readPackedSfixed32(){return this.readPackedField_(this.decoder_.readInt32)}readPackedSfixed64(){return this.readPackedField_(this.decoder_.readInt64)}readPackedSfixed64String(){return this.readPackedField_(this.decoder_.readInt64String)}readPackedFloat(){return this.readPackedField_(this.decoder_.readFloat)}readPackedDouble(){return this.readPackedField_(this.decoder_.readDouble)}readPackedBool(){return this.readPackedField_(this.decoder_.readBool)}readPackedEnum(){return this.readPackedField_(this.decoder_.readEnum)}readPackedVarintHash64(){return this.readPackedField_(this.decoder_.readVarintHash64)}readPackedFixedHash64(){return this.readPackedField_(this.decoder_.readFixedHash64)}}wt.instanceCache_=[];class ov{constructor(){this.buffer_=[]}length(){return this.buffer_.length}end(){const e=this.buffer_;return this.buffer_=[],e}writeSplitVarint64(e,t){for(F(e==Math.floor(e)),F(t==Math.floor(t)),F(e>=0&&e<Dt),F(t>=0&&t<Dt);t>0||e>127;)this.buffer_.push(e&127|128),e=(e>>>7|t<<25)>>>0,t=t>>>7;this.buffer_.push(e)}writeSplitFixed64(e,t){F(e==Math.floor(e)),F(t==Math.floor(t)),F(e>=0&&e<Dt),F(t>=0&&t<Dt),this.writeUint32(e),this.writeUint32(t)}writeUnsignedVarint32(e){for(F(e==Math.floor(e)),F(e>=0&&e<Dt);e>127;)this.buffer_.push(e&127|128),e=e>>>7;this.buffer_.push(e)}writeSignedVarint32(e){if(F(e==Math.floor(e)),F(e>=-ut&&e<ut),e>=0){this.writeUnsignedVarint32(e);return}for(let t=0;t<9;t++)this.buffer_.push(e&127|128),e=e>>7;this.buffer_.push(1)}writeUnsignedVarint64(e){F(e==Math.floor(e)),F(e>=0&&e<Ws),Go(e),this.writeSplitVarint64(je,Ve)}writeSignedVarint64(e){F(e==Math.floor(e)),F(e>=-Tt&&e<Tt),Go(e),this.writeSplitVarint64(je,Ve)}writeZigzagVarint32(e){F(e==Math.floor(e)),F(e>=-ut&&e<ut),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)}writeZigzagVarint64(e){F(e==Math.floor(e)),F(e>=-Tt&&e<Tt),ev(e),this.writeSplitVarint64(je,Ve)}writeZigzagVarint64String(e){this.writeZigzagVarintHash64(Pa(e))}writeZigzagVarintHash64(e){ps(e),Ma(je,Ve,(t,r)=>{this.writeSplitVarint64(t>>>0,r>>>0)})}writeUint8(e){F(e==Math.floor(e)),F(e>=0&&e<256),this.buffer_.push(e>>>0&255)}writeUint16(e){F(e==Math.floor(e)),F(e>=0&&e<65536),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)}writeUint32(e){F(e==Math.floor(e)),F(e>=0&&e<Dt),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)}writeUint64(e){F(e==Math.floor(e)),F(e>=0&&e<Ws),vd(e),this.writeUint32(je),this.writeUint32(Ve)}writeInt8(e){F(e==Math.floor(e)),F(e>=-128&&e<128),this.buffer_.push(e>>>0&255)}writeInt16(e){F(e==Math.floor(e)),F(e>=-32768&&e<32768),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)}writeInt32(e){F(e==Math.floor(e)),F(e>=-ut&&e<ut),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)}writeInt64(e){F(e==Math.floor(e)),F(e>=-Tt&&e<Tt),Go(e),this.writeSplitFixed64(je,Ve)}writeInt64String(e){F(e==Math.floor(e)),F(+e>=-Tt&&+e<Tt),ps(Pa(e)),this.writeSplitFixed64(je,Ve)}writeFloat(e){F(e===1/0||e===-1/0||isNaN(e)||e>=-Oa&&e<=Oa),tv(e),this.writeUint32(je)}writeDouble(e){F(e===1/0||e===-1/0||isNaN(e)||e>=-ka&&e<=ka),rv(e),this.writeUint32(je),this.writeUint32(Ve)}writeBool(e){F(typeof e=="boolean"||typeof e=="number"),this.buffer_.push(e?1:0)}writeEnum(e){F(e==Math.floor(e)),F(e>=-ut&&e<ut),this.writeSignedVarint32(e)}writeBytes(e){this.buffer_.push(...e)}writeVarintHash64(e){ps(e),this.writeSplitVarint64(je,Ve)}writeFixedHash64(e){ps(e),this.writeUint32(je),this.writeUint32(Ve)}writeString(e){const t=this.buffer_.length;return pd(e).forEach(s=>this.buffer_.push(s)),this.buffer_.length-t}}class Xr{constructor(e,t,r){this.bigint=e,this.lo=t,this.hi=r}toString(){return this.bigint.toString()}static fromString(e){const t=BigInt.asUintN(64,BigInt(e)),r=Number(BigInt.asUintN(32,t)),i=Number(t>>BigInt(32));return new Xr(t,r,i)}}class Ei extends Xr{static fromString(e){const t=BigInt.asIntN(64,BigInt(e)),{lo:r,hi:i}=Xr.fromString(e);return new Ei(t,r,i)}}class _r{constructor(){this.blocks_=[],this.totalLength_=0,this.encoder_=new ov}appendUint8Array_(e){const t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length}beginDelimited_(e){this.writeFieldHeader_(e,L.DELIMITED);const t=this.encoder_.end();return this.blocks_.push(t),this.totalLength_+=t.length,t.push(this.totalLength_),t}endDelimited_(e){const t=e.pop()??0;let r=this.totalLength_+this.encoder_.length()-t;for(F(r>=0);r>127;)e.push(r&127|128),r=r>>>7,this.totalLength_++;e.push(r),this.totalLength_++}writeSerializedMessage(e,t,r){this.appendUint8Array_(e.subarray(t,r))}maybeWriteSerializedMessage(e,t,r){e!=null&&t!=null&&r!=null&&this.writeSerializedMessage(e,t,r)}reset(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0}getResultBuffer(){const e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length;let i=0;for(let o=0;o<r;o++){const a=t[o];e.set(a,i),i+=a.length}const s=this.encoder_.end();return e.set(s,i),i+=s.length,F(i==e.length),this.blocks_=[e],e}writeFieldHeader_(e,t){F(e>=1&&e==Math.floor(e));const r=e*8+t;this.encoder_.writeUnsignedVarint32(r)}writeAny(e,t,r){switch(e){case J.DOUBLE:this.writeDouble(t,r);return;case J.FLOAT:this.writeFloat(t,r);return;case J.INT64:this.writeInt64(t,r);return;case J.UINT64:this.writeUint64(t,r);return;case J.INT32:this.writeInt32(t,r);return;case J.FIXED64:this.writeFixed64(t,r);return;case J.FIXED32:this.writeFixed32(t,r);return;case J.BOOL:this.writeBool(t,r);return;case J.STRING:this.writeString(t,r);return;case J.GROUP:ct("Group field type not supported in writeAny()");return;case J.MESSAGE:ct("Message field type not supported in writeAny()");return;case J.BYTES:this.writeBytes(t,r);return;case J.UINT32:this.writeUint32(t,r);return;case J.ENUM:this.writeEnum(t,r);return;case J.SFIXED32:this.writeSfixed32(t,r);return;case J.SFIXED64:this.writeSfixed64(t,r);return;case J.SINT32:this.writeSint32(t,r);return;case J.SINT64:this.writeSint64(t,r);return;case J.FHASH64:this.writeFixedHash64(t,r);return;case J.VHASH64:this.writeVarintHash64(t,r);return;default:ct("Invalid field type in writeAny()");return}}writeUnsignedVarint32_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeUnsignedVarint32(t))}writeSignedVarint32_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSignedVarint32(t))}writeUnsignedVarint64_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeUnsignedVarint64(t))}writeSignedVarint64_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSignedVarint64(t))}writeZigzagVarint32_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeZigzagVarint32(t))}writeZigzagVarint64_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeZigzagVarint64(t))}writeZigzagVarint64String_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeZigzagVarint64String(t))}writeZigzagVarintHash64_(e,t){t!=null&&(this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeZigzagVarintHash64(t))}writeInt32(e,t){t!=null&&(F(t>=-ut&&t<ut),this.writeSignedVarint32_(e,t))}writeInt32String(e,t){if(t==null)return;const r=parseInt(t,10);F(r>=-ut&&r<ut),this.writeSignedVarint32_(e,r)}writeInt64(e,t){t!=null&&(F(t>=-Tt&&t<Tt),this.writeSignedVarint64_(e,t))}writeInt64String(e,t){if(t==null)return;const r=Ei.fromString(t);this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}writeUint32(e,t){t!=null&&(F(t>=0&&t<Dt),this.writeUnsignedVarint32_(e,t))}writeUint32String(e,t){if(t==null)return;const r=parseInt(t,10);F(r>=0&&r<Dt),this.writeUnsignedVarint32_(e,r)}writeUint64(e,t){t!=null&&(F(t>=0&&t<Ws),this.writeUnsignedVarint64_(e,t))}writeUint64String(e,t){if(t==null)return;const r=Xr.fromString(t);this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}writeSint32(e,t){t!=null&&(F(t>=-ut&&t<ut),this.writeZigzagVarint32_(e,t))}writeSint64(e,t){t!=null&&(F(t>=-Tt&&t<Tt),this.writeZigzagVarint64_(e,t))}writeSintHash64(e,t){t!=null&&this.writeZigzagVarintHash64_(e,t)}writeSint64String(e,t){t!=null&&this.writeZigzagVarint64String_(e,t)}writeFixed32(e,t){t!=null&&(F(t>=0&&t<Dt),this.writeFieldHeader_(e,L.FIXED32),this.encoder_.writeUint32(t))}writeFixed64(e,t){t!=null&&(F(t>=0&&t<Ws),this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeUint64(t))}writeFixed64String(e,t){if(t==null)return;const r=Xr.fromString(t);this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}writeSfixed32(e,t){t!=null&&(F(t>=-ut&&t<ut),this.writeFieldHeader_(e,L.FIXED32),this.encoder_.writeInt32(t))}writeSfixed64(e,t){t!=null&&(F(t>=-Tt&&t<Tt),this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeInt64(t))}writeSfixed64String(e,t){if(t==null)return;const r=Ei.fromString(t);this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}writeFloat(e,t){t!=null&&(this.writeFieldHeader_(e,L.FIXED32),this.encoder_.writeFloat(t))}writeDouble(e,t){t!=null&&(this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeDouble(t))}writeBool(e,t){t!=null&&(F(typeof t=="boolean"||typeof t=="number"),this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeBool(t))}writeEnum(e,t){t!=null&&(F(t>=-ut&&t<ut),this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSignedVarint32(t))}writeString(e,t){if(t==null)return;const r=this.beginDelimited_(e);this.encoder_.writeString(t),this.endDelimited_(r)}writeBytes(e,t){if(t==null)return;const r=md(t);this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(r.length),this.appendUint8Array_(r)}writeMessage(e,t,r){if(t==null)return;const i=this.beginDelimited_(e);r(t,this),this.endDelimited_(i)}writeMessageSet(e,t,r){if(t==null)return;this.writeFieldHeader_(1,L.START_GROUP),this.writeFieldHeader_(2,L.VARINT),this.encoder_.writeSignedVarint32(e);const i=this.beginDelimited_(3);r(t,this),this.endDelimited_(i),this.writeFieldHeader_(1,L.END_GROUP)}writeGroup(e,t,r){t!=null&&(this.writeFieldHeader_(e,L.START_GROUP),r(t,this),this.writeFieldHeader_(e,L.END_GROUP))}writeFixedHash64(e,t){t!=null&&(F(t.length==8),this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeFixedHash64(t))}writeVarintHash64(e,t){t!=null&&(F(t.length==8),this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeVarintHash64(t))}writeSplitFixed64(e,t,r){this.writeFieldHeader_(e,L.FIXED64),this.encoder_.writeSplitFixed64(t,r)}writeSplitVarint64(e,t,r){this.writeFieldHeader_(e,L.VARINT),this.encoder_.writeSplitVarint64(t,r)}writeSplitZigzagVarint64(e,t,r){this.writeFieldHeader_(e,L.VARINT);const i=this.encoder_;Ma(t,r,function(s,o){i.writeSplitVarint64(s>>>0,o>>>0)})}writeRepeatedInt32(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])}writeRepeatedInt32String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeInt32String(e,t[r])}writeRepeatedInt64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])}writeRepeatedSplitFixed64(e,t,r,i){if(t!=null)for(let s=0;s<t.length;s++)this.writeSplitFixed64(e,r(t[s]),i(t[s]))}writeRepeatedSplitVarint64(e,t,r,i){if(t!=null)for(let s=0;s<t.length;s++)this.writeSplitVarint64(e,r(t[s]),i(t[s]))}writeRepeatedSplitZigzagVarint64(e,t,r,i){if(t!=null)for(let s=0;s<t.length;s++)this.writeSplitZigzagVarint64(e,r(t[s]),i(t[s]))}writeRepeatedInt64String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeInt64String(e,t[r])}writeRepeatedUint32(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])}writeRepeatedUint32String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeUint32String(e,t[r])}writeRepeatedUint64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])}writeRepeatedUint64String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeUint64String(e,t[r])}writeRepeatedSint32(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])}writeRepeatedSint64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])}writeRepeatedSint64String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])}writeRepeatedSintHash64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])}writeRepeatedFixed32(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeFixed32(e,t[r])}writeRepeatedFixed64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeFixed64(e,t[r])}writeRepeatedFixed64String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeFixed64String(e,t[r])}writeRepeatedSfixed32(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeSfixed32(e,t[r])}writeRepeatedSfixed64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeSfixed64(e,t[r])}writeRepeatedSfixed64String(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])}writeRepeatedFloat(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeFloat(e,t[r])}writeRepeatedDouble(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeDouble(e,t[r])}writeRepeatedBool(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeBool(e,t[r])}writeRepeatedEnum(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeEnum(e,t[r])}writeRepeatedString(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeString(e,t[r])}writeRepeatedBytes(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeBytes(e,t[r])}writeRepeatedMessage(e,t,r){if(t!=null)for(let i=0;i<t.length;i++){const s=this.beginDelimited_(e);r(t[i],this),this.endDelimited_(s)}}writeRepeatedGroup(e,t,r){if(t!=null)for(let i=0;i<t.length;i++)this.writeFieldHeader_(e,L.START_GROUP),r(t[i],this),this.writeFieldHeader_(e,L.END_GROUP)}writeRepeatedFixedHash64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])}writeRepeatedVarintHash64(e,t){if(t!=null)for(let r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])}writePackedInt32(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeSignedVarint32(t[i]);this.endDelimited_(r)}writePackedInt32String(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeSignedVarint32(parseInt(t[i],10));this.endDelimited_(r)}writePackedInt64(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeSignedVarint64(t[i]);this.endDelimited_(r)}writePackedSplitFixed64(e,t,r,i){if(t==null)return;const s=this.beginDelimited_(e);for(let o=0;o<t.length;o++)this.encoder_.writeSplitFixed64(r(t[o]),i(t[o]));this.endDelimited_(s)}writePackedSplitVarint64(e,t,r,i){if(t==null)return;const s=this.beginDelimited_(e);for(let o=0;o<t.length;o++)this.encoder_.writeSplitVarint64(r(t[o]),i(t[o]));this.endDelimited_(s)}writePackedSplitZigzagVarint64(e,t,r,i){if(t==null)return;const s=this.beginDelimited_(e),o=this.encoder_;for(let a=0;a<t.length;a++)Ma(r(t[a]),i(t[a]),function(l,c){o.writeSplitVarint64(l>>>0,c>>>0)});this.endDelimited_(s)}writePackedInt64String(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++){const s=Ei.fromString(t[i]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(r)}writePackedUint32(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeUnsignedVarint32(t[i]);this.endDelimited_(r)}writePackedUint32String(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeUnsignedVarint32(parseInt(t[i],10));this.endDelimited_(r)}writePackedUint64(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeUnsignedVarint64(t[i]);this.endDelimited_(r)}writePackedUint64String(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++){const s=Xr.fromString(t[i]);this.encoder_.writeSplitVarint64(s.lo,s.hi)}this.endDelimited_(r)}writePackedSint32(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeZigzagVarint32(t[i]);this.endDelimited_(r)}writePackedSint64(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeZigzagVarint64(t[i]);this.endDelimited_(r)}writePackedSint64String(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeZigzagVarintHash64(Pa(t[i]));this.endDelimited_(r)}writePackedSintHash64(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeZigzagVarintHash64(t[i]);this.endDelimited_(r)}writePackedFixed32(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*4);for(let r=0;r<t.length;r++)this.encoder_.writeUint32(t[r])}}writePackedFixed64(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++)this.encoder_.writeUint64(t[r])}}writePackedFixed64String(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++){const i=Xr.fromString(t[r]);this.encoder_.writeSplitFixed64(i.lo,i.hi)}}}writePackedSfixed32(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*4);for(let r=0;r<t.length;r++)this.encoder_.writeInt32(t[r])}}writePackedSfixed64(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++)this.encoder_.writeInt64(t[r])}}writePackedSfixed64String(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++)this.encoder_.writeInt64String(t[r])}}writePackedFloat(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*4);for(let r=0;r<t.length;r++)this.encoder_.writeFloat(t[r])}}writePackedDouble(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++)this.encoder_.writeDouble(t[r])}}writePackedBool(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length);for(let r=0;r<t.length;r++)this.encoder_.writeBool(t[r])}}writePackedEnum(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeEnum(t[i]);this.endDelimited_(r)}writePackedFixedHash64(e,t){if(t!=null&&t.length){this.writeFieldHeader_(e,L.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length*8);for(let r=0;r<t.length;r++)this.encoder_.writeFixedHash64(t[r])}}writePackedVarintHash64(e,t){if(!(t!=null&&t.length))return;const r=this.beginDelimited_(e);for(let i=0;i<t.length;i++)this.encoder_.writeVarintHash64(t[i]);this.endDelimited_(r)}}class Xs{constructor(e){this.code=e.code,this.msg=e.msg,this.meta=e.meta}}class av extends Xs{constructor(e){super(e)}}const lv={canceled:408,unknown:500,invalid_argument:400,malformed:400,deadline_exceeded:408,not_found:404,bad_route:404,already_exists:409,permission_denied:403,unauthenticated:401,resource_exhausted:403,failed_precondition:412,aborted:409,out_of_range:400,unimplemented:501,internal:500,unavailable:503,data_loss:500};function cv(n){return typeof n=="object"&&n!==null?"code"in n&&n.code in lv:!1}function uv(n){return 300>=n&&n<=400?"internal":{401:"unauthenticated",403:"permission_denied",404:"bad_route",429:"unavailable",502:"unavailable",503:"unavailable",504:"unavailable"}[n]??"internal"}async function hv(n){const e=await n.text();try{const t=JSON.parse(e);if(cv(t))return new Xs(t)}catch{}return new av({code:uv(n.status),msg:"HTTP Error from Intermediary Proxy",meta:{http_error_from_intermediary:"true",status_code:n.status.toString(),body:e,location:n.headers.get("location")??void 0}})}function dv(){const n={};return{on:(e,t)=>{var r;n[e]??(n[e]=[]),(r=n[e])==null||r.push(t)},off:(e,t)=>{var r;n[e]=(r=n[e])==null?void 0:r.filter(i=>i!==t)},emit:(e,...t)=>{var r;(r=n[e])==null||r.forEach(i=>{i(...t)})}}}const wd=[],zi=dv(),fv=async(n,e)=>fetch(n,e),zr={baseURL:"",headers:{},prefix:"/twirp",use(n){return wd.push(n),zr},on:(...n)=>(zi.on(...n),zr),off:(...n)=>(zi.off(...n),zr),rpcTransport:fv};async function gv(n,e){let t=n,r=1;const i=[...wd,e];try{return await i[0](n,function s(o){t=o;const a=i[r];return r++,a(o,s)})}catch(s){const o=s instanceof Xs?s:new Xs({code:"internal",msg:"client error"});throw zi.emit("error",t,o),s}}function pv(n={},e){const t=n.baseURL??zr.baseURL??"",r=n.prefix??zr.prefix??"",i=t+r+e,s=n.rpcTransport??zr.rpcTransport;return{url:i,headers:{...zr.headers,...n.headers},rpcTransport:s}}async function mv(n,e,t,r){return gv(pv(r,e),async i=>{zi.emit("requestPrepared",i);const s=await i.rpcTransport(i.url,{method:"POST",headers:{accept:n,"content-type":n,...i.headers},body:t});if(zi.emit("responseReceived",i),!s.ok)throw await hv(s);switch(n){case"application/protobuf":{const o=await s.arrayBuffer();return new Uint8Array(o)}case"application/json":return s.text();default:return n}})}function Co(n,e,t){return mv("application/protobuf",n,e,t)}async function _v(n,e){const t=await Co("/proto.Relapse/GetSettings",bv.encode(n),e);return Ps.decode(t)}async function vv(n,e){const t=await Co("/proto.Relapse/SetSettings",Qr.encode(n),e);return Qr.decode(t)}async function wv(n,e){const t=await Co("/proto.Relapse/LoadCapturedDay",Fi.encode(n),e);return Ms.decode(t)}async function yv(n,e){const t=await Co("/proto.Relapse/LoadCaptureOcr",Fi.encode(n),e);return Es.decode(t)}const Un={encode:function(n){return Un._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Un._readMessage(Un.initialize(),new wt(n))},initialize:function(){return{RowNum:0,AppName:"",Filepath:"",Fullpath:"",CaptureSizeBytes:0,Dt:"",Bod:"",IsReal:!1}},_writeMessage:function(n,e){return n.RowNum&&e.writeInt32(1,n.RowNum),n.AppName&&e.writeString(2,n.AppName),n.Filepath&&e.writeString(4,n.Filepath),n.Fullpath&&e.writeString(5,n.Fullpath),n.CaptureSizeBytes&&e.writeInt32(6,n.CaptureSizeBytes),n.Dt&&e.writeString(8,n.Dt),n.Bod&&e.writeString(9,n.Bod),n.IsReal&&e.writeBool(10,n.IsReal),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.RowNum=e.readInt32();break}case 2:{n.AppName=e.readString();break}case 4:{n.Filepath=e.readString();break}case 5:{n.Fullpath=e.readString();break}case 6:{n.CaptureSizeBytes=e.readInt32();break}case 8:{n.Dt=e.readString();break}case 9:{n.Bod=e.readString();break}case 10:{n.IsReal=e.readBool();break}default:{e.skipField();break}}return n}},Nn={encode:function(n){return Nn._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Nn._readMessage(Nn.initialize(),new wt(n))},initialize:function(){return{Bod:"",TotalCapturedMinutes:0,TotalCapturesCount:0,TotalCaptureSizeBytes:0}},_writeMessage:function(n,e){return n.Bod&&e.writeString(1,n.Bod),n.TotalCapturedMinutes&&e.writeInt32(2,n.TotalCapturedMinutes),n.TotalCapturesCount&&e.writeInt32(3,n.TotalCapturesCount),n.TotalCaptureSizeBytes&&e.writeInt32(4,n.TotalCaptureSizeBytes),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.Bod=e.readString();break}case 2:{n.TotalCapturedMinutes=e.readInt32();break}case 3:{n.TotalCapturesCount=e.readInt32();break}case 4:{n.TotalCaptureSizeBytes=e.readInt32();break}default:{e.skipField();break}}return n}},Fi={encode:function(n){return Fi._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Fi._readMessage(Fi.initialize(),new wt(n))},initialize:function(){return{Dt:""}},_writeMessage:function(n,e){return n.Dt&&e.writeString(1,n.Dt),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.Dt=e.readString();break}default:{e.skipField();break}}return n}},Ms={encode:function(n){return Ms._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Ms._readMessage(Ms.initialize(),new wt(n))},initialize:function(){return{Bod:"",Captures:[],Summary:Nn.initialize()}},_writeMessage:function(n,e){var t;return n.Bod&&e.writeString(1,n.Bod),(t=n.Captures)!=null&&t.length&&e.writeRepeatedMessage(2,n.Captures,Un._writeMessage),n.Summary&&e.writeMessage(3,n.Summary,Nn._writeMessage),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.Bod=e.readString();break}case 2:{const r=Un.initialize();e.readMessage(r,Un._readMessage),n.Captures.push(r);break}case 3:{e.readMessage(n.Summary,Nn._readMessage);break}default:{e.skipField();break}}return n}},Qr={encode:function(n){return Qr._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Qr._readMessage(Qr.initialize(),new wt(n))},initialize:function(){return{IsEnabled:!1,RetainForXDays:0,Rejections:[],OpenAutomaticallyAtLogin:!1,IsDumping:!1}},_writeMessage:function(n,e){var t;return n.IsEnabled&&e.writeBool(1,n.IsEnabled),n.RetainForXDays&&e.writeInt32(2,n.RetainForXDays),(t=n.Rejections)!=null&&t.length&&e.writeRepeatedString(3,n.Rejections),n.OpenAutomaticallyAtLogin&&e.writeBool(4,n.OpenAutomaticallyAtLogin),n.IsDumping&&e.writeBool(5,n.IsDumping),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.IsEnabled=e.readBool();break}case 2:{n.RetainForXDays=e.readInt32();break}case 3:{n.Rejections.push(e.readString());break}case 4:{n.OpenAutomaticallyAtLogin=e.readBool();break}case 5:{n.IsDumping=e.readBool();break}default:{e.skipField();break}}return n}},Hn={encode:function(n){return Hn._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Hn._readMessage(Hn.initialize(),new wt(n))},initialize:function(){return{CapturedApplications:[]}},_writeMessage:function(n,e){var t;return(t=n.CapturedApplications)!=null&&t.length&&e.writeRepeatedMessage(1,n.CapturedApplications,Wn._writeMessage),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{const r=Wn.initialize();e.readMessage(r,Wn._readMessage),n.CapturedApplications.push(r);break}default:{e.skipField();break}}return n}},Wn={encode:function(n){return Wn._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Wn._readMessage(Wn.initialize(),new wt(n))},initialize:function(){return{AppName:"",AppPath:""}},_writeMessage:function(n,e){return n.AppName&&e.writeString(1,n.AppName),n.AppPath&&e.writeString(2,n.AppPath),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.AppName=e.readString();break}case 2:{n.AppPath=e.readString();break}default:{e.skipField();break}}return n}},bv={encode:function(n){return new Uint8Array},decode:function(n){return{}},initialize:function(){return{}},_writeMessage:function(n,e){return e},_readMessage:function(n,e){return n}},Ps={encode:function(n){return Ps._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Ps._readMessage(Ps.initialize(),new wt(n))},initialize:function(){return{Settings:Qr.initialize(),SettingsOptions:Hn.initialize()}},_writeMessage:function(n,e){return n.Settings&&e.writeMessage(1,n.Settings,Qr._writeMessage),n.SettingsOptions&&e.writeMessage(2,n.SettingsOptions,Hn._writeMessage),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{e.readMessage(n.Settings,Qr._readMessage);break}case 2:{e.readMessage(n.SettingsOptions,Hn._readMessage);break}default:{e.skipField();break}}return n}},Es={encode:function(n){return Es._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Es._readMessage(Es.initialize(),new wt(n))},initialize:function(){return{Meta:[],FullText:""}},_writeMessage:function(n,e){var t;return(t=n.Meta)!=null&&t.length&&e.writeRepeatedMessage(1,n.Meta,Yn._writeMessage),n.FullText&&e.writeString(2,n.FullText),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{const r=Yn.initialize();e.readMessage(r,Yn._readMessage),n.Meta.push(r);break}case 2:{n.FullText=e.readString();break}default:{e.skipField();break}}return n}},Yn={encode:function(n){return Yn._writeMessage(n,new _r).getResultBuffer()},decode:function(n){return Yn._readMessage(Yn.initialize(),new wt(n))},initialize:function(){return{Text:"",Confidence:0,Height:0,Width:0,X:0,Y:0}},_writeMessage:function(n,e){return n.Text&&e.writeString(1,n.Text),n.Confidence&&e.writeDouble(2,n.Confidence),n.Height&&e.writeDouble(3,n.Height),n.Width&&e.writeDouble(4,n.Width),n.X&&e.writeDouble(5,n.X),n.Y&&e.writeDouble(6,n.Y),e},_readMessage:function(n,e){for(;e.nextField();)switch(e.getFieldNumber()){case 1:{n.Text=e.readString();break}case 2:{n.Confidence=e.readDouble();break}case 3:{n.Height=e.readDouble();break}case 4:{n.Width=e.readDouble();break}case 5:{n.X=e.readDouble();break}case 6:{n.Y=e.readDouble();break}default:{e.skipField();break}}return n}};function Nt(n){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(n)}function ve(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function z(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Y(n){z(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||Nt(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function To(n,e){z(2,arguments);var t=Y(n),r=ve(e);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function Do(n,e){z(2,arguments);var t=Y(n),r=ve(e);if(isNaN(r))return new Date(NaN);if(!r)return t;var i=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+r+1,0);var o=s.getDate();return i>=o?s:(t.setFullYear(s.getFullYear(),s.getMonth(),i),t)}function mi(n,e){if(z(2,arguments),!e||Nt(e)!=="object")return new Date(NaN);var t=e.years?ve(e.years):0,r=e.months?ve(e.months):0,i=e.weeks?ve(e.weeks):0,s=e.days?ve(e.days):0,o=e.hours?ve(e.hours):0,a=e.minutes?ve(e.minutes):0,l=e.seconds?ve(e.seconds):0,c=Y(n),u=r||t?Do(c,r+t*12):c,h=s||i?To(u,s+i*7):u,d=a+o*60,f=l+d*60,g=f*1e3,p=new Date(h.getTime()+g);return p}function xv(n,e){z(2,arguments);var t=Y(n).getTime(),r=ve(e);return new Date(t+r)}var Sv={};function Fr(){return Sv}function Cv(n,e){var t,r,i,s,o,a,l,c;z(1,arguments);var u=Fr(),h=ve((t=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Y(n),f=d.getDay(),g=(f<h?7:0)+f-h;return d.setDate(d.getDate()-g),d.setHours(0,0,0,0),d}function zs(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function qn(n){z(1,arguments);var e=Y(n);return e.setHours(0,0,0,0),e}var Tv=864e5;function Dv(n,e){z(2,arguments);var t=qn(n),r=qn(e),i=t.getTime()-zs(t),s=r.getTime()-zs(r);return Math.round((i-s)/Tv)}function yl(n,e){z(2,arguments);var t=ve(e);return Do(n,t*12)}function Ov(n){z(1,arguments);var e;if(n&&typeof n.forEach=="function")e=n;else if(Nt(n)==="object"&&n!==null)e=Array.prototype.slice.call(n);else return new Date(NaN);var t;return e.forEach(function(r){var i=Y(r);(t===void 0||t<i||isNaN(Number(i)))&&(t=i)}),t||new Date(NaN)}function kv(n){z(1,arguments);var e;if(n&&typeof n.forEach=="function")e=n;else if(Nt(n)==="object"&&n!==null)e=Array.prototype.slice.call(n);else return new Date(NaN);var t;return e.forEach(function(r){var i=Y(r);(t===void 0||t>i||isNaN(i.getDate()))&&(t=i)}),t||new Date(NaN)}function Xn(n,e){z(2,arguments);var t=Y(n),r=Y(e),i=t.getTime()-r.getTime();return i<0?-1:i>0?1:i}var bl=6e4,yd=36e5,Mv=1e3;function Ko(n,e){z(2,arguments);var t=qn(n),r=qn(e);return t.getTime()===r.getTime()}function Pv(n){return z(1,arguments),n instanceof Date||Nt(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ot(n){if(z(1,arguments),!Pv(n)&&typeof n!="number")return!1;var e=Y(n);return!isNaN(Number(e))}function Ev(n,e){z(2,arguments);var t=Y(n),r=Y(e),i=t.getFullYear()-r.getFullYear(),s=t.getMonth()-r.getMonth();return i*12+s}function Fv(n,e){z(2,arguments);var t=Y(n),r=Y(e);return t.getFullYear()-r.getFullYear()}function $c(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Av(n,e){z(2,arguments);var t=Y(n),r=Y(e),i=$c(t,r),s=Math.abs(Dv(t,r));t.setDate(t.getDate()-i*s);var o=+($c(t,r)===-i),a=i*(s-o);return a===0?0:a}function xl(n,e){return z(2,arguments),Y(n).getTime()-Y(e).getTime()}var Gc={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Lv="trunc";function Sl(n){return n?Gc[n]:Gc[Lv]}function Rv(n,e,t){z(2,arguments);var r=xl(n,e)/yd;return Sl(t==null?void 0:t.roundingMethod)(r)}function Iv(n,e,t){z(2,arguments);var r=xl(n,e)/bl;return Sl(t==null?void 0:t.roundingMethod)(r)}function bd(n){z(1,arguments);var e=Y(n);return e.setHours(23,59,59,999),e}function Cl(n){z(1,arguments);var e=Y(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function jv(n){z(1,arguments);var e=Y(n);return bd(e).getTime()===Cl(e).getTime()}function Vv(n,e){z(2,arguments);var t=Y(n),r=Y(e),i=Xn(t,r),s=Math.abs(Ev(t,r)),o;if(s<1)o=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-i*s);var a=Xn(t,r)===-i;jv(Y(n))&&s===1&&Xn(n,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function Bv(n,e,t){z(2,arguments);var r=xl(n,e)/1e3;return Sl(t==null?void 0:t.roundingMethod)(r)}function Uv(n,e){z(2,arguments);var t=Y(n),r=Y(e),i=Xn(t,r),s=Math.abs(Fv(t,r));t.setFullYear(1584),r.setFullYear(1584);var o=Xn(t,r)===-i,a=i*(s-Number(o));return a===0?0:a}function Nv(n,e){var t;z(1,arguments);var r=n||{},i=Y(r.start),s=Y(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],l=i;l.setHours(0,0,0,0);var c=Number((t=e==null?void 0:e.step)!==null&&t!==void 0?t:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=o;)a.push(Y(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return a}function qc(n){z(1,arguments);var e=Y(n);return e.setSeconds(0,0),e}function Hv(n){z(1,arguments);var e=n||{},t=Y(e.start),r=Y(e.end),i=r.getTime(),s=[];if(!(t.getTime()<=i))throw new RangeError("Invalid interval");var o=t;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=i;)s.push(Y(o)),o.setMonth(o.getMonth()+1);return s}function xd(n){z(1,arguments);var e=Y(n);return e.setDate(1),e.setHours(0,0,0,0),e}function Wv(n){z(1,arguments);var e=Y(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function Yv(n){z(1,arguments);var e=Y(n),t=new Date(0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Xv(n){z(1,arguments);var e=n||{},t=Y(e.start),r=Y(e.end),i=r.getTime();if(!(t.getTime()<=i))throw new RangeError("Invalid interval");var s=[],o=t;for(o.setHours(0,0,0,0),o.setMonth(0,1);o.getTime()<=i;)s.push(Y(o)),o.setFullYear(o.getFullYear()+1);return s}function zv(n){z(1,arguments);var e=Y(n),t=e.getFullYear(),r=9+Math.floor(t/10)*10;return e.setFullYear(r,11,31),e.setHours(23,59,59,999),e}function $v(n,e){var t,r,i,s,o,a,l,c;z(1,arguments);var u=Fr(),h=ve((t=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Y(n),f=d.getDay(),g=(f<h?-7:0)+6-(f-h);return d.setDate(d.getDate()+g),d.setHours(23,59,59,999),d}function Sd(n,e){z(2,arguments);var t=ve(e);return xv(n,-t)}var Gv=864e5;function qv(n){z(1,arguments);var e=Y(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=t-r;return Math.floor(i/Gv)+1}function Kn(n){z(1,arguments);var e=1,t=Y(n),r=t.getUTCDay(),i=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Cd(n){z(1,arguments);var e=Y(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=Kn(r),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var o=Kn(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function Kv(n){z(1,arguments);var e=Cd(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=Kn(t);return r}var Zv=6048e5;function Td(n){z(1,arguments);var e=Y(n),t=Kn(e).getTime()-Kv(e).getTime();return Math.round(t/Zv)+1}function bn(n,e){var t,r,i,s,o,a,l,c;z(1,arguments);var u=Fr(),h=ve((t=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Y(n),f=d.getUTCDay(),g=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-g),d.setUTCHours(0,0,0,0),d}function Tl(n,e){var t,r,i,s,o,a,l,c;z(1,arguments);var u=Y(n),h=u.getUTCFullYear(),d=Fr(),f=ve((t=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,f),g.setUTCHours(0,0,0,0);var p=bn(g,e),_=new Date(0);_.setUTCFullYear(h,0,f),_.setUTCHours(0,0,0,0);var y=bn(_,e);return u.getTime()>=p.getTime()?h+1:u.getTime()>=y.getTime()?h:h-1}function Qv(n,e){var t,r,i,s,o,a,l,c;z(1,arguments);var u=Fr(),h=ve((t=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&t!==void 0?t:1),d=Tl(n,e),f=new Date(0);f.setUTCFullYear(d,0,h),f.setUTCHours(0,0,0,0);var g=bn(f,e);return g}var Jv=6048e5;function Dd(n,e){z(1,arguments);var t=Y(n),r=bn(t,e).getTime()-Qv(t,e).getTime();return Math.round(r/Jv)+1}function be(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var ew={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return be(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):be(r+1,2)},d:function(e,t){return be(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return be(e.getUTCHours()%12||12,t.length)},H:function(e,t){return be(e.getUTCHours(),t.length)},m:function(e,t){return be(e.getUTCMinutes(),t.length)},s:function(e,t){return be(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return be(s,t.length)}};const Ir=ew;var kn={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tw={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Ir.y(e,t)},Y:function(e,t,r,i){var s=Tl(e,i),o=s>0?s:1-s;if(t==="YY"){var a=o%100;return be(a,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):be(o,t.length)},R:function(e,t){var r=Cd(e);return be(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return be(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return be(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return be(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return Ir.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return be(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var s=Dd(e,i);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):be(s,t.length)},I:function(e,t,r){var i=Td(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):be(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ir.d(e,t)},D:function(e,t,r){var i=qv(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):be(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return be(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return be(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return be(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),s;switch(i===12?s=kn.noon:i===0?s=kn.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),s;switch(i>=17?s=kn.evening:i>=12?s=kn.afternoon:i>=4?s=kn.morning:s=kn.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ir.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ir.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):be(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):be(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ir.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ir.s(e,t)},S:function(e,t){return Ir.S(e,t)},X:function(e,t,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(t){case"X":return Zc(o);case"XXXX":case"XX":return fn(o);case"XXXXX":case"XXX":default:return fn(o,":")}},x:function(e,t,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(t){case"x":return Zc(o);case"xxxx":case"xx":return fn(o);case"xxxxx":case"xxx":default:return fn(o,":")}},O:function(e,t,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Kc(o,":");case"OOOO":default:return"GMT"+fn(o,":")}},z:function(e,t,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Kc(o,":");case"zzzz":default:return"GMT"+fn(o,":")}},t:function(e,t,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return be(o,t.length)},T:function(e,t,r,i){var s=i._originalDate||e,o=s.getTime();return be(o,t.length)}};function Kc(n,e){var t=n>0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=r%60;if(s===0)return t+String(i);var o=e||"";return t+String(i)+o+be(s,2)}function Zc(n,e){if(n%60===0){var t=n>0?"-":"+";return t+be(Math.abs(n)/60,2)}return fn(n,e)}function fn(n,e){var t=e||"",r=n>0?"-":"+",i=Math.abs(n),s=be(Math.floor(i/60),2),o=be(i%60,2);return r+s+t+o}const rw=tw;var Qc=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Od=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nw=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Qc(e,t);var o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Qc(i,t)).replace("{{time}}",Od(s,t))},iw={p:Od,P:nw};const Aa=iw;var sw=["D","DD"],ow=["YY","YYYY"];function kd(n){return sw.indexOf(n)!==-1}function Md(n){return ow.indexOf(n)!==-1}function $s(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var aw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lw=function(e,t,r){var i,s=aw[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const cw=lw;function Zo(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var uw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fw={date:Zo({formats:uw,defaultWidth:"full"}),time:Zo({formats:hw,defaultWidth:"full"}),dateTime:Zo({formats:dw,defaultWidth:"full"})};const gw=fw;var pw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mw=function(e,t,r,i){return pw[e]};const _w=mw;function _i(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;i=n.formattingValues[o]||n.formattingValues[s]}else{var a=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[a]}var c=n.argumentCallback?n.argumentCallback(e):e;return i[c]}}var vw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ww={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Cw=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tw={ordinalNumber:Cw,era:_i({values:vw,defaultWidth:"wide"}),quarter:_i({values:ww,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:_i({values:yw,defaultWidth:"wide"}),day:_i({values:bw,defaultWidth:"wide"}),dayPeriod:_i({values:xw,defaultWidth:"wide",formattingValues:Sw,defaultFormattingWidth:"wide"})};const Dw=Tw;function vi(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?kw(a,function(h){return h.test(o)}):Ow(a,function(h){return h.test(o)}),c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function Ow(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function kw(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Mw(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var i=r[0],s=e.match(n.parsePattern);if(!s)return null;var o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var Pw=/^(\d+)(th|st|nd|rd)?/i,Ew=/\d+/i,Fw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Aw={any:[/^b/i,/^(a|c)/i]},Lw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rw={any:[/1/i,/2/i,/3/i,/4/i]},Iw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vw={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Uw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Nw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hw={ordinalNumber:Mw({matchPattern:Pw,parsePattern:Ew,valueCallback:function(e){return parseInt(e,10)}}),era:vi({matchPatterns:Fw,defaultMatchWidth:"wide",parsePatterns:Aw,defaultParseWidth:"any"}),quarter:vi({matchPatterns:Lw,defaultMatchWidth:"wide",parsePatterns:Rw,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:vi({matchPatterns:Iw,defaultMatchWidth:"wide",parsePatterns:jw,defaultParseWidth:"any"}),day:vi({matchPatterns:Vw,defaultMatchWidth:"wide",parsePatterns:Bw,defaultParseWidth:"any"}),dayPeriod:vi({matchPatterns:Uw,defaultMatchWidth:"any",parsePatterns:Nw,defaultParseWidth:"any"})};const Ww=Hw;var Yw={code:"en-US",formatDistance:cw,formatLong:gw,formatRelative:_w,localize:Dw,match:Ww,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Pd=Yw;var Xw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$w=/^'([^]*?)'?$/,Gw=/''/g,qw=/[a-zA-Z]/;function $i(n,e,t){var r,i,s,o,a,l,c,u,h,d,f,g,p,_,y,w,T,b;z(2,arguments);var P=String(e),R=Fr(),N=(r=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:R.locale)!==null&&r!==void 0?r:Pd,U=ve((s=(o=(a=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(c=t.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:R.firstWeekContainsDate)!==null&&o!==void 0?o:(h=R.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(U>=1&&U<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var G=ve((f=(g=(p=(_=t==null?void 0:t.weekStartsOn)!==null&&_!==void 0?_:t==null||(y=t.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:R.weekStartsOn)!==null&&g!==void 0?g:(T=R.locale)===null||T===void 0||(b=T.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&f!==void 0?f:0);if(!(G>=0&&G<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var re=Y(n);if(!Ot(re))throw new RangeError("Invalid time value");var me=zs(re),ge=Sd(re,me),ye={firstWeekContainsDate:U,weekStartsOn:G,locale:N,_originalDate:re},_e=P.match(zw).map(function(ae){var ne=ae[0];if(ne==="p"||ne==="P"){var pe=Aa[ne];return pe(ae,N.formatLong)}return ae}).join("").match(Xw).map(function(ae){if(ae==="''")return"'";var ne=ae[0];if(ne==="'")return Kw(ae);var pe=rw[ne];if(pe)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Md(ae)&&$s(ae,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&kd(ae)&&$s(ae,e,String(n)),pe(ge,ae,N.localize,ye);if(ne.match(qw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ne+"`");return ae}).join("");return _e}function Kw(n){var e=n.match($w);return e?e[1].replace(Gw,"'"):n}function Zw(n,e){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function Qw(n,e){var t;if(arguments.length<1)throw new TypeError("1 arguments required, but only ".concat(arguments.length," present"));var r=Y(n);if(!Ot(r))throw new RangeError("Invalid time value");var i=Number((t=e==null?void 0:e.fractionDigits)!==null&&t!==void 0?t:0);if(!(i>=0&&i<=3))throw new RangeError("fractionDigits must be between 0 and 3 inclusively");var s=be(r.getDate(),2),o=be(r.getMonth()+1,2),a=r.getFullYear(),l=be(r.getHours(),2),c=be(r.getMinutes(),2),u=be(r.getSeconds(),2),h="";if(i>0){var d=r.getMilliseconds(),f=Math.floor(d*Math.pow(10,i-3));h="."+be(f,i)}var g="",p=r.getTimezoneOffset();if(p!==0){var _=Math.abs(p),y=be(ve(_/60),2),w=be(_%60,2),T=p<0?"+":"-";g="".concat(T).concat(y,":").concat(w)}else g="Z";return"".concat(a,"-").concat(o,"-").concat(s,"T").concat(l,":").concat(c,":").concat(u).concat(h).concat(g)}function Jw(n){z(1,arguments);var e=Y(n),t=e.getFullYear(),r=e.getMonth(),i=new Date(0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}function ms(n){z(1,arguments);var e=Y(n),t=e.getFullYear(),r=Math.floor(t/10)*10;return r}function $t(n){return z(1,arguments),Y(n).getFullYear()}function ey(n){z(1,arguments);var e=Y(n.start),t=Y(n.end);if(isNaN(e.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(t.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(Uv(t,e));var i=Xn(t,e),s=mi(e,{years:i*r.years});r.months=Math.abs(Vv(t,s));var o=mi(s,{months:i*r.months});r.days=Math.abs(Av(t,o));var a=mi(o,{days:i*r.days});r.hours=Math.abs(Rv(t,a));var l=mi(a,{hours:i*r.hours});r.minutes=Math.abs(Iv(t,l));var c=mi(l,{minutes:i*r.minutes});return r.seconds=Math.abs(Bv(t,c)),r}function Gi(n,e){z(2,arguments);var t=Y(n),r=Y(e);return t.getTime()>r.getTime()}function qi(n,e){z(2,arguments);var t=Y(n),r=Y(e);return t.getTime()<r.getTime()}function Jc(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function ty(n,e){if(n){if(typeof n=="string")return Jc(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Jc(n,e)}}function eu(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ty(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){t=t.call(n)},n:function(){var c=t.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(o)throw a}}}}function Z(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function La(n,e){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},La(n,e)}function Pe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&La(n,e)}function Gs(n){return Gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gs(n)}function ry(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ny(n,e){if(e&&(Nt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(n)}function Ee(n){var e=ry();return function(){var r=Gs(n),i;if(e){var s=Gs(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return ny(this,i)}}function Ce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iy(n,e){if(Nt(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Nt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ed(n){var e=iy(n,"string");return Nt(e)==="symbol"?e:String(e)}function tu(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ed(r.key),r)}}function Te(n,e,t){return e&&tu(n.prototype,e),t&&tu(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function $(n,e,t){return e=Ed(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var sy=10,Fd=function(){function n(){Ce(this,n),$(this,"priority",void 0),$(this,"subPriority",0)}return Te(n,[{key:"validate",value:function(t,r){return!0}}]),n}(),oy=function(n){Pe(t,n);var e=Ee(t);function t(r,i,s,o,a){var l;return Ce(this,t),l=e.call(this),l.value=r,l.validateValue=i,l.setValue=s,l.priority=o,a&&(l.subPriority=a),l}return Te(t,[{key:"validate",value:function(i,s){return this.validateValue(i,this.value,s)}},{key:"set",value:function(i,s,o){return this.setValue(i,s,this.value,o)}}]),t}(Fd),ay=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",sy),$(Z(r),"subPriority",-1),r}return Te(t,[{key:"set",value:function(i,s){if(s.timestampIsSet)return i;var o=new Date(0);return o.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),o.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),o}}]),t}(Fd),Ae=function(){function n(){Ce(this,n),$(this,"incompatibleTokens",void 0),$(this,"priority",void 0),$(this,"subPriority",void 0)}return Te(n,[{key:"run",value:function(t,r,i,s){var o=this.parse(t,r,i,s);return o?{setter:new oy(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(t,r,i){return!0}}]),n}(),ly=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",140),$(Z(r),"incompatibleTokens",["R","u","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"});case"GGGGG":return o.era(i,{width:"narrow"});case"GGGG":default:return o.era(i,{width:"wide"})||o.era(i,{width:"abbreviated"})||o.era(i,{width:"narrow"})}}},{key:"set",value:function(i,s,o){return s.era=o,i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),tt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},cr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function rt(n,e){return n&&{value:e(n.value),rest:n.rest}}function Ge(n,e){var t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function ur(n,e){var t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};var r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(i*yd+s*bl+o*Mv),rest:e.slice(t[0].length)}}function Ad(n){return Ge(tt.anyDigitsSigned,n)}function Ke(n,e){switch(n){case 1:return Ge(tt.singleDigit,e);case 2:return Ge(tt.twoDigits,e);case 3:return Ge(tt.threeDigits,e);case 4:return Ge(tt.fourDigits,e);default:return Ge(new RegExp("^\\d{1,"+n+"}"),e)}}function qs(n,e){switch(n){case 1:return Ge(tt.singleDigitSigned,e);case 2:return Ge(tt.twoDigitsSigned,e);case 3:return Ge(tt.threeDigitsSigned,e);case 4:return Ge(tt.fourDigitsSigned,e);default:return Ge(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Dl(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Ld(n,e){var t=e>0,r=t?e:1-e,i;if(r<=50)i=n||100;else{var s=r+50,o=Math.floor(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return t?i:1-i}function Rd(n){return n%400===0||n%4===0&&n%100!==0}var cy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",130),$(Z(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="yy"}};switch(s){case"y":return rt(Ke(4,i),a);case"yo":return rt(o.ordinalNumber(i,{unit:"year"}),a);default:return rt(Ke(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o){var a=i.getUTCFullYear();if(o.isTwoDigitYear){var l=Ld(o.year,a);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}var c=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(c,0,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),uy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",130),$(Z(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){var a=function(c){return{year:c,isTwoDigitYear:s==="YY"}};switch(s){case"Y":return rt(Ke(4,i),a);case"Yo":return rt(o.ordinalNumber(i,{unit:"year"}),a);default:return rt(Ke(s.length,i),a)}}},{key:"validate",value:function(i,s){return s.isTwoDigitYear||s.year>0}},{key:"set",value:function(i,s,o,a){var l=Tl(i,a);if(o.isTwoDigitYear){var c=Ld(o.year,l);return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),bn(i,a)}var u=!("era"in s)||s.era===1?o.year:1-o.year;return i.setUTCFullYear(u,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),bn(i,a)}}]),t}(Ae),hy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",130),$(Z(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s){return qs(s==="R"?4:s.length,i)}},{key:"set",value:function(i,s,o){var a=new Date(0);return a.setUTCFullYear(o,0,4),a.setUTCHours(0,0,0,0),Kn(a)}}]),t}(Ae),dy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",130),$(Z(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s){return qs(s==="u"?4:s.length,i)}},{key:"set",value:function(i,s,o){return i.setUTCFullYear(o,0,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),fy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",120),$(Z(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"Q":case"QQ":return Ke(s.length,i);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(i,{width:"wide",context:"formatting"})||o.quarter(i,{width:"abbreviated",context:"formatting"})||o.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),gy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",120),$(Z(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"q":case"qq":return Ke(s.length,i);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(i,{width:"wide",context:"standalone"})||o.quarter(i,{width:"abbreviated",context:"standalone"})||o.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=1&&s<=4}},{key:"set",value:function(i,s,o){return i.setUTCMonth((o-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),py=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),$(Z(r),"priority",110),r}return Te(t,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"M":return rt(Ge(tt.month,i),a);case"MM":return rt(Ke(2,i),a);case"Mo":return rt(o.ordinalNumber(i,{unit:"month"}),a);case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(i,{width:"wide",context:"formatting"})||o.month(i,{width:"abbreviated",context:"formatting"})||o.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),my=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",110),$(Z(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){var a=function(c){return c-1};switch(s){case"L":return rt(Ge(tt.month,i),a);case"LL":return rt(Ke(2,i),a);case"Lo":return rt(o.ordinalNumber(i,{unit:"month"}),a);case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(i,{width:"wide",context:"standalone"})||o.month(i,{width:"abbreviated",context:"standalone"})||o.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){return i.setUTCMonth(o,1),i.setUTCHours(0,0,0,0),i}}]),t}(Ae);function _y(n,e,t){z(2,arguments);var r=Y(n),i=ve(e),s=Dd(r,t)-i;return r.setUTCDate(r.getUTCDate()-s*7),r}var vy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",100),$(Z(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"w":return Ge(tt.week,i);case"wo":return o.ordinalNumber(i,{unit:"week"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o,a){return bn(_y(i,o,a),a)}}]),t}(Ae);function wy(n,e){z(2,arguments);var t=Y(n),r=ve(e),i=Td(t)-r;return t.setUTCDate(t.getUTCDate()-i*7),t}var yy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",100),$(Z(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"I":return Ge(tt.week,i);case"Io":return o.ordinalNumber(i,{unit:"week"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=53}},{key:"set",value:function(i,s,o){return Kn(wy(i,o))}}]),t}(Ae),by=[31,28,31,30,31,30,31,31,30,31,30,31],xy=[31,29,31,30,31,30,31,31,30,31,30,31],Sy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"subPriority",1),$(Z(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"d":return Ge(tt.date,i);case"do":return o.ordinalNumber(i,{unit:"date"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Rd(o),l=i.getUTCMonth();return a?s>=1&&s<=xy[l]:s>=1&&s<=by[l]}},{key:"set",value:function(i,s,o){return i.setUTCDate(o),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),Cy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"subpriority",1),$(Z(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"D":case"DD":return Ge(tt.dayOfYear,i);case"Do":return o.ordinalNumber(i,{unit:"date"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){var o=i.getUTCFullYear(),a=Rd(o);return a?s>=1&&s<=366:s>=1&&s<=365}},{key:"set",value:function(i,s,o){return i.setUTCMonth(0,o),i.setUTCHours(0,0,0,0),i}}]),t}(Ae);function Ol(n,e,t){var r,i,s,o,a,l,c,u;z(2,arguments);var h=Fr(),d=ve((r=(i=(s=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&i!==void 0?i:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Y(n),g=ve(e),p=f.getUTCDay(),_=g%7,y=(_+7)%7,w=(y<d?7:0)+g-p;return f.setUTCDate(f.getUTCDate()+w),f}var Ty=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Ol(i,o,a),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),Dy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o,a){var l=function(u){var h=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+h};switch(s){case"e":case"ee":return rt(Ke(s.length,i),l);case"eo":return rt(o.ordinalNumber(i,{unit:"day"}),l);case"eee":return o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeeee":return o.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Ol(i,o,a),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),Oy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o,a){var l=function(u){var h=Math.floor((u-1)/7)*7;return(u+a.weekStartsOn+6)%7+h};switch(s){case"c":case"cc":return rt(Ke(s.length,i),l);case"co":return rt(o.ordinalNumber(i,{unit:"day"}),l);case"ccc":return o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"ccccc":return o.day(i,{width:"narrow",context:"standalone"});case"cccccc":return o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(i,{width:"wide",context:"standalone"})||o.day(i,{width:"abbreviated",context:"standalone"})||o.day(i,{width:"short",context:"standalone"})||o.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,s){return s>=0&&s<=6}},{key:"set",value:function(i,s,o,a){return i=Ol(i,o,a),i.setUTCHours(0,0,0,0),i}}]),t}(Ae);function ky(n,e){z(2,arguments);var t=ve(e);t%7===0&&(t=t-7);var r=1,i=Y(n),s=i.getUTCDay(),o=t%7,a=(o+7)%7,l=(a<r?7:0)+t-s;return i.setUTCDate(i.getUTCDate()+l),i}var My=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",90),$(Z(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){var a=function(c){return c===0?7:c};switch(s){case"i":case"ii":return Ke(s.length,i);case"io":return o.ordinalNumber(i,{unit:"day"});case"iii":return rt(o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return rt(o.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return rt(o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return rt(o.day(i,{width:"wide",context:"formatting"})||o.day(i,{width:"abbreviated",context:"formatting"})||o.day(i,{width:"short",context:"formatting"})||o.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,s){return s>=1&&s<=7}},{key:"set",value:function(i,s,o){return i=ky(i,o),i.setUTCHours(0,0,0,0),i}}]),t}(Ae),Py=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",80),$(Z(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"a":case"aa":case"aaa":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dl(o),0,0,0),i}}]),t}(Ae),Ey=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",80),$(Z(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"b":case"bb":case"bbb":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dl(o),0,0,0),i}}]),t}(Ae),Fy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",80),$(Z(r),"incompatibleTokens",["a","b","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"B":case"BB":case"BBB":return o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(i,{width:"wide",context:"formatting"})||o.dayPeriod(i,{width:"abbreviated",context:"formatting"})||o.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,s,o){return i.setUTCHours(Dl(o),0,0,0),i}}]),t}(Ae),Ay=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",70),$(Z(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"h":return Ge(tt.hour12h,i);case"ho":return o.ordinalNumber(i,{unit:"hour"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=12}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):!a&&o===12?i.setUTCHours(0,0,0,0):i.setUTCHours(o,0,0,0),i}}]),t}(Ae),Ly=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",70),$(Z(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"H":return Ge(tt.hour23h,i);case"Ho":return o.ordinalNumber(i,{unit:"hour"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=23}},{key:"set",value:function(i,s,o){return i.setUTCHours(o,0,0,0),i}}]),t}(Ae),Ry=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",70),$(Z(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"K":return Ge(tt.hour11h,i);case"Ko":return o.ordinalNumber(i,{unit:"hour"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=11}},{key:"set",value:function(i,s,o){var a=i.getUTCHours()>=12;return a&&o<12?i.setUTCHours(o+12,0,0,0):i.setUTCHours(o,0,0,0),i}}]),t}(Ae),Iy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",70),$(Z(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"k":return Ge(tt.hour24h,i);case"ko":return o.ordinalNumber(i,{unit:"hour"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=1&&s<=24}},{key:"set",value:function(i,s,o){var a=o<=24?o%24:o;return i.setUTCHours(a,0,0,0),i}}]),t}(Ae),jy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",60),$(Z(r),"incompatibleTokens",["t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"m":return Ge(tt.minute,i);case"mo":return o.ordinalNumber(i,{unit:"minute"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCMinutes(o,0,0),i}}]),t}(Ae),Vy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",50),$(Z(r),"incompatibleTokens",["t","T"]),r}return Te(t,[{key:"parse",value:function(i,s,o){switch(s){case"s":return Ge(tt.second,i);case"so":return o.ordinalNumber(i,{unit:"second"});default:return Ke(s.length,i)}}},{key:"validate",value:function(i,s){return s>=0&&s<=59}},{key:"set",value:function(i,s,o){return i.setUTCSeconds(o,0),i}}]),t}(Ae),By=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",30),$(Z(r),"incompatibleTokens",["t","T"]),r}return Te(t,[{key:"parse",value:function(i,s){var o=function(l){return Math.floor(l*Math.pow(10,-s.length+3))};return rt(Ke(s.length,i),o)}},{key:"set",value:function(i,s,o){return i.setUTCMilliseconds(o),i}}]),t}(Ae),Uy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",10),$(Z(r),"incompatibleTokens",["t","T","x"]),r}return Te(t,[{key:"parse",value:function(i,s){switch(s){case"X":return ur(cr.basicOptionalMinutes,i);case"XX":return ur(cr.basic,i);case"XXXX":return ur(cr.basicOptionalSeconds,i);case"XXXXX":return ur(cr.extendedOptionalSeconds,i);case"XXX":default:return ur(cr.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),t}(Ae),Ny=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",10),$(Z(r),"incompatibleTokens",["t","T","X"]),r}return Te(t,[{key:"parse",value:function(i,s){switch(s){case"x":return ur(cr.basicOptionalMinutes,i);case"xx":return ur(cr.basic,i);case"xxxx":return ur(cr.basicOptionalSeconds,i);case"xxxxx":return ur(cr.extendedOptionalSeconds,i);case"xxx":default:return ur(cr.extended,i)}}},{key:"set",value:function(i,s,o){return s.timestampIsSet?i:new Date(i.getTime()-o)}}]),t}(Ae),Hy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",40),$(Z(r),"incompatibleTokens","*"),r}return Te(t,[{key:"parse",value:function(i){return Ad(i)}},{key:"set",value:function(i,s,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),t}(Ae),Wy=function(n){Pe(t,n);var e=Ee(t);function t(){var r;Ce(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),$(Z(r),"priority",20),$(Z(r),"incompatibleTokens","*"),r}return Te(t,[{key:"parse",value:function(i){return Ad(i)}},{key:"set",value:function(i,s,o){return[new Date(o),{timestampIsSet:!0}]}}]),t}(Ae),Yy={G:new ly,y:new cy,Y:new uy,R:new hy,u:new dy,Q:new fy,q:new gy,M:new py,L:new my,w:new vy,I:new yy,d:new Sy,D:new Cy,E:new Ty,e:new Dy,c:new Oy,i:new My,a:new Py,b:new Ey,B:new Fy,h:new Ay,H:new Ly,K:new Ry,k:new Iy,m:new jy,s:new Vy,S:new By,X:new Uy,x:new Ny,t:new Hy,T:new Wy},Xy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$y=/^'([^]*?)'?$/,Gy=/''/g,qy=/\S/,Ky=/[a-zA-Z]/;function ru(n,e,t,r){var i,s,o,a,l,c,u,h,d,f,g,p,_,y,w,T,b,P;z(3,arguments);var R=String(n),N=String(e),U=Fr(),G=(i=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:U.locale)!==null&&i!==void 0?i:Pd;if(!G.match)throw new RangeError("locale must contain match property");var re=ve((o=(a=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&l!==void 0?l:U.firstWeekContainsDate)!==null&&a!==void 0?a:(d=U.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var me=ve((g=(p=(_=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(w=r.locale)===null||w===void 0||(T=w.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&_!==void 0?_:U.weekStartsOn)!==null&&p!==void 0?p:(b=U.locale)===null||b===void 0||(P=b.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(me>=0&&me<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(N==="")return R===""?Y(t):new Date(NaN);var ge={firstWeekContainsDate:re,weekStartsOn:me,locale:G},ye=[new ay],_e=N.match(zy).map(function(M){var E=M[0];if(E in Aa){var W=Aa[E];return W(M,G.formatLong)}return M}).join("").match(Xy),ae=[],ne=eu(_e),pe;try{var he=function(){var E=pe.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Md(E)&&$s(E,N,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kd(E)&&$s(E,N,n);var W=E[0],ce=Yy[W];if(ce){var m=ce.incompatibleTokens;if(Array.isArray(m)){var v=ae.find(function(k){return m.includes(k.token)||k.token===W});if(v)throw new RangeError("The format string mustn't contain `".concat(v.fullToken,"` and `").concat(E,"` at the same time"))}else if(ce.incompatibleTokens==="*"&&ae.length>0)throw new RangeError("The format string mustn't contain `".concat(E,"` and any other token at the same time"));ae.push({token:W,fullToken:E});var D=ce.run(R,E,G.match,ge);if(!D)return{v:new Date(NaN)};ye.push(D.setter),R=D.rest}else{if(W.match(Ky))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");if(E==="''"?E="'":W==="'"&&(E=Zy(E)),R.indexOf(E)===0)R=R.slice(E.length);else return{v:new Date(NaN)}}};for(ne.s();!(pe=ne.n()).done;){var lt=he();if(Nt(lt)==="object")return lt.v}}catch(M){ne.e(M)}finally{ne.f()}if(R.length>0&&qy.test(R))return new Date(NaN);var Wt=ye.map(function(M){return M.priority}).sort(function(M,E){return E-M}).filter(function(M,E,W){return W.indexOf(M)===E}).map(function(M){return ye.filter(function(E){return E.priority===M}).sort(function(E,W){return W.subPriority-E.subPriority})}).map(function(M){return M[0]}),Ze=Y(t);if(isNaN(Ze.getTime()))return new Date(NaN);var ze=Sd(Ze,zs(Ze)),Lt={},Rt=eu(Wt),wr;try{for(Rt.s();!(wr=Rt.n()).done;){var qe=wr.value;if(!qe.validate(ze,ge))return new Date(NaN);var C=qe.set(ze,Lt,ge);Array.isArray(C)?(ze=C[0],Zw(Lt,C[1])):ze=C}}catch(M){Rt.e(M)}finally{Rt.f()}return ze}function Zy(n){return n.match($y)[1].replace(Gy,"'")}function nu(n){z(1,arguments);var e=Y(n);return e.setMinutes(0,0,0),e}function Qy(n,e){z(2,arguments);var t=nu(n),r=nu(e);return t.getTime()===r.getTime()}function Jy(n,e){z(2,arguments);var t=qc(n),r=qc(e);return t.getTime()===r.getTime()}function Ra(n,e){z(2,arguments);var t=Y(n),r=Y(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function iu(n,e){z(2,arguments);var t=Y(n),r=Y(e);return t.getFullYear()===r.getFullYear()}function eb(n,e){z(2,arguments);var t=Y(n).getTime(),r=Y(e.start).getTime(),i=Y(e.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return t>=r&&t<=i}function tb(n,e){z(2,arguments);var t=ve(e);return To(n,-t)}function rb(n){return z(1,arguments),Math.floor(n*bl)}function nb(n,e){z(2,arguments);var t=Y(n),r=ve(e),i=t.getFullYear(),s=t.getDate(),o=new Date(0);o.setFullYear(i,r,15),o.setHours(0,0,0,0);var a=Jw(o);return t.setMonth(r,Math.min(s,a)),t}function su(n,e){if(z(2,arguments),Nt(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var t=Y(n);return isNaN(t.getTime())?new Date(NaN):(e.year!=null&&t.setFullYear(e.year),e.month!=null&&(t=nb(t,e.month)),e.date!=null&&t.setDate(ve(e.date)),e.hours!=null&&t.setHours(ve(e.hours)),e.minutes!=null&&t.setMinutes(ve(e.minutes)),e.seconds!=null&&t.setSeconds(ve(e.seconds)),e.milliseconds!=null&&t.setMilliseconds(ve(e.milliseconds)),t)}function ib(n,e,t){var r,i,s,o,a,l,c,u;z(2,arguments);var h=Fr(),d=ve((r=(i=(s=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&i!==void 0?i:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Y(n),g=ve(e),p=f.getDay(),_=g%7,y=(_+7)%7,w=7-d,T=g<0||g>6?g-(p+w)%7:(y+w)%7-(p+w)%7;return To(f,T)}function sb(n){z(1,arguments);var e=Y(n),t=e.getFullYear(),r=Math.floor(t/10)*10;return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}function ob(n,e){z(2,arguments);var t=ve(e);return Do(n,-t)}function Id(n,e){z(2,arguments);var t=ve(e);return yl(n,-t)}const ni=X_("relapse",()=>{const n=Me(!1),e=Me(null),t=Me(null),r=K(()=>e.value),i=K(()=>r.value&&r.value.Captures.length>0?r.value.Captures:[]),s=K(()=>i.value.findIndex(g=>g.IsReal)||0),o=K(()=>i.value.findLastIndex(g=>g.IsReal)||0),a=K(()=>e.value?e.value.Summary:null),l=K(()=>t.value),c=K(()=>{let g=new Date;return r.value&&(g=new Date(r.value.Bod)),g});async function u(){t.value=await _v({})}async function h(g){let p=await vv(g);t.value&&(t.value.Settings=p)}async function d(g){try{let p=await wv({Dt:Qw(qn(g))});e.value=p}catch(p){console.error("loadDay error",p)}}async function f(){await d(new Date)}return{isHelpShown:n,day:e,settings:t,currentDay:r,currentDaySummary:a,captures:i,earliestCaptureIndex:s,latestCaptureIndex:o,appSettings:l,currentDate:c,loadSettings:u,saveSettings:h,loadDay:d,loadToday:f}});class ab{constructor(e="http://localhost:5020/events?stream=messages"){Uo(this,"src");Uo(this,"callbacks");this.src=new EventSource(e),this.callbacks={},this.src.onmessage=t=>{const r=JSON.parse(t.data);if(this.callbacks[r.messageType])for(let i of Array.from(this.callbacks[r.messageType]))i(r.data)}}addEvent(e,t){this.callbacks[e]?this.callbacks[e].add(t):(this.callbacks[e]=new Set,this.callbacks[e].add(t))}}const lb=new ab;function Ki(n,e){lb.addEvent(n,e)}function jd(n,e=null,t="MainWindow"){console.log("triggering event",n,"on window",t);let r="http://localhost:5020/trigger?qs=1";n&&(r+=`&event=${n}`),t&&(r+=`&window=${t}`),fetch(r,{method:"POST",headers:{"Content-Type":"text/plain"},body:e}).then(i=>i.json()).then(i=>console.log(i)).catch(i=>console.error("Error:",i))}const cb=gt({__name:"App",setup(n){let e=Me(!0);const t=ni();function r(){jd("maximise")}function i(){console.log("onWindowBlur happened"),e.value=!1}function s(){console.log("onWindowFocus happened"),e.value=!0}return Er(()=>{console.log("document.title",document.title),Ki("blur",i),Ki("focus",s),t.loadSettings()}),(o,a)=>{const l=Xt("router-view");return Q(),ie("div",{class:Pt(["main-body",{"is-focused":et(e),"is-blurred":!et(e)}])},[I("div",{class:"handlebar",onDblclick:r,style:{"--wails-draggable":"drag"}},null,32),Se(l)],2)}}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Fn=typeof window<"u";function ub(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Le=Object.assign;function Qo(n,e){const t={};for(const r in e){const i=e[r];t[r]=tr(i)?i.map(n):n(i)}return t}const Ai=()=>{},tr=Array.isArray,hb=/\/$/,db=n=>n.replace(hb,"");function Jo(n,e,t="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=n(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mb(r??e,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function fb(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ou(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function gb(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Zn(e.matched[r],t.matched[i])&&Vd(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Zn(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Vd(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!pb(n[t],e[t]))return!1;return!0}function pb(n,e){return tr(n)?au(n,e):tr(e)?au(e,n):n===e}function au(n,e){return tr(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function mb(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Zi;(function(n){n.pop="pop",n.push="push"})(Zi||(Zi={}));var Li;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Li||(Li={}));function _b(n){if(!n)if(Fn){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),db(n)}const vb=/^[^#]+#/;function wb(n,e){return n.replace(vb,"#")+e}function yb(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Oo=()=>({left:window.pageXOffset,top:window.pageYOffset});function bb(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=yb(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function lu(n,e){return(history.state?history.state.position-e:-1)+n}const Ia=new Map;function xb(n,e){Ia.set(n,e)}function Sb(n){const e=Ia.get(n);return Ia.delete(n),e}let Cb=()=>location.protocol+"//"+location.host;function Bd(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ou(l,"")}return ou(t,n)+r+i}function Tb(n,e,t,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=Bd(n,location),g=t.value,p=e.value;let _=0;if(d){if(t.value=f,e.value=d,o&&o===g){o=null;return}_=p?d.position-p.position:0}else r(f);i.forEach(y=>{y(t.value,g,{delta:_,type:Zi.pop,direction:_?_>0?Li.forward:Li.back:Li.unknown})})};function l(){o=t.value}function c(d){i.push(d);const f=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Le({},d.state,{scroll:Oo()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function cu(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?Oo():null}}function Db(n){const{history:e,location:t}=window,r={value:Bd(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=n.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:Cb()+n+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(l,c){const u=Le({},e.state,cu(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=Le({},i.value,e.state,{forward:l,scroll:Oo()});s(u.current,u,!0);const h=Le({},cu(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function Ob(n){n=_b(n);const e=Db(n),t=Tb(n,e.state,e.location,e.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=Le({location:"",base:n,go:r,createHref:wb.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function kb(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),Ob(n)}function Mb(n){return typeof n=="string"||n&&typeof n=="object"}function Ud(n){return typeof n=="string"||typeof n=="symbol"}const jr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Nd=Symbol("");var uu;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(uu||(uu={}));function Qn(n,e){return Le(new Error,{type:n,[Nd]:!0},e)}function yr(n,e){return n instanceof Error&&Nd in n&&(e==null||!!(n.type&e))}const hu="[^/]+?",Pb={sensitive:!1,strict:!1,start:!0,end:!0},Eb=/[.+*?^${}()[\]/\\]/g;function Fb(n,e){const t=Le({},Pb,e),r=[];let i=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(Eb,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:_,regexp:y}=d;s.push({name:g,repeatable:p,optional:_});const w=y||hu;if(w!==hu){f+=10;try{new RegExp(`(${w})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+b.message)}}let T=p?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(T=_&&c.length<2?`(?:/${T})`:"/"+T),_&&(T+="?"),i+=T,f+=20,_&&(f+=-8),p&&(f+=-20),w===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(t.strict&&t.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=s[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:_}=f,y=g in c?c[g]:"";if(tr(y)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=tr(y)?y.join("/"):y;if(!w)if(_)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=w}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function Ab(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Lb(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=Ab(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(du(r))return 1;if(du(i))return-1}return i.length-r.length}function du(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Rb={type:0,value:""},Ib=/[a-zA-Z0-9_]/;function jb(n){if(!n)return[[]];if(n==="/")return[[Rb]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=r;break;case 1:l==="("?t=2:Ib.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function Vb(n,e,t){const r=Fb(jb(n.path),t),i=Le(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function Bb(n,e){const t=[],r=new Map;e=pu({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,g=Ub(u);g.aliasOf=d&&d.record;const p=pu(e,u),_=[g];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const b of T)_.push(Le({},g,{components:d?d.record.components:g.components,path:b,aliasOf:d?d.record:g}))}let y,w;for(const T of _){const{path:b}=T;if(h&&b[0]!=="/"){const P=h.record.path,R=P[P.length-1]==="/"?"":"/";T.path=h.record.path+(b&&R+b)}if(y=Vb(T,h,p),d?d.alias.push(y):(w=w||y,w!==y&&w.alias.push(y),f&&u.name&&!gu(y)&&o(u.name)),g.children){const P=g.children;for(let R=0;R<P.length;R++)s(P[R],y,d&&d.children[R])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return w?()=>{o(w)}:Ai}function o(u){if(Ud(u)){const h=r.get(u);h&&(r.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&Lb(u,t[h])>=0&&(u.record.path!==t[h].record.path||!Hd(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!gu(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},g,p;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Qn(1,{location:u});p=d.record.name,f=Le(fu(h.params,d.keys.filter(w=>!w.optional).map(w=>w.name)),u.params&&fu(u.params,d.keys.map(w=>w.name))),g=d.stringify(f)}else if("path"in u)g=u.path,d=t.find(w=>w.re.test(g)),d&&(f=d.parse(g),p=d.record.name);else{if(d=h.name?r.get(h.name):t.find(w=>w.re.test(h.path)),!d)throw Qn(1,{location:u,currentLocation:h});p=d.record.name,f=Le({},h.params,u.params),g=d.stringify(f)}const _=[];let y=d;for(;y;)_.unshift(y.record),y=y.parent;return{name:p,path:g,params:f,matched:_,meta:Hb(_)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function fu(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function Ub(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:Nb(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function Nb(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function gu(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function Hb(n){return n.reduce((e,t)=>Le(e,t.meta),{})}function pu(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function Hd(n,e){return e.children.some(t=>t===n||Hd(n,t))}const Wd=/#/g,Wb=/&/g,Yb=/\//g,Xb=/=/g,zb=/\?/g,Yd=/\+/g,$b=/%5B/g,Gb=/%5D/g,Xd=/%5E/g,qb=/%60/g,zd=/%7B/g,Kb=/%7C/g,$d=/%7D/g,Zb=/%20/g;function kl(n){return encodeURI(""+n).replace(Kb,"|").replace($b,"[").replace(Gb,"]")}function Qb(n){return kl(n).replace(zd,"{").replace($d,"}").replace(Xd,"^")}function ja(n){return kl(n).replace(Yd,"%2B").replace(Zb,"+").replace(Wd,"%23").replace(Wb,"%26").replace(qb,"`").replace(zd,"{").replace($d,"}").replace(Xd,"^")}function Jb(n){return ja(n).replace(Xb,"%3D")}function e1(n){return kl(n).replace(Wd,"%23").replace(zb,"%3F")}function t1(n){return n==null?"":e1(n).replace(Yb,"%2F")}function Ks(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function r1(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Yd," "),o=s.indexOf("="),a=Ks(o<0?s:s.slice(0,o)),l=o<0?null:Ks(s.slice(o+1));if(a in e){let c=e[a];tr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function mu(n){let e="";for(let t in n){const r=n[t];if(t=Jb(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(tr(r)?r.map(s=>s&&ja(s)):[r&&ja(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function n1(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=tr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const i1=Symbol(""),_u=Symbol(""),Ml=Symbol(""),Gd=Symbol(""),Va=Symbol("");function wi(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Hr(n,e,t,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Qn(4,{from:t,to:e})):h instanceof Error?a(h):Mb(h)?a(Qn(2,{from:e,to:h})):(s&&r.enterCallbacks[i]===s&&typeof h=="function"&&s.push(h),o())},c=n.call(r&&r.instances[i],e,t,l);let u=Promise.resolve(c);n.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function ea(n,e,t,r){const i=[];for(const s of n)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(s1(a)){const c=(a.__vccOpts||a)[e];c&&i.push(Hr(c,t,r,s,o))}else{let l=a();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=ub(c)?c.default:c;s.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Hr(d,t,r,s,o)()}))}}return i}function s1(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function vu(n){const e=gr(Ml),t=gr(Gd),r=K(()=>e.resolve(et(n.to))),i=K(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(Zn.bind(null,u));if(d>-1)return d;const f=wu(l[c-2]);return c>1&&wu(u)===f&&h[h.length-1].path!==f?h.findIndex(Zn.bind(null,l[c-2])):d}),s=K(()=>i.value>-1&&c1(t.params,r.value.params)),o=K(()=>i.value>-1&&i.value===t.matched.length-1&&Vd(t.params,r.value.params));function a(l={}){return l1(l)?e[et(n.replace)?"replace":"push"](et(n.to)).catch(Ai):Promise.resolve()}return{route:r,href:K(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const o1=gt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:vu,setup(n,{slots:e}){const t=rs(vu(n)),{options:r}=gr(Ml),i=K(()=>({[yu(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[yu(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:ld("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),a1=o1;function l1(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function c1(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!tr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function wu(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const yu=(n,e,t)=>n??e??t,u1=gt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=gr(Va),i=K(()=>n.route||r.value),s=gr(_u,0),o=K(()=>{let c=et(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=K(()=>i.value.matched[o.value]);Os(_u,K(()=>o.value+1)),Os(i1,a),Os(Va,i);const l=Me();return fr(()=>[l.value,a.value,n.name],([c,u,h],[d,f,g])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Zn(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=i.value,u=n.name,h=a.value,d=h&&h.components[u];if(!d)return bu(t.default,{Component:d,route:c});const f=h.props[u],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,_=ld(d,Le({},g,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return bu(t.default,{Component:_,route:c})||_}}});function bu(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const h1=u1;function d1(n){const e=Bb(n.routes,n),t=n.parseQuery||r1,r=n.stringifyQuery||mu,i=n.history,s=wi(),o=wi(),a=wi(),l=Zg(jr);let c=jr;Fn&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Qo.bind(null,C=>""+C),h=Qo.bind(null,t1),d=Qo.bind(null,Ks);function f(C,M){let E,W;return Ud(C)?(E=e.getRecordMatcher(C),W=M):W=C,e.addRoute(W,E)}function g(C){const M=e.getRecordMatcher(C);M&&e.removeRoute(M)}function p(){return e.getRoutes().map(C=>C.record)}function _(C){return!!e.getRecordMatcher(C)}function y(C,M){if(M=Le({},M||l.value),typeof C=="string"){const D=Jo(t,C,M.path),k=e.resolve({path:D.path},M),A=i.createHref(D.fullPath);return Le(D,k,{params:d(k.params),hash:Ks(D.hash),redirectedFrom:void 0,href:A})}let E;if("path"in C)E=Le({},C,{path:Jo(t,C.path,M.path).path});else{const D=Le({},C.params);for(const k in D)D[k]==null&&delete D[k];E=Le({},C,{params:h(D)}),M.params=h(M.params)}const W=e.resolve(E,M),ce=C.hash||"";W.params=u(d(W.params));const m=fb(r,Le({},C,{hash:Qb(ce),path:W.path})),v=i.createHref(m);return Le({fullPath:m,hash:ce,query:r===mu?n1(C.query):C.query||{}},W,{redirectedFrom:void 0,href:v})}function w(C){return typeof C=="string"?Jo(t,C,l.value.path):Le({},C)}function T(C,M){if(c!==C)return Qn(8,{from:M,to:C})}function b(C){return N(C)}function P(C){return b(Le(w(C),{replace:!0}))}function R(C){const M=C.matched[C.matched.length-1];if(M&&M.redirect){const{redirect:E}=M;let W=typeof E=="function"?E(C):E;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=w(W):{path:W},W.params={}),Le({query:C.query,hash:C.hash,params:"path"in W?{}:C.params},W)}}function N(C,M){const E=c=y(C),W=l.value,ce=C.state,m=C.force,v=C.replace===!0,D=R(E);if(D)return N(Le(w(D),{state:typeof D=="object"?Le({},ce,D.state):ce,force:m,replace:v}),M||E);const k=E;k.redirectedFrom=M;let A;return!m&&gb(r,W,E)&&(A=Qn(16,{to:k,from:W}),Ze(W,W,!0,!1)),(A?Promise.resolve(A):re(k,W)).catch(V=>yr(V)?yr(V,2)?V:Wt(V):he(V,k,W)).then(V=>{if(V){if(yr(V,2))return N(Le({replace:v},w(V.to),{state:typeof V.to=="object"?Le({},ce,V.to.state):ce,force:m}),M||k)}else V=ge(k,W,!0,v,ce);return me(k,W,V),V})}function U(C,M){const E=T(C,M);return E?Promise.reject(E):Promise.resolve()}function G(C){const M=Rt.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(C):C()}function re(C,M){let E;const[W,ce,m]=f1(C,M);E=ea(W.reverse(),"beforeRouteLeave",C,M);for(const D of W)D.leaveGuards.forEach(k=>{E.push(Hr(k,C,M))});const v=U.bind(null,C,M);return E.push(v),qe(E).then(()=>{E=[];for(const D of s.list())E.push(Hr(D,C,M));return E.push(v),qe(E)}).then(()=>{E=ea(ce,"beforeRouteUpdate",C,M);for(const D of ce)D.updateGuards.forEach(k=>{E.push(Hr(k,C,M))});return E.push(v),qe(E)}).then(()=>{E=[];for(const D of m)if(D.beforeEnter)if(tr(D.beforeEnter))for(const k of D.beforeEnter)E.push(Hr(k,C,M));else E.push(Hr(D.beforeEnter,C,M));return E.push(v),qe(E)}).then(()=>(C.matched.forEach(D=>D.enterCallbacks={}),E=ea(m,"beforeRouteEnter",C,M),E.push(v),qe(E))).then(()=>{E=[];for(const D of o.list())E.push(Hr(D,C,M));return E.push(v),qe(E)}).catch(D=>yr(D,8)?D:Promise.reject(D))}function me(C,M,E){a.list().forEach(W=>G(()=>W(C,M,E)))}function ge(C,M,E,W,ce){const m=T(C,M);if(m)return m;const v=M===jr,D=Fn?history.state:{};E&&(W||v?i.replace(C.fullPath,Le({scroll:v&&D&&D.scroll},ce)):i.push(C.fullPath,ce)),l.value=C,Ze(C,M,E,v),Wt()}let ye;function _e(){ye||(ye=i.listen((C,M,E)=>{if(!wr.listening)return;const W=y(C),ce=R(W);if(ce){N(Le(ce,{replace:!0}),W).catch(Ai);return}c=W;const m=l.value;Fn&&xb(lu(m.fullPath,E.delta),Oo()),re(W,m).catch(v=>yr(v,12)?v:yr(v,2)?(N(v.to,W).then(D=>{yr(D,20)&&!E.delta&&E.type===Zi.pop&&i.go(-1,!1)}).catch(Ai),Promise.reject()):(E.delta&&i.go(-E.delta,!1),he(v,W,m))).then(v=>{v=v||ge(W,m,!1),v&&(E.delta&&!yr(v,8)?i.go(-E.delta,!1):E.type===Zi.pop&&yr(v,20)&&i.go(-1,!1)),me(W,m,v)}).catch(Ai)}))}let ae=wi(),ne=wi(),pe;function he(C,M,E){Wt(C);const W=ne.list();return W.length?W.forEach(ce=>ce(C,M,E)):console.error(C),Promise.reject(C)}function lt(){return pe&&l.value!==jr?Promise.resolve():new Promise((C,M)=>{ae.add([C,M])})}function Wt(C){return pe||(pe=!C,_e(),ae.list().forEach(([M,E])=>C?E(C):M()),ae.reset()),C}function Ze(C,M,E,W){const{scrollBehavior:ce}=n;if(!Fn||!ce)return Promise.resolve();const m=!E&&Sb(lu(C.fullPath,0))||(W||!E)&&history.state&&history.state.scroll||null;return mo().then(()=>ce(C,M,m)).then(v=>v&&bb(v)).catch(v=>he(v,C,M))}const ze=C=>i.go(C);let Lt;const Rt=new Set,wr={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,hasRoute:_,getRoutes:p,resolve:y,options:n,push:b,replace:P,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ne.add,isReady:lt,install(C){const M=this;C.component("RouterLink",a1),C.component("RouterView",h1),C.config.globalProperties.$router=M,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>et(l)}),Fn&&!Lt&&l.value===jr&&(Lt=!0,b(i.location).catch(ce=>{}));const E={};for(const ce in jr)Object.defineProperty(E,ce,{get:()=>l.value[ce],enumerable:!0});C.provide(Ml,M),C.provide(Gd,Ph(E)),C.provide(Va,l);const W=C.unmount;Rt.add(C),C.unmount=function(){Rt.delete(C),Rt.size<1&&(c=jr,ye&&ye(),ye=null,l.value=jr,Lt=!1,pe=!1),W()}}};function qe(C){return C.reduce((M,E)=>M.then(()=>G(E)),Promise.resolve())}return wr}function f1(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(c=>Zn(c,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>Zn(c,l))||i.push(l))}return[t,r,i]}function xu(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xu(Object(t),!0).forEach(function(r){S(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xu(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S(n,e,t){return e=qd(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ba(){return Ba=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ba.apply(this,arguments)}function g1(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function p1(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Xe(n,e){if(n==null)return{};var t=p1(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function vr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function m1(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qd(n){var e=m1(n,"string");return typeof e=="symbol"?e:String(e)}class Su{constructor(){S(this,"browserShadowBlurConstant",1),S(this,"DPI",96),S(this,"devicePixelRatio",1),S(this,"perfLimitSizeTotal",2097152),S(this,"maxCacheSideLimit",4096),S(this,"minCacheSideLimit",256),S(this,"disableStyleCopyPaste",!1),S(this,"enableGLFiltering",!0),S(this,"textureSize",4096),S(this,"forceGLPutImageData",!1),S(this,"cachesBoundsOfCurve",!0),S(this,"fontPaths",{}),S(this,"NUM_FRACTION_DIGITS",4)}}class _1 extends Su{constructor(e){super(),this.configure(e)}configure(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,e)}addFonts(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=x(x({},this.fontPaths),e)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>{delete this.fontPaths[t]})}clearFonts(){this.fontPaths={}}restoreDefaults(e){const t=new Su,r=(e==null?void 0:e.reduce((i,s)=>(i[s]=t[s],i),{}))||t;this.configure(r)}}const we=new _1;class v1{}class w1 extends v1{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),i=e.createShader(e.FRAGMENT_SHADER);return i?(e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS)):!1}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),console.log("fabric: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const y1={};let Cu=!1,Tu;const b1=()=>(Cu||(we.configure({devicePixelRatio:window.devicePixelRatio||1}),Tu="ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,Cu=!0),{document,window,isTouchSupported:Tu,WebGLProbe:new w1,dispose(){},copyPasteData:y1}),mr=()=>b1(),ii=()=>mr().document,Ln=()=>mr().window;class x1{constructor(){S(this,"charWidthsCache",{}),S(this,"boundsOfCurveCache",{})}getFontCache(e){let{fontFamily:t,fontStyle:r,fontWeight:i}=e;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const s=this.charWidthsCache[t],o="".concat(r.toLowerCase(),"_").concat((i+"").toLowerCase());return s[o]||(s[o]={}),s[o]}clearFontCache(e){e=(e||"").toLowerCase(),e?this.charWidthsCache[e]&&delete this.charWidthsCache[e]:this.charWidthsCache={}}limitDimsByArea(e){const{perfLimitSizeTotal:t}=we,r=Math.sqrt(t*e);return[Math.floor(r),Math.floor(t/r)]}}const Ri=new x1;var S1="6.0.0-beta9";const Ua=S1;function Fs(){}const si=Math.PI/2,Kd=Math.PI*2,Pl=Math.PI/180,rr=Object.freeze([1,0,0,1,0,0]),El=16,Du=2,Vr=1-.5522847498,Ou=1,_s=2,vs=3,de="center",Fe="left",yt="top",Na="bottom",Qe="right",Et="none",Zd=/\r?\n/,yi="json",ta="svg";class C1{constructor(){this[yi]=new Map,this[ta]=new Map}getClass(e){const t=this[yi].get(e);if(!t)throw new Error("No class registered for ".concat(e));return t}setClass(e,t){t?this[yi].set(t,e):(this[yi].set(e.type,e),this[yi].set(e.type.toLowerCase(),e))}getSVGClass(e){return this[ta].get(e)}setSVGClass(e,t){this[ta].set(t??e.type.toLowerCase(),e)}}const te=new C1;class T1 extends Array{remove(e){const t=this.indexOf(e);t>-1&&this.splice(t,1)}cancelAll(){const e=this.splice(0);return e.forEach(t=>t.abort()),e}cancelByCanvas(e){if(!e)return[];const t=this.filter(r=>{var i;return typeof r.target=="object"&&((i=r.target)===null||i===void 0?void 0:i.canvas)===e});return t.forEach(r=>r.abort()),t}cancelByTarget(e){if(!e)return[];const t=this.filter(r=>r.target===e);return t.forEach(r=>r.abort()),t}}const Ha=new T1;class D1{constructor(){S(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object"){for(const r in e)this.on(r,e[r]);return()=>this.off(e)}else if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}else return()=>!1}once(e,t){if(typeof e=="object"){const r=[];for(const i in e)r.push(this.once(i,e[i]));return()=>r.forEach(i=>i())}else if(t){const r=this.on(e,function(){t(...arguments),r()});return r}else return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],i=r.indexOf(t);i>-1&&r.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(typeof e>"u")for(const r in this.__eventListeners)this._removeEventListener(r);else if(typeof e=="object")for(const r in e)this._removeEventListener(r,e[r]);else this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const i=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(i)for(let s=0;s<i.length;s++)i[s].call(this,t||{})}}const Rn=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,An=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},Bt=n=>{if(n===0)return 1;switch(Math.abs(n)/si){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Ut=n=>{if(n===0)return 0;const e=n/si,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class O{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new O(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new O(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new O(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new O(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new O(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new O(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new O(this.x/e.x,this.y/e.y)}scalarDivide(e){return new O(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new O(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new O(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new O(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new O(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O1;const r=Ut(e),i=Bt(e),s=this.subtract(t);return new O(s.x*i-s.y*r,s.x*r+s.y*i).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new O(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const O1=new O(0,0);function Qd(n){class e extends n{constructor(){super(...arguments),S(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const o=this._objects.push(...i);return i.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return this._objects.splice(r,0,...s),s.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,i=[];for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),i.push(l),this._onObjectRemoved(l))}),i}forEachObject(r){this.getObjects().forEach((i,s,o)=>r(i,s,o))}getObjects(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...i))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,i){return this._objects.includes(r)?!0:i?this._objects.some(s=>s instanceof e&&s.contains(r,!0)):!1}complexity(){return this._objects.reduce((r,i)=>(r+=i.complexity?i.complexity():0,r),0)}sendObjectToBack(r){return!r||r===this._objects[0]?!1:(An(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!r||r===this._objects[this._objects.length-1]?!1:(An(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==0){const o=this.findNewLowerIndex(r,s,i);return An(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,i){if(!r)return!1;const s=this._objects.indexOf(r);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(r,s,i);return An(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,i){return r===this._objects[i]?!1:(An(this._objects,r),this._objects.splice(i,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,i,s){let o;if(s){o=i;for(let a=i-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i-1;return o}findNewUpperIndex(r,i,s){let o;if(s){o=i;for(let a=i+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=i+1;return o}collectObjects(r){let{left:i,top:s,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new O(i,s),h=u.add(new O(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h,!0)||f.isContainedWithinRect(u,h,!0)||l&&f.containsPoint(u,void 0,!0)||l&&f.containsPoint(h,void 0,!0))&&c.push(f)}return c}}return e}class Jd extends D1{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function As(n){return Ln().requestAnimationFrame(n)}function k1(n){return Ln().cancelAnimationFrame(n)}let M1=0;const rn=()=>M1++,ot=()=>{const n=ii().createElement("canvas");if(!n||typeof n.getContext>"u")throw new Error("Failed to create `canvas` element");return n},P1=()=>ii().createElement("img"),ef=(n,e,t)=>n.toDataURL("image/".concat(e),t),E1=n=>!!n&&n.getContext!==void 0,He=n=>n*Pl,Qi=n=>n/Pl,F1=["translateX","translateY","angle"],st=(n,e,t)=>new O(n).transform(e,t),St=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:i}=new O(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-i,t},kt=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],Fl=(n,e)=>n.reduceRight((t,r)=>r?kt(r,t,e):t,rr),xn=n=>{const e=Math.atan2(n[1],n[0]),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),i=(n[0]*n[3]-n[2]*n[1])/r,s=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Qi(e),scaleX:r,scaleY:i,skewX:Qi(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},ko=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return[1,0,0,1,n,e]};function Mo(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=He(n),i=Bt(r),s=Ut(r);return[i,s,-s,i,e?e-(i*e-s*t):0,t?t-(s*e+i*t):0]}const tf=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return[n,0,0,e,0,0]},rf=n=>Math.tan(He(n)),nf=n=>[1,0,rf(n),1,0,0],sf=n=>[1,rf(n),0,1,0,0],of=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:i=!1,skewX:s=0,skewY:o=0}=n;return Fl([tf(r?-e:e,i?-t:t),s&&nf(s),o&&sf(o)],!0)},A1=n=>{let{translateX:e=0,translateY:t=0,angle:r=0}=n,i=Xe(n,F1);return Fl([ko(e,t),r&&Mo({angle:r}),of(i)])},Ls=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,i){if(e&&e.aborted)return i(new Error("`options.signal` is in `aborted` state"));const s=P1();let o;e&&(o=function(l){s.src="",i(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){s.onload=s.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(s)};if(!n){a();return}s.onload=a,s.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),i(new Error("Error loading "+s.src))},t&&(s.crossOrigin=t),s.src=n})},Ji=function(n){let{signal:e,reviver:t=Fs}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,i)=>{const s=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(n.map(o=>te.getClass(o.type).fromObject(o,{signal:e,reviver:t}).then(a=>(t(o,a),s.push(a),a)))).then(r).catch(o=>{s.forEach(function(a){a.dispose&&a.dispose()}),i(o)}).finally(()=>{e&&e.removeEventListener("abort",i)})})},Po=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const i=[];e&&e.addEventListener("abort",r,{once:!0});const s=Object.values(n).map(a=>a&&(a.colorStops?new(te.getClass("gradient"))(a):a.type?Ji([a],{signal:e}).then(l=>{let[c]=l;return i.push(c),c}):a.source?te.getClass("pattern").fromObject(a,{signal:e}).then(l=>(i.push(l),l)):a)),o=Object.keys(n);Promise.all(s).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{i.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},oi=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,r)=>(r in n&&(t[r]=n[r]),t),{})},af=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),ku={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},L1=()=>/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i,R1=()=>/^hsla?\(\s*([+-]?\d{1,3})\s*[\s|,]\s*(\d{1,3}%)\s*[\s|,]\s*(\d{1,3}%)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i,I1=()=>/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i,ra=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Mu=(n,e,t,r)=>{n/=255,e/=255,t/=255;const i=Math.max(n,e,t),s=Math.min(n,e,t);let o,a;const l=(i+s)/2;if(i===s)o=a=0;else{const c=i-s;switch(a=l>.5?c/(2-i-s):c/(i+s),i){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4;break}o/=6}return[Math.round(o*360),Math.round(a*100),Math.round(l*100),r]},Pu=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},ws=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Eu=n=>{let[e,t,r,i=1]=n;const s=Math.round(e*.3+t*.59+r*.11);return[s,s,s,i]};class Ie{constructor(e){if(!e)this.setSource([0,0,0,1]);else if(e instanceof Ie)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,i,s=1]=e;this.setSource([t,r,i,s])}else this.setSource(this._tryParsingColor(e))}_tryParsingColor(e){return e in ku&&(e=ku[e]),e==="transparent"?[255,255,255,0]:Ie.sourceFromHex(e)||Ie.sourceFromRgb(e)||Ie.sourceFromHsl(e)||[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Mu(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,i]=Mu(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,i]=this.getSource();return"".concat(ws(e)).concat(ws(t)).concat(ws(r)).concat(ws(Math.round(i*255)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Eu(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Eu(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,r]),this}overlayWith(e){e instanceof Ie||(e=new Ie(e));const t=this.getSource(),r=.5,i=e.getSource(),[s,o,a]=t.map((l,c)=>Math.round(l*(1-r)+i[c]*r));return this.setSource([s,o,a,t[3]]),this}static fromRgb(e){return Ie.fromRgba(e)}static fromRgba(e){return new Ie(Ie.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(L1());if(t){const[r,i,s]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(a*2.55):a});return[r,i,s,Pu(t[4])]}}static fromHsl(e){return Ie.fromHsla(e)}static fromHsla(e){return new Ie(Ie.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(R1());if(!t)return;const r=(parseFloat(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let o,a,l;if(i===0)o=a=l=s;else{const c=s<=.5?s*(i+1):s+i-s*i,u=s*2-c;o=ra(u,c,r+1/3),a=ra(u,c,r),l=ra(u,c,r-1/3)}return[Math.round(o*255),Math.round(a*255),Math.round(l*255),Pu(t[4])]}static fromHex(e){return new Ie(Ie.sourceFromHex(e))}static sourceFromHex(e){if(e.match(I1())){const t=e.slice(e.indexOf("#")+1),r=t.length<=4;let i;r?i=t.split("").map(c=>c+c):i=t.match(/.{2}/g);const[s,o,a,l=255]=i.map(c=>parseInt(c,16));return[s,o,a,l/255]}}}const De=(n,e)=>parseFloat(Number(n).toFixed(e)),Ii=(n,e)=>{const t=/\D{0,2}$/.exec(n),r=parseFloat(n);e||(e=El);const i=we.DPI;switch(t==null?void 0:t[0]){case"mm":return r*i/25.4;case"cm":return r*i/2.54;case"in":return r*i;case"pt":return r*i/72;case"pc":return r*i/72*12;case"em":return r*e;default:return r}},j1=n=>n&&n!==Et?[n.slice(1,4),n.slice(5,8)]:n===Et?[n,n]:["Mid","Mid"],V1=n=>{const[e,t]=n.trim().split(" "),[r,i]=j1(e);return{meetOrSlice:t||"meet",alignX:r,alignY:i}},Zs=n=>"matrix("+n.map(e=>De(e,we.NUM_FRACTION_DIGITS)).join(" ")+")",Ci=(n,e)=>{if(e){if(e.toLive)return"".concat(n,": url(#SVGID_").concat(e.id,"); ");{const t=new Ie(e),r=t.getAlpha();let i="".concat(n,": ").concat(t.toRgb(),"; ");return r!==1&&(i+="".concat(n,"-opacity: ").concat(r.toString(),"; ")),i}}else return"".concat(n,": none; ")},B1=function(n,e){let{left:t,top:r,width:i,height:s}=e,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:we.NUM_FRACTION_DIGITS;const a=Ci("fill",n),[l,c,u,h]=[t,r,i,s].map(d=>De(d,o));return"<rect ".concat(a,' x="').concat(l,'" y="').concat(c,'" width="').concat(u,'" height="').concat(h,'"></rect>')},Sr=n=>!!n&&n.toLive!==void 0,Fu=n=>!!n&&typeof n.toObject=="function",Au=n=>!!n&&n.offsetX!==void 0&&n.source!==void 0,Wa=n=>!!n&&Array.isArray(n._objects),U1=n=>!!n&&n.isType("ActiveSelection"),lf=n=>!!n&&n.isType("Text","IText","Textbox"),Rs=n=>!!n&&n.isType("IText","Textbox"),Lu=n=>!!n&&typeof n.onDragStart=="function"&&typeof n.shouldStartDragging=="function";function cf(n){let e=0,t=0;const r=hr(n),i=r.documentElement,s=r.body||{scrollLeft:0,scrollTop:0};for(;n&&(n.parentNode||n.host)&&(n=n.parentNode||n.host,n===r?(e=s.scrollLeft||i.scrollLeft||0,t=s.scrollTop||i.scrollTop||0):(e+=n.scrollLeft||0,t+=n.scrollTop||0),!(n.nodeType===1&&n.style.position==="fixed")););return{left:e,top:t}}const hr=n=>n.ownerDocument||null,uf=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null};function Qs(n,e){const t=n.style;if(t)typeof e=="string"?n.style.cssText+=";"+e:Object.entries(e).forEach(r=>{let[i,s]=r;return t.setProperty(i,s)});else return}const hf=function(n,e,t){let{width:r,height:i}=t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=i,s>1&&(n.setAttribute("width",(r*s).toString()),n.setAttribute("height",(i*s).toString()),e.scale(s,s))};function N1(n,e){const t=e?"manipulation":Et;Qs(n,{"touch-action":t,"-ms-touch-action":t})}const Ya=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function H1(n){var e;let t={left:0,top:0};const r=n&&hr(n),i={left:0,top:0},s={borderLeftWidth:Fe,borderTopWidth:yt,paddingLeft:Fe,paddingTop:yt};if(!r)return i;const o=((e=uf(n))===null||e===void 0?void 0:e.getComputedStyle(n,null))||{};for(const c in s)i[s[c]]+=parseInt(o[c],10)||0;const a=r.documentElement;typeof n.getBoundingClientRect<"u"&&(t=n.getBoundingClientRect());const l=cf(n);return{left:t.left+l.left-(a.clientLeft||0)+i.left,top:t.top+l.top-(a.clientTop||0)+i.top}}function Ru(n){return typeof n.onselectstart<"u"&&(n.onselectstart=()=>!1),n.style.userSelect=Et,n}class df{constructor(e){S(this,"_originalCanvasStyle",void 0),S(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=E1(e)?e:ii().getElementById(e)||ot();if(t.hasAttribute("data-fabric"))throw new Error("fabric.js: trying to initialize a canvas that has already been initialized");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(r)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:i}=this.lower;hf(r,i,e,t)}setCSSDimensions(e){Ya(this.lower.el,e)}calcOffset(){return H1(this.lower.el)}dispose(){mr().dispose(this.lower.el),delete this.lower}}const W1={backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:rr.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,svgViewportTransformation:!0,skipOffscreen:!0,clipPath:void 0};class is extends Qd(Jd){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return is.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new df(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(console.warn(`fabric.Canvas: trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}_isRetinaScaling(){return we.devicePixelRatio>1&&this.enableRetinaScaling}getRetinaScaling(){return this._isRetinaScaling()?Math.max(1,we.devicePixelRatio):1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const i=x({width:this.width,height:this.height},e);this.elements.setDimensions(i,this.getRetinaScaling()),this.hasLostContext=!0,this.width=i.width,this.height=i.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._setDimensionsImpl(e,{cssOnly:t,backstoreOnly:r}),t||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){const t=this.backgroundImage,r=this.overlayImage,i=this._objects.length;this.viewportTransform=e;for(let s=0;s<i;s++){const o=this._objects[s];o.group||o.setCoords()}t&&t.setCoords(),r&&r.setCoords(),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,i=[...this.viewportTransform],s=st(e,St(i));i[0]=t,i[3]=t;const o=st(s,i);i[4]+=r.x-o.x,i[5]+=r.y-o.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new O(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new O(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),!this.destroyed&&this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){!this.nextRenderHandle&&!this.disposed&&!this.destroyed&&(this.nextRenderHandle=As(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=St(this.viewportTransform),i=st({x:0,y:0},r),s=st({x:e,y:t},r),o=i.min(s),a=i.max(s);return this.vptCoords={tl:o,tr:new O(a.x,o.y),bl:new O(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(k1(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],i=this["".concat(t,"Image")],s=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!i)return;const a=Sr(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...s),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...s),i.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new O(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new O(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new O(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new O(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return st(this.getCenterPoint(),St(this.viewportTransform))}_centerObject(e,t){e.setXY(t,de,de),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,i=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return x(x(x({version:Ua},oi(this,t)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,r){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!i),s}__serializeBgOverlay(e,t){const r={},i=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Sr(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),Sr(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),i=t.height||"".concat(this.height),s=we.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(De(-l[4]/l[0],s)," ").concat(De(-l[5]/l[3],s)," ").concat(De(this.width/l[0],s)," ").concat(De(this.height/l[3],s),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',i,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Ua,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(rn()),'<clipPath id="'+t.clipPathId+`" >
`+this.clipPath.toClipPathSVG(e.reviver)+`</clipPath>
`):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Sr(t)){const r=this["".concat(e,"Vpt")],i=this.viewportTransform,s={width:this.width/(r?i[0]:1),height:this.height/(r?i[3]:1)};return t.toSVG(s,{additionalTransform:r?Zs(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=we.fontPaths;this._objects.forEach(function s(o){e.push(o),Wa(o)&&o._objects.forEach(s)}),e.forEach(s=>{if(!lf(s))return;const{styles:o,fontFamily:a}=s;t[a]||!r[a]||(t[a]=!0,o&&Object.values(o).forEach(l=>{Object.values(l).forEach(c=>{let{fontFamily:u=""}=c;!t[u]&&r[u]&&(t[u]=!0)})}))});const i=Object.keys(t).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(r[s],`');
		}
`)).join("");return i?`	<style type="text/css"><![CDATA[
`.concat(i,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Sr(r)){const i=r.repeat||"",s=this.width,o=this.height,a=this["".concat(t,"Vpt")],l=a?Zs(St(this.viewportTransform)):"";e.push('<rect transform="'.concat(l," translate(").concat(s/2,",").concat(o/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-o/2,'" width="').concat((i==="repeat-y"||i==="no-repeat")&&Au(r)?r.source.width:s,'" height="').concat((i==="repeat-x"||i==="no-repeat")&&Au(r)?r.source.height:o,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Error("fabric.js: `json` is undefined"));const i=typeof e=="string"?JSON.parse(e):e,{objects:s=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=i,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ji(s,{reviver:t,signal:r}),Po({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[f,g]=d;return this.clear(),this.add(...f),this.set(i),this.set(g),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ot();return e.width=this.width,e.height=this.height,new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:i=1,enableRetinaScaling:s=!1}=e,o=i*(s?this.getRetinaScaling():1);return ef(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:i,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=c*e,f=this.viewportTransform,g=(f[4]-(i||0))*e,p=(f[5]-(s||0))*e,_=[d,0,0,d,g,p],y=this.enableRetinaScaling,w=ot(),T=o?this._objects.filter(b=>o(b)):this._objects;return w.width=a,w.height=l,this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=a,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(w.getContext("2d"),T),this.viewportTransform=f,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=y,w}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=null,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}S(is,"ownDefaults",W1);const Y1=["touchstart","touchmove","touchend"];function X1(n){const e=n.changedTouches;return e&&e[0]?e[0]:n}const z1=n=>{const e=n.target,t=cf(e),r=X1(n);return new O(r.clientX+t.left,r.clientY+t.top)},Xa=n=>Y1.indexOf(n.type)>-1||n.pointerType==="touch",za=n=>{n.preventDefault(),n.stopPropagation()},Jr=n=>{if(n.length===0)return{left:0,top:0,width:0,height:0};const{min:e,max:t}=n.reduce((i,s)=>{let{min:o,max:a}=i;return{min:o.min(s),max:a.max(s)}},{min:new O(n[0]),max:new O(n[0])}),r=t.subtract(e);return{left:e.x,top:e.y,width:r.x,height:r.y}},$1=["translateX","translateY","scaleX","scaleY"],G1=(n,e)=>Js(n,kt(e,n.calcOwnMatrix())),Js=(n,e)=>{const t=xn(e),{translateX:r,translateY:i,scaleX:s,scaleY:o}=t,a=Xe(t,$1),l=new O(r,i);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(l,de,de)},ff=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},gf=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),pf=(n,e,t)=>{const r=n/2,i=e/2,s=of(t),o=[new O(-r,-i),new O(r,-i),new O(-r,i),new O(r,i)].map(l=>l.transform(s)),a=Jr(o);return new O(a.width,a.height)},mf=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rr,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rr;return kt(St(e),n)},_f=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rr,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rr;return n.transform(mf(e,t))},q1=(n,e,t)=>{const r=mf(e,t);return Js(n,kt(r,n.calcOwnMatrix())),r},vf=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),x(x({},e),{},{target:r})),r.fire(n,e)},K1={left:-.5,top:-.5,center:0,bottom:.5,right:.5},$r=n=>typeof n=="string"?K1[n]:n-.5,eo="not-allowed",Z1=(n,e,t,r)=>{if(!e||!n)return"drag";const i=r.controls[e];return i.getActionName(t,i,r)};function wf(n){return n.originX===de&&n.originY===de}function Iu(n){return-$r(n)+.5}const er=(n,e)=>n[e],yf=(n,e,t,r)=>({e:n,transform:e,pointer:new O(t,r)});function bf(n,e){const t=n.getTotalAngle(),r=t+Qi(Math.atan2(e.y,e.x))+360;return Math.round(r%360/45)}function Q1(n,e,t,r){const i=n.getRelativeCenterPoint(),s=typeof t<"u"&&typeof r<"u"?n.translateToGivenOrigin(i,de,de,t,r):new O(n.left,n.top);return(n.angle?e.rotate(-He(n.angle),i):e).subtract(s)}function Al(n,e,t,r,i){var s;let{target:o,corner:a}=n;const l=o.controls[a],c=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,u=o.padding/c,h=Q1(o,new O(r,i),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const J1=(n,e,t,r)=>{const{target:i,offsetX:s,offsetY:o}=e,a=t-s,l=r-o,c=!er(i,"lockMovementX")&&i.left!==a,u=!er(i,"lockMovementY")&&i.top!==l;return c&&i.set(Fe,a),u&&i.set(yt,l),(c||u)&&vf("moving",yf(n,e,t,r)),c||u};class xf{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):Et,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=typeof this.opacity<"u"?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=Ci("fill",this.fill);return[Ci("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgSpanStyles(e,t){const r="; ",i=e.fontFamily?"font-family: ".concat(e.fontFamily.indexOf("'")===-1&&e.fontFamily.indexOf('"')===-1?"'".concat(e.fontFamily,"'"):e.fontFamily).concat(r):"",s=e.strokeWidth?"stroke-width: ".concat(e.strokeWidth).concat(r):"",o=e.fontSize?"font-size: ".concat(e.fontSize,"px").concat(r):"",a=e.fontStyle?"font-style: ".concat(e.fontStyle).concat(r):"",l=e.fontWeight?"font-weight: ".concat(e.fontWeight).concat(r):"",c=e.fill?Ci("fill",e.fill):"",u=e.stroke?Ci("stroke",e.stroke):"",h=this.getSvgTextDecoration(e),d=e.deltaY?"baseline-shift: ".concat(-e.deltaY,"; "):"";return[u,s,i,o,a,l,h&&"text-decoration: ".concat(h).concat(r),c,d,t?"white-space: pre; ":""].join("")}getSvgTextDecoration(e){return["overline","underline","line-through"].filter(t=>e[t.replace("-","")]).join(" ")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Zs(r));return"".concat(i).concat(t,'" ')}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:i,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,g=[],p=e.indexOf("COMMON_PARTS");let _;l&&(l.clipPathId="CLIPPATH_".concat(rn()),_='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const y=[o,c,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[p]=y,d&&d.toLive&&g.push(d.toSVG(this)),h&&h.toLive&&g.push(h.toSVG(this)),f&&g.push(f.toSVG(this)),l&&g.push(_),g.push(e.join("")),g.push(`</g>
`),u&&g.push(`</g>
`),r?r(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!=="fill"?' paint-order="'.concat(this.paintFirst,'" '):""}}const ex=(n,e,t,r)=>-t*Math.cos(n/r*si)+t+e,tx=()=>!1;class Ll{constructor(e){let{startValue:t,byValue:r,duration:i=500,delay:s=0,easing:o=ex,onStart:a=Fs,onChange:l=Fs,onComplete:c=Fs,abort:u=tx,target:h}=e;S(this,"_state","pending"),S(this,"durationProgress",0),S(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=s,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>As(e),this.delay):As(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:i,valueProgress:s}=this.calculate(r);this.value=Object.freeze(i),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),As(this.tick)))}register(){Ha.push(this)}unregister(){Ha.remove(this)}abort(){this._state="aborted",this.unregister()}}const rx=["startValue","endValue"];class nx extends Ll{constructor(e){let{startValue:t=0,endValue:r=100}=e,i=Xe(e,rx);super(x(x({},i),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const ix=["startValue","endValue"];class sx extends Ll{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e,i=Xe(e,ix);super(x(x({},i),{},{startValue:t,byValue:r.map((s,o)=>s-t[o])}))}calculate(e){const t=this.startValue.map((r,i)=>this.easing(e,r,this.byValue[i],this.duration,i));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const Jn=(n,e,t)=>Math.max(n,Math.min(e,t)),ox=["startValue","endValue","easing","onChange","onComplete","abort"],ax=(n,e,t,r)=>{const i=1-Math.cos(n/r*si);return e+t*i},na=n=>n&&((e,t,r)=>n(new Ie(e).toRgba(),t,r));class lx extends Ll{constructor(e){let{startValue:t,endValue:r,easing:i=ax,onChange:s,onComplete:o,abort:a}=e,l=Xe(e,ox);const c=new Ie(t).getSource(),u=new Ie(r).getSource();super(x(x({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:i,onChange:na(s),onComplete:na(o),abort:na(a)}))}calculate(e){const[t,r,i,s]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,i].map(Math.round),Jn(0,s,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}const cx=n=>Array.isArray(n.startValue)||Array.isArray(n.endValue);function Sf(n){const e=cx(n)?new sx(n):new nx(n);return e.start(),e}function ux(n){const e=new lx(n);return e.start(),e}const hx=new O(1,0),Cf=(n,e)=>n.rotate(e),ei=(n,e)=>new O(e).subtract(n),Tf=n=>n.distanceFrom(new O),Rl=(n,e)=>{const t=n.x*e.x+n.y*e.y,r=n.x*e.y-n.y*e.x;return Math.atan2(r,t)},dx=n=>Rl(hx,n),Il=n=>n.scalarDivide(Tf(n)),ju=(n,e,t)=>{const r=ei(n,e),i=ei(n,t),s=Rl(r,i);return{vector:Il(Cf(r,s/2)),angle:s}},Df=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Il(new O(-n.y,n.x).scalarMultiply(e?1:-1))};class it{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(i=>!this.includes(i))),this}static isPointContained(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=ei(t,r),a=ei(t,e).divide(s);return i?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static intersectLineLine(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;const a=t.x-e.x,l=t.y-e.y,c=i.x-r.x,u=i.y-r.y,h=e.x-r.x,d=e.y-r.y,f=c*d-u*h,g=a*d-l*h,p=u*a-c*l;if(p!==0){const _=f/p,y=g/p;return(s||0<=_&&_<=1)&&(o||0<=y&&y<=1)?new it("Intersection").append(new O(e.x+_*a,e.y+_*l)):new it}else if(f===0||g===0){const _=s||o||it.isPointContained(e,r,i)||it.isPointContained(t,r,i)||it.isPointContained(r,e,t)||it.isPointContained(i,e,t);return new it(_?"Coincident":void 0)}else return new it("Parallel")}static intersectSegmentLine(e,t,r,i){return it.intersectLineLine(e,t,r,i,!1,!0)}static intersectSegmentSegment(e,t,r,i){return it.intersectLineLine(e,t,r,i,!1,!1)}static intersectLinePolygon(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=new it,o=r.length;for(let a=0,l,c,u;a<o;a++){if(l=r[a],c=r[(a+1)%o],u=it.intersectLineLine(e,t,l,c,i,!1),u.status==="Coincident")return u;s.append(...u.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return it.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new it,i=e.length,s=[];for(let o=0;o<i;o++){const a=e[o],l=e[(o+1)%i],c=it.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(s.push(c),r.append(a,l)):r.append(...c.points)}return s.length>0&&s.length===e.length?new it("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const i=t.min(r),s=t.max(r),o=new O(s.x,i.y),a=new O(i.x,s.y);return it.intersectPolygonPolygon(e,[i,o,s,a])}}class fx extends Jd{_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=x({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let i=r,s=0;this.strokeUniform&&(i=0,s=r);const o=t.width+i,a=t.height+i,l=t.skewX===0&&t.skewY===0;let c;return l?c=new O(o*t.scaleX,a*t.scaleY):c=pf(o,a,t),c.scalarAdd(s)}translateToGivenOrigin(e,t,r,i,s){let o=e.x,a=e.y;const l=$r(i)-$r(t),c=$r(s)-$r(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new O(o,a)}translateToCenterPoint(e,t,r){const i=this.translateToGivenOrigin(e,t,r,de,de);return this.angle?i.rotate(He(this.angle),e):i}translateToOriginPoint(e,t,r){const i=this.translateToGivenOrigin(e,de,de,t,r);return this.angle?i.rotate(He(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?st(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new O(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const i=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:s.x,top:s.y})}_setOriginToCenter(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;const e=this.getRelativeCenterPoint();this.originX=de,this.originY=de,this.left=e.x,this.top=e.y}_resetOrigin(){if(this._originalOriginX!==void 0&&this._originalOriginY!==void 0){const e=this.translateToOriginPoint(this.getRelativeCenterPoint(),this._originalOriginX,this._originalOriginY);this.left=e.x,this.top=e.y,this.originX=this._originalOriginX,this.originY=this._originalOriginY,this._originalOriginX=void 0,this._originalOriginY=void 0}}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Fe,yt)}}class gx extends fx{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?st(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=st(e,St(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new O(this.left,this.top)}setRelativeXY(e,t,r){this.setPositionByOrigin(e,t||this.originX,r||this.originY)}_getCoords(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?e?this.calcACoords():this.calcLineCoords():(this.aCoords||(this.aCoords=this.calcACoords()),this.lineCoords||(this.lineCoords=this.calcLineCoords()),e?this.aCoords:this.lineCoords)}getCoords(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{tl:r,tr:i,br:s,bl:o}=this._getCoords(e,t),a=[r,i,s,o];if(this.group){const l=this.group.calcTransformMatrix();return a.map(c=>st(c,l))}return a}intersectsWithRect(e,t,r,i){const s=this.getCoords(r,i);return it.intersectPolygonRectangle(s,e,t).status==="Intersection"}intersectsWithObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=it.intersectPolygonPolygon(this.getCoords(t,r),e.getCoords(t,r));return i.status==="Intersection"||i.status==="Coincident"||e.isContainedWithinObject(this,t,r)||this.isContainedWithinObject(e,t,r)}isContainedWithinObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.getCoords(t,r),s=t?e.aCoords:e.lineCoords,o=e._getImageLines(s);for(let a=0;a<4;a++)if(!e.containsPoint(i[a],o))return!1;return!0}isContainedWithinRect(e,t,r,i){const s=this.getBoundingRect(r,i);return s.left>=e.x&&s.left+s.width<=t.x&&s.top>=e.y&&s.top+s.height<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=this._getCoords(r,i),o=t||this._getImageLines(s),a=this._findCrossPoints(e,o);return a!==0&&a%2===1}isOnScreen(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.canvas)return!1;const{tl:t,br:r}=this.canvas.vptCoords;return this.getCoords(!0,e).some(s=>s.x<=r.x&&s.x>=t.x&&s.y<=r.y&&s.y>=t.y)||this.intersectsWithRect(t,r,!0,e)?!0:this._containsCenterOfCanvas(t,r,e)}_containsCenterOfCanvas(e,t,r){const i=e.midPointFrom(t);return this.containsPoint(i,void 0,!0,r)}isPartiallyOnScreen(e){if(!this.canvas)return!1;const{tl:t,br:r}=this.canvas.vptCoords;return this.intersectsWithRect(t,r,!0,e)?!0:this.getCoords(!0,e).every(s=>(s.x>=r.x||s.x<=t.x)&&(s.y>=r.y||s.y<=t.y))&&this._containsCenterOfCanvas(t,r,e)}_getImageLines(e){let{tl:t,tr:r,bl:i,br:s}=e;return{topline:{o:t,d:r},rightline:{o:r,d:s},bottomline:{o:s,d:i},leftline:{o:i,d:t}}}_findCrossPoints(e,t){let r=0;for(const i in t){let s;const o=t[i];if(!(o.o.y<e.y&&o.d.y<e.y)&&!(o.o.y>=e.y&&o.d.y>=e.y)){if(o.o.x===o.d.x&&o.o.x>=e.x)s=o.o.x;else{const l=(o.d.y-o.o.y)/(o.d.x-o.o.x),c=e.y-0*e.x,u=o.o.y-l*o.o.x;s=-(c-u)/(0-l)}if(s>=e.x&&(r+=1),r===2)break}}return r}getBoundingRect(e,t){return Jr(this.getCoords(e,t))}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set("scaleX",e),this._set("scaleY",e),this.setCoords()}scaleToWidth(e,t){const r=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/r)}scaleToHeight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/r)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?xn(this.calcTransformMatrix()).angle:this.angle}calcLineCoords(){const e=this.getViewportTransform(),t=this.padding,r=He(this.getTotalAngle()),i=Bt(r)*t,s=Ut(r)*t,o=i+s,a=i-s,{tl:l,tr:c,bl:u,br:h}=this.calcACoords(),d={tl:st(l,e),tr:st(c,e),bl:st(u,e),br:st(h,e)};return t&&(d.tl.x-=a,d.tl.y-=o,d.tr.x+=o,d.tr.y-=a,d.bl.x-=o,d.bl.y+=a,d.br.x+=a,d.br.y+=o),d}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||rr.concat()}calcACoords(){const e=Mo({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),i=ko(t,r),s=kt(i,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:st({x:-a,y:-l},s),tr:st({x:a,y:-l},s),bl:st({x:-a,y:l},s),br:st({x:a,y:l},s)}}setCoords(){this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t="_";let r="";return!e&&this.group&&(r=this.group.transformMatrixKey(e)+t),r+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key===r?i.value:(this.group&&(t=kt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=A1(i);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new O(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class jl extends gx{getParent(e){return(U1(this.group)?this.__owningGroup:this.group)||(e?void 0:this.canvas)}isDescendantOf(e){return this.__owningGroup===e||this.group===e||this.canvas===e||!!this.__owningGroup&&this.__owningGroup.isDescendantOf(e)||!!this.group&&this.group.isDescendantOf(e)}getAncestors(e){const t=[];let r=this;do r=r instanceof jl?r.getParent(e):void 0,r&&t.push(r);while(r);return t}findCommonAncestors(e,t){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors(t)]};const r=this.getAncestors(t),i=e.getAncestors(t);if(r.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[e,...i.slice(0,i.length-1)],common:[this]};for(let s=0,o;s<r.length;s++){if(o=r[s],o===e)return{fork:[this,...r.slice(0,s)],otherFork:[],common:r.slice(s)};for(let a=0;a<i.length;a++){if(this===i[a])return{fork:[],otherFork:[e,...i.slice(0,a)],common:[this,...r]};if(o===i[a])return{fork:[this,...r.slice(0,s)],otherFork:[e,...i.slice(0,a)],common:r.slice(s)}}}return{fork:[this,...r],otherFork:[e,...i],common:[]}}hasCommonAncestors(e,t){const r=this.findCommonAncestors(e,t);return r&&!!r.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(!t)return;if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0];if(!r)return;const i=t.fork.pop(),s=t.otherFork.pop(),o=r._objects.indexOf(i),a=r._objects.indexOf(s);return o>-1&&o>a}}class px extends jl{animate(e,t){return Object.entries(e).reduce((r,i)=>{let[s,o]=i;return r[s]=this._animate(s,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.split("."),s=this.colorProperties.includes(i[i.length-1]),{easing:o,duration:a,abort:l,startValue:c,onChange:u,onComplete:h}=r,d={target:this,startValue:c??i.reduce((f,g)=>f[g],this),endValue:t,easing:o,duration:a,abort:l==null?void 0:l.bind(this),onChange:(f,g,p)=>{i.reduce((_,y,w)=>(w===i.length-1&&(_[y]=f),_[y]),this),u&&u(f,g,p)},onComplete:(f,g,p)=>{this.setCoords(),h&&h(f,g,p)}};return s?ux(d):Sf(d)}}const mx={color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1};class Cr{constructor(e){const t=typeof e=="string"?Cr.parseShadow(e):e;Object.assign(this,this.constructor.ownDefaults);for(const r in t)this[r]=t[r];this.id=rn()}static parseShadow(e){const t=e.trim(),[r,i=0,s=0,o=0]=(Cr.reOffsetsAndBlur.exec(t)||[]).map(l=>parseFloat(l)||0);return{color:(t.replace(Cr.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:s,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Cf(new O(this.offsetX,this.offsetY),He(-e.angle)),r=20,i=new Ie(this.color);let s=40,o=40;return e.width&&e.height&&(s=De((Math.abs(t.x)+this.blur)/e.width,we.NUM_FRACTION_DIGITS)*100+r,o=De((Math.abs(t.y)+this.blur)/e.height,we.NUM_FRACTION_DIGITS)*100+r),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(De(this.blur?this.blur/2:0,we.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(De(t.x,we.NUM_FRACTION_DIGITS),'" dy="').concat(De(t.y,we.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling},t=Cr.ownDefaults;return this.includeDefaultValues?e:af(e,(r,i)=>r!==t[i])}}S(Cr,"ownDefaults",mx);S(Cr,"reOffsetsAndBlur",/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/);const ai=n=>JSON.parse(JSON.stringify(n)),_x=[yt,Fe,"scaleX","scaleY","flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible","skewX","skewY"],Ar=["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],vx={originX:Fe,originY:yt,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!0,noScaleCache:!0,strokeUniform:!1,dirty:!0,paintFirst:"fill",activeOn:"down",colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,FX_DURATION:500},wx=["extraParam"];let nn=class Of extends px{static getDefaults(){return x({},Of.ownDefaults)}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){console.warn("Setting type has no effect",e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),S(this,"_cacheContext",null),Object.assign(this,this.constructor.getDefaults()),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=ot(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,i=we.maxCacheSideLimit,s=we.minCacheSideLimit;if(t<=i&&r<=i&&t*r<=we.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const o=t/r,[a,l]=Ri.limitDimsByArea(o),c=Jn(s,a,i),u=Jn(s,l,i);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:r+Du,height:i+Du,zoomX:e.x,zoomY:e.y,x:r,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,r=this._limitCacheSize(this._getCacheCanvasDimensions()),i=we.minCacheSideLimit,s=r.width,o=r.height,a=r.zoomX,l=r.zoomY,c=s!==this.cacheWidth||o!==this.cacheHeight,u=this.zoomX!==a||this.zoomY!==l;if(!e||!t)return!1;let h,d,f=c||u,g=0,p=0,_=!1;if(c){const y=this._cacheCanvas.width,w=this._cacheCanvas.height,T=s>y||o>w,b=(s<y*.9||o<w*.9)&&y>i&&w>i;_=T||b,T&&!r.capped&&(s>i||o>i)&&(g=s*.1,p=o*.1)}return lf(this)&&this.path&&(f=!0,_=!0,g+=this.getHeightOfLine(0)*this.zoomX,p+=this.getHeightOfLine(0)*this.zoomY),f?(_?(e.width=Math.ceil(s+g),e.height=Math.ceil(o+p)):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height)),h=r.x/2,d=r.y/2,this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,this.cacheWidth=s,this.cacheHeight=o,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,l),this.zoomX=a,this.zoomY=l,!0):!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=we.NUM_FRACTION_DIGITS,r=this.clipPath&&!this.clipPath.excludeFromExport?x(x({},this.clipPath.toObject(e)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,i=x(x({},oi(this,e)),{},{type:this.constructor.type,version:Ua,originX:this.originX,originY:this.originY,left:De(this.left,t),top:De(this.top,t),width:De(this.width,t),height:De(this.height,t),fill:Fu(this.fill)?this.fill.toObject():this.fill,stroke:Fu(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:De(this.strokeWidth,t),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:De(this.strokeMiterLimit,t),scaleX:De(this.scaleX,t),scaleY:De(this.scaleY,t),angle:De(this.angle,t),flipX:this.flipX,flipY:this.flipY,opacity:De(this.opacity,t),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:De(this.skewX,t),skewY:De(this.skewY,t)},r?{clipPath:r}:null);return this.includeDefaultValues?i:this._removeDefaultValues(i)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),i=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return af(e,(s,o)=>{if(o===Fe||o===yt||o==="type")return!0;const a=i[o];return s!==a&&!(Array.isArray(s)&&Array.isArray(a)&&s.length===0&&a.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new O(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=xn(this.calcTransformMatrix());return new O(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){const r=this[e]!==t;if((e==="scaleX"||e==="scaleY")&&(t=this._constrainScale(t)),e==="scaleX"&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e==="shadow"&&t&&!(t instanceof Cr)?t=new Cr(t):e==="dirty"&&this.group&&this.group.set("dirty",t),this[e]=t,r){const i=this.group&&this.group.isOnACache();this.constructor.cacheProperties.includes(e)?(this.dirty=!0,i&&this.group.set("dirty",!0)):i&&this.constructor.stateProperties.includes(e)&&this.group.set("dirty",!0)}return this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){e=e||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t){if(e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",t.absolutePositioned){const r=St(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}drawObject(e,t){const r=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=r,this.stroke=i}_drawClipPath(e,t){t&&(t._set("canvas",this.canvas),t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned){if(this._cacheCanvas&&this._cacheContext&&!e){const t=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-r/2,t,r)}return!0}return!1}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Sr(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Sr(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){!t||t.length===0||(1&t.length&&t.push(...t),e.setLineDash(t))}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,i=this.getCanvasRetinaScaling(),[s,,,o]=(r==null?void 0:r.viewportTransform)||rr,a=s*i,l=o*i,c=t.nonScaling?new O(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*we.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Sr(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,i,s):e.transform(1,0,0,1,i,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:s}}_renderPaintInOrder(e){this.paintFirst==="stroke"?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=ot(),o=this.getCanvasRetinaScaling(),a=i.x/this.scaleX/o,l=i.y/this.scaleY/o;s.width=Math.ceil(a),s.height=Math.ceil(l);const c=s.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(a,0),c.lineTo(a,l),c.lineTo(0,l),c.closePath(),c.translate(a/2,l/2),c.scale(i.zoomX/this.scaleX/o,i.zoomY/this.scaleY/o),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/i.zoomX,o*this.scaleY/i.zoomY),e.strokeStyle=(r=c.createPattern(s,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new O(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e),r=te.getClass("image");return new r(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=gf(this),r=this.group,i=this.shadow,s=Math.abs,o=e.enableRetinaScaling?Math.max(we.devicePixelRatio,1):1,a=(e.multiplier||1)*o;delete this.group,e.withoutTransform&&ff(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&q1(this,this.getViewportTransform());const l=ot(),c=this.getBoundingRect(!0,!0),u=this.shadow,h=new O;if(u){const y=u.blur,w=u.nonScaling?new O(1,1):this.getObjectScaling();h.x=2*Math.round(s(u.offsetX)+y)*s(w.x),h.y=2*Math.round(s(u.offsetY)+y)*s(w.y)}const d=c.width+h.x,f=c.height+h.y;l.width=Math.ceil(d),l.height=Math.ceil(f);const g=new is(l,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new O(g.width/2,g.height/2),de,de);const p=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const _=g.toCanvasElement(a||1,e);return this.set("canvas",p),this.shadow=i,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),_}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ef(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const t=(this.originX!==de||this.originY!==de)&&this.centeredRotation;t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin()}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Ha.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&mr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=t,i=Xe(t,wx);return Po(ai(e),i).then(s=>{const o=x(x({},i),s);if(r){const{[r]:a,type:l}=o,c=Xe(o,[r,"type"].map(qd));return new this(a,c)}else return new this(o)})}static fromObject(e,t){return this._fromObject(e,t)}};S(nn,"stateProperties",_x);S(nn,"cacheProperties",Ar);S(nn,"ownDefaults",vx);S(nn,"type","FabricObject");te.setClass(nn);te.setClass(nn,"object");const li=(n,e)=>(t,r,i,s)=>{const o=e(t,r,i,s);return o&&vf(n,yf(t,r,i,s)),o};function ci(n){return(e,t,r,i)=>{const{target:s,originX:o,originY:a}=t,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,o,a),u=n(e,t,r,i);return s.setPositionByOrigin(c,o,a),u}}const yx=(n,e,t,r)=>{const i=Al(e,e.originX,e.originY,t,r);if(e.originX===de||e.originX===Qe&&i.x<0||e.originX===Fe&&i.x>0){const{target:s}=e,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),a=wf(e)?2:1,l=s.width,c=Math.ceil(Math.abs(i.x*a/s.scaleX)-o);return s.set("width",Math.max(c,0)),l!==s.width}return!1},Vu=li("resizing",ci(yx));function bx(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=typeof r.transparentCorners<"u"?r.transparentCorners:i.transparentCorners,l=a?"stroke":"fill",c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor);let u=e,h=t,d;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",s>o?(d=s,n.scale(1,o/s),h=t*s/o):o>s?(d=o,n.scale(s/o,1),u=e*o/s):d=s,n.lineWidth=1,n.beginPath(),n.arc(u,h,d/2,0,Kd,!1),n[l](),c&&n.stroke(),n.restore()}function xx(n,e,t,r,i){r=r||{};const s=this.sizeX||r.cornerSize||i.cornerSize,o=this.sizeY||r.cornerSize||i.cornerSize,a=typeof r.transparentCorners<"u"?r.transparentCorners:i.transparentCorners,l=a?"stroke":"fill",c=!a&&(r.cornerStrokeColor||i.cornerStrokeColor),u=s/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||i.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||i.cornerStrokeColor||"",n.lineWidth=1,n.translate(e,t);const d=i.getTotalAngle();n.rotate(He(d)),n["".concat(l,"Rect")](-u,-h,s,o),c&&n.strokeRect(-u,-h,s,o),n.restore()}class Gt{constructor(e){S(this,"visible",!0),S(this,"actionName","scale"),S(this,"angle",0),S(this,"x",0),S(this,"y",0),S(this,"offsetX",0),S(this,"offsetY",0),S(this,"sizeX",null),S(this,"sizeY",null),S(this,"touchSizeX",null),S(this,"touchSizeY",null),S(this,"cursorStyle","crosshair"),S(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t){var r;return((r=t.canvas)===null||r===void 0?void 0:r.getActiveObject())===t&&t.isControlVisible(e)}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,i;return(r=(i=e._controlsVisibility)===null||i===void 0?void 0:i[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,i){return new O(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,i,s){let o,a,l,c;const u=s?this.touchSizeX:this.sizeX,h=s?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){const d=Math.atan2(h,u),f=Math.sqrt(u*u+h*h)/2,g=d-He(e),p=si-d-He(e);o=f*Bt(g),a=f*Ut(g),l=f*Bt(p),c=f*Ut(p)}else{const f=(u&&h?u:t)*Math.SQRT1_2,g=He(45-e);o=l=f*Bt(g),a=c=f*Ut(g)}return{tl:new O(r-c,i-l),tr:new O(r+o,i-a),bl:new O(r-o,i+a),br:new O(r+c,i+l)}}render(e,t,r,i,s){switch(i=i||{},i.cornerStyle||s.cornerStyle){case"circle":bx.call(this,e,t,r,i,s);break;default:xx.call(this,e,t,r,i,s)}}}const Sx=(n,e,t)=>t.lockRotation?eo:e.cursorStyle,Cx=(n,e,t,r)=>{let{target:i,ex:s,ey:o,theta:a,originX:l,originY:c}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),l,c);if(er(i,"lockRotation"))return!1;const h=Math.atan2(o-u.y,s-u.x),d=Math.atan2(r-u.y,t-u.x);let f=Qi(d-h+a);if(i.snapAngle&&i.snapAngle>0){const p=i.snapAngle,_=i.snapThreshold||p,y=Math.ceil(f/p)*p,w=Math.floor(f/p)*p;Math.abs(f-w)<_?f=w:Math.abs(f-y)<_&&(f=y)}f<0&&(f=360+f),f%=360;const g=i.angle!==f;return i.angle=f,g},Tx=li("rotating",ci(Cx));function kf(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function Mf(n,e,t){const r=er(n,"lockScalingX"),i=er(n,"lockScalingY");return!!(r&&i||!e&&(r||i)&&t||r&&e==="x"||i&&e==="y")}const Dx=["e","se","s","sw","w","nw","n","ne","e"],Ti=(n,e,t)=>{const r=kf(n,t),i=e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"";if(Mf(t,i,r))return eo;const s=bf(t,e);return"".concat(Dx[s],"-resize")};function Vl(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=e.target,o=i.by,a=kf(n,s),l=Mf(s,o,a);let c,u,h,d,f,g;if(l)return!1;if(e.gestureScale)u=e.scaleX*e.gestureScale,h=e.scaleY*e.gestureScale;else{if(c=Al(e,e.originX,e.originY,t,r),f=o!=="y"?Math.sign(c.x||e.signX||1):1,g=o!=="x"?Math.sign(c.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=g),er(s,"lockScalingFlip")&&(e.signX!==f||e.signY!==g))return!1;if(d=s._getTransformedDimensions(),a&&!o){const y=Math.abs(c.x)+Math.abs(c.y),{original:w}=e,T=Math.abs(d.x*w.scaleX/s.scaleX)+Math.abs(d.y*w.scaleY/s.scaleY),b=y/T;u=w.scaleX*b,h=w.scaleY*b}else u=Math.abs(c.x*s.scaleX/d.x),h=Math.abs(c.y*s.scaleY/d.y);wf(e)&&(u*=2,h*=2),e.signX!==f&&o!=="y"&&(e.originX=Iu(e.originX),u*=-1,e.signX=f),e.signY!==g&&o!=="x"&&(e.originY=Iu(e.originY),h*=-1,e.signY=g)}const p=s.scaleX,_=s.scaleY;return o?(o==="x"&&s.set("scaleX",u),o==="y"&&s.set("scaleY",h)):(!er(s,"lockScalingX")&&s.set("scaleX",u),!er(s,"lockScalingY")&&s.set("scaleY",h)),p!==s.scaleX||_!==s.scaleY}const Ox=(n,e,t,r)=>Vl(n,e,t,r),kx=(n,e,t,r)=>Vl(n,e,t,r,{by:"x"}),Mx=(n,e,t,r)=>Vl(n,e,t,r,{by:"y"}),ys=li("scaling",ci(Ox)),Px=li("scaling",ci(kx)),Ex=li("scaling",ci(Mx)),Fx=["target","ex","ey","skewingSide"],$a={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Ax=["ns","nesw","ew","nwse"],Lx=(n,e,t)=>{if(e.x!==0&&er(t,"lockSkewingY")||e.y!==0&&er(t,"lockSkewingX"))return eo;const r=bf(t,e)%4;return"".concat(Ax[r],"-resize")};function Rx(n,e,t){let{target:r,ex:i,ey:s,skewingSide:o}=e,a=Xe(e,Fx);const{skew:l}=$a[n],c=t.subtract(new O(i,s)).divide(new O(r.scaleX,r.scaleY))[n],u=r[l],h=a[l],d=Math.tan(He(h)),f=n==="y"?r._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:r._getTransformedDimensions({scaleX:1,scaleY:1}).y,g=2*c*o/Math.max(f,1)+d,p=Qi(Math.atan(g));r.set(l,p);const _=u!==r[l];if(_&&n==="y"){const{skewX:y,scaleX:w}=r,T=r._getTransformedDimensions({skewY:u}),b=r._getTransformedDimensions(),P=y!==0?T.x/b.x:1;P!==1&&r.set("scaleX",P*w)}return _}function Pf(n,e,t,r,i){const{target:s}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=$a[n];if(er(s,l))return!1;const{origin:h,flip:d}=$a[o],f=$r(t[h])*(s[d]?-1:1),g=-Math.sign(f)*(s[u]?-1:1),p=(s[c]===0&&Al(t,de,de,r,i)[n]>0||s[c]>0?1:-1)*g,_=-p*.5+.5;return li("skewing",ci((w,T,b,P)=>Rx(n,T,new O(b,P))))(e,x(x({},t),{},{[a]:_,skewingSide:g}),r,i)}const Ix=(n,e,t,r)=>Pf("x",n,e,t,r),jx=(n,e,t,r)=>Pf("y",n,e,t,r);function Eo(n,e){return n[e.canvas.altActionKey]}const bs=(n,e,t)=>{const r=Eo(n,t);return e.x===0?r?"skewX":"scaleY":e.y===0?r?"skewY":"scaleX":""},In=(n,e,t)=>Eo(n,t)?Lx(n,e,t):Ti(n,e,t),Bu=(n,e,t,r)=>Eo(n,e.target)?jx(n,e,t,r):Px(n,e,t,r),Uu=(n,e,t,r)=>Eo(n,e.target)?Ix(n,e,t,r):Ex(n,e,t,r),Ef=()=>({ml:new Gt({x:-.5,y:0,cursorStyleHandler:In,actionHandler:Bu,getActionName:bs}),mr:new Gt({x:.5,y:0,cursorStyleHandler:In,actionHandler:Bu,getActionName:bs}),mb:new Gt({x:0,y:.5,cursorStyleHandler:In,actionHandler:Uu,getActionName:bs}),mt:new Gt({x:0,y:-.5,cursorStyleHandler:In,actionHandler:Uu,getActionName:bs}),tl:new Gt({x:-.5,y:-.5,cursorStyleHandler:Ti,actionHandler:ys}),tr:new Gt({x:.5,y:-.5,cursorStyleHandler:Ti,actionHandler:ys}),bl:new Gt({x:-.5,y:.5,cursorStyleHandler:Ti,actionHandler:ys}),br:new Gt({x:.5,y:.5,cursorStyleHandler:Ti,actionHandler:ys}),mtr:new Gt({x:0,y:-.5,actionHandler:Tx,cursorStyleHandler:Sx,offsetY:-40,withConnection:!0,actionName:"rotate"})}),Vx=()=>({mr:new Gt({x:.5,y:0,actionHandler:Vu,cursorStyleHandler:In,actionName:"resizing"}),ml:new Gt({x:-.5,y:0,actionHandler:Vu,cursorStyleHandler:In,actionName:"resizing"})}),Bx=()=>x(x({},Ef()),Vx()),Ux={};class Fo extends nn{static getDefaults(){return x(x({},super.getDefaults()),{},{controls:Ef()},Fo.ownDefaults)}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform.target,r=e._currentTransform.action;if(this===t&&r.startsWith("scale"))return!1}return super._updateCacheCanvas()}_findTargetCorner(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasControls||!this.canvas)return"";this.__corner=void 0;const r=Object.entries(this.oCoords);for(let i=r.length-1;i>=0;i--){const[s,o]=r[i];if(this.controls[s].shouldActivate(s,this)){const a=this._getImageLines(t?o.touchCorner:o.corner),l=this._findCrossPoints(e,a);if(l!==0&&l%2===1)return this.__corner=s,s}}return""}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=ko(t.x,t.y),i=Mo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=kt(r,i),o=kt(e,s),a=kt(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?xn(this.calcTransformMatrix()):void 0,c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const r=e.calcCornerCoords(this.angle,this.cornerSize,t.x,t.y,!1),i=e.calcCornerCoords(this.angle,this.touchCornerSize,t.x,t.y,!0);return{corner:r,touchCorner:i}}setCoords(){super.setCoords(),this.oCoords=this.calcOCoords()}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(He(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=x({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:i}=this,s=x({hasBorders:r,hasControls:i},t),o=this.getViewportTransform(),a=s.hasBorders,l=s.hasControls,c=kt(o,this.calcTransformMatrix()),u=xn(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(He(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let i;if(r&&r.forActiveSelection||this.group){const s=pf(this.width,this.height,t),o=(this.strokeUniform?new O().scalarAdd(this.canvas?this.canvas.getZoom():1):new O(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=s.add(o).scalarAdd(this.borderScaleFactor)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((i,s)=>{i.withConnection&&i.getVisibility(this,s)&&(r=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:s,cornerColor:o}=this,a=x({cornerStrokeColor:i,cornerDashArray:s,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.setCoords(),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,i]=t;return this.setControlVisible(r,i)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const i=this.width+4,s=this.height+4;return t.clearRect(-i/2,-s/2,i,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}S(Fo,"ownDefaults",Ux);function Ff(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}class dt extends Fo{}Ff(dt,[xf]);te.setClass(dt);te.setClass(dt,"object");const Nx=(n,e,t,r)=>{r=Math.round(r);const i=r*2+1,{data:s}=n.getImageData(e-r,t-r,i,i);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0},sn=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Ao(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Nu,Hu;const Is={},Hx={},Wx={},Yx={cssRules:Is,gradientDefs:Hx,clipPaths:Wx},es=String.raw(Nu||(Nu=vr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(Hu||(Hu=vr(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const Xx=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+es+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+es+"))?\\s+(.*)"),zx=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],$x=["symbol","image","marker","pattern","view","svg"],Gx=["pattern","defs","symbol","metadata","clipPath","mask","desc"],qx=["symbol","g","a","svg","clipPath","defs"],Wu={cx:Fe,x:Fe,r:"radius",cy:yt,y:yt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},ia={stroke:"strokeOpacity",fill:"fillOpacity"},sa="font-size",oa="clip-path";Ao(zx);Ao($x);Ao(Gx);const Yu=Ao(qx);function Af(n,e){const t=n.nodeName,r=n.getAttribute("class"),i=n.getAttribute("id");let s;if(s=new RegExp("^"+t,"i"),e=e.replace(s,""),i&&e.length&&(s=new RegExp("#"+i+"(?![a-zA-Z\\-]+)","i"),e=e.replace(s,"")),r&&e.length){const o=r.split(" ");for(let a=o.length;a--;)s=new RegExp("\\."+o[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(s,"")}return e.length===0}function Kx(n,e){let t,r=!0;for(;n.parentNode&&n.parentNode.nodeType===1&&e.length;)r&&(t=e.pop()),n=n.parentNode,r=Af(n,t);return e.length===0}function Zx(n,e){let t=!0;const r=Af(n,e.pop());return r&&e.length&&(t=Kx(n,e)),r&&t&&e.length===0}function Qx(n,e){const t={};for(const r in Is[e])if(Zx(n,r.split(" ")))for(const i in Is[e][r])t[i]=Is[e][r][i];return t}function Jx(n){return n in Wu?Wu[n]:n}const Lf=n=>n.replace(new RegExp("(".concat(es,")"),"gi")," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Xu,zu,$u,Gu,qu,Ku,Zu;const xt="(".concat(es,")"),eS=String.raw(Xu||(Xu=vr(["(skewX)(",")"],["(skewX)\\(","\\)"])),xt),tS=String.raw(zu||(zu=vr(["(skewY)(",")"],["(skewY)\\(","\\)"])),xt),rS=String.raw($u||($u=vr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),xt,xt,xt),nS=String.raw(Gu||(Gu=vr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),xt,xt),iS=String.raw(qu||(qu=vr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),xt,xt),sS=String.raw(Ku||(Ku=vr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),xt,xt,xt,xt,xt,xt),Bl="(?:".concat(sS,"|").concat(iS,"|").concat(rS,"|").concat(nS,"|").concat(eS,"|").concat(tS,")"),oS="(?:".concat(Bl,"*)"),aS=String.raw(Zu||(Zu=vr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),oS),lS=new RegExp(aS),cS=new RegExp(Bl,"g");function Ga(n){n=Lf(n).replace(/\s*([()])\s*/gi,"$1");const e=[];if(!n||n&&!lS.test(n))return[...rr];for(const t of n.matchAll(cS)){const r=new RegExp(Bl).exec(t[0]);if(!r)continue;let i=rr;const s=r.filter(g=>!!g),[,o,...a]=s,[l,c,u,h,d,f]=a.map(g=>parseFloat(g));switch(o){case"translate":i=ko(l,c);break;case"rotate":i=Mo({angle:l},{x:c,y:u});break;case"scale":i=tf(l,c);break;case"skewX":i=nf(l);break;case"skewY":i=sf(l);break;case"matrix":i=[l,c,u,h,d,f];break}e.push(i)}return Fl(e)}function uS(n,e,t,r){const i=Array.isArray(e);let s;if((n==="fill"||n==="stroke")&&e===Et)e="";else{if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")e===Et?e=null:e=e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")t&&t.transformMatrix?e=kt(t.transformMatrix,Ga(e)):e=Ga(e);else if(n==="visible")e=e!==Et&&e!=="hidden",t&&t.visible===!1&&(e=!1);else if(n==="opacity")e=parseFloat(e),t&&typeof t.opacity<"u"&&(e*=t.opacity);else if(n==="textAnchor")e=e==="start"?Fe:e==="end"?Qe:de;else if(n==="charSpacing")s=Ii(e,r)/r*1e3;else if(n==="paintFirst"){const o=e.indexOf("fill"),a=e.indexOf("stroke");e="fill",(o>-1&&a>-1&&a<o||o===-1&&a>-1)&&(e="stroke")}else{if(n==="href"||n==="xlink:href"||n==="font")return e;if(n==="imageSmoothing")return e==="optimizeQuality";s=i?e.map(Ii):Ii(e,r)}}return!i&&isNaN(s)?e:s}function hS(n,e){const t=n.match(Xx);if(!t)return;const r=t[1],i=t[3],s=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),s&&(e.fontSize=Ii(s)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function dS(n,e){let t,r;for(const i in n)typeof n[i]>"u"||(t=i.toLowerCase(),r=n[i],e[t]=r)}function fS(n,e){let t,r;n.replace(/;\s*$/,"").split(";").forEach(function(i){const s=i.split(":");t=s[0].trim().toLowerCase(),r=s[1].trim(),e[t]=r})}function gS(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?fS(t,e):dS(t,e)),e}function pS(n){for(const e in ia){if(typeof n[ia[e]]>"u"||n[e]==="")continue;const t=dt.getDefaults();if(typeof n[e]>"u"){if(!t[e])continue;n[e]=t[e]}if(n[e].indexOf("url(")===0)continue;const r=new Ie(n[e]);n[e]=r.setAlpha(De(r.getAlpha()*n[ia[e]],2)).toRgba()}return n}function Lr(n,e,t){if(!n)return{};let r,i={},s,o;typeof t>"u"&&(t=n.getAttribute("svgUid")),n.parentNode&&Yu.test(n.parentNode.nodeName)&&(i=Lr(n.parentNode,e,t));let a=e.reduce(function(h,d){return r=n.getAttribute(d),r&&(h[d]=r),h},{});const l=Object.assign(Qx(n,t),gS(n));a=Object.assign(a,l),l[oa]&&n.setAttribute(oa,l[oa]),s=o=i.fontSize||El,a[sa]&&(a[sa]=s=Ii(a[sa],o));const c={};for(const h in a){const d=Jx(h),f=uS(d,a[h],i,s);c[d]=f}c&&c.font&&hS(c.font,c);const u=x(x({},i),c);return Yu.test(n.nodeName)?u:pS(u)}const mS=["left","top","width","height","visible"],_S={rx:0,ry:0},Rf=["rx","ry"];class Mt extends dt{static getDefaults(){return x(x({},super.getDefaults()),Mt.ownDefaults)}constructor(e){super(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,i=-t/2,s=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(i+o,s),e.lineTo(i+t-o,s),l&&e.bezierCurveTo(i+t-Vr*o,s,i+t,s+Vr*a,i+t,s+a),e.lineTo(i+t,s+r-a),l&&e.bezierCurveTo(i+t,s+r-Vr*a,i+t-Vr*o,s+r,i+t-o,s+r),e.lineTo(i+o,s+r),l&&e.bezierCurveTo(i+Vr*o,s+r,i,s+r-Vr*a,i,s+r-a),e.lineTo(i,s+a),l&&e.bezierCurveTo(i,s+Vr*a,i+Vr*o,s,i+o,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Rf,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=Lr(e,this.ATTRIBUTE_NAMES),{left:s=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=i,u=Xe(i,mS);return new this(x(x(x({},r),u),{},{left:s,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}S(Mt,"type","Rect");S(Mt,"cacheProperties",[...Ar,...Rf]);S(Mt,"ownDefaults",_S);S(Mt,"ATTRIBUTE_NAMES",[...sn,"x","y","rx","ry","width","height"]);te.setClass(Mt);te.setSVGClass(Mt);const vS=["objects"],wS={layout:"fit-content",strokeWidth:0,subTargetCheck:!1,interactive:!1};class on extends Qd(dt){static getDefaults(){return x(x({},super.getDefaults()),on.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;super(),S(this,"_activeObjects",[]),S(this,"__objectSelectionTracker",void 0),S(this,"__objectSelectionDisposer",void 0),S(this,"_firstLayoutDone",!1),this._objects=e,this.__objectMonitor=this.__objectMonitor.bind(this),this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.set(x(x({},t),{},{angle:0,skewX:0,skewY:0})),this.forEachObject(i=>{this.enterGroup(i,!1)}),this._applyLayoutStrategy({type:"initialization",options:t,objectsRelativeToGroup:r})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(console.error("fabric.Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)!==-1?(console.error("fabric.Group: duplicate objects are not supported inside group, this call has no effect"),!1):!0}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,i)=>this.canEnterGroup(t)&&i.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...i);return this._onAfterObjectsChange("added",i),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...s);return this._onAfterObjectsChange("added",s),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange("removed",e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onRelativeObjectAdded(e){this.enterGroup(e,!1),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this._applyLayoutStrategy({type:e,targets:t}),this._set("dirty",!0)}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&this.forEachObject(i=>{i._set(e,t)}),e==="layout"&&r!==t&&this._applyLayoutStrategy({type:"layout_change",layout:t,prevLayout:r}),e==="interactive"&&this.forEachObject(i=>this._watchObject(t,i)),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectMonitor(e){this._applyLayoutStrategy(x(x({},e),{},{type:"object_modified"})),this._set("dirty",!0)}__objectSelectionMonitor(e,t){let{target:r}=t;if(e)this._activeObjects.push(r),this._set("dirty",!0);else if(this._activeObjects.length>0){const i=this._activeObjects.indexOf(r);i>-1&&(this._activeObjects.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){const r=e?"on":"off";e&&this._watchObject(!1,t),t[r]("changed",this.__objectMonitor),t[r]("modified",this.__objectMonitor),t[r]("selected",this.__objectSelectionTracker),t[r]("deselected",this.__objectSelectionDisposer)}enterGroup(e,t){return e.group&&e.group.remove(e),this._enterGroup(e,t),!0}_enterGroup(e,t){t&&Js(e,kt(St(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this.interactive&&this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Js(e,kt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=dt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(dt.prototype.willDrawShadow.call(this))return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.group&&this.group.isOnACache()}drawObject(e){this._renderBackground(e);for(let r=0;r<this._objects.length;r++){var t;(t=this.canvas)!==null&&t!==void 0&&t.preserveObjectStacking&&this._objects[r].group!==this?(e.save(),e.transform(...St(this.calcTransformMatrix())),this._objects[r].render(e),e.restore()):this._objects[r].group===this&&this._objects[r].render(e)}this._drawClipPath(e,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}triggerLayout(e){e&&e.layout&&(e.prevLayout=this.layout,this.layout=e.layout),this._applyLayoutStrategy({type:"imperative",context:e})}_adjustObjectPosition(e,t){e.set({left:e.left+t.x,top:e.top+t.y})}_applyLayoutStrategy(e){const t=e.type==="initialization";if(!t&&!this._firstLayoutDone)return;const r=t&&e.options,i=r&&{angle:r.angle||0,skewX:r.skewX||0,skewY:r.skewY||0},s=this.getRelativeCenterPoint();let o=this.getLayoutStrategyResult(this.layout,[...this._objects],e),a;if(o){const l=new O(o.centerX,o.centerY);a=s.subtract(l).add(new O(o.correctionX||0,o.correctionY||0)).transform(St(this.calcOwnMatrix()),!0),this.set({width:o.width,height:o.height}),!e.objectsRelativeToGroup&&this.forEachObject(u=>{u.group===this&&this._adjustObjectPosition(u,a)}),!t&&this.layout!=="clip-path"&&this.clipPath&&!this.clipPath.absolutePositioned&&this._adjustObjectPosition(this.clipPath,a),(!l.eq(s)||i)&&(this.setPositionByOrigin(l,de,de),i&&this.set(i),this.setCoords())}else if(t)o={centerX:s.x,centerY:s.y,width:this.width,height:this.height},i&&this.set(i),a=new O;else return;this._firstLayoutDone=!0,this.onLayout(e,o),this.fire("layout",{context:e,result:o,diff:a}),this.group&&this.group._applyLayoutStrategy&&(e.path||(e.path=[]),e.path.push(this),this.group._applyLayoutStrategy(e))}getLayoutStrategyResult(e,t,r){if(e==="fit-content-lazy"&&r.type==="added"&&t.length>r.targets.length){const i=r.targets.concat(this);return this.prepareBoundingBox(e,i,r)}else{if(e==="fit-content"||e==="fit-content-lazy"||e==="fixed"&&(r.type==="initialization"||r.type==="imperative"))return this.prepareBoundingBox(e,t,r);if(e==="clip-path"&&this.clipPath){const i=this.clipPath,s=i._getTransformedDimensions();if(i.absolutePositioned&&(r.type==="initialization"||r.type==="layout_change")){let o=i.getCenterPoint();if(this.group){const a=St(this.group.calcTransformMatrix());o=st(o,a)}return{centerX:o.x,centerY:o.y,width:s.x,height:s.y}}else if(!i.absolutePositioned){let o;const a=i.getRelativeCenterPoint(),l=st(a,this.calcOwnMatrix(),!0);if(r.type==="initialization"||r.type==="layout_change"){const c=this.prepareBoundingBox(e,t,r)||{};return o=new O(c.centerX||0,c.centerY||0),{centerX:o.x+l.x,centerY:o.y+l.y,correctionX:c.correctionX-l.x,correctionY:c.correctionY-l.y,width:i.width,height:i.height}}else return o=this.getRelativeCenterPoint(),{centerX:o.x+l.x,centerY:o.y+l.y,width:s.x,height:s.y}}}}}prepareBoundingBox(e,t,r){return r.type==="initialization"?this.prepareInitialBoundingBox(e,t,r):r.type==="imperative"&&r.context?x(x({},this.getObjectsBoundingBox(t)||{}),r.context):this.getObjectsBoundingBox(t)}prepareInitialBoundingBox(e,t,r){const i=r.options||{},s=typeof i.left=="number",o=typeof i.top=="number",a=typeof i.width=="number",l=typeof i.height=="number";if(s&&o&&a&&l&&r.objectsRelativeToGroup||t.length===0)return;const c=this.getObjectsBoundingBox(t)||{},{centerX:u=0,centerY:h=0,width:d=0,height:f=0}=c,g=a?this.width:d,p=l?this.height:f,_=new O(u,h),y=new O($r(this.originX),$r(this.originY)),w=new O(g,p),T=this._getTransformedDimensions({width:0,height:0}),b=this._getTransformedDimensions({width:g,height:p,strokeWidth:0}),P=this._getTransformedDimensions({width:c.width,height:c.height,strokeWidth:0}),R=new O(0,0),N=y.scalarAdd(.5),U=b.multiply(N),G=new O(a?P.x/2:U.x,l?P.y/2:U.y),re=new O(s?this.left-(b.x+T.x)*y.x:_.x-G.x,o?this.top-(b.y+T.y)*y.y:_.y-G.y),me=new O(s?re.x-_.x+P.x*(a?.5:0):-(a?(b.x-T.x)*.5:b.x*N.x),o?re.y-_.y+P.y*(l?.5:0):-(l?(b.y-T.y)*.5:b.y*N.y)).add(R),ge=new O(a?-b.x/2:0,l?-b.y/2:0).add(me);return{centerX:re.x,centerY:re.y,correctionX:ge.x,correctionY:ge.y,width:w.x,height:w.y}}getObjectsBoundingBox(e,t){if(e.length===0)return null;const r=[];e.forEach(h=>{const d=h.getRelativeCenterPoint();let f=h._getTransformedDimensions().scalarDivide(2);if(h.angle){const g=He(h.angle),p=Math.abs(Ut(g)),_=Math.abs(Bt(g)),y=f.x*_+f.y*p,w=f.x*p+f.y*_;f=new O(y,w)}r.push(d.subtract(f),d.add(f))});const{left:i,top:s,width:o,height:a}=Jr(r),l=new O(o,a),c=(t?new O:new O(i,s)).add(l.scalarDivide(2)),u=c.transform(this.calcOwnMatrix());return{centerX:u.x,centerY:u.y,width:l.x,height:l.y}}onLayout(e,t){}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(i){return!i.excludeFromExport}).map(function(i){const s=i.includeDefaultValues;i.includeDefaultValues=r;const o=i[e||"toObject"](t);return i.includeDefaultValues=s,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(["layout","subTargetCheck","interactive",...e])),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Mt.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let i=0;i<this._objects.length;i++)t.push("		",this._objects[i].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=typeof this.opacity<"u"&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let i=0;i<this._objects.length;i++)t.push("	",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e){let{objects:t=[]}=e,r=Xe(e,vS);return Promise.all([Ji(t),Po(r)]).then(i=>{let[s,o]=i;return new this(s,x(x({},r),o),!0)})}}S(on,"stateProperties",[...dt.stateProperties,"layout"]);S(on,"type","Group");S(on,"ownDefaults",wS);te.setClass(on);class Lo extends on{constructor(e,t,r){super(e,t,r),S(this,"multiSelectionStacking","canvas-stacking"),this.setCoords()}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(i=>{const s=this._objects.findIndex(a=>a.isInFrontOf(i)),o=s===-1?this.size():s;this.insertAt(o,i)})}enterGroup(e,t){if(e.group){const r=e.group;r._exitGroup(e),e.__owningGroup=r}return this._enterGroup(e,t),!0}exitGroup(e,t){this._exitGroup(e,t);const r=e.__owningGroup;r&&(r._enterGroup(e,!0),delete e.__owningGroup)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=[];t.forEach(i=>{i.group&&!r.includes(i.group)&&r.push(i.group)}),e==="removed"?r.forEach(i=>{i._onAfterObjectsChange("added",t)}):r.forEach(i=>{i._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,super._renderControls(e,t);const i=x(x({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,i);e.restore()}}S(Lo,"type","ActiveSelection");te.setClass(Lo);te.setClass(Lo,"activeSelection");class Di{static getAcuteAngleFactor(e,t){const r=t?Rl(e,t):dx(e);return Math.abs(r)<si?-1:1}constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new O(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new O(1/this.options.scaleX,1/this.options.scaleY):new O(1,1)}createSideVector(e,t){const r=ei(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new O(e);return t.y+=t.x*Math.tan(He(this.options.skewY)),t.x+=t.y*Math.tan(He(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}class If extends Di{constructor(e,t,r,i){super(i),this.A=new O(e),this.B=new O(t),this.C=new O(r),this.bisector=this.options.strokeUniform?ju(this.A.multiply(this.scale),this.B.multiply(this.scale),this.C.multiply(this.scale)):ju(this.A,this.B,this.C)}get bisectorVector(){return this.bisector.vector}get bisectorAngle(){return this.bisector.angle}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),s=Df(i),o=Di.getAcuteAngleFactor(s,this.bisectorVector);return this.scaleUnitVector(s,r*o)}projectBevel(){return[this.B,this.C].map(e=>this.projectOrthogonally(this.A,e))}projectMiter(){const e=Math.abs(this.bisectorAngle),t=1/Math.sin(e/2),r=this.scaleUnitVector(this.bisectorVector,-this.strokeProjectionMagnitude*t),i=this.options.strokeUniform?t:this.options.strokeMiterLimit;return Tf(r)/this.strokeProjectionMagnitude<=i?[this.applySkew(this.A.add(r))]:this.projectBevel()}projectRoundNoSkew(){const e=new O(Di.getAcuteAngleFactor(this.bisectorVector),Di.getAcuteAngleFactor(new O(this.bisectorVector.y,this.bisectorVector.x))),t=new O(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(e),r=new O(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(e);return[this.A.add(t),this.A.add(r)]}projectRoundWithSkew(){const e=[];[this.B,this.C].forEach(c=>e.push(this.projectOrthogonally(this.A,c)));const{skewX:t,skewY:r}=this.options,i=new O().scalarAdd(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar),s=i.y/Math.sqrt(1+Math.tan(He(r))**2),o=new O(Math.sqrt(i.x**2-(s*i.x/i.y)**2),s),a=i.x/Math.sqrt(1+Math.tan(He(t))**2);return[new O(a,Math.sqrt(s**2-(a*s/i.x)**2)),o].forEach(c=>{e.push(this.applySkew(this.A.add(c)),this.applySkew(this.A.subtract(c)))}),e}projectRound(){return this.isSkewed()?this.projectRoundWithSkew():this.projectRoundNoSkew()}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,bisector:this.bisector}))}}class yS extends Di{constructor(e,t,r){super(r),this.A=new O(e),this.T=new O(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(Df(i),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){return new If(this.A,this.T,this.T,this.options).projectRound()}projectSquare(){const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),t=this.scaleUnitVector(Il(ei(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(t);return[r.add(e),r.subtract(e)].map(i=>this.applySkew(i))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const bS=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return n.length<=1||n.forEach((i,s)=>{let o,a;s===0?(a=n[1],o=t?i:n[n.length-1]):s===n.length-1?(o=n[s-1],a=t?i:n[0]):(o=n[s-1],a=n[s+1]),t&&(s===0||s===n.length-1)?r.push(...new yS(i,s===0?a:o,e).project()):r.push(...new If(i,o,a,e).project())}),r},Ul=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},xS=(n,e)=>{const t=e.split(`
`),r=[];let i=-1,s={};n=ai(n);for(let o=0;o<t.length;o++){if(!n[o]){i+=t[o].length,s={};continue}for(let a=0;a<t[o].length;a++){i++;const l=n[o][a];l&&Object.keys(l).length>0&&(Ul(s,l,!0)?r.push({start:i,end:i+1,style:l}):r[r.length-1].end++),s=l||{}}}return r},SS=(n,e)=>{if(!Array.isArray(n))return ai(n);const t=e.split(Zd),r={};let i=-1,s=0;for(let o=0;o<t.length;o++)for(let a=0;a<t[o].length;a++)i++,n[s]&&n[s].start<=i&&i<n[s].end&&(r[o]=r[o]||{},r[o][a]=x({},n[s].style),i===n[s].end-1&&s++);return r},CS=(n,e)=>Math.min(e.width/n.width,e.height/n.height),TS=(n,e)=>Math.max(e.width/n.width,e.height/n.height),DS=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),OS=n=>{const e=[];for(let t=0,r;t<n.length;t++)(r=kS(n,t))!==!1&&e.push(r);return e},kS=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const i=n.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1};var Qu;const Be="(".concat(es,")"),MS="(M) (?:".concat(Be," ").concat(Be," ?)+"),PS="(L) (?:".concat(Be," ").concat(Be," ?)+"),ES="(H) (?:".concat(Be," ?)+"),FS="(V) (?:".concat(Be," ?)+"),AS=String.raw(Qu||(Qu=vr(["(Z)s*"],["(Z)\\s*"]))),LS="(C) (?:".concat(Be," ").concat(Be," ").concat(Be," ").concat(Be," ").concat(Be," ").concat(Be," ?)+"),RS="(S) (?:".concat(Be," ").concat(Be," ").concat(Be," ").concat(Be," ?)+"),IS="(Q) (?:".concat(Be," ").concat(Be," ").concat(Be," ").concat(Be," ?)+"),jS="(T) (?:".concat(Be," ").concat(Be," ?)+"),VS="(A) (?:".concat(Be," ").concat(Be," ").concat(Be," ([01]) ?([01]) ").concat(Be," ").concat(Be," ?)+"),Ju="(?:(?:".concat(MS,")")+"|(?:".concat(PS,")")+"|(?:".concat(ES,")")+"|(?:".concat(FS,")")+"|(?:".concat(AS,")")+"|(?:".concat(LS,")")+"|(?:".concat(RS,")")+"|(?:".concat(IS,")")+"|(?:".concat(jS,")")+"|(?:".concat(VS,"))"),BS={m:"l",M:"L"},US=(n,e,t,r,i,s,o,a,l,c,u)=>{const h=Bt(n),d=Ut(n),f=Bt(e),g=Ut(e),p=t*i*f-r*s*g+o,_=r*i*f+t*s*g+a,y=c+l*(-t*i*d-r*s*h),w=u+l*(-r*i*d+t*s*h),T=p+l*(t*i*g+r*s*f),b=_+l*(r*i*g-t*s*f);return["C",y,w,T,b,p,_]},NS=(n,e,t,r,i,s,o)=>{if(t===0||r===0)return[];let a=0,l=0,c=0;const u=Math.PI,h=o*Pl,d=Ut(h),f=Bt(h),g=.5*(-f*n-d*e),p=.5*(-f*e+d*n),_=t**2,y=r**2,w=p**2,T=g**2,b=_*y-_*w-y*T;let P=Math.abs(t),R=Math.abs(r);if(b<0){const he=Math.sqrt(1-b/(_*y));P*=he,R*=he}else c=(i===s?-1:1)*Math.sqrt(b/(_*w+y*T));const N=c*P*p/R,U=-c*R*g/P,G=f*N-d*U+n*.5,re=d*N+f*U+e*.5;let me=eh(1,0,(g-N)/P,(p-U)/R),ge=eh((g-N)/P,(p-U)/R,(-g-N)/P,(-p-U)/R);s===0&&ge>0?ge-=2*u:s===1&&ge<0&&(ge+=2*u);const ye=Math.ceil(Math.abs(ge/u*2)),_e=new Array(ye),ae=ge/ye,ne=8/3*Math.sin(ae/4)*Math.sin(ae/4)/Math.sin(ae/2);let pe=me+ae;for(let he=0;he<ye;he++)_e[he]=US(me,pe,f,d,P,R,G,re,ne,a,l),a=_e[he][5],l=_e[he][6],me=pe,pe+=ae;return _e},eh=(n,e,t,r)=>{const i=Math.atan2(e,n),s=Math.atan2(r,t);return s>=i?s-i:2*Math.PI-(i-s)},HS=n=>n**3,WS=n=>3*n**2*(1-n),YS=n=>3*n*(1-n)**2,XS=n=>(1-n)**3;function th(n,e,t,r,i,s,o,a){let l;if(we.cachesBoundsOfCurve&&(l=[...arguments].join(),Ri.boundsOfCurveCache[l]))return Ri.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*n-12*t+6*i,g=-3*n+9*t-9*i+3*o,p=3*t-3*n;for(let b=0;b<2;++b){if(b>0&&(f=6*e-12*r+6*s,g=-3*e+9*r-9*s+3*a,p=3*r-3*e),u(g)<1e-12){if(u(f)<1e-12)continue;const G=-p/f;0<G&&G<1&&h.push(G);continue}const P=f*f-4*p*g;if(P<0)continue;const R=c(P),N=(-f+R)/(2*g);0<N&&N<1&&h.push(N);const U=(-f-R)/(2*g);0<U&&U<1&&h.push(U)}let _=h.length;const y=_,w=jf(n,e,t,r,i,s,o,a);for(;_--;){const{x:b,y:P}=w(h[_]);d[0][_]=b,d[1][_]=P}d[0][y]=n,d[1][y]=e,d[0][y+1]=o,d[1][y+1]=a;const T=[new O(Math.min(...d[0]),Math.min(...d[1])),new O(Math.max(...d[0]),Math.max(...d[1]))];return we.cachesBoundsOfCurve&&(Ri.boundsOfCurveCache[l]=T),T}const zS=(n,e,t)=>{let[r,i,s,o,a,l,c,u]=t;const h=NS(c-n,u-e,i,s,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},$S=n=>{let e=0,t=0,r=0,i=0;const s=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],i=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":zS(e,t,u).forEach(d=>s.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=i,h=["Z"];break}h?(s.push(h),o=h[0]):o=""}return s},to=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),jf=(n,e,t,r,i,s,o,a)=>l=>{const c=HS(l),u=WS(l),h=YS(l),d=XS(l);return new O(o*c+i*u+t*h+n*d,a*c+s*u+r*h+e*d)},Vf=n=>n**2,Bf=n=>2*n*(1-n),Uf=n=>(1-n)**2,GS=(n,e,t,r,i,s,o,a)=>l=>{const c=Vf(l),u=Bf(l),h=Uf(l),d=3*(h*(t-n)+u*(i-t)+c*(o-i)),f=3*(h*(r-e)+u*(s-r)+c*(a-s));return Math.atan2(f,d)},qS=(n,e,t,r,i,s)=>o=>{const a=Vf(o),l=Bf(o),c=Uf(o);return new O(i*a+t*l+n*c,s*a+r*l+e*c)},KS=(n,e,t,r,i,s)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(i-t)),c=2*(a*(r-e)+o*(s-r));return Math.atan2(c,l)},rh=(n,e,t)=>{let r=new O(e,t),i=0;for(let s=1;s<=100;s+=1){const o=n(s/100);i+=to(r.x,r.y,o.x,o.y),r=o}return i},nh=(n,e)=>{let t=0,r=0,i={x:n.x,y:n.y},s=x({},i),o,a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;r<e&&a>1e-4;)s=c(t),l=t,o=to(i.x,i.y,s.x,s.y),o+r>e?(t-=a,a/=2):(i=s,t+=a,r+=o);return x(x({},s),{},{angle:u(l)})},Nf=n=>{let e=0,t=0,r=0,i=0,s=0,o,a;const l=[];for(const c of n){const u={x:t,y:r,command:c[0],length:0};switch(c[0]){case"M":a=u,i=t=c[1],s=r=c[2];break;case"L":a=u,a.length=to(t,r,c[1],c[2]),t=c[1],r=c[2];break;case"C":o=jf(t,r,c[1],c[2],c[3],c[4],c[5],c[6]),a=u,a.iterator=o,a.angleFinder=GS(t,r,c[1],c[2],c[3],c[4],c[5],c[6]),a.length=rh(o,t,r),t=c[5],r=c[6];break;case"Q":o=qS(t,r,c[1],c[2],c[3],c[4]),a=u,a.iterator=o,a.angleFinder=KS(t,r,c[1],c[2],c[3],c[4]),a.length=rh(o,t,r),t=c[3],r=c[4];break;case"Z":a=u,a.destX=i,a.destY=s,a.length=to(t,r,i,s),t=i,r=s;break}e+=a.length,l.push(a)}return l.push({length:e,x:t,y:r}),l},ih=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nf(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const i=t[r],s=e/i.length,o=n[r];switch(i.command){case"M":return{x:i.x,y:i.y,angle:0};case"Z":return x(x({},new O(i.x,i.y).lerp(new O(i.destX,i.destY),s)),{},{angle:Math.atan2(i.destY-i.y,i.destX-i.x)});case"L":return x(x({},new O(i.x,i.y).lerp(new O(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-i.y,o[1]-i.x)});case"C":return nh(i,e);case"Q":return nh(i,e)}},ZS=n=>{n=Lf(n);const e=[];for(const t of n.matchAll(new RegExp(Ju,"gi"))){let r=t[0];const i=[];let s;do{if(s=new RegExp(Ju,"i").exec(r),!s)break;const o=s.filter(l=>l);o.shift();const a=o.map(l=>{const c=Number.parseFloat(l);return Number.isNaN(c)?l:c});if(i.push(a),o.length<=1)break;o.shift(),r=r.replace(new RegExp("".concat(o.join(" ?")," ?$")),"")}while(s);i.reverse().forEach((o,a)=>{const l=BS[o[0]];a>0&&(l=="l"||l=="L")&&(o[0]=l),e.push(o)})}return e},QS=(n,e)=>n.map(t=>t.map((r,i)=>i===0||e===void 0?r:De(r,e)).join(" ")).join(" "),JS=n=>{if(n.transformMatrix){const{scaleX:e,scaleY:t,angle:r,skewX:i}=xn(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set("scaleX",e),n.set("scaleY",t),n.angle=r,n.skewX=i,n.skewY=0}},sh=(n,e)=>{let t=n._findCenterFromElement();n.transformMatrix&&(JS(n),t=t.transform(n.transformMatrix)),delete n.transformMatrix,e&&(n.scaleX*=e.scaleX,n.scaleY*=e.scaleY,n.cropX=e.cropX,n.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,n.width=e.width,n.height=e.height),n.setPositionByOrigin(t,de,de)};class eC extends df{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),S(this,"upper",void 0),S(this,"container",void 0);const{el:i}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t});const o=this.createContainerElement();o.classList.add(r),i.parentNode&&i.parentNode.replaceChild(o,i),o.append(i,s),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=ot();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=ii().createElement("div");return e.setAttribute("data-fabric","wrapper"),Qs(e,{position:"relative"}),Ru(e),e}applyCanvasStyle(e,t){let{allowTouchScrolling:r}=t;Qs(e,{position:"absolute",left:0,top:0}),N1(e,r),Ru(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:i}=this.upper;hf(r,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Ya(this.upper.el,e),Ya(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),mr().dispose(this.upper.el),delete this.upper,delete this.container}}const tC={uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,preserveObjectStacking:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1};class Ro extends is{static getDefaults(){return x(x({},super.getDefaults()),Ro.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),S(this,"interactive",!0),S(this,"targets",[]),S(this,"_hoveredTargets",[]),S(this,"_objectsToRender",[]),S(this,"_currentTransform",null),S(this,"_groupSelector",null),S(this,"contextTopDirty",!1),S(this,"_activeSelection",void 0),this._activeSelection=new Lo([],{canvas:this})}initElements(e){this.elements=new eC(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),!this.destroyed&&(this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}_normalizePointer(e,t){return st(this.restorePointerVpt(t),St(e.calcTransformMatrix()))}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((e*2+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const i=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+i,-r+i),s.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=o,s.restore();const a=Math.round(i*this.getRetinaScaling());return Nx(s,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return t?Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t]:!1}_shouldClearSelection(e,t){const r=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&r.length>1&&r.indexOf(t)===-1&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let i;return t==="scale"||t==="scaleX"||t==="scaleY"||t==="resizing"?i=this.centeredScaling||e.centeredScaling:t==="rotate"&&(i=this.centeredRotation||e.centeredRotation),i?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return["ml","tl","bl"].includes(t)?r.x=Qe:["mr","tr","br"].includes(t)&&(r.x=Fe),["tl","mt","tr"].includes(t)?r.y=Na:["bl","mb","br"].includes(t)&&(r.y=yt),r}_setupCurrentTransform(e,t,r){if(!t)return;const i=t.group?_f(this.getPointer(e),void 0,t.group.calcTransformMatrix()):this.getPointer(e),s=t.__corner||"",o=!!s&&t.controls[s],a=r&&o?o.getActionHandler(e,t,o):J1,l=Z1(r,s,e,t),c=this._getOriginFromCorner(t,s),u=e[this.centeredKey],h={target:t,action:l,actionHandler:a,actionPerformed:!1,corner:s,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:c.x,originY:c.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:He(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:x(x({},gf(t)),{},{originX:c.x,originY:c.y})};this._shouldCenterTransform(t,l,u)&&(h.originX=de,h.originY=de),this._currentTransform=h,this._beforeTransform(e)}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new O(t,r).transform(this.viewportTransform),a=new O(t+i,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,dt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getPointer(e,!0),r=this._activeObject,i=this.getActiveObjects();if(this.targets=[],r&&i.length>=1){if(r._findTargetCorner(t,Xa(e)))return r;if(i.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t))if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=s,r):o}else return r}return this.searchPossibleTargets(this._objects,t)}_checkTarget(e,t,r){if(t&&t.visible&&t.evented&&t.containsPoint(e))if((this.perPixelTargetFind||t.perPixelTargetFind)&&!t.isEditing){if(!this.isTargetTransparent(t,r.x,r.y))return!0}else return!0;return!1}_searchPossibleTargets(e,t){let r,i=e.length;for(;i--;){const s=e[i],o=s.group?this._normalizePointer(s.group,t):t;if(this._checkTarget(o,s,t)){if(r=e[i],Wa(r)&&r.subTargetCheck){const a=this._searchPossibleTargets(r._objects,t);a&&this.targets.push(a)}break}}return r}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);return r&&Wa(r)&&r.interactive&&this.targets[0]?this.targets[0]:r}restorePointerVpt(e){return e.transform(St(this.viewportTransform))}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this._absolutePointer&&!t)return this._absolutePointer;if(this._pointer&&t)return this._pointer;const r=this.upperCanvasEl,i=r.getBoundingClientRect();let s=z1(e),o=i.width||0,a=i.height||0;(!o||!a)&&(yt in i&&Na in i&&(a=Math.abs(i.top-i.bottom)),Qe in i&&Fe in i&&(o=Math.abs(i.right-i.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=this.restorePointerVpt(s));const l=this.getRetinaScaling();l!==1&&(s.x/=l,s.y/=l);const c=o===0||a===0?new O(1,1):new O(r.width/o,r.height/a);return s.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=ot(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveSelection(){return this._activeSelection}getActiveObjects(){const e=this._activeObject;return e?e===this._activeSelection?[...e._objects]:[e]:[]}_fireSelectionEvents(e,t){let r=!1,i=!1;const s=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{s.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),s.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&s.length>0?(i=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):s.length>0?(i=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),i}_setActiveObject(e,t){return this._activeObject===e||!this._discardActiveObject(t,e)&&this._activeObject||e.onSelect({e:t})?!1:(this._activeObject=e,!0)}_discardActiveObject(e,t){const r=this._activeObject;return r?r.onDeselect({e,object:t})?!1:(r===this._activeSelection&&(this._activeSelection.removeAll(),ff(this._activeSelection)),this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),this._activeObject=void 0,!0):!1}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeSelection;e.removeAll(),this._activeSelection=void 0,e.dispose(),super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const i=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(i),s}_realizeGroupTransformOnObject(e){if(e.group&&e.group===this._activeSelection&&this._activeObject===e.group){const r=oi(e,["angle","flipX","flipY",Fe,"scaleX","scaleY","skewX","skewY",yt]);return G1(e,this._activeObject.calcOwnMatrix()),r}else return{}}_setSVGObject(e,t,r){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(i)}}S(Ro,"ownDefaults",tC);class rC{constructor(e){S(this,"targets",[]),S(this,"__disposer",void 0);const t=()=>{const i=e.getActiveObject();Rs(i)&&i.hiddenTextarea&&i.hiddenTextarea.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),An(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const nC=["target","oldTarget","fireCanvas","e"],jt={passive:!1};function xs(n,e){return!!n.button&&n.button===e-1}const Br=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},Yt=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},iC={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class ts extends Ro{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,t),S(this,"_isClick",void 0),S(this,"textEditingManager",new rC(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(r=>{this[r]=this[r].bind(this)}),this.addOrRemove(Br,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,i=this._getEventPrefix();e(uf(r),"resize",this._onResize),e(r,i+"down",this._onMouseDown),e(r,"".concat(i,"move"),this._onMouseMove,jt),e(r,"".concat(i,"out"),this._onMouseOut),e(r,"".concat(i,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,jt)}removeListeners(){this.addOrRemove(Yt,"remove");const e=this._getEventPrefix(),t=hr(this.upperCanvasEl);Yt(t,"".concat(e,"up"),this._onMouseUp),Yt(t,"touchend",this._onTouchEnd,jt),Yt(t,"".concat(e,"move"),this._onMouseMove,jt),Yt(t,"touchmove",this._onMouseMove,jt)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r={e,isClick:!1,pointer:this.getPointer(e),absolutePointer:this.getPointer(e,!0)};this.fire("mouse:out",x(x({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",x({},r)),this._hoveredTargets.forEach(i=>{this.fire("mouse:out",x(x({},r),{},{target:i})),i&&i.fire("mouseout",x({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){!this._currentTransform&&!this.findTarget(e)&&(this.fire("mouse:over",{e,isClick:!1,pointer:this.getPointer(e),absolutePointer:this.getPointer(e,!0)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(Lu(t)&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};this.fire("dragstart",r),t.fire("dragstart",r),Br(this.upperCanvasEl,"drag",this._onDragProgress);return}za(e)}_renderDragEffects(e,t,r){let i=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),i=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),i=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),i=!0),o.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Et,r=t?this._activeObject:void 0,i={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Yt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getPointer(e,!0)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:i}=this.findDragTargets(e),s=this._dragSource,o={e,target:r,subTargets:i,dragSource:s,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<i.length;l++){const c=i[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,s,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),i={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",{e,target:t,subTargets:r,dragSource:this._dragSource,pointer:this.getPointer(e)});i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&za(e),this._basicEventHandler("contextmenu",i),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0?!0:e.isPrimary===!1?!1:e.type==="touchend"&&e.touches.length===0?!0:e.changedTouches?e.changedTouches[0].identifier===this.mainTouchId:!0}_onTouchStart(e){e.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix(),i=hr(t);Br(i,"touchend",this._onTouchEnd,jt),Br(i,"touchmove",this._onMouseMove,jt),Yt(t,"".concat(r,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Yt(t,"".concat(r,"move"),this._onMouseMove,jt);const i=hr(t);Br(i,"".concat(r,"up"),this._onMouseUp),Br(i,"".concat(r,"move"),this._onMouseMove,jt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),this.mainTouchId=null;const t=this._getEventPrefix(),r=hr(this.upperCanvasEl);Yt(r,"touchend",this._onTouchEnd,jt),Yt(r,"touchmove",this._onMouseMove,jt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Br(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const i=hr(this.upperCanvasEl);Yt(i,"".concat(r,"up"),this._onMouseUp),Yt(i,"".concat(r,"move"),this._onMouseMove,jt),Br(t,"".concat(r,"move"),this._onMouseMove,jt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||Lu(t)&&!t.shouldStartDragging())&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e?!0:(Rs(t),!1)}__onMouseUp(e){const t=this._currentTransform;this._cacheTransformEventData(e);const r=this._target,i=this._isClick;if(this._handleEvent(e,"up:before"),xs(e,vs)){this.fireRightClick&&this._handleEvent(e,"up",vs,i);return}if(xs(e,_s)){this.fireMiddleClick&&this._handleEvent(e,"up",_s,i),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(e);return}if(!this._isMainEvent(e))return;let s=!1;if(t&&(this._finalizeCurrentTransform(e),s=t.actionPerformed),!i){const l=r===this._activeObject;this.handleSelection(e),s||(s=this._shouldRender(r)||!l&&r===this._activeObject)}let o,a;if(r){if(a=r._findTargetCorner(this.getPointer(e,!0),Xa(e)),r.selectable&&r!==this._activeObject&&r.activeOn==="up")this.setActiveObject(r,e),s=!0;else{const l=r.controls[a],c=l&&l.getMouseUpHandler(e,r,l);c&&(o=this.getPointer(e),c(e,t,o.x,o.y))}r.isMoving=!1}if(t&&(t.target!==r||t.corner!==a)){const l=t.target&&t.target.controls[t.corner],c=l&&l.getMouseUpHandler(e,t.target,l);o=o||this.getPointer(e),c&&c(e,t,o.x,o.y)}this._setCursorFromEvent(e,r),this._handleEvent(e,"up",Ou,i),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),s?this.requestRenderAll():!i&&!(Rs(this._activeObject)&&this._activeObject.isEditing)&&this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:i=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<i.length;s++)i[s].fire(e,t);return t}_handleEvent(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ou,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=this._target,o=this.targets||[],a={e,target:s,subTargets:o,button:r,isClick:i,pointer:this.getPointer(e),absolutePointer:this.getPointer(e,!0),transform:this._currentTransform};t==="up"&&(a.currentTarget=this.findTarget(e),a.currentSubTargets=this.targets),this.fire("mouse:".concat(t),a),s&&s.fire("mouse".concat(t),a);for(let l=0;l<o.length;l++)o[l].fire("mouse".concat(t),a)}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,i={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),r.fire("modified",i))}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getPointer(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getPointer(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getPointer(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;if(xs(e,vs)){this.fireRightClick&&this._handleEvent(e,"down",vs);return}if(xs(e,_s)){this.fireMiddleClick&&this._handleEvent(e,"down",_s);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(e);return}if(!this._isMainEvent(e)||this._currentTransform)return;let r=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,r=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const s=this.getPointer(e);this._groupSelector={x:s.x,y:s.y,deltaY:0,deltaX:0}}if(t){const s=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const o=t._findTargetCorner(this.getPointer(e,!0),Xa(e));if(t===this._activeObject&&(o||!i)){this._setupCurrentTransform(e,t,s);const a=t.controls[o],l=this.getPointer(e),c=a&&a.getMouseDownHandler(e,t,a);c&&c(e,this._currentTransform,l.x,l.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),r&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}_beforeTransform(e){const t=this._currentTransform;this.fire("before:transform",{e,transform:t})}__onMouseMove(e){if(this._isClick=!1,this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode){this._onMouseMoveInDrawingMode(e);return}if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getPointer(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:s[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,i=this._hoveredTargets,s=this.targets,o=Math.max(i.length,s.length);this.fireSyntheticInOutEvents("drag",x(x({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",x(x({},t),{},{target:s[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:i,fireCanvas:s,e:o}=t,a=Xe(t,nC);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=iC[e],d=i!==r;if(i&&d){const f=x(x({},a),{},{e:o,target:i,nextTarget:r,isClick:!1,pointer:this.getPointer(o),absolutePointer:this.getPointer(o,!0)});s&&this.fire(u,f),i.fire(c,f)}if(r&&d){const f=x(x({},a),{},{e:o,target:r,previousTarget:i,isClick:!1,pointer:this.getPointer(o),absolutePointer:this.getPointer(o,!0)});s&&this.fire(h,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getPointer(e),r=this._currentTransform,i=r.target,s=i.group?_f(t,void 0,i.group.calcTransformMatrix()):t;r.reset=!1,r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const i=r.x,s=r.y,o=t.action,a=t.actionHandler;let l=!1;a&&(l=a(e,t,i,s)),o==="drag"&&l&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||l}_setCursorFromEvent(e,t){if(!t){this.setCursor(this.defaultCursor);return}let r=t.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,s=(!i||t.group!==i)&&t._findTargetCorner(this.getPointer(e,!0));if(!s)t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r);else{const o=t.controls[s];this.setCursor(o.cursorStyleHandler(e,o,t))}}handleMultiSelection(e,t){const r=this._activeObject,i=this._activeSelection,s=r===i;if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.__corner){if(s){const o=i.getObjects();if(t===i&&(t=this.searchPossibleTargets(o,this.getPointer(e,!0)),!t||!t.selectable))return!1;t.group===i?(i.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),e)):(i.multiSelectAdd(t),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,e)}else Rs(r)&&r.exitEditing(),i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e);return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:i,deltaY:s}=this._groupSelector,o=new O(t,r),a=o.add(new O(i,s)),l=o.min(a),c=o.max(a),u=c.subtract(l),h=o.eq(a),d=this.collectObjects({left:l.x,top:l.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),f=h?d[0]?[d[0]]:[]:d.length>1?d.filter(g=>!g.onSelect({e})).reverse():d;return f.length===1?this.setActiveObject(f[0],e):f.length>1&&(this._activeSelection.add(...f),this.setActiveObject(this._activeSelection,e)),this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Hf={x1:0,y1:0,x2:0,y2:0},sC=x(x({},Hf),{},{r1:0,r2:0});function Wf(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Yf(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}const oC=/^(\d+\.\d+)%|(\d+)%$/;function Xf(n){return n&&oC.test(n)}function zf(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(Xf(n)?100:1):NaN;return Jn(0,Rn(t,e),1)}const aC=/\s*;\s*/,lC=/\s*:\s*/;function cC(n,e){let t,r;const i=n.getAttribute("style");if(i){const o=i.split(aC);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(lC).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const s=new Ie(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:zf(n.getAttribute("offset"),0),color:s.toRgb(),opacity:Rn(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*e}}function uC(n,e){const t=[],r=n.getElementsByTagName("stop"),i=zf(e,1);for(let s=r.length;s--;)t.push(cC(r[s],i));return t}function hC(n,e){let{width:t,height:r,gradientUnits:i}=e,s;return Object.keys(n).reduce((o,a)=>{const l=n[a];return l==="Infinity"?s=1:l==="-Infinity"?s=0:(s=typeof l=="string"?parseFloat(l):l,typeof l=="string"&&Xf(l)&&(s*=.01,i==="pixels"&&((a==="x1"||a==="x2"||a==="r2")&&(s*=t),(a==="y1"||a==="y2")&&(s*=r)))),o[a]=s,o},{})}function qt(n,e){return n.getAttribute(e)}function dC(n){return{x1:qt(n,"x1")||0,y1:qt(n,"y1")||0,x2:qt(n,"x2")||"100%",y2:qt(n,"y2")||0}}function fC(n){return{x1:qt(n,"fx")||qt(n,"cx")||"50%",y1:qt(n,"fy")||qt(n,"cy")||"50%",r1:0,x2:qt(n,"cx")||"50%",y2:qt(n,"cy")||"50%",r2:qt(n,"r")||"50%"}}function gC(n,e){return hC(Wf(n)==="linear"?dC(n):fC(n),x(x({},e),{},{gradientUnits:Yf(n)}))}class Nl{constructor(e){let{type:t="linear",gradientUnits:r="pixels",coords:i,colorStops:s=[],offsetX:o=0,offsetY:a=0,gradientTransform:l=null,id:c}=e;this.id=c?"".concat(c,"_").concat(rn()):rn(),this.type=t,this.gradientUnits=r,this.gradientTransform=l,this.offsetX=o,this.offsetY=a,this.coords=x(x({},this.type==="radial"?sC:Hf),i),this.colorStops=s.slice()}addColorStop(e){for(const t in e){const r=new Ie(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return x(x({},oi(this,e)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],i=this.gradientTransform?this.gradientTransform.concat():rr.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(u=>x({},u)).sort((u,h)=>u.offset-h.offset);let a=-this.offsetX,l=-this.offsetY;s==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),e instanceof nn&&e.isType("Path")&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),i[4]-=a,i[5]-=l;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Zs(i),'"'),""].join(" ");if(this.type==="linear"){const{x1:u,y1:h,x2:d,y2:f}=this.coords;r.push("<linearGradient ",c,' x1="',u,'" y1="',h,'" x2="',d,'" y2="',f,`">
`)}else if(this.type==="radial"){const{x1:u,y1:h,x2:d,y2:f,r1:g,r2:p}=this.coords,_=g>p;r.push("<radialGradient ",c,' cx="',_?u:d,'" cy="',_?h:f,'" r="',_?g:p,'" fx="',_?d:u,'" fy="',_?f:h,`">
`),_&&(o.reverse(),o.forEach(w=>{w.offset=1-w.offset}));const y=Math.min(g,p);if(y>0){const w=Math.max(g,p),T=y/w;o.forEach(b=>{b.offset+=T*(1-b.offset)})}}return o.forEach(u=>{let{color:h,offset:d,opacity:f}=u;r.push("<stop ",'offset="',d*100+"%",'" style="stop-color:',h,typeof f<"u"?";stop-opacity: "+f:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const t=this.coords,r=this.type==="linear"?e.createLinearGradient(t.x1,t.y1,t.x2,t.y2):e.createRadialGradient(t.x1,t.y1,t.r1,t.x2,t.y2,t.r2);return this.colorStops.forEach(i=>{let{color:s,opacity:o,offset:a}=i;r.addColorStop(a,typeof o<"u"?new Ie(s).setAlpha(o).toRgba():s)}),r}static fromElement(e,t,r){const i=Yf(e),s=t._findCenterFromElement();return new this(x({id:e.getAttribute("id")||void 0,type:Wf(e),coords:gC(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:uC(e,r.opacity),gradientUnits:i,gradientTransform:Ga(e.getAttribute("gradientTransform")||"")},i==="pixels"?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}S(Nl,"type","Gradient");te.setClass(Nl,"gradient");const pC=["source"];class Hl{get type(){return"pattern"}set type(e){console.warn("Setting type has no effect",e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S(this,"repeat","repeat"),S(this,"offsetX",0),S(this,"offsetY",0),S(this,"crossOrigin",""),S(this,"patternTransform",null),this.id=rn(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return!this.source||this.isImageSource()&&(!this.source.complete||this.source.naturalWidth===0||this.source.naturalHeight===0)?null:e.createPattern(this.source,this.repeat)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return x(x({},oi(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:De(this.offsetX,we.NUM_FRACTION_DIGITS),offsetY:De(this.offsetY,we.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:i,repeat:s,id:o}=this,a=Rn(this.offsetX/t,0),l=Rn(this.offsetY/r,0),c=s==="repeat-y"||s==="no-repeat"?1+Math.abs(a||0):Rn(i.width/t,0),u=s==="repeat-x"||s==="no-repeat"?1+Math.abs(l||0):Rn(i.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{source:r}=e,i=Xe(e,pC);const s=await Ls(r,x(x({},t),{},{crossOrigin:i.crossOrigin}));return new this(x(x({},i),{},{source:s}))}}S(Hl,"type","Pattern");te.setClass(Hl);te.setClass(Hl,"pattern");const mC=["path","left","top"],_C=["d"];class ss extends dt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:i,top:s}=t,o=Xe(t,mC);super(o),this._setPath(e||[],!0),typeof i=="number"&&this.set(Fe,i),typeof s=="number"&&this.set(yt,s)}_setPath(e,t){this.path=$S(Array.isArray(e)?e:ZS(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new O(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){let t=0,r=0,i=0,s=0,o=0,a=0;const l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(const u of this.path)switch(u[0]){case"L":i=u[1],s=u[2],e.lineTo(i+l,s+c);break;case"M":i=u[1],s=u[2],t=i,r=s,e.moveTo(i+l,s+c);break;case"C":i=u[5],s=u[6],o=u[3],a=u[4],e.bezierCurveTo(u[1]+l,u[2]+c,o+l,a+c,i+l,s+c);break;case"Q":e.quadraticCurveTo(u[1]+l,u[2]+c,u[3]+l,u[4]+c),i=u[3],s=u[4],o=u[1],a=u[2];break;case"Z":i=t,s=r,e.closePath();break}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(e)),{},{path:ai(this.path)})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=QS(this.path,we.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=we.NUM_FRACTION_DIGITS;return" translate(".concat(De(-this.pathOffset.x,e),", ").concat(De(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:i}=this._calcDimensions();this.set({width:t,height:r,pathOffset:i}),e&&this.setPositionByOrigin(i,de,de)}_calcBoundsFromPath(){const e=[];let t=0,r=0,i=0,s=0;for(const o of this.path)switch(o[0]){case"L":i=o[1],s=o[2],e.push(new O(t,r),new O(i,s));break;case"M":i=o[1],s=o[2],t=i,r=s;break;case"C":e.push(...th(i,s,o[1],o[2],o[3],o[4],o[5],o[6])),i=o[5],s=o[6];break;case"Q":e.push(...th(i,s,o[1],o[2],o[1],o[2],o[3],o[4])),i=o[3],s=o[4];break;case"Z":i=t,s=r;break}return Jr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return x(x({},e),{},{pathOffset:new O(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t){const r=Lr(e,this.ATTRIBUTE_NAMES),{d:i}=r,s=Xe(r,_C);return new this(i,x(x(x({},s),t),{},{left:void 0,top:void 0}))}}S(ss,"type","Path");S(ss,"cacheProperties",[...Ar,"path","fillRule"]);S(ss,"ATTRIBUTE_NAMES",[...sn,"d"]);te.setClass(ss);te.setSVGClass(ss);const vC=["left","top","radius"],$f=["radius","startAngle","endAngle"],wC={radius:0,startAngle:0,endAngle:360};class an extends dt{static getDefaults(){return x(x({},super.getDefaults()),an.ownDefaults)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,He(this.startAngle),He(this.endAngle),!1),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get("scaleX")}getRadiusY(){return this.get("radius")*this.get("scaleY")}setRadius(e){this.radius=e,this.set({width:e*2,height:e*2})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...$f,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,`" />
`];{const{radius:t}=this,r=He(this.startAngle),i=He(this.endAngle),s=Bt(r)*t,o=Ut(r)*t,a=Bt(i)*t,l=Ut(i)*t,c=e>180?"1":"0";return['<path d="M '.concat(s," ").concat(o)," A ".concat(t," ").concat(t)," 0 ","".concat(c," 1")," ".concat(a," ").concat(l),'" ',"COMMON_PARTS",` />
`]}}static async fromElement(e){const t=Lr(e,this.ATTRIBUTE_NAMES),{left:r=0,top:i=0,radius:s=0}=t,o=Xe(t,vC);return new this(x(x({},o),{},{radius:s,left:r-s,top:i-s}))}static fromObject(e){return super._fromObject(e)}}S(an,"type","Circle");S(an,"cacheProperties",[...Ar,...$f]);S(an,"ownDefaults",wC);S(an,"ATTRIBUTE_NAMES",["cx","cy","r",...sn]);te.setClass(an);te.setSVGClass(an);const yC=["x1","y1","x2","y2"],bC=["x1","y1","x2","y2"],Wl=["x1","x2","y1","y2"];class os extends dt{constructor(){let[e,t,r,i]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(x(x({},s),{},{x1:e,y1:t,x2:r,y2:i})),this._setWidthHeight();const{left:o,top:a}=s;typeof o=="number"&&this.set(Fe,o),typeof a=="number"&&this.set(yt,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:i}=this;this.width=Math.abs(r-e),this.height=Math.abs(i-t);const{left:s,top:o,width:a,height:l}=Jr([{x:e,y:t},{x:r,y:i}]),c=new O(s+a/2,o+l/2);this.setPositionByOrigin(c,de,de)}_set(e,t){return super._set(e,t),Wl.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;if(Sr(this.stroke))e.strokeStyle=this.stroke.toLive(e);else{var i;e.strokeStyle=(i=this.stroke)!==null&&i!==void 0?i:e.fillStyle}this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new O((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:i,width:s,height:o}=this,a=e<=t?-1:1,l=r<=i?-1:1,c=a*s/2,u=l*o/2,h=a*-s/2,d=l*-o/2;return{x1:c,x2:h,y1:u,y2:d}}_toSVG(){const{x1:e,x2:t,y1:r,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(i,`" />
`)]}static async fromElement(e){const t=Lr(e,this.ATTRIBUTE_NAMES),{x1:r=0,y1:i=0,x2:s=0,y2:o=0}=t,a=Xe(t,yC);return new this([r,i,s,o],a)}static fromObject(e){let{x1:t,y1:r,x2:i,y2:s}=e,o=Xe(e,bC);return this._fromObject(x(x({},o),{},{points:[t,r,i,s]}),{extraParam:"points"})}}S(os,"type","Line");S(os,"cacheProperties",[...Ar,...Wl]);S(os,"ATTRIBUTE_NAMES",sn.concat(Wl));te.setClass(os);te.setSVGClass(os);const xC={width:100,height:100};class ui extends dt{static getDefaults(){return x(x({},super.getDefaults()),ui.ownDefaults)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}S(ui,"type","Triangle");S(ui,"ownDefaults",xC);te.setClass(ui);te.setSVGClass(ui);const SC={rx:0,ry:0},Gf=["rx","ry"];class ln extends dt{static getDefaults(){return x(x({},super.getDefaults()),ln.ownDefaults)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",t*2);break;case"ry":this.ry=t,this.set("height",t*2);break}return this}getRx(){return this.get("rx")*this.get("scaleX")}getRy(){return this.get("ry")*this.get("scaleY")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Gf,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Kd,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e){const t=Lr(e,this.ATTRIBUTE_NAMES);return t.left=(t.left||0)-t.rx,t.top=(t.top||0)-t.ry,new this(t)}}S(ln,"type","Ellipse");S(ln,"cacheProperties",[...Ar,...Gf]);S(ln,"ownDefaults",SC);S(ln,"ATTRIBUTE_NAMES",[...sn,"cx","cy","rx","ry"]);te.setClass(ln);te.setSVGClass(ln);function CC(n){if(!n)return null;n=n.replace(/,/g," ").trim(),n=n.split(/\s+/);const e=[];for(let t=0;t<n.length;t+=2)e.push({x:parseFloat(n[t]),y:parseFloat(n[t+1])});return e}const TC=["left","top"],qf={exactBoundingBox:!1};class nr extends dt{static getDefaults(){return x(x({},super.getDefaults()),nr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(x({points:e},t));const{left:r,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(Fe,r),typeof i=="number"&&this.set(yt,i)}isOpen(){return!0}_projectStrokeOnPoints(){return bS(this.points,this,this.isOpen())}_calcDimensions(){const e=this.exactBoundingBox?this._projectStrokeOnPoints().map(l=>l.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new O,strokeOffset:new O};const t=Jr(e),r=Jr(this.points),i=t.left+t.width/2,s=t.top+t.height/2,o=i-s*Math.tan(He(this.skewX)),a=s-o*Math.tan(He(this.skewY));return x(x({},t),{},{pathOffset:new O(o,a),strokeOffset:new O(r.left,r.top).subtract(new O(t.left,t.top))})}_findCenterFromElement(){const e=Jr(this.points);return new O(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:i,height:s,pathOffset:o,strokeOffset:a}=this._calcDimensions();this.set({width:i,height:s,pathOffset:o,strokeOffset:a}),e&&this.setPositionByOrigin(new O(t+i/2,r+s/2),de,de)}_getNonTransformedDimensions(){return this.exactBoundingBox?new O(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(e){return this.exactBoundingBox?super._getTransformedDimensions(x(x({},e||{}),{},{strokeWidth:0,skewX:0,skewY:0})):super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,i=super._set(e,t);return r&&((e==="scaleX"||e==="scaleY")&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")&&this.strokeLineJoin!=="round"||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject(e)),{},{points:ai(this.points)})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,i=we.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)e.push(De(this.points[s].x-t,i),",",De(this.points[s].y-r,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,i=this.pathOffset.y;if(!(!t||isNaN(this.points[t-1].y))){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-i);for(let s=0;s<t;s++){const o=this.points[s];e.lineTo(o.x-r,o.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t){const r=CC(e.getAttribute("points")),i=Lr(e,this.ATTRIBUTE_NAMES),s=Xe(i,TC);return new this(r||[],x(x({},s),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}S(nr,"ownDefaults",qf);S(nr,"type","Polyline");S(nr,"layoutProperties",["skewX","skewY","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]);S(nr,"cacheProperties",[...Ar,"points"]);S(nr,"ATTRIBUTE_NAMES",[...sn]);te.setClass(nr);te.setSVGClass(nr);class Io extends nr{static getDefaults(){return x(x({},super.getDefaults()),nr.ownDefaults)}isOpen(){return!1}}S(Io,"ownDefaults",qf);S(Io,"type","Polygon");te.setClass(Io);te.setSVGClass(Io);const Kf=["fontSize","fontWeight","fontFamily","fontStyle"],Zf=["underline","overline","linethrough"],Qf=[...Kf,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Jf=[...Qf,...Zf,"textBackgroundColor","direction"],DC=[...Kf,...Zf,"stroke","strokeWidth","fill","deltaY","textBackgroundColor"],OC={_reNewline:Zd,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Fe,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:Fe,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},dr="justify",ro="justify-left",ji="justify-right",Vi="justify-center";class eg extends dt{isEmptyStyles(e){if(!this.styles||typeof e<"u"&&!this.styles[e])return!0;const t=typeof e>"u"?this.styles:{line:this.styles[e]};for(const r in t)for(const i in t[r])for(const s in t[r][i])return!1;return!0}styleHas(e,t){if(!this.styles||typeof t<"u"&&!this.styles[t])return!1;const r=typeof t>"u"?this.styles:{0:this.styles[t]};for(const i in r)for(const s in r[i])if(typeof r[i][s][e]<"u")return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r=0,i,s,o=!0,a=0;for(const l in t){i=0;for(const c in t[l]){const u=t[l][c]||{},h=u[e]!==void 0;r++,h?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?i++:delete t[l][c]}i===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&r===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,i,s;for(i in t){r=t[i];for(s in r)delete r[s][e],Object.keys(r[s]).length===0&&delete r[s];Object.keys(r).length===0&&delete t[i]}}_extendStyles(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return this._getLineStyle(r)||this._setLineStyle(r),this._getStyleDeclaration(r,i)||this._setStyleDeclaration(r,i,{}),Object.assign(this._getStyleDeclaration(r,i)||{},t)}getSelectionStyles(e,t,r){const i=[];for(let s=e;s<(t||e);s++)i.push(this.getStyleAtPosition(s,r));return i}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(r,i):this._getStyleDeclaration(r,i))||{}}setSelectionStyles(e,t,r){for(let i=t;i<(r||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){const r=this.styles&&this.styles[e];return r?r[t]:null}getCompleteStyleDeclaration(e,t){return x(x({},oi(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t)||{})}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}S(eg,"_styleProperties",DC);const kC=/  +/g,MC=/"/g;function aa(n,e,t,r,i){return"		".concat(B1(n,{left:e,top:t,width:r,height:i}),`
`)}class PC extends xf{_toSVG(){const e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e){let{textBgRects:t,textSpans:r}=e;const i=!0,s=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(MC,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(i),'"',this.addPaintOrder()," >",r.join(""),`</text>
`]}_getSVGTextAndBg(e,t){const r=[],i=[];let s=e,o;this.backgroundColor&&i.push(...aa(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,l=this._textLines.length;a<l;a++)o=this._getLineLeftOffset(a),this.direction==="rtl"&&(o+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(i,a,t+o,s),this._setSVGTextLineText(r,a,t+o,s),s+=this.getHeightOfLine(a);return{textSpans:r,textBgRects:i}}_createTextCharSpan(e,t,r,i){const s=this.getSvgSpanStyles(t,e!==e.trim()||!!e.match(kC)),o=s?'style="'.concat(s,'"'):"",a=t.deltaY,l=a?' dy="'.concat(De(a,we.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(De(r,we.NUM_FRACTION_DIGITS),'" y="').concat(De(i,we.NUM_FRACTION_DIGITS),'" ').concat(l).concat(o,">").concat(DS(e),"</tspan>")}_setSVGTextLineText(e,t,r,i){const s=this.getHeightOfLine(t),o=this.textAlign.includes(dr),a=this._textLines[t];let l,c,u="",h,d,f=0,g;i+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,_=a.length-1;p<=_;p++)g=p===_||this.charSpacing,u+=a[p],h=this.__charBounds[t][p],f===0?(r+=h.kernedWidth-h.width,f+=h.width):f+=h.kernedWidth,o&&!g&&this._reSpaceAndTab.test(a[p])&&(g=!0),g||(l=l||this.getCompleteStyleDeclaration(t,p),c=this.getCompleteStyleDeclaration(t,p+1),g=Ul(l,c,!0)),g&&(d=this._getStyleDeclaration(t,p)||{},e.push(this._createTextCharSpan(u,d,r,i)),u="",l=c,this.direction==="rtl"?r-=f:r+=f,f=0)}_setSVGTextLineBg(e,t,r,i){const s=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight;let a=0,l=0,c,u,h=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let d=0;d<s.length;d++)c=this.__charBounds[t][d],u=this.getValueOfPropertyAt(t,d,"textBackgroundColor"),u!==h?(h&&e.push(...aa(h,r+l,i,a,o)),l=c.left,a=c.width,h=u):a+=c.kernedWidth;u&&e.push(...aa(h,r+l,i,a,o))}_getSVGLineTopOffset(e){let t=0,r=0;for(let i=0;i<e;i++)t+=this.getHeightOfLine(i);return r=this.getHeightOfLine(j),{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e){return"".concat(super.getSvgStyles(e)," white-space: pre;")}}const EC=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let la;function FC(){return la||(la=ot().getContext("2d")),la}class Ft extends eg{static getDefaults(){return x(x({},super.getDefaults()),Ft.ownDefaults)}constructor(e,t){super(x(x({},t),{},{text:e,styles:(t==null?void 0:t.styles)||{}})),S(this,"__charBounds",[]),this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Nf(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(dr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,i,s,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if(!(this.textAlign!==dr&&(l===c-1||this.isEndOfWrapping(l)))&&(i=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=s.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(s[u])?(o.width+=e,o.kernedWidth+=e,o.left+=i,i+=e):o.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<r.length;i++){if(e<=r[i].length)return{lineIndex:i,charIndex:e};e-=r[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:r[i-1].length<e?r[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst==="stroke"?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case de:e.textBaseline="middle";break;case"ascender":e.textBaseline=yt;break;case"descender":e.textBaseline=Na;break}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const i=this.getLineWidth(t);i>e&&(e=i)}return e}_renderTextLine(e,t,r,i,s,o){this._renderChars(e,t,r,i,s,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let i=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const a=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){i+=a;continue}const l=this._textLines[s].length,c=this._getLineLeftOffset(s);let u=0,h=0,d,f,g=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let p=0;p<l;p++){const _=this.__charBounds[s][p];f=this.getValueOfPropertyAt(s,p,"textBackgroundColor"),this.path?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),e.fillStyle=f,f&&e.fillRect(-_.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),_.width,a/this.lineHeight),e.restore()):f!==g?(d=r+c+h,this.direction==="rtl"&&(d=this.width-d-u),e.fillStyle=g,g&&e.fillRect(d,i,u,a/this.lineHeight),h=_.left,u=_.width,g=f):u+=_.kernedWidth}f&&!this.path&&(d=r+c+h,this.direction==="rtl"&&(d=this.width-d-u),e.fillStyle=f,e.fillRect(d,i,u,a/this.lineHeight)),i+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,i){const s=Ri.getFontCache(t),o=this._getFontDeclaration(t),a=this._getFontDeclaration(i),l=r+e,c=o===a,u=t.fontSize/this.CACHE_FONT_SIZE;let h,d,f,g;if(r&&s[r]!==void 0&&(f=s[r]),s[e]!==void 0&&(g=h=s[e]),c&&s[l]!==void 0&&(d=s[l],g=d-f),h===void 0||f===void 0||d===void 0){const p=FC();this._setTextStyles(p,t,!0),h===void 0&&(g=h=p.measureText(e).width,s[e]=h),f===void 0&&c&&r&&(f=p.measureText(r).width,s[r]=f),c&&d===void 0&&(d=p.measureText(l).width,s[l]=d,g=d-f)}return{width:h*u,kernedWidth:g*u}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t=0,r,i;const s=this.pathSide===Qe,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];i=this._getGraphemeBox(h,e,u,r),c[u]=i,t+=i.kernedWidth,r=h}if(c[l]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length,d=ih(o.path,0,o.segmentsInfo);switch(d.x+=o.pathOffset.x,d.y+=o.pathOffset.y,this.textAlign){case Fe:u=s?h-t:0;break;case de:u=(h-t)/2;break;case Qe:u=s?0:h-t;break}u+=this.pathStartOffset*(s?-1:1);for(let f=s?l-1:0;s?f>=0:f<l;s?f--:f++)i=c[f],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,i,d),u+=i.kernedWidth}return{width:t,numOfSpaces:0}}_setGraphemeOnPath(e,t,r){const i=e+t.kernedWidth/2,s=this.path,o=ih(s.path,i,s.segmentsInfo);t.renderLeft=o.x-r.x,t.renderTop=o.y-r.y,t.angle=o.angle+(this.pathSide===Qe?Math.PI:0)}_getGraphemeBox(e,t,r,i,s){const o=this.getCompleteStyleDeclaration(t,r),a=i?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,i,a);let c=l.kernedWidth,u=l.width,h;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),u+=h,c+=h);const d={width:u,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(r>0&&!s){const f=this.__charBounds[t][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,i=this._textLines[e].length;r<i;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const i=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],i+u,s+r+c,o),r+=l}e.restore()}_renderTextFill(e){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,i,s,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(dr),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let g,p,_="",y,w=0,T,b;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?Fe:Qe),s-=a*this._fontSizeFraction/this.lineHeight,u){this._renderChar(e,t,o,0,r.join(""),i,s),t.restore();return}for(let P=0,R=r.length-1;P<=R;P++)T=P===R||this.charSpacing||c,_+=r[P],y=this.__charBounds[o][P],w===0?(i+=d*(y.kernedWidth-y.width),w+=y.width):w+=y.kernedWidth,l&&!T&&this._reSpaceAndTab.test(r[P])&&(T=!0),T||(g=g||this.getCompleteStyleDeclaration(o,P),p=this.getCompleteStyleDeclaration(o,P+1),T=Ul(g,p,!1)),T&&(c?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,o,P,_,-w/2,0),t.restore()):(b=i,this._renderChar(e,t,o,P,_,b,s)),_="",g=p,i+=d*w,w=0);t.restore()}_applyPatternGradientTransformText(e){const t=ot(),r=this.width+this.strokeWidth,i=this.height+this.strokeWidth,s=t.getContext("2d");return t.width=r,t.height=i,s.beginPath(),s.moveTo(0,0),s.lineTo(r,0),s.lineTo(r,i),s.lineTo(0,i),s.closePath(),s.translate(r/2,i/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(t,"no-repeat")}handleFiller(e,t,r){let i,s;return r.toLive?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(i=-this.width/2,s=-this.height/2,e.translate(i,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:i,offsetY:s}):(e[t]=r.toLive(e,this),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,i,s,o,a){const l=this._getStyleDeclaration(r,i),c=this.getCompleteStyleDeclaration(r,i),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;let d,f;!h&&!u||(t.save(),u&&(d=this._setFillStyles(t,c)),h&&(f=this._setStrokeStyles(t,c)),t.font=this._getFontDeclaration(c),l&&l.textBackgroundColor&&this._removeShadow(t),l&&l.deltaY&&(a+=l.deltaY),u&&t.fillText(s,o-d.offsetX,a-d.offsetY),h&&t.strokeText(s,o-f.offsetX,a-f.offsetY),t.restore())}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const i=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:s*r.size,deltaY:o+s*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,i=this.textAlign,s=this.direction,o=this.isEndOfWrapping(e);let a=0;return i===dr||i===Vi&&!o||i===ji&&!o||i===ro&&!o?0:(i===de&&(a=r/2),i===Qe&&(a=r),i===Vi&&(a=r/2),i===ji&&(a=r),s==="rtl"&&(i===Qe||i===dr||i===ji?a=0:i===Fe||i===ro?a=-r:(i===de||i===Vi)&&(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){const i=this._getStyleDeclaration(e,t);return i&&typeof i[r]<"u"?i[r]:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const i=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,f=this._getLineLeftOffset(l);let g=0,p=0,_=this.getValueOfPropertyAt(l,0,t),y=this.getValueOfPropertyAt(l,0,"fill"),w,T;const b=r+d*(1-this._fontSizeFraction);let P=this.getHeightOfChar(l,0),R=this.getValueOfPropertyAt(l,0,"deltaY");for(let U=0,G=h.length;U<G;U++){const re=this.__charBounds[l][U];w=this.getValueOfPropertyAt(l,U,t),T=this.getValueOfPropertyAt(l,U,"fill");const me=this.getHeightOfChar(l,U),ge=this.getValueOfPropertyAt(l,U,"deltaY");if(s&&w&&T)e.save(),e.fillStyle=y,e.translate(re.renderLeft,re.renderTop),e.rotate(re.angle),e.fillRect(-re.kernedWidth/2,a*me+ge,re.kernedWidth,this.fontSize/15),e.restore();else if((w!==_||T!==y||me!==P||ge!==R)&&p>0){let ye=i+f+g;this.direction==="rtl"&&(ye=this.width-ye-p),_&&y&&(e.fillStyle=y,e.fillRect(ye,b+a*P+R,p,this.fontSize/15)),g=re.left,p=re.width,_=w,y=T,P=me,R=ge}else p+=re.kernedWidth}let N=i+f+g;this.direction==="rtl"&&(N=this.width-N-p),e.fillStyle=T,w&&T&&e.fillRect(N,b+a*P+R,p-o,this.fontSize/15),r+=u}this._removeShadow(e)}_getFontDeclaration(e,t){const r=e||this,i=this.fontFamily,s=Ft.genericFonts.indexOf(i.toLowerCase())>-1,o=i===void 0||i.indexOf("'")>-1||i.indexOf(",")>-1||i.indexOf('"')>-1||s?r.fontFamily:'"'.concat(r.fontFamily,'"');return[r.fontStyle,r.fontWeight,t?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return OS(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),i=[`
`];let s=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),s=s.concat(r[o],i);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return x(x({},super.toObject([...Jf,...e])),{},{styles:xS(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let i=!1,s=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),i=i||r.includes(o),s=s||o==="path";else i=r.includes(e),s=e==="path";return s&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t){const r=Lr(e,Ft.ATTRIBUTE_NAMES),i=x(x({},t),r),{textAnchor:s=Fe,textDecoration:o="",dx:a=0,dy:l=0,top:c=0,left:u=0,fontSize:h=El,strokeWidth:d=1}=i,f=Xe(i,EC);let g="";"textContent"in e?g=e.textContent:"firstChild"in e&&e.firstChild!==null&&"data"in e.firstChild&&e.firstChild.data!==null&&(g=e.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");const p=new this(g,x({left:u+a,top:c+l,underline:o.includes("underline"),overline:o.includes("overline"),linethrough:o.includes("line-through"),strokeWidth:0,fontSize:h},f)),_=p.getScaledHeight()/p.height,y=(p.height+p.strokeWidth)*p.lineHeight-p.height,w=y*_,T=p.getScaledHeight()+w;let b=0;return s===de&&(b=p.getScaledWidth()/2),s===Qe&&(b=p.getScaledWidth()),p.set({left:p.left-b,top:p.top-(T-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:d}),p}static fromObject(e){return this._fromObject(x(x({},e),{},{styles:SS(e.styles||{},e.text)}),{extraParam:"text"})}}S(Ft,"textLayoutProperties",Qf);S(Ft,"cacheProperties",[...Ar,...Jf]);S(Ft,"ownDefaults",OC);S(Ft,"type","Text");S(Ft,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]);S(Ft,"ATTRIBUTE_NAMES",sn.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor"));Ff(Ft,[PC]);te.setClass(Ft);te.setSVGClass(Ft);class AC{constructor(e){S(this,"target",void 0),S(this,"__mouseDownInPlace",!1),S(this,"__dragStartFired",!1),S(this,"__isDraggingOver",!1),S(this,"__dragStartSelection",void 0),S(this,"__dragImageDisposer",void 0),S(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:i,selectionEnd:s}=t;const o=this.target,a=o.canvas,l=new O(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(i),h=new O(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),f=a.getPointer(e).subtract(h),g=a._isRetinaScaling(),p=o.getCanvasRetinaScaling(),_=o.getBoundingRect(!0),y=h.subtract(new O(_.left,_.top)),w=a.viewportTransform,T=y.add(f).transform(w,!0),b=o.backgroundColor,P=ai(o.styles);o.backgroundColor="";const R={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(R,0,i),o.setSelectionStyles(R,s,o.text.length),o.dirty=!0;const N=o.toCanvasElement({enableRetinaScaling:g,viewportTransform:!0});o.backgroundColor=b,o.styles=P,o.dirty=!0,Qs(N,{position:"fixed",left:"".concat(-N.width,"px"),border:Et,width:"".concat(N.width/p,"px"),height:"".concat(N.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{N.remove()},hr(e.target||this.target.hiddenTextarea).body.appendChild(N),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(N,T.x,T.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const i=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},s=t._text.slice(i.selectionStart,i.selectionEnd).join(""),o=x({text:t.text,value:s},i);e.dataTransfer.setData("text/plain",s),e.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:t.getSelectionStyles(i.selectionStart,i.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.__corner&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,i=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(s&&!i){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=s[Math.max(0,s.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(s,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire("changed",{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const i=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Et;l===Et?(i.selectionStart=o,i.selectionEnd=a,i._updateTextarea(),i.hiddenTextarea.focus()):(i.clearContextTop(),l==="move"&&(i.removeChars(o,a),i.selectionStart=i.selectionEnd=o,i.hiddenTextarea&&(i.hiddenTextarea.value=i.text),i._updateTextarea(),i.fire("changed",{index:o,action:"dragend"}),s.fire("text:changed",{target:i}),s.requestRenderAll()),i.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const oh=/[ \n\.,;!\?\-]/;class LC extends Ft{constructor(){super(...arguments),S(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:i,onComplete:s}=e;return Sf({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:i,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:1,duration:this.cursorDuration,delay:e,onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:100,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let i=this._reSpace.test(r[e])?e-1:e,s=r[i];for(;!oh.test(s)&&i>0&&i<r.length;)i+=t,s=r[i];return oh.test(s)&&(i+=t===1?0:1),i}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){this.isEditing||!this.editable||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",{e}),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(e){if(this.__corner)return;const t=this.hiddenTextarea;hr(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),i=this.selectionStart,s=this.selectionEnd;(r!==this.__selectionStartOnMouseDown||i===s)&&(i===r||s===r)||(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==i||this.selectionEnd!==s)&&(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const i=r.slice(0,e),s=this.graphemeSplit(i).length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t),a=this.graphemeSplit(o).length;return{selectionStart:s,selectionEnd:s+a}}fromGraphemeToStringSelection(e,t,r){const i=r.slice(0,e),s=i.join("").length;if(e===t)return{selectionStart:s,selectionEnd:s};const o=r.slice(e,t),a=o.join("").length;return{selectionStart:s,selectionEnd:s+a}}_updateTextarea(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,s=r.charIndex,o=this.getValueOfPropertyAt(i,s,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,g=new O(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new O(c.clientWidth/u,c.clientHeight/h));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation()}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.selectionEnd=this.selectionStart,this._exitEditing(),this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let a=i;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[s])for(let a=o;a<this._unwrappedTextLines[s].length;a++){const l=this.styles[s][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+a-o]=l)}for(let a=r+1;a<=s;a++)delete this.styles[a];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const a=this.styles[r],l=o-i;for(let c=i;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const i in this.styles){const s=parseInt(i,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,i){const s={},o=this._unwrappedTextLines[e].length===t;let a=!1;r||(r=1),this.shiftLineStyles(e,r);const l=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const u in this.styles[e]){const h=parseInt(u,10);h>=t&&(a=!0,s[h-t]=this.styles[e][u],o&&t===0||delete this.styles[e][u])}let c=!1;for(a&&!o&&(this.styles[e+r]=s,c=!0),c&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:x({},i[r-1])}:l?this.styles[e+r]={0:x({},l)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,i){this.styles||(this.styles={});const s=this.styles[e],o=s?x({},s):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(s[c+r]=o[c],o[c-r]||delete s[c])}if(this._forceClearCache=!0,i){for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=x({},i[r]));return}if(!s)return;const a=s[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=x({},a)}insertNewStyleBlock(e,t,r){const i=this.get2DCursorLocation(t,!0),s=[0];let o=0;for(let l=0;l<e.length;l++)e[l]===`
`?(o++,s[o]=0):s[o]++;s[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+s[0],o);let a;for(a=1;a<o;a++)s[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,s[a],r):r&&this.styles[i.lineIndex+a]&&r[0]&&(this.styles[i.lineIndex+a][0]=r[0]),r=r&&r.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,s[a],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;i>r&&this.removeStyleFromTo(r,i);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Fe:this._selectionDirection===Qe&&(this._selectionDirection=Fe,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Qe?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Qe:this._selectionDirection===Fe&&(this._selectionDirection=Qe,this.selectionStart=t),this.selectionEnd=r)}}class RC extends LC{initHiddenTextarea(){const e=this.canvas&&hr(this.canvas.getElement())||ii(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:i,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",onCompositionUpdate:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else if(e.keyCode in this.ctrlKeysMapDown&&(e.ctrlKey||e.metaKey))this[this.ctrlKeysMapDown[e.keyCode]](e);else return;e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey))this[this.ctrlKeysMapUp[e.keyCode]](e);else return;e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll()}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value===""){this.styles={},r();return}const i=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=i.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d=o-s,f,g;const p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=a>p.selectionStart;c?(h=this._text.slice(a,l),d+=l-a):o<s&&(_?h=this._text.slice(l+d,l):h=this._text.slice(a,a-d));const y=i.slice(p.selectionEnd-d,p.selectionEnd);if(h&&h.length&&(y.length&&(u=this.getSelectionStyles(a,a+1,!1),u=y.map(()=>u[0])),c?(f=a,g=l):_?(f=l-h.length,g=l):(f=l,g=l+h.length),this.removeStyleFromTo(f,g)),y.length){const{copyPasteData:w}=mr();t&&y.join("")===w.copiedText&&!we.disableStyleCopyPaste&&(u=w.copiedTextStyle),this.insertNewStyleBlock(y,a,u)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=mr();e.copiedText=this.getSelectedText(),we.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r=this._getLineLeftOffset(e),i;return t>0&&(i=this.__charBounds[e][t-1],r+=i.left+i.width),r}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s+1,a);return this._textLines[s].slice(o).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),s=i.lineIndex;if(s===0||e.metaKey||e.keyCode===33)return-r;const o=i.charIndex,a=this._getWidthBeforeCursor(s,o),l=this._getIndexOnLine(s-1,a),c=this._textLines[s].slice(0,o),u=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let s=this._getLineLeftOffset(e),o=0,a,l;for(let c=0,u=r.length;c<u;c++)if(a=this.__charBounds[e][c].width,s+=a,s>t){l=!0;const h=s-a,d=s,f=Math.abs(h-t);o=Math.abs(d-t)<f?c:c-1;break}return l||(o=r.length-1),o}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r="get".concat(e,"CursorOffset"),i=this[r](t,this._selectionDirection===Qe);if(t.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const s=this.text.length;this.selectionStart=Jn(0,this.selectionStart,s),this.selectionEnd=Jn(0,this.selectionEnd,s),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Fe?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let i;if(e.altKey)i=this["findWordBoundary"+r](this[t]);else if(e.metaKey||e.keyCode===35||e.keyCode===36)i=this["findLineBoundary"+r](this[t]);else return this[t]+=r==="Left"?-1:1,!0;if(typeof i<"u"&&this[t]!==i)return this[t]=i,!0}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Fe,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){if(this._selectionDirection===Qe&&this.selectionStart!==this.selectionEnd)return this._moveLeft(e,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection=Fe,this._moveLeft(e,"selectionStart")}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){let r="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?r+="Shift":r+="outShift",this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){if(this._selectionDirection===Fe&&this.selectionStart!==this.selectionEnd)return this._moveRight(e,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection=Qe,this._moveRight(e,"selectionEnd")}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Qe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}function ca(n){return n.button&&n.button!==1}class IC extends RC{constructor(){super(...arguments),S(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new AC(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),za(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;!this.canvas||!this.editable||ca(t)||this.__corner||this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))}_mouseDownHandlerBefore(e){let{e:t}=e;!this.canvas||!this.editable||ca(t)||(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r,button:i}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||ca(t)||s||(this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getPointer(e).transform(St(this.calcTransformMatrix())).add(new O(-this._getLeftOffset(),-this._getTopOffset()));let r=0,i=0,s=0;for(let u=0,h=this._textLines.length;u<h&&r<=t.y;u++)r+=this.getHeightOfLine(u),s=u,u>0&&(i+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let a=Math.abs(this._getLineLeftOffset(s));const l=this._textLines[s].length;let c=0;for(let u=0;u<l&&(c=a,a+=this.__charBounds[s][u].kernedWidth,a<=t.x);u++)i++;return this._getNewSelectionStartFromOffset(t,c,a,i,l)}_getNewSelectionStartFromOffset(e,t,r,i,s){const o=e.x-t,a=r-e.x,l=a>o||a<0?0:1;let c=i+l;return this.flipX&&(c=s-c),c>this._text.length&&(c=this._text.length),c}}const no="moveCursorUp",io="moveCursorDown",so="moveCursorLeft",oo="moveCursorRight",ao="exitEditing",jC={9:ao,27:ao,33:no,34:io,35:oo,36:so,37:so,38:no,39:oo,40:io},VC={9:ao,27:ao,33:no,34:io,35:so,36:oo,37:oo,38:no,39:so,40:io},BC={67:"copy",88:"cut"},UC={65:"selectAll"},NC={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_selectionDirection:null,_reSpace:/\s|\n/,inCompositionMode:!1,keysMap:jC,keysMapRtl:VC,ctrlKeysMapDown:UC,ctrlKeysMapUp:BC};class cn extends IC{static getDefaults(){return x(x({},super.getDefaults()),cn.ownDefaults)}get type(){return"i-text"}constructor(e,t){super(e,t),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof ts&&this.canvas.textEditingManager.remove(this),t instanceof ts&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),i=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:i,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:i,lineIndex:s}=this.get2DCursorLocation(e);for(let c=0;c<s;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(s),a=this.__charBounds[s][i];a&&(r=a.left),this.charSpacing!==0&&i===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Qe||this.textAlign===dr||this.textAlign===ji?l.left*=-1:(this.textAlign===Fe||this.textAlign===ro||this.textAlign===de||this.textAlign===Vi)&&(l.left=o-(r>0?r:0))),l}renderCursorAt(e){const t=this._getCursorBoundaries(e,!0);this._renderCursor(this.canvas.contextTop,t,e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}_renderCursor(e,t,r){const i=this.get2DCursorLocation(r),s=i.lineIndex,o=i.charIndex>0?i.charIndex-1:0,a=this.getValueOfPropertyAt(s,o,"fontSize"),l=this.scaleX*this.canvas.getZoom(),c=this.cursorWidth/l,u=this.getValueOfPropertyAt(s,o,"deltaY"),h=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-a*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(e,t),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,o,"fill"),e.globalAlpha=this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-c/2,h+t.top+u,c,a)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const i=t.selectionStart,s=t.selectionEnd,o=this.textAlign.includes(dr),a=this.get2DCursorLocation(i),l=this.get2DCursorLocation(s),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const g=this._getLineLeftOffset(f)||0;let p=this.getHeightOfLine(f),_=0,y=0,w=0;if(f===c&&(y=this.__charBounds[c][h].left),f>=c&&f<u)w=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)w=this.__charBounds[u][d].left;else{const N=this._getWidthOfCharSpacing();w=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-N}_=p,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(p/=this.lineHeight);let T=r.left+g+y,b=p,P=0;const R=w-y;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",b=1,P=p):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Qe||this.textAlign===dr||this.textAlign===ji?T=this.width-T-R:(this.textAlign===Fe||this.textAlign===ro||this.textAlign===de||this.textAlign===Vi)&&(T=r.left+g-w)),e.fillRect(T,r.top+r.topOffset+P,R,b),r.topOffset+=_}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}S(cn,"ownDefaults",NC);S(cn,"type","IText");te.setClass(cn);te.setClass(cn,"i-text");const HC={minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1};class hi extends cn{static getDefaults(){return x(x({},super.getDefaults()),{},{controls:Bx()},hi.ownDefaults)}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(dr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,i=0;const s={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[i]===`
`&&o>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&o>0&&(r++,i++),s[o]={line:t,offset:r},i+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t=0,r=e+1,i,s=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,t=o.offset),a&&(r=a.line,s=r===e,i=a.offset);const l=typeof e>"u"?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c])if(u>=t&&(!s||u<i))for(const h in l[c][u])return!1;return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return null;e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const i=this._styleMap[e];e=i.line,t=i.offset+t,this.styles[e][t]=r}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];e=r.line,t=r.offset+t,delete this.styles[e][t]}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];this.styles[t.line]={}}_wrapText(e,t){const r=[];this.isWrapping=!0;for(let i=0;i<e.length;i++)r.push(...this._wrapLine(e[i],i,t));return this.isWrapping=!1,r}_measureWord(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0,s;const o=!0;for(let a=0,l=e.length;a<l;a++){const c=this._getGraphemeBox(e[a],t,a+r,s,o);i+=c.kernedWidth,s=e[a]}return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const s=this._getWidthOfCharSpacing(),o=this.splitByGrapheme,a=[],l=o?this.graphemeSplit(e):this.wordSplit(e),c=o?"":" ";let u=0,h=[],d=0,f=0,g=0,p=!0;l.length===0&&l.push([]),r-=i;const _=l.map(T=>{T=o?T:this.graphemeSplit(T);const b=this._measureWord(T,t,d);return g=Math.max(b,g),d+=T.length+c.length,{word:T,width:b}}),y=Math.max(r,g,this.dynamicMinWidth);d=0;let w;for(w=0;w<l.length;w++){const T=_[w].word,b=_[w].width;d+=T.length,u+=f+b-s,u>y&&!p?(a.push(h),h=[],u=b,p=!0):u+=s,!p&&!o&&h.push(c),h=h.concat(T),f=o?0:this._measureWord([c],t,d),d++,p=!1}return w&&a.push(h),g+i>this.dynamicMinWidth&&(this.dynamicMinWidth=g-s+i),a}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s].join("");return t.lines=i,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e={};for(const t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(const t in this.styles)e[t]||delete this.styles[t]}toObject(e){return super.toObject(["minWidth","splitByGrapheme"].concat(e))}}S(hi,"type","Textbox");S(hi,"textLayoutProperties",[...cn.textLayoutProperties,"width"]);S(hi,"ownDefaults",HC);te.setClass(hi);class WC{constructor(){S(this,"resources",{})}applyFilters(e,t,r,i,s){const o=s.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,i);const a=o.getImageData(0,0,r,i),l=o.getImageData(0,0,r,i),c={sourceWidth:r,sourceHeight:i,imageData:a,originalEl:t,originalImageData:l,canvasEl:s,ctx:o,filterBackend:this};e.forEach(h=>{h.applyTo(c)});const{imageData:u}=c;return(u.width!==r||u.height!==i)&&(s.width=u.width,s.height=u.height),o.putImageData(u,0,0),c}}class tg{constructor(){let{tileSize:e=we.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};S(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),S(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.chooseFastestCopyGLTo2DMethod(e,t)}chooseFastestCopyGLTo2DMethod(e,t){const r=ot(),i=new ArrayBuffer(e*t*4);if(we.forceGLPutImageData){this.imageBuffer=i,this.copyGLTo2D=ua;return}const s={imageBuffer:i},o={destinationWidth:e,destinationHeight:t,targetCanvas:r};let a;r.width=e,r.height=t,a=Ln().performance.now(),this.copyGLTo2D.call(s,this.gl,o);const l=Ln().performance.now()-a;a=Ln().performance.now(),ua.call(s,this.gl,o);const c=Ln().performance.now()-a;l>c&&(this.imageBuffer=i,this.copyGLTo2D=ua)}createWebGLCanvas(e,t){const r=ot();r.width=e,r.height=t;const i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=r.getContext("webgl",i);s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,i,s,o){const a=this.gl,l=s.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.originalWidth||0,originalHeight:t.height||t.originalHeight||0,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,r,i,c?void 0:t),targetTexture:this.createTexture(a,r,i),originalTexture:c||this.createTexture(a,r,i,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),YC(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,i,s){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,h,s||o),e.texParameteri(a,d,s||o),e.texParameteri(a,f,u),e.texParameteri(a,g,u),i?e.texImage2D(a,0,l,l,c,i):e.texImage2D(a,0,l,t,r,0,l,c,null),p}getCachedTexture(e,t,r){const{textureCache:i}=this;if(i[e])return i[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(i[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,i=t.targetCanvas,s=i.getContext("2d");if(!s)return;s.translate(0,i.height),s.scale(1,-1);const o=r.height-i.height;s.drawImage(r,0,o,i.width,i.height,0,0,i.width,i.height)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}function YC(n){const e=n.targetCanvas,t=e.width,r=e.height,i=n.destinationWidth,s=n.destinationHeight;(t!==i||r!==s)&&(e.width=i,e.height=s)}function ua(n,e){const t=e.targetCanvas,r=t.getContext("2d"),i=e.destinationWidth,s=e.destinationHeight,o=i*s*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);n.readPixels(0,0,i,s,n.RGBA,n.UNSIGNED_BYTE,a);const c=new ImageData(l,i,s);r.putImageData(c,0,0)}let ha;function XC(){const{WebGLProbe:n}=mr();return n.queryWebGL(ot()),we.enableGLFiltering&&n.isSupported(we.textureSize)?new tg({tileSize:we.textureSize}):new WC}function da(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return!ha&&n&&(ha=XC()),ha}const zC=["filters","resizeFilter","src","crossOrigin"],$C={strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0},rg=["cropX","cropY"];class Ht extends dt{static getDefaults(){return x(x({},super.getDefaults()),Ht.ownDefaults)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(x({filters:[]},t)),S(this,"_lastScaleX",1),S(this,"_lastScaleY",1),S(this,"_filterScalingX",1),S(this,"_filterScalingY",1),this.cacheKey="texture".concat(rn()),this.setElement(typeof e=="string"?(this.canvas&&getElementDocument(this.canvas.getElement())||ii()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Ht.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=da(!1);t instanceof tg&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&mr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),x(x({},super.toObject([...rg,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,i=-this.height/2;let s=[],o,a="",l="";if(!t)return[];if(this.hasCrop()){const c=rn();s.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+i+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),e.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',i-this.cropY,'" width="',t.width||t.naturalWidth,'" height="',t.height||t.naturalHeight,l,'"',a,`></image>
`),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=["	<rect ",'x="',r,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=c}return this.paintFirst!=="fill"?s=s.concat(o,e):s=s.concat(e,o),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ls(e,{crossOrigin:t,signal:r}).then(i=>{typeof t<"u"&&this.set({crossOrigin:t}),this.setElement(i)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.x,s=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&s>t){this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,this._lastScaleY=s;return}const a=ot(),l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=s,da().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0){this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1;return}const t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const s=ot();s.width=r,s.height=i,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1;da().applyFilters(e,this._originalElement,r,i,this._element),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,i=this._filterScalingY,s=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*i,f=Math.min(s*r,c-h),g=Math.min(o*i,u-d),p=-s/2,_=-o/2,y=Math.min(s,c/r-a),w=Math.min(o,u/i-l);t&&e.drawImage(t,h,d,f,g,p,_,y,w)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=V1(this.preserveAspectRatio||""),t=this.width,r=this.height,i={width:t,height:r};let s=this._element.width,o=this._element.height,a=1,l=1,c=0,u=0,h=0,d=0,f;return e&&(e.alignX!==Et||e.alignY!==Et)?(e.meetOrSlice==="meet"&&(a=l=CS(this._element,i),f=(t-s*a)/2,e.alignX==="Min"&&(c=-f),e.alignX==="Max"&&(c=f),f=(r-o*l)/2,e.alignY==="Min"&&(u=-f),e.alignY==="Max"&&(u=f)),e.meetOrSlice==="slice"&&(a=l=TS(this._element,i),f=s-t/a,e.alignX==="Mid"&&(h=f/2),e.alignX==="Max"&&(h=f),f=o-r/l,e.alignY==="Mid"&&(d=f/2),e.alignY==="Max"&&(d=f),s=t/a,o=r/l)):(a=t/s,l=r/o),{width:s,height:o,scaleX:a,scaleY:l,offsetLeft:c,offsetTop:u,cropX:h,cropY:d}}static fromObject(e){let{filters:t,resizeFilter:r,src:i,crossOrigin:s}=e,o=Xe(e,zC),a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Promise.all([Ls(i,x(x({},a),{},{crossOrigin:s})),t&&Ji(t,a),r&&Ji([r],a),Po(o,a)]).then(l=>{let[c,u=[],[h]=[],d={}]=l;return new this(c,x(x({},o),{},{src:i,crossOrigin:s,filters:u,resizeFilter:h},d))})}static fromURL(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ls(e,t).then(r=>new this(r,t))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Lr(e,this.ATTRIBUTE_NAMES);return this.fromURL(r["xlink:href"],x(x({},t),r)).catch(i=>(console.log(i),null))}}S(Ht,"type","Image");S(Ht,"cacheProperties",[...Ar,...rg]);S(Ht,"ownDefaults",$C);S(Ht,"CSS_CANVAS","canvas-img");S(Ht,"ATTRIBUTE_NAMES",[...sn,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]);te.setClass(Ht);te.setSVGClass(Ht);const ah=n=>te.getSVGClass(n.tagName.toLowerCase().replace("svg:","")),GC=function(n,e,t,r,i){this.elements=n,this.options=e,this.reviver=t,this.svgUid=e&&e.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=i};(function(n){n.parse=function(){return Promise.all(this.elements.map((e,t)=>(e.setAttribute("svgUid",this.svgUid),this.createObject(e))))},n.createObject=async function(e){const t=ah(e);if(t){const r=await t.fromElement(e,this.options);let i;return this.resolveGradient(r,e,"fill"),this.resolveGradient(r,e,"stroke"),r instanceof Ht&&r._originalElement&&(i=r.parsePreserveAspectRatioAttribute(e)),sh(r,i),await this.resolveClipPath(r,e),this.reviver&&this.reviver(e,r),r}return null},n.extractPropertyDefinition=function(e,t,r){const i=e[t],s=this.regexUrl;if(!s.test(i))return;s.lastIndex=0;const o=s.exec(i)[1];return s.lastIndex=0,Yx[r][this.svgUid][o]},n.resolveGradient=function(e,t,r){const i=this.extractPropertyDefinition(e,r,"gradientDefs");if(i){const s=t.getAttribute(r+"-opacity"),o=Nl.fromElement(i,e,x(x({},this.options),{},{opacity:s}));e.set(r,o)}},n.resolveClipPath=async function(e,t){const r=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(r){const i=St(e.calcTransformMatrix()),s=r[0].parentNode;let o=t;for(;o.parentNode&&o.getAttribute("clip-path")!==e.clipPath;)o=o.parentNode;o.parentNode.appendChild(s);const a=await Promise.all(r.map(_=>ah(_).fromElement(_,this.options).then(y=>(sh(y),y.fillRule=y.clipRule,y)))),l=a.length===1?a[0]:new on(a),c=kt(i,l.calcTransformMatrix());l.clipPath&&await this.resolveClipPath(l,o);const{scaleX:u,scaleY:h,angle:d,skewX:f,translateX:g,translateY:p}=xn(c);l.set({flipX:!1,flipY:!1}),l.set({scaleX:u,scaleY:h,angle:d,skewX:f,skewY:0}),l.setPositionByOrigin(new O(g,p),de,de),e.clipPath=l}else{delete e.clipPath;return}}})(GC.prototype);const jo=n=>n.webgl!==void 0,qa="precision highp float",qC=`
    `.concat(qa,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),KC=`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`,ZC=["type"];class pt{get type(){return this.constructor.type}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ba({},(g1(e),e));S(this,"vertexSource",KC),Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return qC}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.vertexSource;const{WebGLProbe:{GLPrecision:i="highp"}}=mr();i!=="highp"&&(t=t.replace(new RegExp(qa,"g"),qa.replace("highp",i)));const s=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!s||!o||!a)throw new Error("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(a));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){return{}}sendAttributeData(e,t,r){const i=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,i=e.destinationHeight;(e.sourceWidth!==r||e.sourceHeight!==i)&&(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){const t=this.mainParameter,r=this.constructor.defaults[t];if(t){const i=this[t];return Array.isArray(r)&&Array.isArray(i)?r.every((s,o)=>s===i[o]):r===i}else return!1}applyTo(e){jo(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}getMainParameter(){return this.mainParameter?this[this.mainParameter]:void 0}setMainParameter(e){this.mainParameter&&(this[this.mainParameter]=e)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const t=ot();t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}}toObject(){const e=this.mainParameter;return x({type:this.type},e?{[e]:this[e]}:{})}toJSON(){return this.toObject()}static async fromObject(e,t){let r=Xe(e,ZC);return new this(r)}}S(pt,"type","BaseFilter");const QC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `},JC={color:"#F95C63",mode:"multiply",alpha:1};class Yl extends pt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(QC[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Ie(this.color).getSource(),i=r[0]*this.alpha,s=r[1]*this.alpha,o=r[2]*this.alpha,a=1-this.alpha;for(let l=0;l<t.length;l+=4){const c=t[l],u=t[l+1],h=t[l+2];switch(this.mode){case"multiply":t[l]=c*i/255,t[l+1]=u*s/255,t[l+2]=h*o/255;break;case"screen":t[l]=255-(255-c)*(255-i)/255,t[l+1]=255-(255-u)*(255-s)/255,t[l+2]=255-(255-h)*(255-o)/255;break;case"add":t[l]=c+i,t[l+1]=u+s,t[l+2]=h+o;break;case"difference":t[l]=Math.abs(c-i),t[l+1]=Math.abs(u-s),t[l+2]=Math.abs(h-o);break;case"subtract":t[l]=c-i,t[l+1]=u-s,t[l+2]=h-o;break;case"darken":t[l]=Math.min(c,i),t[l+1]=Math.min(u,s),t[l+2]=Math.min(h,o);break;case"lighten":t[l]=Math.max(c,i),t[l+1]=Math.max(u,s),t[l+2]=Math.max(h,o);break;case"overlay":t[l]=i<128?2*c*i/255:255-2*(255-c)*(255-i)/255,t[l+1]=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,t[l+2]=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255;break;case"exclusion":t[l]=i+c-2*i*c/255,t[l+1]=s+u-2*s*u/255,t[l+2]=o+h-2*o*h/255;break;case"tint":t[l]=i+c*a,t[l+1]=s+u*a,t[l+2]=o+h*a}}}getUniformLocations(e,t){return{uColor:e.getUniformLocation(t,"uColor")}}sendUniformData(e,t){const r=new Ie(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}toObject(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}S(Yl,"defaults",JC);S(Yl,"type","BlendColor");te.setClass(Yl);const e2={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},t2=["type","image"],r2={mode:"multiply",alpha:1,vertexSource:`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `};class Xl extends pt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return e2[this.mode]}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:i},filterBackend:{resources:s}}=e;const o=this.image;s.blendImage||(s.blendImage=ot());const a=s.blendImage,l=a.getContext("2d");a.width!==r||a.height!==i?(a.width=r,a.height=i):l.clearRect(0,0,r,i),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,i);const c=l.getImageData(0,0,r,i).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],g=t[u+3],p=c[u],_=c[u+1],y=c[u+2],w=c[u+3];switch(this.mode){case"multiply":t[u]=h*p/255,t[u+1]=d*_/255,t[u+2]=f*y/255,t[u+3]=g*w/255;break;case"mask":t[u+3]=w;break}}}getUniformLocations(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}static fromObject(e,t){let{type:r,image:i}=e,s=Xe(e,t2);return Ht.fromObject(i,t).then(o=>new this(x(x({},s),{},{image:o})))}}S(Xl,"type","BlendImage");S(Xl,"defaults",r2);te.setClass(Xl);const n2=`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `,i2={blur:0,mainParameter:"blur"};class zl extends pt{getFragmentSource(){return n2}applyTo(e){jo(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:i}}=e;const{width:s,height:o}=r;i.blurLayer1||(i.blurLayer1=ot(),i.blurLayer2=ot());const a=i.blurLayer1,l=i.blurLayer2;(a.width!==s||a.height!==o)&&(l.width=a.width=s,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=this.blur*.06*.5;let f,g,p,_;for(c.putImageData(r,0,0),u.clearRect(0,0,s,o),_=-h;_<=h;_++)f=(Math.random()-.5)/4,g=_/h,p=d*g*s+f,u.globalAlpha=1-Math.abs(g),u.drawImage(a,p,f),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(_=-h;_<=h;_++)f=(Math.random()-.5)/4,g=_/h,p=d*g*o+f,u.globalAlpha=1-Math.abs(g),u.drawImage(a,f,p),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const y=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),y}getUniformLocations(e,t){return{delta:e.getUniformLocation(t,"uDelta")}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.delta,r)}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}S(zl,"type","Blur");S(zl,"defaults",i2);te.setClass(zl);const s2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`,o2={brightness:0,mainParameter:"brightness"};class $l extends pt{getFragmentSource(){return s2}applyTo2d(e){let{imageData:{data:t}}=e;if(this.brightness===0)return;const r=Math.round(this.brightness*255);for(let i=0;i<t.length;i+=4)t[i]=t[i]+r,t[i+1]=t[i+1]+r,t[i+2]=t[i+2]+r}getUniformLocations(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}S($l,"type","Brightness");S($l,"defaults",o2);te.setClass($l);const a2=`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`,l2=["matrix"],ng={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class as extends pt{setOptions(e){let{matrix:t}=e,r=Xe(e,l2);t&&(this.matrix=[...t]),Object.assign(this,r)}getFragmentSource(){return a2}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=this.colorsOnly;for(let o=0;o<r.length;o+=4){const a=r[o],l=r[o+1],c=r[o+2];if(s)r[o]=a*i[0]+l*i[1]+c*i[2]+i[4]*255,r[o+1]=a*i[5]+l*i[6]+c*i[7]+i[9]*255,r[o+2]=a*i[10]+l*i[11]+c*i[12]+i[14]*255;else{const u=r[o+3];r[o]=a*i[0]+l*i[1]+c*i[2]+u*i[3]+i[4]*255,r[o+1]=a*i[5]+l*i[6]+c*i[7]+u*i[8]+i[9]*255,r[o+2]=a*i[10]+l*i[11]+c*i[12]+u*i[13]+i[14]*255,r[o+3]=a*i[15]+l*i[16]+c*i[17]+u*i[18]+i[19]*255}}}getUniformLocations(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}}sendUniformData(e,t){const r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,s)}}S(as,"type","ColorMatrix");S(as,"defaults",ng);te.setClass(as);function Cn(n,e){var t;const r=(t=class extends as{get type(){return n}},S(t,"type",n),S(t,"defaults",x(x({},ng),{},{mainParameter:void 0,matrix:e})),t);return te.setClass(r,n),r}Cn("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Cn("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Cn("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Cn("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Cn("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Cn("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Cn("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);const c2=["subFilters"];class ig extends pt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{subFilters:t=[]}=e,r=Xe(e,c2);super(r),this.subFilters=t}applyTo(e){jo(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return x(x({},super.toObject()),{},{subFilters:this.subFilters.map(e=>e.toObject())})}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>te.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}S(ig,"type","Composed");te.setClass(ig);const u2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`,h2={contrast:0,mainParameter:"contrast"};class Gl extends pt{getFragmentSource(){return u2}applyTo2d(e){let{imageData:{data:t}}=e;if(this.contrast===0)return;const r=Math.floor(this.contrast*255),i=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=i*(t[s]-128)+128,t[s+1]=i*(t[s+1]-128)+128,t[s+2]=i*(t[s+2]-128)+128}getUniformLocations(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}S(Gl,"type","Contrast");S(Gl,"defaults",h2);te.setClass(Gl);const d2={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `},f2={opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]};class ql extends pt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return d2[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,i=this.matrix,s=Math.round(Math.sqrt(i.length)),o=Math.floor(s/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,g,p,_,y,w,T,b,P,R,N,U;for(R=0;R<l;R++)for(P=0;P<a;P++){for(_=(R*a+P)*4,d=0,f=0,g=0,p=0,U=0;U<s;U++)for(N=0;N<s;N++)w=R+U-o,y=P+N-o,!(w<0||w>=l||y<0||y>=a)&&(T=(w*a+y)*4,b=i[U*s+N],d+=r[T]*b,f+=r[T+1]*b,g+=r[T+2]*b,h||(p+=r[T+3]*b));u[_]=d,u[_+1]=f,u[_+2]=g,h?u[_+3]=r[_+3]:u[_+3]=p}e.imageData=c}getUniformLocations(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return x(x({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}S(ql,"type","Convolute");S(ql,"defaults",f2);te.setClass(ql);const g2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`,p2=["gamma"],m2={mainParameter:"gamma",gamma:[1,1,1]};class Kl extends pt{getFragmentSource(){return g2}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gamma:t=[1,1,1]}=e,r=Xe(e,p2);super(r),this.gamma=t}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,i=1/r[0],s=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=Math.pow(l/255,i)*255,a.g[l]=Math.pow(l/255,s)*255,a.b[l]=Math.pow(l/255,o)*255;for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}getUniformLocations(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}}S(Kl,"type","Gamma");S(Kl,"defaults",m2);te.setClass(Kl);const _2={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `},v2={mode:"average",mainParameter:"mode"};class Zl extends pt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0,i;r<t.length;r+=4){switch(this.mode){case"average":i=(t[r]+t[r+1]+t[r+2])/3;break;case"lightness":i=(Math.min(t[r],t[r+1],t[r+2])+Math.max(t[r],t[r+1],t[r+2]))/2;break;case"luminosity":i=.21*t[r]+.72*t[r+1]+.07*t[r+2];break}t[r]=i,t[r+1]=i,t[r+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return _2[this.mode]}getUniformLocations(e,t){return{uMode:e.getUniformLocation(t,"uMode")}}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}S(Zl,"type","Grayscale");S(Zl,"defaults",v2);te.setClass(Zl);const w2={rotation:0,mainParameter:"rotation"};class Ql extends as{calculateMatrix(){const e=this.rotation*Math.PI,t=Bt(e),r=Ut(e),i=1/3,s=Math.sqrt(i)*r,o=1-t;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=t+o/3,this.matrix[1]=i*o-s,this.matrix[2]=i*o+s,this.matrix[5]=i*o+s,this.matrix[6]=t+i*o,this.matrix[7]=i*o-s,this.matrix[10]=i*o-s,this.matrix[11]=i*o+s,this.matrix[12]=t+i*o}isNeutralState(){return this.calculateMatrix(),super.isNeutralState()}applyTo(e){this.calculateMatrix(),super.applyTo(e)}}S(Ql,"type","HueRotation");S(Ql,"defaults",w2);te.setClass(Ql);const y2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`,b2={alpha:!1,invert:!0,mainParameter:"invert"};class Jl extends pt{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return y2}isNeutralState(){return!this.invert}getUniformLocations(e,t){return{uInvert:e.getUniformLocation(t,"uInvert"),uAlpha:e.getUniformLocation(t,"uAlpha")}}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}S(Jl,"type","Invert");S(Jl,"defaults",b2);te.setClass(Jl);const x2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`,S2={mainParameter:"noise",noise:0};class ec extends pt{getFragmentSource(){return x2}applyTo2d(e){let{imageData:{data:t}}=e;if(this.noise===0)return;const r=this.noise;for(let i=0;i<t.length;i+=4){const s=(.5-Math.random())*r;t[i]+=s,t[i+1]+=s,t[i+2]+=s}}getUniformLocations(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}toObject(){return x(x({},super.toObject()),{},{noise:this.noise})}}S(ec,"type","Noise");S(ec,"defaults",S2);te.setClass(ec);const C2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepW;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`,T2={blocksize:4,mainParameter:"blocksize"};class tc extends pt{applyTo2d(e){let{imageData:{data:t,width:r,height:i}}=e;for(let s=0;s<i;s+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=s*4*r+o*4,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=s;d<Math.min(s+this.blocksize,i);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const g=d*4*r+f*4;t[g]=l,t[g+1]=c,t[g+2]=u,t[g+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return C2}getUniformLocations(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}S(tc,"type","Pixelate");S(tc,"defaults",T2);te.setClass(tc);const D2=`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`,O2={color:"#FFFFFF",distance:.02,useAlpha:!1};class rc extends pt{getFragmentShader(){return D2}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.distance*255,i=new Ie(this.color).getSource(),s=[i[0]-r,i[1]-r,i[2]-r],o=[i[0]+r,i[1]+r,i[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>s[0]&&c>s[1]&&u>s[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}getUniformLocations(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}}sendUniformData(e,t){const r=new Ie(this.color).getSource(),i=this.distance,s=[0+r[0]/255-i,0+r[1]/255-i,0+r[2]/255-i,1],o=[r[0]/255+i,r[1]/255+i,r[2]/255+i,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,o)}toObject(){return x(x({},super.toObject()),{},{color:this.color,distance:this.distance})}}S(rc,"type","RemoveColor");S(rc,"defaults",O2);te.setClass(rc);const k2={resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,fragmentSourceTOP:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
  `};class nc extends pt{getUniformLocations(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}}sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r);for(let s=1;s<=r;s++)i[s-1]=e(s*t);return i}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      `.concat(this.fragmentSourceTOP,`
      uniform float uTaps[`).concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,i)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(i,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(i,`];
              sum += 2.0 * uTaps[`).concat(i,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyTo(e){jo(e)?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;t*=Math.PI;const r=t/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;const s=t.width,o=t.height,a=Math.round(s*r),l=Math.round(o*i);let c;this.resizeType==="sliceHack"?c=this.sliceByTwo(e,s,o,a,l):this.resizeType==="hermite"?c=this.hermiteFastResize(e,s,o,a,l):this.resizeType==="bilinear"?c=this.bilinearFiltering(e,s,o,a,l):this.resizeType==="lanczos"&&(c=this.lanczosResize(e,s,o,a,l)),e.imageData=c}sliceByTwo(e,t,r,i,s){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let f=0,g=0;const p=t;let _=0;d.sliceByTwo||(d.sliceByTwo=ot());const y=d.sliceByTwo;(y.width<t*1.5||y.height<r)&&(y.width=t*1.5,y.height=r);const w=y.getContext("2d");for(w.clearRect(0,0,t*1.5,r),w.putImageData(o,0,0),i=Math.floor(i),s=Math.floor(s);!l||!c;)t=u,r=h,i<Math.floor(u*a)?u=Math.floor(u*a):(u=i,l=!0),s<Math.floor(h*a)?h=Math.floor(h*a):(h=s,c=!0),w.drawImage(y,f,g,t,r,p,_,u,h),f=p,g=_,_+=h;return w.getImageData(f,g,i,s)}lanczosResize(e,t,r,i,s){function o(b){let P,R,N,U,G,re,me,ge,ye,_e,ae;for(w.x=(b+.5)*h,T.x=Math.floor(w.x),P=0;P<s;P++){for(w.y=(P+.5)*d,T.y=Math.floor(w.y),G=0,re=0,me=0,ge=0,ye=0,R=T.x-p;R<=T.x+p;R++)if(!(R<0||R>=t)){_e=Math.floor(1e3*Math.abs(R-w.x)),y[_e]||(y[_e]={});for(let ne=T.y-_;ne<=T.y+_;ne++)ne<0||ne>=r||(ae=Math.floor(1e3*Math.abs(ne-w.y)),y[_e][ae]||(y[_e][ae]=u(Math.sqrt(Math.pow(_e*f,2)+Math.pow(ae*g,2))/1e3)),N=y[_e][ae],N>0&&(U=(ne*t+R)*4,G+=N,re+=N*a[U],me+=N*a[U+1],ge+=N*a[U+2],ye+=N*a[U+3]))}U=(P*i+b)*4,c[U]=re/G,c[U+1]=me/G,c[U+2]=ge/G,c[U+3]=ye/G}return++b<i?o(b):l}const a=e.imageData.data,l=e.ctx.createImageData(i,s),c=l.data,u=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,d=this.rcpScaleY,f=2/this.rcpScaleX,g=2/this.rcpScaleY,p=Math.ceil(h*this.lanczosLobes/2),_=Math.ceil(d*this.lanczosLobes/2),y={},w={},T={};return o(0)}bilinearFiltering(e,t,r,i,s){let o,a,l,c,u,h,d,f,g,p,_,y,w=0,T;const b=this.rcpScaleX,P=this.rcpScaleY,R=4*(t-1),U=e.imageData.data,G=e.ctx.createImageData(i,s),re=G.data;for(d=0;d<s;d++)for(f=0;f<i;f++)for(u=Math.floor(b*f),h=Math.floor(P*d),g=b*f-u,p=P*d-h,T=4*(h*t+u),_=0;_<4;_++)o=U[T+_],a=U[T+4+_],l=U[T+R+_],c=U[T+R+4+_],y=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,re[w++]=y;return G}hermiteFastResize(e,t,r,i,s){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData,h=u.data,d=e.ctx.createImageData(i,s),f=d.data;for(let g=0;g<s;g++)for(let p=0;p<i;p++){const _=(p+g*i)*4;let y=0,w=0,T=0,b=0,P=0,R=0,N=0;const U=(g+.5)*a;for(let G=Math.floor(g*a);G<(g+1)*a;G++){const re=Math.abs(U-(G+.5))/c,me=(p+.5)*o,ge=re*re;for(let ye=Math.floor(p*o);ye<(p+1)*o;ye++){let _e=Math.abs(me-(ye+.5))/l;const ae=Math.sqrt(ge+_e*_e);ae>1&&ae<-1||(y=2*ae*ae*ae-3*ae*ae+1,y>0&&(_e=4*(ye+G*t),N+=y*h[_e+3],T+=y,h[_e+3]<255&&(y=y*h[_e+3]/250),b+=y*h[_e],P+=y*h[_e+1],R+=y*h[_e+2],w+=y))}}f[_]=b/w,f[_+1]=P/w,f[_+2]=R/w,f[_+3]=N/T}return d}toObject(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}S(nc,"type","Resize");S(nc,"defaults",k2);te.setClass(nc);const M2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`,P2={saturation:0,mainParameter:"saturation"};class ic extends pt{getFragmentSource(){return M2}applyTo2d(e){let{imageData:{data:t}}=e;if(this.saturation===0)return;const r=-this.saturation;for(let i=0;i<t.length;i+=4){const s=Math.max(t[i],t[i+1],t[i+2]);t[i]+=s!==t[i]?(s-t[i])*r:0,t[i+1]+=s!==t[i+1]?(s-t[i+1])*r:0,t[i+2]+=s!==t[i+2]?(s-t[i+2])*r:0}}getUniformLocations(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}S(ic,"type","Saturation");S(ic,"defaults",P2);te.setClass(ic);const E2=`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`,F2={vibrance:0,mainParameter:"vibrance"};class sc extends pt{getFragmentSource(){return E2}applyTo2d(e){let{imageData:{data:t}}=e;if(this.vibrance===0)return;const r=-this.vibrance;for(let i=0;i<t.length;i+=4){const s=Math.max(t[i],t[i+1],t[i+2]),o=(t[i]+t[i+1]+t[i+2])/3,a=Math.abs(s-o)*2/255*r;t[i]+=s!==t[i]?(s-t[i])*a:0,t[i+1]+=s!==t[i+1]?(s-t[i+1])*a:0,t[i+2]+=s!==t[i+2]?(s-t[i+2])*a:0}}getUniformLocations(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}S(sc,"type","Vibrance");S(sc,"defaults",F2);te.setClass(sc);const A2={class:"zoom"},L2=gt({__name:"Zoom",props:{value:{}},emits:["input","middle-clicked"],setup(n,{emit:e}){const t=n,r=K(()=>Math.round(t.value*100)+"%");function i(){e("middle-clicked")}function s(){a(t.value-.05)}function o(){a(t.value+.05)}function a(l){e("input",l)}return Er(()=>{Ki("zoom-function",l=>{l==="in"?o():l==="out"?s():l==="reset"&&i()})}),(l,c)=>{const u=Xt("ico");return Q(),ie("div",A2,[Wr(l.$slots,"left"),I("button",{class:"side-btn zoom-down is-left",onClick:s},[Se(u,{icon:"minus",size:"small"})]),I("button",{class:"zoom-btn",onClick:i},vt(r.value),1),I("button",{class:"side-btn zoom-up is-right",onClick:o},[Se(u,{icon:"plus",size:"small"})])])}}});const R2={class:"screenshot-viewer"},I2=gt({__name:"ScreenshotViewer",props:{currentCapture:{}},setup(n){const e=n;let t,r,i,s;const o=Me(.5),a=Me(),l=K(()=>{let w="";const T=e.currentCapture;if(T&&T.Fullpath)try{w="http://localhost:5020/capture?path="+T.Fullpath}catch{}return w});async function c(){if(l.value){let w=await Ht.fromURL(l.value);w.left=0,w.top=0,w.selectable=!1,w.hoverCursor="-webkit-grab",w.moveCursor="-webkit-grabbing",t.add(w),t.remove(s),s=w}else t.remove(s)}let u="";fr(()=>e.currentCapture,()=>{var w,T;((w=e.currentCapture)==null?void 0:w.Dt)!=u&&(c(),u=((T=e.currentCapture)==null?void 0:T.Dt)||"")});function h(w){const T=t.width/2,b=t.height/3;d(T,b,w)}function d(w,T,b){b>=.09&&b<2.1&&(o.value=b,t.zoomToPoint(new O(w,T),b))}function f(){o.value=.7,t.selection=!1,t.defaultCursor="-webkit-grab",t.absolutePan(new O(-50,-60)),t.setZoom(o.value),g()}function g(){t.setDimensions({width:window.innerWidth,height:window.innerHeight-30})}let p=0;function _(w){let T=-w.deltaY||-w.detail,b=50,P=.05;if((T<-100||T>100)&&(b=10,P=.05),p+b<+new Date){p=+new Date;var R=Math.max(-1,Math.min(1,T));let N=o.value+R*P;N=Math.round(N*100),N=N/100,d(r,i,N)}}async function y(){var w,T;if((w=e.currentCapture)!=null&&w.Dt){let b=await yv({Dt:(T=e.currentCapture)==null?void 0:T.Dt});for(let P=0;P<b.Meta.length;P++){const R=b.Meta[P];console.log(R.Text,{width:R.Width,height:R.Height,left:R.X,top:R.Y});let N=new Mt({width:R.Width,height:R.Height,left:R.X,top:R.Y,fill:"transparent",stroke:"#f55",strokeWidth:1,lockMovementY:!0,lockMovementX:!0,lockScalingFlip:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockSkewingX:!0,lockSkewingY:!0,selectable:!1,hoverCursor:"pointer"});N.on("mousedown",()=>{jd("copy",R.Text),console.log("on mousedown rect",R.Text)}),t.add(N)}}}return Er(()=>{let w=!1;t=new ts("screenshot-viewer"),t.selection=!1,t.absolutePan(new O(-50,-50)),t.on("mouse:up",T=>{t.defaultCursor="-webkit-grab",T.target&&(T.target.hoverCursor="-webkit-grab"),w=!1}),t.on("mouse:down",T=>{t.defaultCursor="-webkit-grabbing",T.target&&(T.target.hoverCursor="-webkit-grabbing"),w=!0}),t.on("mouse:move",T=>{let b=T.e;if(r=b.layerX,i=b.layerY,w&&T&&b){var P=new O(b.movementX,b.movementY);t.relativePan(P)}}),window.addEventListener("resize",g),document.addEventListener("mousewheel",_,!1),c(),f()}),ns(()=>{window.addEventListener("resize",g),document.removeEventListener("mousewheel",_,!1)}),(w,T)=>(Q(),ie("div",R2,[Se(L2,{value:o.value,onInput:h,onMiddleClicked:f},{left:kr(()=>[I("button",{class:"btn zoom-btn gap-right",onClick:y},"xxx")]),_:1},8,["value"]),I("canvas",{ref_key:"canvasEl",ref:a,id:"screenshot-viewer",width:"1280",height:"800"},null,512)]))}});const j2={class:"footer-summary"},sg=gt({__name:"SummaryFooter",props:{currentImageIndex:{},isFollowing:{type:Boolean}},emits:["minute-index-change","toggle-follow"],setup(n,{emit:e}){const t=ni();Me(!1),Me(0);const r=wl(t),i=Kr(r,"currentDaySummary"),s=K(()=>{if(i.value){let o={start:0,end:rb(i.value.TotalCapturedMinutes)*1e3},a=ey(o);return`${a.hours}:${a.minutes}:${a.seconds}`}return""});return Er(()=>{}),ns(()=>{}),(o,a)=>(Q(),ie("footer",j2,vt(et(s)),1))}});(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".v3dp__popout[data-v-65eb861b]{z-index:10;position:absolute;text-align:center;width:17.5em;background-color:var(--popout-bg-color);box-shadow:var(--box-shadow);border-radius:var(--border-radius);padding:8px 0 1em;color:var(--text-color)}.v3dp__popout *[data-v-65eb861b]{color:inherit;font-size:inherit;font-weight:inherit}.v3dp__popout[data-v-65eb861b] button{background:none;border:none;outline:none}.v3dp__popout[data-v-65eb861b] button:not(:disabled){cursor:pointer}.v3dp__heading[data-v-65eb861b]{width:100%;display:flex;height:var(--heading-size);line-height:var(--heading-size);font-weight:var(--heading-weight)}.v3dp__heading__button[data-v-65eb861b]{background:none;border:none;padding:0;display:flex;justify-content:center;align-items:center;width:var(--heading-size)}button.v3dp__heading__center[data-v-65eb861b]:hover,.v3dp__heading__button[data-v-65eb861b]:not(:disabled):hover{background-color:var(--heading-hover-color)}.v3dp__heading__center[data-v-65eb861b]{flex:1}.v3dp__heading__icon[data-v-65eb861b]{height:12px;stroke:var(--arrow-color)}.v3dp__heading__button:disabled .v3dp__heading__icon[data-v-65eb861b]{stroke:var(--elem-disabled-color)}.v3dp__subheading[data-v-65eb861b],.v3dp__elements[data-v-65eb861b]{display:grid;grid-template-columns:var(--popout-column-definition);font-size:var(--elem-font-size)}.v3dp__subheading[data-v-65eb861b]{margin-top:1em}.v3dp__divider[data-v-65eb861b]{border:1px solid var(--divider-color);border-radius:3px}.v3dp__elements[data-v-65eb861b] button:disabled{color:var(--elem-disabled-color)}.v3dp__elements[data-v-65eb861b] button{padding:.3em .6em}.v3dp__elements[data-v-65eb861b] button span{display:block;line-height:1.9em;height:1.8em;border-radius:var(--elem-border-radius)}.v3dp__elements[data-v-65eb861b] button:not(:disabled):hover span{background-color:var(--elem-hover-bg-color);color:var(--elem-hover-color)}.v3dp__elements[data-v-65eb861b] button.selected span{background-color:var(--elem-selected-bg-color);color:var(--elem-selected-color)}.v3dp__elements[data-v-65eb861b] button.current span{font-weight:var(--elem-current-font-weight);outline:1px solid var(--elem-current-outline-color)}.v3dp__column[data-v-81ac698d]{display:flex;flex-direction:column;overflow-y:auto;height:190px}.v3dp__datepicker{--popout-bg-color: var(--vdp-bg-color, #fff);--box-shadow: var( --vdp-box-shadow, 0 4px 10px 0 rgba(128, 144, 160, .1), 0 0 1px 0 rgba(128, 144, 160, .81) );--text-color: var(--vdp-text-color, #000000);--border-radius: var(--vdp-border-radius, 3px);--heading-size: var(--vdp-heading-size, 2.5em);--heading-weight: var(--vdp-heading-weight, bold);--heading-hover-color: var(--vdp-heading-hover-color, #eeeeee);--arrow-color: var(--vdp-arrow-color, currentColor);--elem-color: var(--vdp-elem-color, currentColor);--elem-disabled-color: var(--vdp-disabled-color, #d5d9e0);--elem-hover-color: var(--vdp-hover-color, #fff);--elem-hover-bg-color: var(--vdp-hover-bg-color, #0baf74);--elem-selected-color: var(--vdp-selected-color, #fff);--elem-selected-bg-color: var(--vdp-selected-bg-color, #0baf74);--elem-current-outline-color: var(--vdp-current-date-outline-color, #888);--elem-current-font-weight: var(--vdp-current-date-font-weight, bold);--elem-font-size: var(--vdp-elem-font-size, .8em);--elem-border-radius: var(--vdp-elem-border-radius, 3px);--divider-color: var(--vdp-divider-color, var(--elem-disabled-color));position:relative}.v3dp__clearable{display:inline;position:relative;left:-15px;cursor:pointer}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const V2=["year","month","day","time","custom"],B2=gt({emits:{elementClick:n=>Ot(n),left:()=>!0,right:()=>!0,heading:()=>!0},props:{headingClickable:{type:Boolean,default:!1},leftDisabled:{type:Boolean,default:!1},rightDisabled:{type:Boolean,default:!1},columnCount:{type:Number,default:7},items:{type:Array,default:()=>[]},viewMode:{type:String,required:!0,validate:n=>typeof n=="string"&&V2.includes(n)}}}),di=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},oc=n=>(up("data-v-65eb861b"),n=n(),hp(),n),U2={class:"v3dp__heading"},N2=["disabled"],H2=oc(()=>I("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[I("g",{fill:"none","fill-rule":"evenodd"},[I("path",{stroke:"none",d:"M-9 16V-8h24v24z"}),I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 0L1 4l4 4"})])],-1)),W2=["disabled"],Y2=oc(()=>I("svg",{class:"v3dp__heading__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"},[I("g",{fill:"none","fill-rule":"evenodd"},[I("path",{stroke:"none",d:"M15-8v24H-9V-8z"}),I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M1 8l4-4-4-4"})])],-1)),X2={class:"v3dp__body"},z2={class:"v3dp__subheading"},$2=oc(()=>I("hr",{class:"v3dp__divider"},null,-1)),G2={class:"v3dp__elements"},q2=["disabled","onClick"];function K2(n,e,t,r,i,s){return Q(),ie("div",{class:Pt(["v3dp__popout",`v3dp__popout-${n.viewMode}`]),style:Gr({"--popout-column-definition":`repeat(${n.columnCount}, 1fr)`}),onMousedown:e[3]||(e[3]=Yr(()=>{},["prevent"]))},[I("div",U2,[I("button",{class:"v3dp__heading__button v3dp__heading__button__left",disabled:n.leftDisabled,onClick:e[0]||(e[0]=Yr(o=>n.$emit("left"),["stop","prevent"]))},[Wr(n.$slots,"arrow-left",{},()=>[H2],!0)],8,N2),(Q(),ir($h(n.headingClickable?"button":"span"),{class:"v3dp__heading__center",onClick:e[1]||(e[1]=Yr(o=>n.$emit("heading"),["stop","prevent"]))},{default:kr(()=>[Wr(n.$slots,"heading",{},void 0,!0)]),_:3})),I("button",{class:"v3dp__heading__button v3dp__heading__button__right",disabled:n.rightDisabled,onClick:e[2]||(e[2]=Yr(o=>n.$emit("right"),["stop","prevent"]))},[Wr(n.$slots,"arrow-right",{},()=>[Y2],!0)],8,W2)]),I("div",X2,["subheading"in n.$slots?(Q(),ie(Je,{key:0},[I("div",z2,[Wr(n.$slots,"subheading",{},void 0,!0)]),$2],64)):yn("",!0),I("div",G2,[Wr(n.$slots,"body",{},()=>[(Q(!0),ie(Je,null,wn(n.items,o=>(Q(),ie("button",{key:o.key,disabled:o.disabled,class:Pt([{selected:o.selected,current:o.current},`v3dp__element__button__${n.viewMode}`]),onClick:Yr(a=>n.$emit("elementClick",o.value),["stop","prevent"])},[I("span",null,vt(o.display),1)],10,q2))),128))],!0)])])],38)}const Vo=di(B2,[["render",K2],["__scopeId","data-v-65eb861b"]]),Z2=gt({components:{PickerPopup:Vo},emits:{"update:pageDate":n=>Ot(n),select:n=>Ot(n)},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(n,{emit:e}){const t=K(()=>sb(n.pageDate)),r=K(()=>zv(n.pageDate)),i=(c,u,h)=>!u&&!h?!0:!(u&&$t(c)<$t(u)||h&&$t(c)>$t(h)),s=K(()=>Xv({start:t.value,end:r.value}).map(c=>({value:c,key:String($t(c)),display:$t(c),selected:!!n.selected&&$t(c)===$t(n.selected),disabled:!i(c,n.lowerLimit,n.upperLimit)}))),o=K(()=>{const c=$t(t.value),u=$t(r.value);return`${c} - ${u}`}),a=K(()=>n.lowerLimit&&(ms(n.lowerLimit)===ms(n.pageDate)||qi(n.pageDate,n.lowerLimit))),l=K(()=>n.upperLimit&&(ms(n.upperLimit)===ms(n.pageDate)||Gi(n.pageDate,n.upperLimit)));return{years:s,heading:o,leftDisabled:a,rightDisabled:l,previousPage:()=>e("update:pageDate",Id(n.pageDate,10)),nextPage:()=>e("update:pageDate",yl(n.pageDate,10))}}});function Q2(n,e,t,r,i,s){const o=Xt("picker-popup");return Q(),ir(o,{columnCount:3,leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,items:n.years,viewMode:"year",onLeft:n.previousPage,onRight:n.nextPage,onElementClick:e[0]||(e[0]=a=>n.$emit("select",a))},{heading:kr(()=>[Mr(vt(n.heading),1)]),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}const J2=di(Z2,[["render",Q2]]),eT=gt({components:{PickerPopup:Vo},emits:{"update:pageDate":n=>Ot(n),select:n=>Ot(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"LLL"},locale:{type:Object,required:!1},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1}},setup(n,{emit:e}){const t=K(()=>Yv(n.pageDate)),r=K(()=>Wv(n.pageDate)),i=K(()=>u=>$i(u,n.format,{locale:n.locale})),s=(u,h,d)=>!h&&!d?!0:!(h&&qi(u,xd(h))||d&&Gi(u,Cl(d))),o=K(()=>Hv({start:t.value,end:r.value}).map(u=>({value:u,display:i.value(u),key:i.value(u),selected:!!n.selected&&Ra(n.selected,u),disabled:!s(u,n.lowerLimit,n.upperLimit)}))),a=K(()=>$t(t.value)),l=K(()=>n.lowerLimit&&(iu(n.lowerLimit,n.pageDate)||qi(n.pageDate,n.lowerLimit))),c=K(()=>n.upperLimit&&(iu(n.upperLimit,n.pageDate)||Gi(n.pageDate,n.upperLimit)));return{months:o,heading:a,leftDisabled:l,rightDisabled:c,previousPage:()=>e("update:pageDate",Id(n.pageDate,1)),nextPage:()=>e("update:pageDate",yl(n.pageDate,1))}}});function tT(n,e,t,r,i,s){const o=Xt("picker-popup");return Q(),ir(o,{headingClickable:"",columnCount:3,items:n.months,leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,viewMode:"month",onLeft:n.previousPage,onRight:n.nextPage,onHeading:e[0]||(e[0]=a=>n.$emit("back")),onElementClick:e[1]||(e[1]=a=>n.$emit("select",a))},{heading:kr(()=>[Mr(vt(n.heading),1)]),_:1},8,["items","leftDisabled","rightDisabled","onLeft","onRight"])}const rT=di(eT,[["render",tT]]),nT=gt({components:{PickerPopup:Vo},emits:{"update:pageDate":n=>Ot(n),select:n=>Ot(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},format:{type:String,required:!1,default:"dd"},headingFormat:{type:String,required:!1,default:"LLLL yyyy"},weekdayFormat:{type:String,required:!1,default:"EE"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:n=>typeof n=="number"&&Number.isInteger(n)&&n>=0&&n<=6},lowerLimit:{type:Date,required:!1},upperLimit:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1}},setup(n,{emit:e}){const t=K(()=>f=>g=>$i(g,f,{locale:n.locale,weekStartsOn:n.weekStartsOn})),r=K(()=>xd(n.pageDate)),i=K(()=>Cl(n.pageDate)),s=K(()=>({start:r.value,end:i.value})),o=K(()=>({start:Cv(r.value,{weekStartsOn:n.weekStartsOn}),end:$v(i.value,{weekStartsOn:n.weekStartsOn})})),a=K(()=>{const f=n.weekStartsOn,g=t.value(n.weekdayFormat);return Array.from(Array(7)).map((p,_)=>(f+_)%7).map(p=>ib(new Date,p,{weekStartsOn:n.weekStartsOn})).map(g)}),l=(f,g,p,_)=>{var y,w;return(y=_==null?void 0:_.dates)!=null&&y.some(T=>Ko(f,T))||(w=_==null?void 0:_.predicate)!=null&&w.call(_,f)?!1:!g&&!p?!0:!(g&&qi(f,qn(g))||p&&Gi(f,bd(p)))},c=K(()=>{const f=new Date,g=t.value(n.format);return Nv(o.value).map(p=>({value:p,display:g(p),selected:!!n.selected&&Ko(n.selected,p),current:Ko(f,p),disabled:!n.allowOutsideInterval&&!eb(p,s.value)||!l(p,n.lowerLimit,n.upperLimit,n.disabledDates),key:t.value("yyyy-MM-dd")(p)}))}),u=K(()=>t.value(n.headingFormat)(n.pageDate)),h=K(()=>n.lowerLimit&&(Ra(n.lowerLimit,n.pageDate)||qi(n.pageDate,n.lowerLimit))),d=K(()=>n.upperLimit&&(Ra(n.upperLimit,n.pageDate)||Gi(n.pageDate,n.upperLimit)));return{weekDays:a,days:c,heading:u,leftDisabled:h,rightDisabled:d,previousPage:()=>e("update:pageDate",ob(n.pageDate,1)),nextPage:()=>e("update:pageDate",Do(n.pageDate,1))}}});function iT(n,e,t,r,i,s){const o=Xt("picker-popup");return Q(),ir(o,{headingClickable:"",leftDisabled:n.leftDisabled,rightDisabled:n.rightDisabled,items:n.days,viewMode:"day",onLeft:n.previousPage,onRight:n.nextPage,onHeading:e[0]||(e[0]=a=>n.$emit("back")),onElementClick:e[1]||(e[1]=a=>n.$emit("select",a))},{heading:kr(()=>[Mr(vt(n.heading),1)]),subheading:kr(()=>[(Q(!0),ie(Je,null,wn(n.weekDays,(a,l)=>(Q(),ie("span",{key:a,class:Pt(`v3dp__subheading__weekday__${l}`)},vt(a),3))),128))]),_:1},8,["leftDisabled","rightDisabled","items","onLeft","onRight"])}const sT=di(nT,[["render",iT]]);function lh(n,e){const t=n.getBoundingClientRect(),r={height:n.clientHeight,width:n.clientWidth},i=e.getBoundingClientRect();if(!(i.top>=t.top&&i.bottom<=t.top+r.height)){const s=i.top-t.top,o=i.bottom-t.bottom;Math.abs(s)<Math.abs(o)?n.scrollTop+=s:n.scrollTop+=o}}const oT=gt({components:{PickerPopup:Vo},emits:{select:n=>Ot(n),back:()=>!0},props:{selected:{type:Date,required:!1},pageDate:{type:Date,required:!0},visible:{type:Boolean,required:!0},disabledTime:{type:Object,required:!1}},setup(n,{emit:e}){const t=Me(null),r=Me(null),i=K(()=>n.pageDate??n.selected),s=Me(i.value.getHours()),o=Me(i.value.getMinutes());fr(()=>n.selected,h=>{let d=0,f=0;h&&(d=h.getHours(),f=h.getMinutes()),s.value=d,o.value=f});const a=K(()=>[...Array(24).keys()].map(h=>({value:h,date:su(new Date(i.value.getTime()),{hours:h,minutes:o.value,seconds:0}),selected:s.value===h,ref:Me(null)}))),l=K(()=>[...Array(60).keys()].map(h=>({value:h,date:su(new Date(i.value.getTime()),{hours:s.value,minutes:h,seconds:0}),selected:o.value===h,ref:Me(null)}))),c=h=>{o.value=h.value,e("select",h.date)},u=()=>{const h=a.value.find(f=>{var g,p;return((p=(g=f.ref.value)==null?void 0:g.classList)==null?void 0:p.contains("selected"))??!1}),d=l.value.find(f=>{var g,p;return((p=(g=f.ref.value)==null?void 0:g.classList)==null?void 0:p.contains("selected"))??!1});h&&d&&(lh(t.value,h.ref.value),lh(r.value,d.ref.value))};return fr(()=>n.visible,h=>{h&&mo(u)}),{hoursListRef:t,minutesListRef:r,hours:s,minutes:o,hoursList:a,minutesList:l,padStartZero:h=>`0${h}`.substr(-2),selectMinutes:c,isEnabled:h=>{var d,f,g,p;return!((f=(d=n.disabledTime)==null?void 0:d.dates)!=null&&f.some(_=>Qy(h,_)&&Jy(h,_))||(p=(g=n.disabledTime)==null?void 0:g.predicate)!=null&&p.call(g,h))},scroll:u}}}),aT={ref:"hoursListRef",class:"v3dp__column"},lT=["disabled","onClick"],cT={ref:"minutesListRef",class:"v3dp__column"},uT=["disabled","onClick"];function hT(n,e,t,r,i,s){const o=Xt("picker-popup");return Q(),ir(o,{headingClickable:"",columnCount:2,leftDisabled:!0,rightDisabled:!0,viewMode:"time",onHeading:e[0]||(e[0]=a=>n.$emit("back"))},{heading:kr(()=>[Mr(vt(n.padStartZero(n.hours))+":"+vt(n.padStartZero(n.minutes)),1)]),body:kr(()=>[I("div",aT,[(Q(!0),ie(Je,null,wn(n.hoursList,a=>(Q(),ie("button",{key:a.value,ref_for:!0,ref:a.ref,class:Pt([{selected:a.selected},"v3dp__element_button__hour"]),disabled:!n.isEnabled(a.date),onClick:Yr(l=>n.hours=a.value,["stop","prevent"])},[I("span",null,vt(n.padStartZero(a.value)),1)],10,lT))),128))],512),I("div",cT,[(Q(!0),ie(Je,null,wn(n.minutesList,a=>(Q(),ie("button",{key:a.value,ref_for:!0,ref:a.ref,class:Pt([{selected:a.selected},"v3dp__element_button__minute"]),disabled:!n.isEnabled(a.date),onClick:Yr(l=>n.selectMinutes(a),["stop","prevent"])},[I("span",null,vt(n.padStartZero(a.value)),1)],10,uT))),128))],512)]),_:1})}const dT=di(oT,[["render",hT],["__scopeId","data-v-81ac698d"]]),Ss=["time","day","month","year"],fT=(n,e,t=void 0)=>{let r=t||new Date;return n&&(r=Ov([n,r])),e&&(r=kv([e,r])),r},gT=gt({components:{YearPicker:J2,MonthPicker:rT,DayPicker:sT,TimePicker:dT},inheritAttrs:!1,props:{placeholder:{type:String,default:""},modelValue:{type:Date,required:!1},disabledDates:{type:Object,required:!1},allowOutsideInterval:{type:Boolean,required:!1,default:!1},disabledTime:{type:Object,required:!1},upperLimit:{type:Date,required:!1},lowerLimit:{type:Date,required:!1},startingView:{type:String,required:!1,default:"day",validate:n=>typeof n=="string"&&Ss.includes(n)},startingViewDate:{type:Date,required:!1,default:()=>new Date},dayPickerHeadingFormat:{type:String,required:!1,default:"LLLL yyyy"},monthListFormat:{type:String,required:!1,default:"LLL"},weekdayFormat:{type:String,required:!1,default:"EE"},dayFormat:{type:String,required:!1,default:"dd"},inputFormat:{type:String,required:!1,default:"yyyy-MM-dd"},locale:{type:Object,required:!1},weekStartsOn:{type:Number,required:!1,default:1,validator:n=>[0,1,2,3,4,5,6].includes(n)},disabled:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,required:!1,default:!1},typeable:{type:Boolean,required:!1,default:!1},minimumView:{type:String,required:!1,default:"day",validate:n=>typeof n=="string"&&Ss.includes(n)}},emits:{"update:modelValue":n=>n==null||Ot(n),decadePageChanged:n=>!0,yearPageChanged:n=>!0,monthPageChanged:n=>!0,opened:()=>!0,closed:()=>!0},setup(n,{emit:e,attrs:t}){const r=Me("none"),i=Me(n.startingViewDate),s=Me(null),o=Me(!1),a=Me("");Wo(()=>{const b=ru(a.value,n.inputFormat,new Date,{locale:n.locale});Ot(b)&&(i.value=b)}),Wo(()=>a.value=n.modelValue&&Ot(n.modelValue)?$i(n.modelValue,n.inputFormat,{locale:n.locale}):"");const l=(b="none")=>{n.disabled||(b!=="none"&&r.value==="none"&&(i.value=n.modelValue||fT(n.lowerLimit,n.upperLimit,i.value)),r.value=b,e(b!=="none"?"opened":"closed"))};Wo(()=>{n.disabled&&(r.value="none")});const c=(b,P)=>{i.value=P,b==="year"?e("decadePageChanged",P):b==="month"?e("yearPageChanged",P):b==="day"&&e("monthPageChanged",P)},u=b=>{i.value=b,n.minimumView==="year"?(l("none"),e("update:modelValue",b)):r.value="month"},h=b=>{i.value=b,n.minimumView==="month"?(l("none"),e("update:modelValue",b)):r.value="day"},d=b=>{i.value=b,n.minimumView==="day"?(l("none"),e("update:modelValue",b)):r.value="time"},f=b=>{l("none"),e("update:modelValue",b)},g=()=>{n.clearable&&(l("none"),e("update:modelValue",null),i.value=n.startingViewDate)},p=()=>o.value=!0,_=()=>l(T.value),y=()=>{o.value=!1,l()},w=b=>{const P=b.keyCode?b.keyCode:b.which;if([27,13].includes(P)&&s.value.blur(),n.typeable){const R=ru(s.value.value,n.inputFormat,new Date,{locale:n.locale});Ot(R)&&a.value===$i(R,n.inputFormat,{locale:n.locale})&&(a.value=s.value.value,e("update:modelValue",R))}},T=K(()=>{const b=Ss.indexOf(n.startingView),P=Ss.indexOf(n.minimumView);return b<P?n.minimumView:n.startingView});return{blur:y,focus:_,click:p,input:a,inputRef:s,pageDate:i,renderView:l,updatePageDate:c,selectYear:u,selectMonth:h,selectDay:d,selectTime:f,keyUp:w,viewShown:r,goBackFromTimepicker:()=>n.startingView==="time"&&n.minimumView==="time"?null:r.value="day",clearModelValue:g,initialView:T,log:b=>console.log(b),variables:b=>Object.fromEntries(Object.entries(b??{}).filter(([P,R])=>P.startsWith("--")))}}}),pT={class:"v3dp__input_wrapper"},mT=["readonly","placeholder","disabled","tabindex"],_T={class:"v3dp__clearable"};function vT(n,e,t,r,i,s){const o=Xt("year-picker"),a=Xt("month-picker"),l=Xt("day-picker"),c=Xt("time-picker");return Q(),ie("div",{class:"v3dp__datepicker",style:Gr(n.variables(n.$attrs.style))},[I("div",pT,[dn(I("input",ml({type:"text",ref:"inputRef",readonly:!n.typeable,"onUpdate:modelValue":e[0]||(e[0]=u=>n.input=u)},n.$attrs,{placeholder:n.placeholder,disabled:n.disabled,tabindex:n.disabled?-1:0,onKeyup:e[1]||(e[1]=(...u)=>n.keyUp&&n.keyUp(...u)),onBlur:e[2]||(e[2]=(...u)=>n.blur&&n.blur(...u)),onFocus:e[3]||(e[3]=(...u)=>n.focus&&n.focus(...u)),onClick:e[4]||(e[4]=(...u)=>n.click&&n.click(...u))}),null,16,mT),[[Dm,n.input]]),dn(I("div",_T,[Wr(n.$slots,"clear",{onClear:n.clearModelValue},()=>[I("i",{onClick:e[5]||(e[5]=u=>n.clearModelValue())},"x")])],512),[[En,n.clearable&&n.modelValue]])]),dn(Se(o,{pageDate:n.pageDate,"onUpdate:pageDate":e[6]||(e[6]=u=>n.updatePageDate("year",u)),selected:n.modelValue,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,onSelect:n.selectYear},null,8,["pageDate","selected","lowerLimit","upperLimit","onSelect"]),[[En,n.viewShown==="year"]]),dn(Se(a,{pageDate:n.pageDate,"onUpdate:pageDate":e[7]||(e[7]=u=>n.updatePageDate("month",u)),selected:n.modelValue,onSelect:n.selectMonth,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,format:n.monthListFormat,locale:n.locale,onBack:e[8]||(e[8]=u=>n.viewShown="year")},null,8,["pageDate","selected","onSelect","lowerLimit","upperLimit","format","locale"]),[[En,n.viewShown==="month"]]),dn(Se(l,{pageDate:n.pageDate,"onUpdate:pageDate":e[9]||(e[9]=u=>n.updatePageDate("day",u)),selected:n.modelValue,weekStartsOn:n.weekStartsOn,lowerLimit:n.lowerLimit,upperLimit:n.upperLimit,headingFormat:n.dayPickerHeadingFormat,disabledDates:n.disabledDates,locale:n.locale,weekdayFormat:n.weekdayFormat,"allow-outside-interval":n.allowOutsideInterval,format:n.dayFormat,onSelect:n.selectDay,onBack:e[10]||(e[10]=u=>n.viewShown="month")},null,8,["pageDate","selected","weekStartsOn","lowerLimit","upperLimit","headingFormat","disabledDates","locale","weekdayFormat","allow-outside-interval","format","onSelect"]),[[En,n.viewShown==="day"]]),dn(Se(c,{pageDate:n.pageDate,visible:n.viewShown==="time",selected:n.modelValue,disabledTime:n.disabledTime,onSelect:n.selectTime,onBack:n.goBackFromTimepicker},null,8,["pageDate","visible","selected","disabledTime","onSelect","onBack"]),[[En,n.viewShown==="time"]])],4)}const wT=di(gT,[["render",vT]]);function ch(n){return new Date(n.replace("Z","").replace("T"," "))}const yT=I("div",{class:"splitter"},null,-1),bT=I("div",{class:"splitter"},null,-1),xT=I("div",{class:"splitter"},null,-1),ST={ref:"timelineCanvas",id:"timeline-viewer",width:"1280",height:"40"},CT={class:"tick-text"},TT=I("div",{class:"splitter"},null,-1),DT=I("div",{class:"splitter"},null,-1),OT=I("div",{class:"splitter"},null,-1),kT={class:"tick hours-total"},MT={class:"tick-text"};function Cs(n,e,t){let i=n.e.layerX/e,s=Math.round(i*t);return s>=t-1&&(s=t-2),s<=0&&(s=0),s}const og=gt({__name:"Timeline",props:{currentImageIndex:{},isFollowing:{type:Boolean}},emits:["day-change","minute-index-change","toggle-follow"],setup(n,{emit:e}){const t=n,r="#86DA9D",i=ni();let s=null,o,a;const l=Me(!1),c=Me(0),u=Me(.1),h=Me("");function d(){e("toggle-follow",!t.isFollowing)}const f=K(()=>{var C;return((C=i.currentDay)==null?void 0:C.Captures)||[]}),g=K(()=>i.currentDay);fr(g,()=>{Ze()}),fr(()=>t.currentImageIndex,()=>{Ze()});const p=K(()=>{if(i.currentDay&&i.currentDay.Captures)return i.currentDay.Captures[t.currentImageIndex]}),_=K(()=>{if(p.value&&p.value.Dt)return ch(p.value.Dt)}),y=K(()=>l.value?"opacity:1;":"opacity:0;"),w=K(()=>0),T=K(()=>[...f.value.filter(M=>{let E=new Date(M.Dt);return E.getMinutes()===0&&E.getSeconds()===0})]);function b(){const C=tb(_.value,1);i.loadDay(C)}function P(){const C=To(_.value,1);i.loadDay(C)}function R(){i.loadToday()}function N(C){C&&i.loadDay(C)}function U(C=1){C=-1*C;var M=t.currentImageIndex+C;_e(M)}function G(C=1){var M=t.currentImageIndex+C;_e(M)}function re(){c.value=1,h.value="prev"}function me(){c.value=0,u.value=.1,h.value=""}function ge(){c.value=1,h.value="next"}function ye(){c.value=0,u.value=.1,h.value=""}function _e(C){e("minute-index-change",C),ae(C)}function ae(C){console.log("moveMinuteLinePosition happend");var M=lt(C);o.set({left:M}),s.renderAll()}function ne(C){var M=lt(C);a.set({left:M,height:60}),s.renderAll()}function pe(){a.set({height:0}),s.renderAll()}function he(C){return`left: ${C/(T.value.length-1)*100}%;`}function lt(C){var M=0;return s&&s.width?s.width*(C/f.value.length*100)/100:M}function Wt(C){if(C){let M=ch(C);if(M)return $i(M,"haa")}return""}function Ze(){console.log("redrawingcanvas"),s||(s=new ts("timeline-viewer"));let C="";document&&document.documentElement&&(C=getComputedStyle(document.documentElement).getPropertyValue("--theme-input-bg")),s.setDimensions({width:window.innerWidth-(200+220+7*1),height:34}),s.clear();let M=0;s&&s.width&&(M=s.width*(1/f.value.length*100)/100);let E=!1,W=0;for(let ce=0;ce<f.value.length;ce++){let m=f.value[ce],v=lt(ce);ce===0?(E=m.IsReal,W=v):E!==m.IsReal?(s.add(new Mt({width:v-W,height:40,left:W,top:0,stroke:m.IsReal?C:r,fill:m.IsReal?C:r,selectable:!1})),W=v,E=m.IsReal):ce===f.value.length-1&&s.add(new Mt({width:v-W,height:40,left:W,top:0,stroke:m.IsReal?r:C,fill:m.IsReal?r:C,selectable:!1}))}o=new Mt({width:M,height:60,left:lt(t.currentImageIndex),top:0,stroke:"#f2ae57",fill:"#f2ae57",selectable:!1}),a=new Mt({width:M*1,height:0,left:lt(t.currentImageIndex),top:-1,stroke:"#F65C26",fill:"#F65C26",selectable:!1}),s.add(o),s.add(a),l.value=!0}function ze(C=1){U(C)}function Lt(C=1){G(C)}Me(0),Me(100);function Rt(C){C==="prevDay"?b():C==="nextDay"?P():C==="today"&&R(),C==="left"?ze():C==="right"?Lt():C==="left-1min"?ze(2):C==="right-1min"&&Lt(2)}let wr;function qe(C){C.matches,l.value=!1,Ze()}return Er(()=>{let C=!1;s||(s=new ts("timeline-viewer")),s.selection=!1,s.setDimensions({width:window.innerWidth-40,height:40}),Ze(),Ki("time-function",M=>{console.log("ev",M),Rt(M)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",qe),window.addEventListener("resize",Ze),s.on("mouse:up",M=>{_e(Cs(M,s.width,f.value.length)),C=!1}),s.on("mouse:down",M=>{_e(Cs(M,s.width,f.value.length)),C=!0}),s.on("mouse:out",M=>{pe()}),s.on("mouse:move",M=>{M&&M.e&&(C?_e(Cs(M,s.width,f.value.length)):ne(Cs(M,s.width,f.value.length)))})}),ns(()=>{clearInterval(wr),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",qe),window.removeEventListener("resize",Ze)}),(C,M)=>{var W;const E=Xt("ico");return Q(),ie("div",{class:"timeline",style:Gr(y.value)},[I("button",{class:"side-btn prev-day",onClick:b,title:"Previous Day"},[Se(E,{icon:"arrow-from-right"})]),yT,I("button",{class:"side-btn prev-minute",onClick:M[0]||(M[0]=ce=>ze(1)),onMousedown:re,onMouseup:me,title:"Previous 30 Seconds"},[Se(E,{icon:"angle-left"})],32),bT,I("button",{class:Pt(["side-btn prev-minute",{"toggle-follow-on":C.isFollowing}]),onClick:d,title:"Follow Captures"},[Se(E,{icon:"repeat-square-icon"})],2),xT,I("div",{class:"canvas-bg",style:Gr(y.value)},[I("canvas",ST,null,512),(Q(!0),ie(Je,null,wn(T.value,(ce,m)=>(Q(),ie("div",{class:"tick",style:Gr(he(m)),key:m},[Mr("  "),I("div",CT,vt(Wt(ce.Dt)),1)],4))),128))],4),TT,(Q(),ie("div",{class:"picker",key:(W=et(_))==null?void 0:W.toISOString()},[Se(et(wT),{"model-value":et(_),"input-format":"d MMM yyyy h:mm:ss aa","onUpdate:modelValue":N},null,8,["model-value"])])),DT,I("button",{class:"side-btn next-30-sec",onClick:M[1]||(M[1]=ce=>Lt(1)),onMousedown:ge,onMouseup:ye,title:"Next 30 Seconds"},[Se(E,{icon:"angle-right"})],32),OT,I("button",{class:"side-btn next-day",onClick:P,title:"Next Day"},[Se(E,{icon:"arrow-from-left"})]),I("div",kT,[I("div",MT,[Se(E,{icon:"clock",class:"is-small-icon"}),I("div",null,vt(w.value),1)])])],4)}}});const PT=gt({__name:"Home",setup(n){const e=ni(),t=wl(e),r=Kr(t,"currentDay"),i=Kr(t,"earliestCaptureIndex"),s=Kr(t,"latestCaptureIndex");let o=Me(-1),a=Me(!1);const l=K(()=>{if(r.value&&r.value.Captures)return r.value.Captures[o.value]});return Er(async()=>{await e.loadToday(),o.value<0&&(o.value=i.value||0),Ki("screen-captured",async c=>{var u;c&&c.Bod===((u=e.currentDay)==null?void 0:u.Bod)&&(await e.loadDay(new Date(e.currentDay.Bod)),a.value&&(o.value=s.value||o.value))}),e.loadSettings()}),(c,u)=>(Q(),ie(Je,null,[r.value?(Q(),ir(og,{key:0,"current-image-index":et(o),onMinuteIndexChange:u[0]||(u[0]=h=>Ue(o)?o.value=h:o=h),"is-following":et(a),onToggleFollow:u[1]||(u[1]=h=>Ue(a)?a.value=!et(a):a=!et(a))},null,8,["current-image-index","is-following"])):yn("",!0),Se(I2,{"current-capture":l.value},null,8,["current-capture"]),Se(sg)],64))}}),ET={key:1,class:"day-summary"},FT={class:"day-summary-table",border:"1"},AT=gt({__name:"DaySummary",setup(n){const e=ni(),t=wl(e),r=Kr(t,"currentDay");Kr(t,"earliestCaptureIndex"),Kr(t,"latestCaptureIndex");let i=Me(-1),s=Me(!1);const o=K(()=>{if(r.value)return r.value.Captures.filter(a=>a.IsReal)});return Er(async()=>{await e.loadToday()}),(a,l)=>(Q(),ie(Je,null,[r.value?(Q(),ir(og,{key:0,"current-image-index":et(i),onMinuteIndexChange:l[0]||(l[0]=c=>Ue(i)?i.value=c:i=c),"is-following":et(s),onToggleFollow:l[1]||(l[1]=c=>Ue(s)?s.value=!et(s):s=!et(s))},null,8,["current-image-index","is-following"])):yn("",!0),r.value?(Q(),ie("div",ET,[Mr(vt(r.value.Summary)+" ",1),I("table",FT,[I("tbody",null,[(Q(!0),ie(Je,null,wn(o.value,(c,u)=>(Q(),ie("tr",null,[I("td",null,vt(c.AppName),1)]))),256))])])])):yn("",!0),Se(sg)],64))}});const LT={name:"about",components:{},computed:{},methods:{},data:function(){return{}},mounted(){}},RT=I("div",{class:"about"},[I("div",{class:"block"},[I("div"),I("h1",null,"Relapse"),I("h2",null," Created by "),I("h3",null,[Mr(" Lead Developer @ "),I("br"),Mr(" NERDY - ")])])],-1),IT=[RT];function jT(n,e,t,r,i,s){return Q(),ie("div",null,IT)}const VT=vl(LT,[["render",jT]]);var Ka={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(n){return e=>["number","string","boolean"].indexOf(typeof e)!==-1||e==null},required:!1},modelValue:{validator:function(n){return e=>["number","string","boolean"].indexOf(typeof e)!==-1||e==null},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1},aria:{required:!1,type:Object,default:()=>({})}},setup(n,e){const t=function(o,a,l){const{value:c,modelValue:u,falseValue:h,trueValue:d,disabled:f}=xi(o),g=u&&u.value!==void 0?u:c,p=K(()=>g.value===d.value),_=T=>{a.emit("input",T),a.emit("update:modelValue",T),a.emit("change",T)},y=()=>{_(d.value)},w=()=>{_(h.value)};return[null,void 0,!1,0,"0","off"].indexOf(g.value)!==-1&&[h.value,d.value].indexOf(g.value)===-1&&w(),[!0,1,"1","on"].indexOf(g.value)!==-1&&[h.value,d.value].indexOf(g.value)===-1&&y(),{externalValue:g,checked:p,update:_,check:y,uncheck:w,handleInput:T=>{_(T.target.checked?d.value:h.value)},handleClick:()=>{f.value||(p.value?w():y())}}}(n,e),r=function(o,a,l){const{trueValue:c,falseValue:u,onLabel:h,offLabel:d}=xi(o),f=l.checked,g=l.update;return{label:K(()=>{let p=f.value?h.value:d.value;return p||(p="&nbsp;"),p}),toggle:()=>{g(f.value?u.value:c.value)},on:()=>{g(c.value)},off:()=>{g(u.value)}}}(n,0,{checked:t.checked,update:t.update}),i=function(o,a,l){const c=xi(o),u=c.disabled,h=l.checked,d=K(()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...c.classes.value}));return{classList:K(()=>({container:d.value.container,toggle:[d.value.toggle,u.value?h.value?d.value.toggleOnDisabled:d.value.toggleOffDisabled:h.value?d.value.toggleOn:d.value.toggleOff],handle:[d.value.handle,u.value?h.value?d.value.handleOnDisabled:d.value.handleOffDisabled:h.value?d.value.handleOn:d.value.handleOff],label:d.value.label}))}}(n,0,{checked:t.checked}),s=function(o,a,l){const{disabled:c}=xi(o),u=l.check,h=l.uncheck,d=l.checked;return{handleSpace:()=>{c.value||(d.value?h():u())}}}(n,0,{check:t.check,uncheck:t.uncheck,checked:t.checked});return{...t,...i,...r,...s}}};const BT=["tabindex","aria-checked","aria-describedby","aria-labelledby"],UT=["id","name","value","checked","disabled"],NT=["innerHTML"],HT=["checked"];Ka.render=function(n,e,t,r,i,s){return Q(),ie("div",ml({class:n.classList.container,tabindex:t.disabled?void 0:0,"aria-checked":n.checked,"aria-describedby":t.describedby,"aria-labelledby":t.labelledby,role:"switch"},t.aria,{onKeypress:e[1]||(e[1]=Pm(Yr((...o)=>n.handleSpace&&n.handleSpace(...o),["prevent"]),["space"]))}),[dn(I("input",{type:"checkbox",id:t.id,name:t.name,value:t.trueValue,checked:n.checked,disabled:t.disabled},null,8,UT),[[En,!1]]),I("div",{class:Pt(n.classList.toggle),onClick:e[0]||(e[0]=(...o)=>n.handleClick&&n.handleClick(...o))},[I("span",{class:Pt(n.classList.handle)},null,2),Wr(n.$slots,"label",{checked:n.checked,classList:n.classList},()=>[I("span",{class:Pt(n.classList.label),innerHTML:n.label},null,10,NT)]),t.required?(Q(),ie("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:n.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,HT)):yn("v-if",!0)],2)],16,BT)},Ka.__file="src/Toggle.vue";const WT=gt({__name:"AppRejectionToggle",props:{app:{},rejections:{}},emits:["input"],setup(n,{emit:e}){const t=n;K(()=>t.rejections.includes(t.app.AppName)?"is-reject":"is-capturing");const r=K(()=>!t.rejections.includes(t.app.AppName));function i(){r.value?o():s()}function s(){e("input",{app:t.app,state:"CAPTURING"})}function o(){e("input",{app:t.app,state:"REJECTING"})}return(a,l)=>(Q(),ir(et(Ka),{"model-value":r.value,"on-label":"Capture","off-label":"Ignore",onInput:i},null,8,["model-value"]))}});const YT={name:"numeric",computed:{},props:{value:{type:Number,required:!0},min:Number,max:Number},methods:{numberUp(){var n=this.value+1;this.numberChanged(n)},numberDown(){var n=this.value-1;this.numberChanged(n)},numberChanged(n){typeof n=="number"||(n=n.target.value),n>this.min&&n<this.max&&this.$emit("updated",n)},blurred(){this.$forceUpdate()}}},XT={class:"numeric-input-wrapper"},zT=["value"];function $T(n,e,t,r,i,s){const o=Xt("ico");return Q(),ie("div",XT,[I("input",{class:"numeric-input",value:t.value,onInput:e[0]||(e[0]=(...a)=>s.numberChanged&&s.numberChanged(...a)),onBlur:e[1]||(e[1]=(...a)=>s.blurred&&s.blurred(...a))},null,40,zT),I("button",{class:"number-btn number-up",onClick:e[2]||(e[2]=(...a)=>s.numberUp&&s.numberUp(...a))},[Se(o,{icon:"angle-up",size:"small"})]),I("button",{class:"number-btn number-down",onClick:e[3]||(e[3]=(...a)=>s.numberDown&&s.numberDown(...a))},[Se(o,{icon:"angle-down",size:"small"})])])}const GT=vl(YT,[["render",$T]]);function $e(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function Tr(n){return function e(t){return arguments.length===0||$e(t)?e:n.apply(this,arguments)}}function Mn(n){return function e(t,r){switch(arguments.length){case 0:return e;case 1:return $e(t)?e:Tr(function(i){return n(t,i)});default:return $e(t)&&$e(r)?e:$e(t)?Tr(function(i){return n(i,r)}):$e(r)?Tr(function(i){return n(t,i)}):n(t,r)}}}function qT(n){return function e(t,r,i){switch(arguments.length){case 0:return e;case 1:return $e(t)?e:Mn(function(s,o){return n(t,s,o)});case 2:return $e(t)&&$e(r)?e:$e(t)?Mn(function(s,o){return n(s,r,o)}):$e(r)?Mn(function(s,o){return n(t,s,o)}):Tr(function(s){return n(t,r,s)});default:return $e(t)&&$e(r)&&$e(i)?e:$e(t)&&$e(r)?Mn(function(s,o){return n(s,o,i)}):$e(t)&&$e(i)?Mn(function(s,o){return n(s,r,o)}):$e(r)&&$e(i)?Mn(function(s,o){return n(t,s,o)}):$e(t)?Tr(function(s){return n(s,r,i)}):$e(r)?Tr(function(s){return n(t,s,i)}):$e(i)?Tr(function(s){return n(t,r,s)}):n(t,r,i)}}}var KT=Tr(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function ZT(n){return new RegExp(n.source,n.flags?n.flags:(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":"")+(n.dotAll?"s":""))}function ag(n,e,t){if(t||(t=new JT),QT(n))return n;var r=function(s){var o=t.get(n);if(o)return o;t.set(n,s);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=e?ag(n[a],!0,t):n[a]);return s};switch(KT(n)){case"Object":return r(Object.create(Object.getPrototypeOf(n)));case"Array":return r([]);case"Date":return new Date(n.valueOf());case"RegExp":return ZT(n);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return n.slice();default:return n}}function QT(n){var e=typeof n;return n==null||e!="object"&&e!="function"}var JT=function(){function n(){this.map={},this.length=0}return n.prototype.set=function(e,t){const r=this.hash(e);let i=this.map[r];i||(this.map[r]=i=[]),i.push([e,t]),this.length+=1},n.prototype.hash=function(e){let t=[];for(var r in e)t.push(Object.prototype.toString.call(e[r]));return t.join()},n.prototype.get=function(e){if(this.length<=180){for(const i in this.map){const s=this.map[i];for(let o=0;o<s.length;o+=1){const a=s[o];if(a[0]===e)return a[1]}}return}const t=this.hash(e),r=this.map[t];if(r)for(let i=0;i<r.length;i+=1){const s=r[i];if(s[0]===e)return s[1]}},n}(),eD=Tr(function(e){return e!=null&&typeof e.clone=="function"?e.clone():ag(e,!0)});const uh=eD;var tD=qT(function(e,t,r){var i=Array.prototype.slice.call(r,0);return i.splice(e,t),i});const rD=tD,nD={class:"settings"},iD=I("div",{class:"title-bar"},[I("h4",{class:"title is-4 has-text-centered pt-1"},"Settings")],-1),sD={key:0,class:"settings-content"},oD={class:"form-field"},aD=I("label",null,"Retain Screenshots for Days",-1),lD={class:"form-field"},cD=I("label",null," Active application capture rejection ",-1),uD={class:"app-exclusions"},hD={class:"app-name"},dD={class:"app-toggle"},fD=gt({__name:"Settings",setup(n){const e=ni(),t=K(()=>!!e.appSettings),r=K(()=>{var l;return(l=e.appSettings)==null?void 0:l.Settings}),i=K(()=>{var l;return((l=e.appSettings)==null?void 0:l.Settings.Rejections)||[]}),s=K(()=>{var l;return(l=e.appSettings)==null?void 0:l.SettingsOptions});Er(()=>{e.loadSettings()});function o(l){if(r.value){let c=uh(e.appSettings.Settings);c.RetainForXDays=l}}function a({app:l,state:c}){if(console.log(l,c),r.value){let u=uh(e.appSettings.Settings);u.Rejections||(u.Rejections=[]);let h=u.Rejections.indexOf(l.AppName);console.log("appNameIndex",u.Rejections,l.AppName,h),c==="CAPTURING"?h>=0&&(u.Rejections=rD(h,1,u.Rejections)):h===-1&&u.Rejections.push(l.AppName),e.saveSettings(u)}}return(l,c)=>(Q(),ie("div",nD,[iD,t.value&&r.value&&s.value?(Q(),ie("div",sD,[I("div",oD,[aD,Se(GT,{min:6,max:91,value:r.value.RetainForXDays,onUpdated:o},null,8,["value"])]),I("div",lD,[cD,I("div",uD,[I("table",null,[(Q(!0),ie(Je,null,wn(s.value.CapturedApplications,u=>(Q(),ie("tr",{class:"",key:u.AppName},[I("td",hD,vt(u.AppName),1),I("td",dD,[Se(WT,{app:u,rejections:i.value,onInput:a},null,8,["app","rejections"])])]))),128))])])])])):yn("",!0)]))}});zr.baseURL="http://localhost:5020";const Bo=Am(cb),gD=[{path:"/",component:PT},{path:"/summary",component:AT},{path:"/about",component:VT},{path:"/settings",component:fD}],pD=d1({history:kb(),routes:gD}),mD=B_();Bo.use(pD);Bo.use(mD);Bo.component("ico",j_);Bo.mount("#app");
